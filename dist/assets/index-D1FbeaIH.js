(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();function rf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function vb(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var s=i.default;if(typeof s=="function"){var n=function l(){var c=!1;try{c=this instanceof l}catch{}return c?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(l){var c=Object.getOwnPropertyDescriptor(i,l);Object.defineProperty(n,l,c.get?c:{enumerable:!0,get:function(){return i[l]}})}),n}var bh={exports:{}},So={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function yb(){if(mg)return So;mg=1;var i=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(l,c,d){var h=null;if(d!==void 0&&(h=""+d),c.key!==void 0&&(h=""+c.key),"key"in c){d={};for(var g in c)g!=="key"&&(d[g]=c[g])}else d=c;return c=d.ref,{$$typeof:i,type:l,key:h,ref:c!==void 0?c:null,props:d}}return So.Fragment=s,So.jsx=n,So.jsxs=n,So}var gg;function wb(){return gg||(gg=1,bh.exports=yb()),bh.exports}var t=wb(),vh={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function jb(){if(xg)return ke;xg=1;var i=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function S(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function M(_,F,ne){this.props=_,this.context=F,this.refs=O,this.updater=ne||C}M.prototype.isReactComponent={},M.prototype.setState=function(_,F){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,F,"setState")},M.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function T(){}T.prototype=M.prototype;function B(_,F,ne){this.props=_,this.context=F,this.refs=O,this.updater=ne||C}var K=B.prototype=new T;K.constructor=B,R(K,M.prototype),K.isPureReactComponent=!0;var X=Array.isArray;function ee(){}var re={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function z(_,F,ne){var se=ne.ref;return{$$typeof:i,type:_,key:F,ref:se!==void 0?se:null,props:ne}}function E(_,F){return z(_.type,F,_.props)}function A(_){return typeof _=="object"&&_!==null&&_.$$typeof===i}function P(_){var F={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ne){return F[ne]})}var V=/\/+/g;function J(_,F){return typeof _=="object"&&_!==null&&_.key!=null?P(""+_.key):F.toString(36)}function ie(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(ee,ee):(_.status="pending",_.then(function(F){_.status==="pending"&&(_.status="fulfilled",_.value=F)},function(F){_.status==="pending"&&(_.status="rejected",_.reason=F)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function k(_,F,ne,se,he){var fe=typeof _;(fe==="undefined"||fe==="boolean")&&(_=null);var be=!1;if(_===null)be=!0;else switch(fe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(_.$$typeof){case i:case s:be=!0;break;case b:return be=_._init,k(be(_._payload),F,ne,se,he)}}if(be)return he=he(_),be=se===""?"."+J(_,0):se,X(he)?(ne="",be!=null&&(ne=be.replace(V,"$&/")+"/"),k(he,F,ne,"",function(Ee){return Ee})):he!=null&&(A(he)&&(he=E(he,ne+(he.key==null||_&&_.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+be)),F.push(he)),1;be=0;var ae=se===""?".":se+":";if(X(_))for(var ge=0;ge<_.length;ge++)se=_[ge],fe=ae+J(se,ge),be+=k(se,F,ne,fe,he);else if(ge=S(_),typeof ge=="function")for(_=ge.call(_),ge=0;!(se=_.next()).done;)se=se.value,fe=ae+J(se,ge++),be+=k(se,F,ne,fe,he);else if(fe==="object"){if(typeof _.then=="function")return k(ie(_),F,ne,se,he);throw F=String(_),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return be}function G(_,F,ne){if(_==null)return _;var se=[],he=0;return k(_,se,"","",function(fe){return F.call(ne,fe,he++)}),se}function I(_){if(_._status===-1){var F=_._result;F=F(),F.then(function(ne){(_._status===0||_._status===-1)&&(_._status=1,_._result=ne)},function(ne){(_._status===0||_._status===-1)&&(_._status=2,_._result=ne)}),_._status===-1&&(_._status=0,_._result=F)}if(_._status===1)return _._result.default;throw _._result}var oe=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},xe={map:G,forEach:function(_,F,ne){G(_,function(){F.apply(this,arguments)},ne)},count:function(_){var F=0;return G(_,function(){F++}),F},toArray:function(_){return G(_,function(F){return F})||[]},only:function(_){if(!A(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return ke.Activity=y,ke.Children=xe,ke.Component=M,ke.Fragment=n,ke.Profiler=c,ke.PureComponent=B,ke.StrictMode=l,ke.Suspense=x,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,ke.__COMPILER_RUNTIME={__proto__:null,c:function(_){return re.H.useMemoCache(_)}},ke.cache=function(_){return function(){return _.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(_,F,ne){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var se=R({},_.props),he=_.key;if(F!=null)for(fe in F.key!==void 0&&(he=""+F.key),F)!q.call(F,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&F.ref===void 0||(se[fe]=F[fe]);var fe=arguments.length-2;if(fe===1)se.children=ne;else if(1<fe){for(var be=Array(fe),ae=0;ae<fe;ae++)be[ae]=arguments[ae+2];se.children=be}return z(_.type,he,se)},ke.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},ke.createElement=function(_,F,ne){var se,he={},fe=null;if(F!=null)for(se in F.key!==void 0&&(fe=""+F.key),F)q.call(F,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=F[se]);var be=arguments.length-2;if(be===1)he.children=ne;else if(1<be){for(var ae=Array(be),ge=0;ge<be;ge++)ae[ge]=arguments[ge+2];he.children=ae}if(_&&_.defaultProps)for(se in be=_.defaultProps,be)he[se]===void 0&&(he[se]=be[se]);return z(_,fe,he)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(_){return{$$typeof:g,render:_}},ke.isValidElement=A,ke.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:I}},ke.memo=function(_,F){return{$$typeof:p,type:_,compare:F===void 0?null:F}},ke.startTransition=function(_){var F=re.T,ne={};re.T=ne;try{var se=_(),he=re.S;he!==null&&he(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ee,oe)}catch(fe){oe(fe)}finally{F!==null&&ne.types!==null&&(F.types=ne.types),re.T=F}},ke.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},ke.use=function(_){return re.H.use(_)},ke.useActionState=function(_,F,ne){return re.H.useActionState(_,F,ne)},ke.useCallback=function(_,F){return re.H.useCallback(_,F)},ke.useContext=function(_){return re.H.useContext(_)},ke.useDebugValue=function(){},ke.useDeferredValue=function(_,F){return re.H.useDeferredValue(_,F)},ke.useEffect=function(_,F){return re.H.useEffect(_,F)},ke.useEffectEvent=function(_){return re.H.useEffectEvent(_)},ke.useId=function(){return re.H.useId()},ke.useImperativeHandle=function(_,F,ne){return re.H.useImperativeHandle(_,F,ne)},ke.useInsertionEffect=function(_,F){return re.H.useInsertionEffect(_,F)},ke.useLayoutEffect=function(_,F){return re.H.useLayoutEffect(_,F)},ke.useMemo=function(_,F){return re.H.useMemo(_,F)},ke.useOptimistic=function(_,F){return re.H.useOptimistic(_,F)},ke.useReducer=function(_,F,ne){return re.H.useReducer(_,F,ne)},ke.useRef=function(_){return re.H.useRef(_)},ke.useState=function(_){return re.H.useState(_)},ke.useSyncExternalStore=function(_,F,ne){return re.H.useSyncExternalStore(_,F,ne)},ke.useTransition=function(){return re.H.useTransition()},ke.version="19.2.0",ke}var pg;function sf(){return pg||(pg=1,vh.exports=jb()),vh.exports}var m=sf();const Ps=rf(m);var yh={exports:{}},_o={},wh={exports:{}},jh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function Nb(){return bg||(bg=1,(function(i){function s(k,G){var I=k.length;k.push(G);e:for(;0<I;){var oe=I-1>>>1,xe=k[oe];if(0<c(xe,G))k[oe]=G,k[I]=xe,I=oe;else break e}}function n(k){return k.length===0?null:k[0]}function l(k){if(k.length===0)return null;var G=k[0],I=k.pop();if(I!==G){k[0]=I;e:for(var oe=0,xe=k.length,_=xe>>>1;oe<_;){var F=2*(oe+1)-1,ne=k[F],se=F+1,he=k[se];if(0>c(ne,I))se<xe&&0>c(he,ne)?(k[oe]=he,k[se]=I,oe=se):(k[oe]=ne,k[F]=I,oe=F);else if(se<xe&&0>c(he,I))k[oe]=he,k[se]=I,oe=se;else break e}}return G}function c(k,G){var I=k.sortIndex-G.sortIndex;return I!==0?I:k.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();i.unstable_now=function(){return h.now()-g}}var x=[],p=[],b=1,y=null,w=3,S=!1,C=!1,R=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function K(k){for(var G=n(p);G!==null;){if(G.callback===null)l(p);else if(G.startTime<=k)l(p),G.sortIndex=G.expirationTime,s(x,G);else break;G=n(p)}}function X(k){if(R=!1,K(k),!C)if(n(x)!==null)C=!0,ee||(ee=!0,P());else{var G=n(p);G!==null&&ie(X,G.startTime-k)}}var ee=!1,re=-1,q=5,z=-1;function E(){return O?!0:!(i.unstable_now()-z<q)}function A(){if(O=!1,ee){var k=i.unstable_now();z=k;var G=!0;try{e:{C=!1,R&&(R=!1,T(re),re=-1),S=!0;var I=w;try{t:{for(K(k),y=n(x);y!==null&&!(y.expirationTime>k&&E());){var oe=y.callback;if(typeof oe=="function"){y.callback=null,w=y.priorityLevel;var xe=oe(y.expirationTime<=k);if(k=i.unstable_now(),typeof xe=="function"){y.callback=xe,K(k),G=!0;break t}y===n(x)&&l(x),K(k)}else l(x);y=n(x)}if(y!==null)G=!0;else{var _=n(p);_!==null&&ie(X,_.startTime-k),G=!1}}break e}finally{y=null,w=I,S=!1}G=void 0}}finally{G?P():ee=!1}}}var P;if(typeof B=="function")P=function(){B(A)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=A,P=function(){J.postMessage(null)}}else P=function(){M(A,0)};function ie(k,G){re=M(function(){k(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(k){switch(w){case 1:case 2:case 3:var G=3;break;default:G=w}var I=w;w=G;try{return k()}finally{w=I}},i.unstable_requestPaint=function(){O=!0},i.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var I=w;w=k;try{return G()}finally{w=I}},i.unstable_scheduleCallback=function(k,G,I){var oe=i.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?oe+I:oe):I=oe,k){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=I+xe,k={id:b++,callback:G,priorityLevel:k,startTime:I,expirationTime:xe,sortIndex:-1},I>oe?(k.sortIndex=I,s(p,k),n(x)===null&&k===n(p)&&(R?(T(re),re=-1):R=!0,ie(X,I-oe))):(k.sortIndex=xe,s(x,k),C||S||(C=!0,ee||(ee=!0,P()))),k},i.unstable_shouldYield=E,i.unstable_wrapCallback=function(k){var G=w;return function(){var I=w;w=G;try{return k.apply(this,arguments)}finally{w=I}}}})(jh)),jh}var vg;function Sb(){return vg||(vg=1,wh.exports=Nb()),wh.exports}var Nh={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function _b(){if(yg)return Yt;yg=1;var i=sf();function s(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(x,p,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:x,containerInfo:p,implementation:b}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Yt.createPortal=function(x,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return d(x,p,null,b)},Yt.flushSync=function(x){var p=h.T,b=l.p;try{if(h.T=null,l.p=2,x)return x()}finally{h.T=p,l.p=b,l.d.f()}},Yt.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(x,p))},Yt.prefetchDNS=function(x){typeof x=="string"&&l.d.D(x)},Yt.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var b=p.as,y=g(b,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:S}):b==="script"&&l.d.X(x,{crossOrigin:y,integrity:w,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yt.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);l.d.M(x,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(x)},Yt.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,y=g(b,p.crossOrigin);l.d.L(x,b,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yt.preloadModule=function(x,p){if(typeof x=="string")if(p){var b=g(p.as,p.crossOrigin);l.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(x)},Yt.requestFormReset=function(x){l.d.r(x)},Yt.unstable_batchedUpdates=function(x,p){return x(p)},Yt.useFormState=function(x,p,b){return h.H.useFormState(x,p,b)},Yt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Yt.version="19.2.0",Yt}var wg;function Cb(){if(wg)return Nh.exports;wg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(s){console.error(s)}}return i(),Nh.exports=_b(),Nh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function Eb(){if(jg)return _o;jg=1;var i=Sb(),s=sf(),n=Cb();function l(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function h(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function g(e){if(e.tag===31){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function x(e){if(d(e)!==e)throw Error(l(188))}function p(e){var r=e.alternate;if(!r){if(r=d(e),r===null)throw Error(l(188));return r!==e?null:e}for(var a=e,o=r;;){var u=a.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){a=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===a)return x(u),e;if(f===o)return x(u),r;f=f.sibling}throw Error(l(188))}if(a.return!==o.return)a=u,o=f;else{for(var v=!1,N=u.child;N;){if(N===a){v=!0,a=u,o=f;break}if(N===o){v=!0,o=u,a=f;break}N=N.sibling}if(!v){for(N=f.child;N;){if(N===a){v=!0,a=f,o=u;break}if(N===o){v=!0,o=f,a=u;break}N=N.sibling}if(!v)throw Error(l(189))}}if(a.alternate!==o)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:r}function b(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=b(e),r!==null)return r;e=e.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),B=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var V=Symbol.for("react.client.reference");function J(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===V?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case M:return"Profiler";case O:return"StrictMode";case X:return"Suspense";case ee:return"SuspenseList";case z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case B:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case K:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return r=e.displayName||null,r!==null?r:J(e.type)||"Memo";case q:r=e._payload,e=e._init;try{return J(e(r))}catch{}}return null}var ie=Array.isArray,k=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},oe=[],xe=-1;function _(e){return{current:e}}function F(e){0>xe||(e.current=oe[xe],oe[xe]=null,xe--)}function ne(e,r){xe++,oe[xe]=e.current,e.current=r}var se=_(null),he=_(null),fe=_(null),be=_(null);function ae(e,r){switch(ne(fe,r),ne(he,e),ne(se,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?U0(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=U0(r),e=B0(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(se),ne(se,e)}function ge(){F(se),F(he),F(fe)}function Ee(e){e.memoizedState!==null&&ne(be,e);var r=se.current,a=B0(r,e.type);r!==a&&(ne(he,e),ne(se,a))}function Me(e){he.current===e&&(F(se),F(he)),be.current===e&&(F(be),yo._currentValue=I)}var $e,Re;function Pe(e){if($e===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);$e=r&&r[1]||"",Re=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+e+Re}var Fe=!1;function gr(e,r){if(!e||Fe)return"";Fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(r){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(te){var Z=te}Reflect.construct(e,[],ue)}else{try{ue.call()}catch(te){Z=te}e.call(ue.prototype)}}else{try{throw Error()}catch(te){Z=te}(ue=e())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],N=f[1];if(v&&N){var L=v.split(`
`),W=N.split(`
`);for(u=o=0;o<L.length&&!L[o].includes("DetermineComponentFrameRoot");)o++;for(;u<W.length&&!W[u].includes("DetermineComponentFrameRoot");)u++;if(o===L.length||u===W.length)for(o=L.length-1,u=W.length-1;1<=o&&0<=u&&L[o]!==W[u];)u--;for(;1<=o&&0<=u;o--,u--)if(L[o]!==W[u]){if(o!==1||u!==1)do if(o--,u--,0>u||L[o]!==W[u]){var le=`
`+L[o].replace(" at new "," at ");return e.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",e.displayName)),le}while(1<=o&&0<=u);break}}}finally{Fe=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Pe(a):""}function ps(e,r){switch(e.tag){case 26:case 27:case 5:return Pe(e.type);case 16:return Pe("Lazy");case 13:return e.child!==r&&r!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return gr(e.type,!1);case 11:return gr(e.type.render,!1);case 1:return gr(e.type,!0);case 31:return Pe("Activity");default:return""}}function Wr(e){try{var r="",a=null;do r+=ps(e,a),a=e,e=e.return;while(e);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var al=Object.prototype.hasOwnProperty,Ot=i.unstable_scheduleCallback,et=i.unstable_cancelCallback,xn=i.unstable_shouldYield,yf=i.unstable_requestPaint,rr=i.unstable_now,Ho=i.unstable_getCurrentPriorityLevel,gi=i.unstable_ImmediatePriority,qo=i.unstable_UserBlockingPriority,nl=i.unstable_NormalPriority,_d=i.unstable_LowPriority,Go=i.unstable_IdlePriority,Cd=i.log,Ed=i.unstable_setDisableYieldValue,pn=null,Pt=null;function $t(e){if(typeof Cd=="function"&&Ed(e),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(pn,e)}catch{}}var Mt=Math.clz32?Math.clz32:yt,xi=Math.log,ll=Math.LN2;function yt(e){return e>>>=0,e===0?32:31-(xi(e)/ll|0)|0}var Hs=256,bn=262144,vn=4194304;function qs(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bs(e,r,a){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var N=o&134217727;return N!==0?(o=N&~f,o!==0?u=qs(o):(v&=N,v!==0?u=qs(v):a||(a=N&~e,a!==0&&(u=qs(a))))):(N=o&~f,N!==0?u=qs(N):v!==0?u=qs(v):a||(a=o&~e,a!==0&&(u=qs(a)))),u===0?0:r!==0&&r!==u&&(r&f)===0&&(f=u&-u,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:u}function xr(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function yn(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fo(){var e=vn;return vn<<=1,(vn&62914560)===0&&(vn=4194304),e}function _a(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Gs(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function il(e,r,a,o,u,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var N=e.entanglements,L=e.expirationTimes,W=e.hiddenUpdates;for(a=v&~a;0<a;){var le=31-Mt(a),ue=1<<le;N[le]=0,L[le]=-1;var Z=W[le];if(Z!==null)for(W[le]=null,le=0;le<Z.length;le++){var te=Z[le];te!==null&&(te.lane&=-536870913)}a&=~ue}o!==0&&pi(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~r))}function pi(e,r,a){e.pendingLanes|=r,e.suspendedLanes&=~r;var o=31-Mt(r);e.entangledLanes|=r,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function bi(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var o=31-Mt(a),u=1<<o;u&r|e[o]&r&&(e[o]|=r),a&=~u}}function vi(e,r){var a=r&-r;return a=(a&42)!==0?1:Ca(a),(a&(e.suspendedLanes|r))!==0?0:a}function Ca(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function yi(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:ig(e.type))}function wi(e,r){var a=G.p;try{return G.p=e,r()}finally{G.p=a}}var Or=Math.random().toString(36).slice(2),qe="__reactFiber$"+Or,kt="__reactProps$"+Or,Ea="__reactContainer$"+Or,ji="__reactEvents$"+Or,wf="__reactListeners$"+Or,Vo="__reactHandles$"+Or,Ad="__reactResources$"+Or,vs="__reactMarker$"+Or;function Wo(e){delete e[qe],delete e[kt],delete e[ji],delete e[wf],delete e[Vo]}function Fs(e){var r=e[qe];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Ea]||a[qe]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=F0(e);e!==null;){if(a=e[qe])return a;e=F0(e)}return r}e=a,a=e.parentNode}return null}function wn(e){if(e=e[qe]||e[Ea]){var r=e.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return e}return null}function Aa(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(l(33))}function jn(e){var r=e[Ad];return r||(r=e[Ad]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ht(e){e[vs]=!0}var kd=new Set,ol={};function Wt(e,r){Kr(e,r),Kr(e+"Capture",r)}function Kr(e,r){for(ol[e]=r,e=0;e<r.length;e++)kd.add(r[e])}var Td=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nn={},Ni={};function Rd(e){return al.call(Ni,e)?!0:al.call(Nn,e)?!1:Td.test(e)?Ni[e]=!0:(Nn[e]=!0,!1)}function Sn(e,r,a){if(Rd(r))if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var o=r.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+a)}}function ka(e,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+a)}}function pr(e,r,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(r,a,""+o)}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ys(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Si(e,r,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return u.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Zr(e){if(!e._valueTracker){var r=ys(e)?"checked":"value";e._valueTracker=Si(e,r,""+e[r])}}function cl(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),o="";return e&&(o=ys(e)?e.checked?"true":"false":e.value),e=o,e!==a?(r.setValue(e),!0):!1}function ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _i=/[\n"\\]/g;function Kt(e){return e.replace(_i,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function dl(e,r,a,o,u,f,v,N){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),r!=null?v==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+It(r)):e.value!==""+It(r)&&(e.value=""+It(r)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),r!=null?Ta(e,v,It(r)):a!=null?Ta(e,v,It(a)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+It(N):e.removeAttribute("name")}function Ys(e,r,a,o,u,f,v,N){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){Zr(e);return}a=a!=null?""+It(a):"",r=r!=null?""+It(r):a,N||r===e.value||(e.value=r),e.defaultValue=r}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=N?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Zr(e)}function Ta(e,r,a){r==="number"&&ws(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ra(e,r,a,o){if(e=e.options,r){r={};for(var u=0;u<a.length;u++)r["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=r.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&o&&(e[a].defaultSelected=!0)}else{for(a=""+It(a),r=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}r!==null||e[u].disabled||(r=e[u])}r!==null&&(r.selected=!0)}}function ul(e,r,a){if(r!=null&&(r=""+It(r),r!==e.value&&(e.value=r),a==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=a!=null?""+It(a):""}function Ko(e,r,a,o){if(r==null){if(o!=null){if(a!=null)throw Error(l(92));if(ie(o)){if(1<o.length)throw Error(l(93));o=o[0]}a=o}a==null&&(a=""),r=a}a=It(r),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Zr(e)}function Mr(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hl(e,r,a){var o=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":o?e.setProperty(r,a):typeof a!="number"||a===0||Zo.has(r)?r==="float"?e.cssFloat=a:e[r]=(""+a).trim():e[r]=a+"px"}function Dd(e,r,a){if(r!=null&&typeof r!="object")throw Error(l(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||r!=null&&r.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in r)o=r[u],r.hasOwnProperty(u)&&a[u]!==o&&hl(e,u,o)}else for(var f in r)r.hasOwnProperty(f)&&hl(e,f,r[f])}function _n(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Od=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(e){return fl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function br(){}var Vs=null;function Da(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vr=null,js=null;function Jo(e){var r=wn(e);if(r&&(e=r.stateNode)){var a=e[kt]||null;e:switch(e=r.stateNode,r.type){case"input":if(dl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Kt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var o=a[r];if(o!==e&&o.form===e.form){var u=o[kt]||null;if(!u)throw Error(l(90));dl(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(r=0;r<a.length;r++)o=a[r],o.form===e.form&&cl(o)}break e;case"textarea":ul(e,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ra(e,!!a.multiple,r,!1)}}}var Cn=!1;function gl(e,r,a){if(Cn)return e(r,a);Cn=!0;try{var o=e(r);return o}finally{if(Cn=!1,(vr!==null||js!==null)&&(Bc(),vr&&(r=vr,e=js,js=vr=null,Jo(r),e)))for(r=0;r<e.length;r++)Jo(e[r])}}function Ws(e,r){var a=e.stateNode;if(a===null)return null;var o=a[kt]||null;if(o===null)return null;a=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,r,typeof a));return a}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=!1;if(Jr)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Ks=!1}var yr=null,Qo=null,Oa=null;function Md(){if(Oa)return Oa;var e,r=Qo,a=r.length,o,u="value"in yr?yr.value:yr.textContent,f=u.length;for(e=0;e<a&&r[e]===u[e];e++);var v=a-e;for(o=1;o<=v&&r[a-o]===u[f-o];o++);return Oa=u.slice(e,1<o?1-o:void 0)}function xl(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ci(){return!0}function Xo(){return!1}function Zt(e){function r(a,o,u,f,v){this._reactName=a,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(a=e[N],this[N]=a?a(f):f[N]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ci:Xo,this.isPropagationStopped=Xo,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),r}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Zt(Js),En=y({},Js,{view:0,detail:0}),zd=Zt(En),Ai,ki,Qs,pl=y({},En,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qs&&(Qs&&e.type==="mousemove"?(Ai=e.screenX-Qs.screenX,ki=e.screenY-Qs.screenY):ki=Ai=0,Qs=e),Ai)},movementY:function(e){return"movementY"in e?e.movementY:ki}}),Ma=Zt(pl),Ld=y({},pl,{dataTransfer:0}),Ti=Zt(Ld),jf=y({},En,{relatedTarget:0}),Ri=Zt(jf),_t=y({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),bl=Zt(_t),Qr=y({},Js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Di=Zt(Qr),Nf=y({},Js,{data:0}),vl=Zt(Nf),sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wl(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=za[e])?!!r[e]:!1}function Oi(){return wl}var jl=y({},En,{key:function(e){if(e.key){var r=sr[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=xl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oi,charCode:function(e){return e.type==="keypress"?xl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ec=Zt(jl),An=y({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mi=Zt(An),tc=y({},En,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oi}),Ns=Zt(tc),rc=y({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sf=Zt(rc),Ud=y({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_f=Zt(Ud),Cf=y({},Js,{newState:0,oldState:0}),Ef=Zt(Cf),Bd=[9,13,27,32],sc=Jr&&"CompositionEvent"in window,kn=null;Jr&&"documentMode"in document&&(kn=document.documentMode);var Af=Jr&&"TextEvent"in window&&!kn,Pd=Jr&&(!sc||kn&&8<kn&&11>=kn),La=" ",Nl=!1;function Ua(e,r){switch(e){case"keyup":return Bd.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tn=!1;function zi(e,r){switch(e){case"compositionend":return Ba(r);case"keypress":return r.which!==32?null:(Nl=!0,La);case"textInput":return e=r.data,e===La&&Nl?null:e;default:return null}}function kf(e,r){if(Tn)return e==="compositionend"||!sc&&Ua(e,r)?(e=Md(),Oa=Qo=yr=null,Tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pd&&r.locale!=="ko"?null:r.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Tf[e.type]:r==="textarea"}function Sl(e,r,a,o){vr?js?js.push(o):js=[o]:vr=o,r=Fc(r,"onChange"),0<r.length&&(a=new Ei("onChange","change",null,a,o),e.push({event:a,listeners:r}))}var _l=null,Ss=null;function Rf(e){R0(e,0)}function Li(e){var r=Aa(e);if(cl(r))return e}function Id(e,r){if(e==="change")return r}var Hd=!1;if(Jr){var ac;if(Jr){var nc="oninput"in document;if(!nc){var qd=document.createElement("div");qd.setAttribute("oninput","return;"),nc=typeof qd.oninput=="function"}ac=nc}else ac=!1;Hd=ac&&(!document.documentMode||9<document.documentMode)}function Gd(){_l&&(_l.detachEvent("onpropertychange",Fd),Ss=_l=null)}function Fd(e){if(e.propertyName==="value"&&Li(Ss)){var r=[];Sl(r,Ss,e,Da(e)),gl(Rf,r)}}function Yd(e,r,a){e==="focusin"?(Gd(),_l=r,Ss=a,_l.attachEvent("onpropertychange",Fd)):e==="focusout"&&Gd()}function Df(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Li(Ss)}function lc(e,r){if(e==="click")return Li(r)}function Of(e,r){if(e==="input"||e==="change")return Li(r)}function Ui(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ar=typeof Object.is=="function"?Object.is:Ui;function Xs(e,r){if(ar(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),o=Object.keys(r);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var u=a[o];if(!al.call(r,u)||!ar(e[u],r[u]))return!1}return!0}function Vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cl(e,r){var a=Vd(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=r&&o>=r)return{node:a,offset:r-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vd(a)}}function Wd(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Wd(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Kd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=ws(e.document);r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=ws(e.document)}return r}function ic(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Bi=Jr&&"documentMode"in document&&11>=document.documentMode,Rn=null,oc=null,El=null,cc=!1;function Al(e,r,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cc||Rn==null||Rn!==ws(o)||(o=Rn,"selectionStart"in o&&ic(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),El&&Xs(El,o)||(El=o,o=Fc(oc,"onSelect"),0<o.length&&(r=new Ei("onSelect","select",null,r,a),e.push({event:r,listeners:o}),r.target=Rn)))}function wr(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var Ht={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionrun:wr("Transition","TransitionRun"),transitionstart:wr("Transition","TransitionStart"),transitioncancel:wr("Transition","TransitionCancel"),transitionend:wr("Transition","TransitionEnd")},Xr={},Dn={};Jr&&(Dn=document.createElement("div").style,"AnimationEvent"in window||(delete Ht.animationend.animation,delete Ht.animationiteration.animation,delete Ht.animationstart.animation),"TransitionEvent"in window||delete Ht.transitionend.transition);function jr(e){if(Xr[e])return Xr[e];if(!Ht[e])return e;var r=Ht[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dn)return Xr[e]=r[a];return e}var Pi=jr("animationend"),Pa=jr("animationiteration"),Zd=jr("animationstart"),$i=jr("transitionrun"),Mf=jr("transitionstart"),Ii=jr("transitioncancel"),Jd=jr("transitionend"),Qd=new Map,dc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dc.push("scrollEnd");function zr(e,r){Qd.set(e,r),Wt(r,[e])}var Hi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],On=0,$a=0;function qi(){for(var e=On,r=$a=On=0;r<e;){var a=Jt[r];Jt[r++]=null;var o=Jt[r];Jt[r++]=null;var u=Jt[r];Jt[r++]=null;var f=Jt[r];if(Jt[r++]=null,o!==null&&u!==null){var v=o.pending;v===null?u.next=u:(u.next=v.next,v.next=u),o.pending=u}f!==0&&Xd(a,u,f)}}function Mn(e,r,a,o){Jt[On++]=e,Jt[On++]=r,Jt[On++]=a,Jt[On++]=o,$a|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function _s(e,r,a,o){return Mn(e,r,a,o),zn(e)}function Lr(e,r){return Mn(e,null,null,r),zn(e)}function Xd(e,r,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var u=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&r!==null&&(u=31-Mt(a),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[r]:o.push(r),r.lane=a|536870912),f):null}function zn(e){if(50<fo)throw fo=0,Hu=null,Error(l(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var st={};function Ia(e,r,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,r,a,o){return new Ia(e,r,a,o)}function Ha(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cs(e,r){var a=e.alternate;return a===null?(a=qt(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ln(e,r){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,r=a.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Un(e,r,a,o,u,f){var v=0;if(o=e,typeof e=="function")Ha(e)&&(v=1);else if(typeof e=="string")v=ib(e,a,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case z:return e=qt(31,a,r,u),e.elementType=z,e.lanes=f,e;case R:return Nr(a.children,u,f,r);case O:v=8,u|=24;break;case M:return e=qt(12,a,r,u|2),e.elementType=M,e.lanes=f,e;case X:return e=qt(13,a,r,u),e.elementType=X,e.lanes=f,e;case ee:return e=qt(19,a,r,u),e.elementType=ee,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:v=10;break e;case T:v=9;break e;case K:v=11;break e;case re:v=14;break e;case q:v=16,o=null;break e}v=29,a=Error(l(130,e===null?"null":typeof e,"")),o=null}return r=qt(v,a,r,u),r.elementType=e,r.type=o,r.lanes=f,r}function Nr(e,r,a,o){return e=qt(7,e,o,r),e.lanes=a,e}function pe(e,r,a){return e=qt(6,e,null,r),e.lanes=a,e}function kl(e){var r=qt(18,null,null,0);return r.stateNode=e,r}function uc(e,r,a){return r=qt(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var Gi=new WeakMap;function Tt(e,r){if(typeof e=="object"&&e!==null){var a=Gi.get(e);return a!==void 0?a:(r={value:e,source:r,stack:Wr(r)},Gi.set(e,r),r)}return{value:e,source:r,stack:Wr(r)}}var Sr=[],es=0,Tl=null,qa=0,Gt=[],nr=0,_r=null,nt=1,Cr="";function Es(e,r){Sr[es++]=qa,Sr[es++]=Tl,Tl=e,qa=r}function hc(e,r,a){Gt[nr++]=nt,Gt[nr++]=Cr,Gt[nr++]=_r,_r=e;var o=nt;e=Cr;var u=32-Mt(o)-1;o&=~(1<<u),a+=1;var f=32-Mt(r)+u;if(30<f){var v=u-u%5;f=(o&(1<<v)-1).toString(32),o>>=v,u-=v,nt=1<<32-Mt(r)+u|a<<u|o,Cr=f+e}else nt=1<<f|a<<u|o,Cr=e}function Fi(e){e.return!==null&&(Es(e,1),hc(e,1,0))}function Yi(e){for(;e===Tl;)Tl=Sr[--es],Sr[es]=null,qa=Sr[--es],Sr[es]=null;for(;e===_r;)_r=Gt[--nr],Gt[nr]=null,Cr=Gt[--nr],Gt[nr]=null,nt=Gt[--nr],Gt[nr]=null}function eu(e,r){Gt[nr++]=nt,Gt[nr++]=Cr,Gt[nr++]=_r,nt=r.id,Cr=r.overflow,_r=e}var Ct=null,Je=null,Oe=!1,ts=null,Ft=!1,Ur=Error(l(519));function As(e){var r=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(Tt(r,e)),Ur}function ks(e){var r=e.stateNode,a=e.type,o=e.memoizedProps;switch(r[qe]=e,r[kt]=o,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<go.length;a++)Le(go[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Ys(r,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ko(r,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||o.suppressHydrationWarning===!0||z0(r.textContent,a)?(o.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),o.onScroll!=null&&Le("scroll",r),o.onScrollEnd!=null&&Le("scrollend",r),o.onClick!=null&&(r.onclick=br),r=!0):r=!1,r||As(e,!0)}function fc(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:Ft=!1;return;case 27:case 3:Ft=!0;return;default:Ct=Ct.return}}function ea(e){if(e!==Ct)return!1;if(!Oe)return fc(e),Oe=!0,!1;var r=e.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||sh(e.type,e.memoizedProps)),a=!a),a&&Je&&As(e),fc(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Je=G0(e)}else if(r===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Je=G0(e)}else r===27?(r=Je,sn(e.type)?(e=oh,oh=null,Je=e):Je=r):Je=Ct?Gr(e.stateNode.nextSibling):null;return!0}function ta(){Je=Ct=null,Oe=!1}function mc(){var e=ts;return e!==null&&(hr===null?hr=e:hr.push.apply(hr,e),ts=null),e}function Rl(e){ts===null?ts=[e]:ts.push(e)}var gc=_(null),Ts=null,Rs=null;function rs(e,r,a){ne(gc,r._currentValue),r._currentValue=a}function ss(e){e._currentValue=gc.current,F(gc)}function ra(e,r,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),e===a)break;e=e.return}}function Bn(e,r,a,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var N=f;f=u;for(var L=0;L<r.length;L++)if(N.context===r[L]){f.lanes|=a,N=f.alternate,N!==null&&(N.lanes|=a),ra(f.return,a,e),o||(v=null);break e}f=N.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(l(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),ra(v,a,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function lr(e,r,a,o){e=null;for(var u=r,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var N=u.type;ar(u.pendingProps.value,v.value)||(e!==null?e.push(N):e=[N])}}else if(u===be.current){if(v=u.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(yo):e=[yo])}u=u.return}e!==null&&Bn(r,e,a,o),r.flags|=262144}function it(e){for(e=e.firstContext;e!==null;){if(!ar(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function tt(e){Ts=e,Rs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ft(e){return xc(Ts,e)}function Ye(e,r){return Ts===null&&tt(e),xc(e,r)}function xc(e,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Rs===null){if(e===null)throw Error(l(308));Rs=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else Rs=Rs.next=r;return a}var tu=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){r.aborted=!0,e.forEach(function(a){return a()})}},Br=i.unstable_scheduleCallback,Pr=i.unstable_NormalPriority,mt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vi(){return{controller:new tu,data:new Map,refCount:0}}function Pn(e){e.refCount--,e.refCount===0&&Br(Pr,function(){e.controller.abort()})}var as=null,Dl=0,Ga=0,zt=null;function Ae(e,r){if(as===null){var a=as=[];Dl=0,Ga=Wu(),zt={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Dl++,r.then(Qt,Qt),r}function Qt(){if(--Dl===0&&as!==null){zt!==null&&(zt.status="fulfilled");var e=as;as=null,Ga=0,zt=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function ru(e,r){var a=[],o={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){o.status="fulfilled",o.value=r;for(var u=0;u<a.length;u++)(0,a[u])(r)},function(u){for(o.status="rejected",o.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),o}var ns=k.S;k.S=function(e,r){n0=rr(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ae(e,r),ns!==null&&ns(e,r)};var Ce=_(null);function ls(){var e=Ce.current;return e!==null?e:Xe.pooledCache}function Lt(e,r){r===null?ne(Ce,Ce.current):ne(Ce,r.pool)}function Ol(){var e=ls();return e===null?null:{parent:mt._currentValue,pool:e}}var $r=Error(l(460)),sa=Error(l(474)),is=Error(l(542)),os={then:function(){}};function Ds(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ir(e,r,a){switch(a=e[a],a===void 0?e.push(r):a!==r&&(r.then(br,br),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,pc(e),e;default:if(typeof r.status=="string")r.then(br,br);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=r,e.status="pending",e.then(function(o){if(r.status==="pending"){var u=r;u.status="fulfilled",u.value=o}},function(o){if(r.status==="pending"){var u=r;u.status="rejected",u.reason=o}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,pc(e),e}throw na=r,$r}}function aa(e){try{var r=e._init;return r(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(na=a,$r):a}}var na=null;function Wi(){if(na===null)throw Error(l(459));var e=na;return na=null,e}function pc(e){if(e===$r||e===is)throw Error(l(483))}var Fa=null,$n=0;function In(e){var r=$n;return $n+=1,Fa===null&&(Fa=[]),Ir(Fa,e,r)}function Hn(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function Ya(e,r){throw r.$$typeof===w?Error(l(525)):(e=Object.prototype.toString.call(r),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function bc(e){function r(H,$){if(e){var Y=H.deletions;Y===null?(H.deletions=[$],H.flags|=16):Y.push($)}}function a(H,$){if(!e)return null;for(;$!==null;)r(H,$),$=$.sibling;return null}function o(H){for(var $=new Map;H!==null;)H.key!==null?$.set(H.key,H):$.set(H.index,H),H=H.sibling;return $}function u(H,$){return H=Cs(H,$),H.index=0,H.sibling=null,H}function f(H,$,Y){return H.index=Y,e?(Y=H.alternate,Y!==null?(Y=Y.index,Y<$?(H.flags|=67108866,$):Y):(H.flags|=67108866,$)):(H.flags|=1048576,$)}function v(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function N(H,$,Y,ce){return $===null||$.tag!==6?($=pe(Y,H.mode,ce),$.return=H,$):($=u($,Y),$.return=H,$)}function L(H,$,Y,ce){var Ne=Y.type;return Ne===R?le(H,$,Y.props.children,ce,Y.key):$!==null&&($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===q&&aa(Ne)===$.type)?($=u($,Y.props),Hn($,Y),$.return=H,$):($=Un(Y.type,Y.key,Y.props,null,H.mode,ce),Hn($,Y),$.return=H,$)}function W(H,$,Y,ce){return $===null||$.tag!==4||$.stateNode.containerInfo!==Y.containerInfo||$.stateNode.implementation!==Y.implementation?($=uc(Y,H.mode,ce),$.return=H,$):($=u($,Y.children||[]),$.return=H,$)}function le(H,$,Y,ce,Ne){return $===null||$.tag!==7?($=Nr(Y,H.mode,ce,Ne),$.return=H,$):($=u($,Y),$.return=H,$)}function ue(H,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=pe(""+$,H.mode,Y),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return Y=Un($.type,$.key,$.props,null,H.mode,Y),Hn(Y,$),Y.return=H,Y;case C:return $=uc($,H.mode,Y),$.return=H,$;case q:return $=aa($),ue(H,$,Y)}if(ie($)||P($))return $=Nr($,H.mode,Y,null),$.return=H,$;if(typeof $.then=="function")return ue(H,In($),Y);if($.$$typeof===B)return ue(H,Ye(H,$),Y);Ya(H,$)}return null}function Z(H,$,Y,ce){var Ne=$!==null?$.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ne!==null?null:N(H,$,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===Ne?L(H,$,Y,ce):null;case C:return Y.key===Ne?W(H,$,Y,ce):null;case q:return Y=aa(Y),Z(H,$,Y,ce)}if(ie(Y)||P(Y))return Ne!==null?null:le(H,$,Y,ce,null);if(typeof Y.then=="function")return Z(H,$,In(Y),ce);if(Y.$$typeof===B)return Z(H,$,Ye(H,Y),ce);Ya(H,Y)}return null}function te(H,$,Y,ce,Ne){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return H=H.get(Y)||null,N($,H,""+ce,Ne);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case S:return H=H.get(ce.key===null?Y:ce.key)||null,L($,H,ce,Ne);case C:return H=H.get(ce.key===null?Y:ce.key)||null,W($,H,ce,Ne);case q:return ce=aa(ce),te(H,$,Y,ce,Ne)}if(ie(ce)||P(ce))return H=H.get(Y)||null,le($,H,ce,Ne,null);if(typeof ce.then=="function")return te(H,$,Y,In(ce),Ne);if(ce.$$typeof===B)return te(H,$,Y,Ye($,ce),Ne);Ya($,ce)}return null}function ve(H,$,Y,ce){for(var Ne=null,Ie=null,we=$,De=$=0,Be=null;we!==null&&De<Y.length;De++){we.index>De?(Be=we,we=null):Be=we.sibling;var He=Z(H,we,Y[De],ce);if(He===null){we===null&&(we=Be);break}e&&we&&He.alternate===null&&r(H,we),$=f(He,$,De),Ie===null?Ne=He:Ie.sibling=He,Ie=He,we=Be}if(De===Y.length)return a(H,we),Oe&&Es(H,De),Ne;if(we===null){for(;De<Y.length;De++)we=ue(H,Y[De],ce),we!==null&&($=f(we,$,De),Ie===null?Ne=we:Ie.sibling=we,Ie=we);return Oe&&Es(H,De),Ne}for(we=o(we);De<Y.length;De++)Be=te(we,H,De,Y[De],ce),Be!==null&&(e&&Be.alternate!==null&&we.delete(Be.key===null?De:Be.key),$=f(Be,$,De),Ie===null?Ne=Be:Ie.sibling=Be,Ie=Be);return e&&we.forEach(function(cn){return r(H,cn)}),Oe&&Es(H,De),Ne}function _e(H,$,Y,ce){if(Y==null)throw Error(l(151));for(var Ne=null,Ie=null,we=$,De=$=0,Be=null,He=Y.next();we!==null&&!He.done;De++,He=Y.next()){we.index>De?(Be=we,we=null):Be=we.sibling;var cn=Z(H,we,He.value,ce);if(cn===null){we===null&&(we=Be);break}e&&we&&cn.alternate===null&&r(H,we),$=f(cn,$,De),Ie===null?Ne=cn:Ie.sibling=cn,Ie=cn,we=Be}if(He.done)return a(H,we),Oe&&Es(H,De),Ne;if(we===null){for(;!He.done;De++,He=Y.next())He=ue(H,He.value,ce),He!==null&&($=f(He,$,De),Ie===null?Ne=He:Ie.sibling=He,Ie=He);return Oe&&Es(H,De),Ne}for(we=o(we);!He.done;De++,He=Y.next())He=te(we,H,De,He.value,ce),He!==null&&(e&&He.alternate!==null&&we.delete(He.key===null?De:He.key),$=f(He,$,De),Ie===null?Ne=He:Ie.sibling=He,Ie=He);return e&&we.forEach(function(bb){return r(H,bb)}),Oe&&Es(H,De),Ne}function Ze(H,$,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var Ne=Y.key;$!==null;){if($.key===Ne){if(Ne=Y.type,Ne===R){if($.tag===7){a(H,$.sibling),ce=u($,Y.props.children),ce.return=H,H=ce;break e}}else if($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===q&&aa(Ne)===$.type){a(H,$.sibling),ce=u($,Y.props),Hn(ce,Y),ce.return=H,H=ce;break e}a(H,$);break}else r(H,$);$=$.sibling}Y.type===R?(ce=Nr(Y.props.children,H.mode,ce,Y.key),ce.return=H,H=ce):(ce=Un(Y.type,Y.key,Y.props,null,H.mode,ce),Hn(ce,Y),ce.return=H,H=ce)}return v(H);case C:e:{for(Ne=Y.key;$!==null;){if($.key===Ne)if($.tag===4&&$.stateNode.containerInfo===Y.containerInfo&&$.stateNode.implementation===Y.implementation){a(H,$.sibling),ce=u($,Y.children||[]),ce.return=H,H=ce;break e}else{a(H,$);break}else r(H,$);$=$.sibling}ce=uc(Y,H.mode,ce),ce.return=H,H=ce}return v(H);case q:return Y=aa(Y),Ze(H,$,Y,ce)}if(ie(Y))return ve(H,$,Y,ce);if(P(Y)){if(Ne=P(Y),typeof Ne!="function")throw Error(l(150));return Y=Ne.call(Y),_e(H,$,Y,ce)}if(typeof Y.then=="function")return Ze(H,$,In(Y),ce);if(Y.$$typeof===B)return Ze(H,$,Ye(H,Y),ce);Ya(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,$!==null&&$.tag===6?(a(H,$.sibling),ce=u($,Y),ce.return=H,H=ce):(a(H,$),ce=pe(Y,H.mode,ce),ce.return=H,H=ce),v(H)):a(H,$)}return function(H,$,Y,ce){try{$n=0;var Ne=Ze(H,$,Y,ce);return Fa=null,Ne}catch(we){if(we===$r||we===is)throw we;var Ie=qt(29,we,null,H.mode);return Ie.lanes=ce,Ie.return=H,Ie}finally{}}}var la=bc(!0),Ki=bc(!1),cs=!1;function Ml(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qn(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ds(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Os(e,r,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ge&2)!==0){var u=o.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),o.pending=r,r=zn(e),Xd(e,null,a),r}return Mn(e,o,r,a),zn(e)}function Va(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var o=r.lanes;o&=e.pendingLanes,a|=o,r.lanes=a,bi(e,a)}}function zl(e,r){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var u=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?u=f=r:f=f.next=r}else u=f=r;a={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}var Zi=!1;function Gn(){if(Zi){var e=zt;if(e!==null)throw e}}function Wa(e,r,a,o){Zi=!1;var u=e.updateQueue;cs=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,N=u.shared.pending;if(N!==null){u.shared.pending=null;var L=N,W=L.next;L.next=null,v===null?f=W:v.next=W,v=L;var le=e.alternate;le!==null&&(le=le.updateQueue,N=le.lastBaseUpdate,N!==v&&(N===null?le.firstBaseUpdate=W:N.next=W,le.lastBaseUpdate=L))}if(f!==null){var ue=u.baseState;v=0,le=W=L=null,N=f;do{var Z=N.lane&-536870913,te=Z!==N.lane;if(te?(Ue&Z)===Z:(o&Z)===Z){Z!==0&&Z===Ga&&(Zi=!0),le!==null&&(le=le.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ve=e,_e=N;Z=r;var Ze=a;switch(_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){ue=ve.call(Ze,ue,Z);break e}ue=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,Z=typeof ve=="function"?ve.call(Ze,ue,Z):ve,Z==null)break e;ue=y({},ue,Z);break e;case 2:cs=!0}}Z=N.callback,Z!==null&&(e.flags|=64,te&&(e.flags|=8192),te=u.callbacks,te===null?u.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},le===null?(W=le=te,L=ue):le=le.next=te,v|=Z;if(N=N.next,N===null){if(N=u.shared.pending,N===null)break;te=N,N=te.next,te.next=null,u.lastBaseUpdate=te,u.shared.pending=null}}while(!0);le===null&&(L=ue),u.baseState=L,u.firstBaseUpdate=W,u.lastBaseUpdate=le,f===null&&(u.shared.lanes=0),Qa|=v,e.lanes=v,e.memoizedState=ue}}function Ji(e,r){if(typeof e!="function")throw Error(l(191,e));e.call(r)}function Hr(e,r){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ji(a[e],r)}var Ka=_(null),Ll=_(0);function vc(e,r){e=xa,ne(Ll,e),ne(Ka,r),xa=e|r.baseLanes}function Qi(){ne(Ll,xa),ne(Ka,Ka.current)}function Xi(){xa=Ll.current,F(Ka),F(Ll)}var Xt=_(null),ir=null;function qr(e){var r=e.alternate;ne(ot,ot.current&1),ne(Xt,e),ir===null&&(r===null||Ka.current!==null||r.memoizedState!==null)&&(ir=e)}function eo(e){ne(ot,ot.current),ne(Xt,e),ir===null&&(ir=e)}function yc(e){e.tag===22?(ne(ot,ot.current),ne(Xt,e),ir===null&&(ir=e)):Ms()}function Ms(){ne(ot,ot.current),ne(Xt,Xt.current)}function er(e){F(Xt),ir===e&&(ir=null),F(ot)}var ot=_(0);function ia(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||lh(a)||ih(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var us=0,j=null,D=null,U=null,Q=!1,me=!1,ye=!1,je=0,xt=0,or=null,oa=0;function Qe(){throw Error(l(321))}function Er(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!ar(e[a],r[a]))return!1;return!0}function Fn(e,r,a,o,u,f){return us=f,j=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,k.H=e===null||e.memoizedState===null?xm:pu,ye=!1,f=a(o,u),ye=!1,me&&(f=zf(r,a,o,u)),Yn(e),f}function Yn(e){k.H=so;var r=D!==null&&D.next!==null;if(us=0,U=D=j=null,Q=!1,xt=0,or=null,r)throw Error(l(300));e===null||wt||(e=e.dependencies,e!==null&&it(e)&&(wt=!0))}function zf(e,r,a,o){j=e;var u=0;do{if(me&&(or=null),xt=0,me=!1,25<=u)throw Error(l(301));if(u+=1,U=D=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}k.H=pm,f=r(a,o)}while(me);return f}function cp(){var e=k.H,r=e.useState()[0];return r=typeof r.then=="function"?to(r):r,e=e.useState()[0],(D!==null?D.memoizedState:null)!==e&&(j.flags|=1024),r}function su(){var e=je!==0;return je=0,e}function au(e,r,a){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a}function nu(e){if(Q){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Q=!1}us=0,U=D=j=null,me=!1,xt=je=0,or=null}function tr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return U===null?j.memoizedState=U=e:U=U.next=e,U}function pt(){if(D===null){var e=j.alternate;e=e!==null?e.memoizedState:null}else e=D.next;var r=U===null?j.memoizedState:U.next;if(r!==null)U=r,D=e;else{if(e===null)throw j.alternate===null?Error(l(467)):Error(l(310));D=e,e={memoizedState:D.memoizedState,baseState:D.baseState,baseQueue:D.baseQueue,queue:D.queue,next:null},U===null?j.memoizedState=U=e:U=U.next=e}return U}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(e){var r=xt;return xt+=1,or===null&&(or=[]),e=Ir(or,e,r),r=j,(U===null?r.memoizedState:U.next)===null&&(r=r.alternate,k.H=r===null||r.memoizedState===null?xm:pu),e}function jc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return to(e);if(e.$$typeof===B)return ft(e)}throw Error(l(438,String(e)))}function lu(e){var r=null,a=j.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var o=j.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(r={data:o.data.map(function(u){return u.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=wc(),j.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(e),o=0;o<e;o++)a[o]=E;return r.index++,a}function ca(e,r){return typeof r=="function"?r(e):r}function Nc(e){var r=pt();return iu(r,D,e)}function iu(e,r,a){var o=e.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=a;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}r.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{r=u.next;var N=v=null,L=null,W=r,le=!1;do{var ue=W.lane&-536870913;if(ue!==W.lane?(Ue&ue)===ue:(us&ue)===ue){var Z=W.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ue===Ga&&(le=!0);else if((us&Z)===Z){W=W.next,Z===Ga&&(le=!0);continue}else ue={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(N=L=ue,v=f):L=L.next=ue,j.lanes|=Z,Qa|=Z;ue=W.action,ye&&a(f,ue),f=W.hasEagerState?W.eagerState:a(f,ue)}else Z={lane:ue,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(N=L=Z,v=f):L=L.next=Z,j.lanes|=ue,Qa|=ue;W=W.next}while(W!==null&&W!==r);if(L===null?v=f:L.next=N,!ar(f,e.memoizedState)&&(wt=!0,le&&(a=zt,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=L,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function ou(e){var r=pt(),a=r.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var o=a.dispatch,u=a.pending,f=r.memoizedState;if(u!==null){a.pending=null;var v=u=u.next;do f=e(f,v.action),v=v.next;while(v!==u);ar(f,r.memoizedState)||(wt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,o]}function Lf(e,r,a){var o=j,u=pt(),f=Oe;if(f){if(a===void 0)throw Error(l(407));a=a()}else a=r();var v=!ar((D||u).memoizedState,a);if(v&&(u.memoizedState=a,wt=!0),u=u.queue,uu(Pf.bind(null,o,u,e),[e]),u.getSnapshot!==r||v||U!==null&&U.memoizedState.tag&1){if(o.flags|=2048,Ul(9,{destroy:void 0},Bf.bind(null,o,u,a,r),null),Xe===null)throw Error(l(349));f||(us&127)!==0||Uf(o,r,a)}return a}function Uf(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=j.updateQueue,r===null?(r=wc(),j.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Bf(e,r,a,o){r.value=a,r.getSnapshot=o,$f(r)&&If(e)}function Pf(e,r,a){return a(function(){$f(r)&&If(e)})}function $f(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!ar(e,a)}catch{return!0}}function If(e){var r=Lr(e,2);r!==null&&fr(r,e,2)}function cu(e){var r=tr();if(typeof e=="function"){var a=e;if(e=a(),ye){$t(!0);try{a()}finally{$t(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},r}function Hf(e,r,a,o){return e.baseState=a,iu(e,D,typeof o=="function"?o:ca)}function dp(e,r,a,o,u){if(Cc(e))throw Error(l(485));if(e=r.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};k.T!==null?a(!0):f.isTransition=!1,o(f),a=r.pending,a===null?(f.next=r.pending=f,qf(r,f)):(f.next=a.next,r.pending=a.next=f)}}function qf(e,r){var a=r.action,o=r.payload,u=e.state;if(r.isTransition){var f=k.T,v={};k.T=v;try{var N=a(u,o),L=k.S;L!==null&&L(v,N),Gf(e,r,N)}catch(W){du(e,r,W)}finally{f!==null&&v.types!==null&&(f.types=v.types),k.T=f}}else try{f=a(u,o),Gf(e,r,f)}catch(W){du(e,r,W)}}function Gf(e,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ff(e,r,o)},function(o){return du(e,r,o)}):Ff(e,r,a)}function Ff(e,r,a){r.status="fulfilled",r.value=a,Yf(r),e.state=a,r=e.pending,r!==null&&(a=r.next,a===r?e.pending=null:(a=a.next,r.next=a,qf(e,a)))}function du(e,r,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do r.status="rejected",r.reason=a,Yf(r),r=r.next;while(r!==o)}e.action=null}function Yf(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function Vf(e,r){return r}function Wf(e,r){if(Oe){var a=Xe.formState;if(a!==null){e:{var o=j;if(Oe){if(Je){t:{for(var u=Je,f=Ft;u.nodeType!==8;){if(!f){u=null;break t}if(u=Gr(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Je=Gr(u.nextSibling),o=u.data==="F!";break e}}As(o)}o=!1}o&&(r=a[0])}}return a=tr(),a.memoizedState=a.baseState=r,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:r},a.queue=o,a=fm.bind(null,j,o),o.dispatch=a,o=cu(!1),f=xu.bind(null,j,!1,o.queue),o=tr(),u={state:r,dispatch:null,action:e,pending:null},o.queue=u,a=dp.bind(null,j,u,f,a),u.dispatch=a,o.memoizedState=e,[r,a,!1]}function Kf(e){var r=pt();return Zf(r,D,e)}function Zf(e,r,a){if(r=iu(e,r,Vf)[0],e=Nc(ca)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var o=to(r)}catch(v){throw v===$r?is:v}else o=r;r=pt();var u=r.queue,f=u.dispatch;return a!==r.memoizedState&&(j.flags|=2048,Ul(9,{destroy:void 0},up.bind(null,u,a),null)),[o,f,e]}function up(e,r){e.action=r}function Jf(e){var r=pt(),a=D;if(a!==null)return Zf(r,a,e);pt(),r=r.memoizedState,a=pt();var o=a.queue.dispatch;return a.memoizedState=e,[r,o,!1]}function Ul(e,r,a,o){return e={tag:e,create:a,deps:o,inst:r,next:null},r=j.updateQueue,r===null&&(r=wc(),j.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,r.lastEffect=e),e}function Qf(){return pt().memoizedState}function Sc(e,r,a,o){var u=tr();j.flags|=e,u.memoizedState=Ul(1|r,{destroy:void 0},a,o===void 0?null:o)}function _c(e,r,a,o){var u=pt();o=o===void 0?null:o;var f=u.memoizedState.inst;D!==null&&o!==null&&Er(o,D.memoizedState.deps)?u.memoizedState=Ul(r,f,a,o):(j.flags|=e,u.memoizedState=Ul(1|r,f,a,o))}function Xf(e,r){Sc(8390656,8,e,r)}function uu(e,r){_c(2048,8,e,r)}function hp(e){j.flags|=4;var r=j.updateQueue;if(r===null)r=wc(),j.updateQueue=r,r.events=[e];else{var a=r.events;a===null?r.events=[e]:a.push(e)}}function em(e){var r=pt().memoizedState;return hp({ref:r,nextImpl:e}),function(){if((Ge&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}function tm(e,r){return _c(4,2,e,r)}function rm(e,r){return _c(4,4,e,r)}function sm(e,r){if(typeof r=="function"){e=e();var a=r(e);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function am(e,r,a){a=a!=null?a.concat([e]):null,_c(4,4,sm.bind(null,r,e),a)}function hu(){}function nm(e,r){var a=pt();r=r===void 0?null:r;var o=a.memoizedState;return r!==null&&Er(r,o[1])?o[0]:(a.memoizedState=[e,r],e)}function lm(e,r){var a=pt();r=r===void 0?null:r;var o=a.memoizedState;if(r!==null&&Er(r,o[1]))return o[0];if(o=e(),ye){$t(!0);try{e()}finally{$t(!1)}}return a.memoizedState=[o,r],o}function fu(e,r,a){return a===void 0||(us&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=r:(e.memoizedState=a,e=i0(),j.lanes|=e,Qa|=e,a)}function im(e,r,a,o){return ar(a,r)?a:Ka.current!==null?(e=fu(e,a,o),ar(e,r)||(wt=!0),e):(us&42)===0||(us&1073741824)!==0&&(Ue&261930)===0?(wt=!0,e.memoizedState=a):(e=i0(),j.lanes|=e,Qa|=e,r)}function om(e,r,a,o,u){var f=G.p;G.p=f!==0&&8>f?f:8;var v=k.T,N={};k.T=N,xu(e,!1,r,a);try{var L=u(),W=k.S;if(W!==null&&W(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var le=ru(L,o);ro(e,r,le,Tr(e))}else ro(e,r,o,Tr(e))}catch(ue){ro(e,r,{then:function(){},status:"rejected",reason:ue},Tr())}finally{G.p=f,v!==null&&N.types!==null&&(v.types=N.types),k.T=v}}function fp(){}function mu(e,r,a,o){if(e.tag!==5)throw Error(l(476));var u=cm(e).queue;om(e,u,r,I,a===null?fp:function(){return dm(e),a(o)})}function cm(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:I},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:a},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function dm(e){var r=cm(e);r.next===null&&(r=e.alternate.memoizedState),ro(e,r.next.queue,{},Tr())}function gu(){return ft(yo)}function um(){return pt().memoizedState}function hm(){return pt().memoizedState}function mp(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var a=Tr();e=ds(a);var o=Os(r,e,a);o!==null&&(fr(o,r,a),Va(o,r,a)),r={cache:Vi()},e.payload=r;return}r=r.return}}function gp(e,r,a){var o=Tr();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cc(e)?mm(r,a):(a=_s(e,r,a,o),a!==null&&(fr(a,e,o),gm(a,r,o)))}function fm(e,r,a){var o=Tr();ro(e,r,a,o)}function ro(e,r,a,o){var u={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))mm(r,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,N=f(v,a);if(u.hasEagerState=!0,u.eagerState=N,ar(N,v))return Mn(e,r,u,0),Xe===null&&qi(),!1}catch{}finally{}if(a=_s(e,r,u,o),a!==null)return fr(a,e,o),gm(a,r,o),!0}return!1}function xu(e,r,a,o){if(o={lane:2,revertLane:Wu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Cc(e)){if(r)throw Error(l(479))}else r=_s(e,a,o,2),r!==null&&fr(r,e,2)}function Cc(e){var r=e.alternate;return e===j||r!==null&&r===j}function mm(e,r){me=Q=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function gm(e,r,a){if((a&4194048)!==0){var o=r.lanes;o&=e.pendingLanes,a|=o,r.lanes=a,bi(e,a)}}var so={readContext:ft,use:jc,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};so.useEffectEvent=Qe;var xm={readContext:ft,use:jc,useCallback:function(e,r){return tr().memoizedState=[e,r===void 0?null:r],e},useContext:ft,useEffect:Xf,useImperativeHandle:function(e,r,a){a=a!=null?a.concat([e]):null,Sc(4194308,4,sm.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Sc(4194308,4,e,r)},useInsertionEffect:function(e,r){Sc(4,2,e,r)},useMemo:function(e,r){var a=tr();r=r===void 0?null:r;var o=e();if(ye){$t(!0);try{e()}finally{$t(!1)}}return a.memoizedState=[o,r],o},useReducer:function(e,r,a){var o=tr();if(a!==void 0){var u=a(r);if(ye){$t(!0);try{a(r)}finally{$t(!1)}}}else u=r;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=gp.bind(null,j,e),[o.memoizedState,e]},useRef:function(e){var r=tr();return e={current:e},r.memoizedState=e},useState:function(e){e=cu(e);var r=e.queue,a=fm.bind(null,j,r);return r.dispatch=a,[e.memoizedState,a]},useDebugValue:hu,useDeferredValue:function(e,r){var a=tr();return fu(a,e,r)},useTransition:function(){var e=cu(!1);return e=om.bind(null,j,e.queue,!0,!1),tr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,a){var o=j,u=tr();if(Oe){if(a===void 0)throw Error(l(407));a=a()}else{if(a=r(),Xe===null)throw Error(l(349));(Ue&127)!==0||Uf(o,r,a)}u.memoizedState=a;var f={value:a,getSnapshot:r};return u.queue=f,Xf(Pf.bind(null,o,f,e),[e]),o.flags|=2048,Ul(9,{destroy:void 0},Bf.bind(null,o,f,a,r),null),a},useId:function(){var e=tr(),r=Xe.identifierPrefix;if(Oe){var a=Cr,o=nt;a=(o&~(1<<32-Mt(o)-1)).toString(32)+a,r="_"+r+"R_"+a,a=je++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=oa++,r="_"+r+"r_"+a.toString(32)+"_";return e.memoizedState=r},useHostTransitionStatus:gu,useFormState:Wf,useActionState:Wf,useOptimistic:function(e){var r=tr();r.memoizedState=r.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=xu.bind(null,j,!0,a),a.dispatch=r,[e,r]},useMemoCache:lu,useCacheRefresh:function(){return tr().memoizedState=mp.bind(null,j)},useEffectEvent:function(e){var r=tr(),a={impl:e};return r.memoizedState=a,function(){if((Ge&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},pu={readContext:ft,use:jc,useCallback:nm,useContext:ft,useEffect:uu,useImperativeHandle:am,useInsertionEffect:tm,useLayoutEffect:rm,useMemo:lm,useReducer:Nc,useRef:Qf,useState:function(){return Nc(ca)},useDebugValue:hu,useDeferredValue:function(e,r){var a=pt();return im(a,D.memoizedState,e,r)},useTransition:function(){var e=Nc(ca)[0],r=pt().memoizedState;return[typeof e=="boolean"?e:to(e),r]},useSyncExternalStore:Lf,useId:um,useHostTransitionStatus:gu,useFormState:Kf,useActionState:Kf,useOptimistic:function(e,r){var a=pt();return Hf(a,D,e,r)},useMemoCache:lu,useCacheRefresh:hm};pu.useEffectEvent=em;var pm={readContext:ft,use:jc,useCallback:nm,useContext:ft,useEffect:uu,useImperativeHandle:am,useInsertionEffect:tm,useLayoutEffect:rm,useMemo:lm,useReducer:ou,useRef:Qf,useState:function(){return ou(ca)},useDebugValue:hu,useDeferredValue:function(e,r){var a=pt();return D===null?fu(a,e,r):im(a,D.memoizedState,e,r)},useTransition:function(){var e=ou(ca)[0],r=pt().memoizedState;return[typeof e=="boolean"?e:to(e),r]},useSyncExternalStore:Lf,useId:um,useHostTransitionStatus:gu,useFormState:Jf,useActionState:Jf,useOptimistic:function(e,r){var a=pt();return D!==null?Hf(a,D,e,r):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:lu,useCacheRefresh:hm};pm.useEffectEvent=em;function bu(e,r,a,o){r=e.memoizedState,a=a(o,r),a=a==null?r:y({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var vu={enqueueSetState:function(e,r,a){e=e._reactInternals;var o=Tr(),u=ds(o);u.payload=r,a!=null&&(u.callback=a),r=Os(e,u,o),r!==null&&(fr(r,e,o),Va(r,e,o))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var o=Tr(),u=ds(o);u.tag=1,u.payload=r,a!=null&&(u.callback=a),r=Os(e,u,o),r!==null&&(fr(r,e,o),Va(r,e,o))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=Tr(),o=ds(a);o.tag=2,r!=null&&(o.callback=r),r=Os(e,o,a),r!==null&&(fr(r,e,a),Va(r,e,a))}};function bm(e,r,a,o,u,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):r.prototype&&r.prototype.isPureReactComponent?!Xs(a,o)||!Xs(u,f):!0}function vm(e,r,a,o){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,o),r.state!==e&&vu.enqueueReplaceState(r,r.state,null)}function Vn(e,r){var a=r;if("ref"in r){a={};for(var o in r)o!=="ref"&&(a[o]=r[o])}if(e=e.defaultProps){a===r&&(a=y({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function ym(e){Hi(e)}function wm(e){console.error(e)}function jm(e){Hi(e)}function Ec(e,r){try{var a=e.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(o){setTimeout(function(){throw o})}}function Nm(e,r,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function yu(e,r,a){return a=ds(a),a.tag=3,a.payload={element:null},a.callback=function(){Ec(e,r)},a}function Sm(e){return e=ds(e),e.tag=3,e}function _m(e,r,a,o){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Nm(r,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Nm(r,a,o),typeof u!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})})}function xp(e,r,a,o,u){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(r=a.alternate,r!==null&&lr(r,a,u,!0),a=Xt.current,a!==null){switch(a.tag){case 31:case 13:return ir===null?Pc():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=u,o===os?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([o]):r.add(o),Fu(e,o,u)),!1;case 22:return a.flags|=65536,o===os?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([o]):a.add(o)),Fu(e,o,u)),!1}throw Error(l(435,a.tag))}return Fu(e,o,u),Pc(),!1}if(Oe)return r=Xt.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=u,o!==Ur&&(e=Error(l(422),{cause:o}),Rl(Tt(e,a)))):(o!==Ur&&(r=Error(l(423),{cause:o}),Rl(Tt(r,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=Tt(o,a),u=yu(e.stateNode,o,u),zl(e,u),gt!==4&&(gt=2)),!1;var f=Error(l(520),{cause:o});if(f=Tt(f,a),ho===null?ho=[f]:ho.push(f),gt!==4&&(gt=2),r===null)return!0;o=Tt(o,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=yu(a.stateNode,o,e),zl(a,e),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Xa===null||!Xa.has(f))))return a.flags|=65536,u&=-u,a.lanes|=u,u=Sm(u),_m(u,e,a,o),zl(a,u),!1}a=a.return}while(a!==null);return!1}var wu=Error(l(461)),wt=!1;function Ut(e,r,a,o){r.child=e===null?Ki(r,null,a,o):la(r,e.child,a,o)}function Cm(e,r,a,o,u){a=a.render;var f=r.ref;if("ref"in o){var v={};for(var N in o)N!=="ref"&&(v[N]=o[N])}else v=o;return tt(r),o=Fn(e,r,a,v,f,u),N=su(),e!==null&&!wt?(au(e,r,u),da(e,r,u)):(Oe&&N&&Fi(r),r.flags|=1,Ut(e,r,o,u),r.child)}function Em(e,r,a,o,u){if(e===null){var f=a.type;return typeof f=="function"&&!Ha(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Am(e,r,f,o,u)):(e=Un(a.type,null,o,r,r.mode,u),e.ref=r.ref,e.return=r,r.child=e)}if(f=e.child,!ku(e,u)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Xs,a(v,o)&&e.ref===r.ref)return da(e,r,u)}return r.flags|=1,e=Cs(f,o),e.ref=r.ref,e.return=r,r.child=e}function Am(e,r,a,o,u){if(e!==null){var f=e.memoizedProps;if(Xs(f,o)&&e.ref===r.ref)if(wt=!1,r.pendingProps=o=f,ku(e,u))(e.flags&131072)!==0&&(wt=!0);else return r.lanes=e.lanes,da(e,r,u)}return ju(e,r,a,o,u)}function km(e,r,a,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,e!==null){for(o=r.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,r.child=null;return Tm(e,r,f,a,o)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Lt(r,f!==null?f.cachePool:null),f!==null?vc(r,f):Qi(),yc(r);else return o=r.lanes=536870912,Tm(e,r,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(Lt(r,f.cachePool),vc(r,f),Ms(),r.memoizedState=null):(e!==null&&Lt(r,null),Qi(),Ms());return Ut(e,r,u,a),r.child}function ao(e,r){return e!==null&&e.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Tm(e,r,a,o,u){var f=ls();return f=f===null?null:{parent:mt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},e!==null&&Lt(r,null),Qi(),yc(r),e!==null&&lr(e,r,o,!0),r.childLanes=u,null}function Ac(e,r){return r=Tc({mode:r.mode,children:r.children},e.mode),r.ref=e.ref,e.child=r,r.return=e,r}function Rm(e,r,a){return la(r,e.child,null,a),e=Ac(r,r.pendingProps),e.flags|=2,er(r),r.memoizedState=null,e}function pp(e,r,a){var o=r.pendingProps,u=(r.flags&128)!==0;if(r.flags&=-129,e===null){if(Oe){if(o.mode==="hidden")return e=Ac(r,o),r.lanes=536870912,ao(null,e);if(eo(r),(e=Je)?(e=q0(e,Ft),e=e!==null&&e.data==="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:_r!==null?{id:nt,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},a=kl(e),a.return=r,r.child=a,Ct=r,Je=null)):e=null,e===null)throw As(r);return r.lanes=536870912,null}return Ac(r,o)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(eo(r),u)if(r.flags&256)r.flags&=-257,r=Rm(e,r,a);else if(r.memoizedState!==null)r.child=e.child,r.flags|=128,r=null;else throw Error(l(558));else if(wt||lr(e,r,a,!1),u=(a&e.childLanes)!==0,wt||u){if(o=Xe,o!==null&&(v=vi(o,a),v!==0&&v!==f.retryLane))throw f.retryLane=v,Lr(e,v),fr(o,e,v),wu;Pc(),r=Rm(e,r,a)}else e=f.treeContext,Je=Gr(v.nextSibling),Ct=r,Oe=!0,ts=null,Ft=!1,e!==null&&eu(r,e),r=Ac(r,o),r.flags|=4096;return r}return e=Cs(e.child,{mode:o.mode,children:o.children}),e.ref=r.ref,r.child=e,e.return=r,e}function kc(e,r){var a=r.ref;if(a===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(r.flags|=4194816)}}function ju(e,r,a,o,u){return tt(r),a=Fn(e,r,a,o,void 0,u),o=su(),e!==null&&!wt?(au(e,r,u),da(e,r,u)):(Oe&&o&&Fi(r),r.flags|=1,Ut(e,r,a,u),r.child)}function Dm(e,r,a,o,u,f){return tt(r),r.updateQueue=null,a=zf(r,o,a,u),Yn(e),o=su(),e!==null&&!wt?(au(e,r,f),da(e,r,f)):(Oe&&o&&Fi(r),r.flags|=1,Ut(e,r,a,f),r.child)}function Om(e,r,a,o,u){if(tt(r),r.stateNode===null){var f=st,v=a.contextType;typeof v=="object"&&v!==null&&(f=ft(v)),f=new a(o,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=vu,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=o,f.state=r.memoizedState,f.refs={},Ml(r),v=a.contextType,f.context=typeof v=="object"&&v!==null?ft(v):st,f.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(bu(r,a,v,o),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&vu.enqueueReplaceState(f,f.state,null),Wa(r,o,f,u),Gn(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),o=!0}else if(e===null){f=r.stateNode;var N=r.memoizedProps,L=Vn(a,N);f.props=L;var W=f.context,le=a.contextType;v=st,typeof le=="object"&&le!==null&&(v=ft(le));var ue=a.getDerivedStateFromProps;le=typeof ue=="function"||typeof f.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,le||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(N||W!==v)&&vm(r,f,o,v),cs=!1;var Z=r.memoizedState;f.state=Z,Wa(r,o,f,u),Gn(),W=r.memoizedState,N||Z!==W||cs?(typeof ue=="function"&&(bu(r,a,ue,o),W=r.memoizedState),(L=cs||bm(r,a,L,o,Z,W,v))?(le||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=W),f.props=o,f.state=W,f.context=v,o=L):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{f=r.stateNode,qn(e,r),v=r.memoizedProps,le=Vn(a,v),f.props=le,ue=r.pendingProps,Z=f.context,W=a.contextType,L=st,typeof W=="object"&&W!==null&&(L=ft(W)),N=a.getDerivedStateFromProps,(W=typeof N=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ue||Z!==L)&&vm(r,f,o,L),cs=!1,Z=r.memoizedState,f.state=Z,Wa(r,o,f,u),Gn();var te=r.memoizedState;v!==ue||Z!==te||cs||e!==null&&e.dependencies!==null&&it(e.dependencies)?(typeof N=="function"&&(bu(r,a,N,o),te=r.memoizedState),(le=cs||bm(r,a,le,o,Z,te,L)||e!==null&&e.dependencies!==null&&it(e.dependencies))?(W||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,te,L),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,te,L)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=te),f.props=o,f.state=te,f.context=L,o=le):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Z===e.memoizedState||(r.flags|=1024),o=!1)}return f=o,kc(e,r),o=(r.flags&128)!==0,f||o?(f=r.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,e!==null&&o?(r.child=la(r,e.child,null,u),r.child=la(r,null,a,u)):Ut(e,r,a,u),r.memoizedState=f.state,e=r.child):e=da(e,r,u),e}function Mm(e,r,a,o){return ta(),r.flags|=256,Ut(e,r,a,o),r.child}var Nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Su(e){return{baseLanes:e,cachePool:Ol()}}function _u(e,r,a){return e=e!==null?e.childLanes&~a:0,r&&(e|=kr),e}function zm(e,r,a){var o=r.pendingProps,u=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),v&&(u=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,e===null){if(Oe){if(u?qr(r):Ms(),(e=Je)?(e=q0(e,Ft),e=e!==null&&e.data!=="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:_r!==null?{id:nt,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},a=kl(e),a.return=r,r.child=a,Ct=r,Je=null)):e=null,e===null)throw As(r);return ih(e)?r.lanes=32:r.lanes=536870912,null}var N=o.children;return o=o.fallback,u?(Ms(),u=r.mode,N=Tc({mode:"hidden",children:N},u),o=Nr(o,u,a,null),N.return=r,o.return=r,N.sibling=o,r.child=N,o=r.child,o.memoizedState=Su(a),o.childLanes=_u(e,v,a),r.memoizedState=Nu,ao(null,o)):(qr(r),Cu(r,N))}var L=e.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(f)r.flags&256?(qr(r),r.flags&=-257,r=Eu(e,r,a)):r.memoizedState!==null?(Ms(),r.child=e.child,r.flags|=128,r=null):(Ms(),N=o.fallback,u=r.mode,o=Tc({mode:"visible",children:o.children},u),N=Nr(N,u,a,null),N.flags|=2,o.return=r,N.return=r,o.sibling=N,r.child=o,la(r,e.child,null,a),o=r.child,o.memoizedState=Su(a),o.childLanes=_u(e,v,a),r.memoizedState=Nu,r=ao(null,o));else if(qr(r),ih(N)){if(v=N.nextSibling&&N.nextSibling.dataset,v)var W=v.dgst;v=W,o=Error(l(419)),o.stack="",o.digest=v,Rl({value:o,source:null,stack:null}),r=Eu(e,r,a)}else if(wt||lr(e,r,a,!1),v=(a&e.childLanes)!==0,wt||v){if(v=Xe,v!==null&&(o=vi(v,a),o!==0&&o!==L.retryLane))throw L.retryLane=o,Lr(e,o),fr(v,e,o),wu;lh(N)||Pc(),r=Eu(e,r,a)}else lh(N)?(r.flags|=192,r.child=e.child,r=null):(e=L.treeContext,Je=Gr(N.nextSibling),Ct=r,Oe=!0,ts=null,Ft=!1,e!==null&&eu(r,e),r=Cu(r,o.children),r.flags|=4096);return r}return u?(Ms(),N=o.fallback,u=r.mode,L=e.child,W=L.sibling,o=Cs(L,{mode:"hidden",children:o.children}),o.subtreeFlags=L.subtreeFlags&65011712,W!==null?N=Cs(W,N):(N=Nr(N,u,a,null),N.flags|=2),N.return=r,o.return=r,o.sibling=N,r.child=o,ao(null,o),o=r.child,N=e.child.memoizedState,N===null?N=Su(a):(u=N.cachePool,u!==null?(L=mt._currentValue,u=u.parent!==L?{parent:L,pool:L}:u):u=Ol(),N={baseLanes:N.baseLanes|a,cachePool:u}),o.memoizedState=N,o.childLanes=_u(e,v,a),r.memoizedState=Nu,ao(e.child,o)):(qr(r),a=e.child,e=a.sibling,a=Cs(a,{mode:"visible",children:o.children}),a.return=r,a.sibling=null,e!==null&&(v=r.deletions,v===null?(r.deletions=[e],r.flags|=16):v.push(e)),r.child=a,r.memoizedState=null,a)}function Cu(e,r){return r=Tc({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function Tc(e,r){return e=qt(22,e,null,r),e.lanes=0,e}function Eu(e,r,a){return la(r,e.child,null,a),e=Cu(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Lm(e,r,a){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r),ra(e.return,r,a)}function Au(e,r,a,o,u,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:u,treeForkCount:f}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=u,v.treeForkCount=f)}function Um(e,r,a){var o=r.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var v=ot.current,N=(v&2)!==0;if(N?(v=v&1|2,r.flags|=128):v&=1,ne(ot,v),Ut(e,r,o,a),o=Oe?qa:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lm(e,a,r);else if(e.tag===19)Lm(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=r.child,u=null;a!==null;)e=a.alternate,e!==null&&ia(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=r.child,r.child=null):(u=a.sibling,a.sibling=null),Au(r,!1,u,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=r.child,r.child=null;u!==null;){if(e=u.alternate,e!==null&&ia(e)===null){r.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}Au(r,!0,a,null,f,o);break;case"together":Au(r,!1,null,null,void 0,o);break;default:r.memoizedState=null}return r.child}function da(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Qa|=r.lanes,(a&r.childLanes)===0)if(e!==null){if(lr(e,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(l(153));if(r.child!==null){for(e=r.child,a=Cs(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=Cs(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function ku(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&it(e)))}function bp(e,r,a){switch(r.tag){case 3:ae(r,r.stateNode.containerInfo),rs(r,mt,e.memoizedState.cache),ta();break;case 27:case 5:Ee(r);break;case 4:ae(r,r.stateNode.containerInfo);break;case 10:rs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,eo(r),null;break;case 13:var o=r.memoizedState;if(o!==null)return o.dehydrated!==null?(qr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?zm(e,r,a):(qr(r),e=da(e,r,a),e!==null?e.sibling:null);qr(r);break;case 19:var u=(e.flags&128)!==0;if(o=(a&r.childLanes)!==0,o||(lr(e,r,a,!1),o=(a&r.childLanes)!==0),u){if(o)return Um(e,r,a);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ne(ot,ot.current),o)break;return null;case 22:return r.lanes=0,km(e,r,a,r.pendingProps);case 24:rs(r,mt,e.memoizedState.cache)}return da(e,r,a)}function Bm(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps)wt=!0;else{if(!ku(e,a)&&(r.flags&128)===0)return wt=!1,bp(e,r,a);wt=(e.flags&131072)!==0}else wt=!1,Oe&&(r.flags&1048576)!==0&&hc(r,qa,r.index);switch(r.lanes=0,r.tag){case 16:e:{var o=r.pendingProps;if(e=aa(r.elementType),r.type=e,typeof e=="function")Ha(e)?(o=Vn(e,o),r.tag=1,r=Om(null,r,e,o,a)):(r.tag=0,r=ju(null,r,e,o,a));else{if(e!=null){var u=e.$$typeof;if(u===K){r.tag=11,r=Cm(null,r,e,o,a);break e}else if(u===re){r.tag=14,r=Em(null,r,e,o,a);break e}}throw r=J(e)||e,Error(l(306,r,""))}}return r;case 0:return ju(e,r,r.type,r.pendingProps,a);case 1:return o=r.type,u=Vn(o,r.pendingProps),Om(e,r,o,u,a);case 3:e:{if(ae(r,r.stateNode.containerInfo),e===null)throw Error(l(387));o=r.pendingProps;var f=r.memoizedState;u=f.element,qn(e,r),Wa(r,o,null,a);var v=r.memoizedState;if(o=v.cache,rs(r,mt,o),o!==f.cache&&Bn(r,[mt],a,!0),Gn(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Mm(e,r,o,a);break e}else if(o!==u){u=Tt(Error(l(424)),r),Rl(u),r=Mm(e,r,o,a);break e}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=Gr(e.firstChild),Ct=r,Oe=!0,ts=null,Ft=!0,a=Ki(r,null,o,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ta(),o===u){r=da(e,r,a);break e}Ut(e,r,o,a)}r=r.child}return r;case 26:return kc(e,r),e===null?(a=K0(r.type,null,r.pendingProps,null))?r.memoizedState=a:Oe||(a=r.type,e=r.pendingProps,o=Yc(fe.current).createElement(a),o[qe]=r,o[kt]=e,Bt(o,a,e),ht(o),r.stateNode=o):r.memoizedState=K0(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return Ee(r),e===null&&Oe&&(o=r.stateNode=Y0(r.type,r.pendingProps,fe.current),Ct=r,Ft=!0,u=Je,sn(r.type)?(oh=u,Je=Gr(o.firstChild)):Je=u),Ut(e,r,r.pendingProps.children,a),kc(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&Oe&&((u=o=Je)&&(o=Wp(o,r.type,r.pendingProps,Ft),o!==null?(r.stateNode=o,Ct=r,Je=Gr(o.firstChild),Ft=!1,u=!0):u=!1),u||As(r)),Ee(r),u=r.type,f=r.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,sh(u,f)?o=null:v!==null&&sh(u,v)&&(r.flags|=32),r.memoizedState!==null&&(u=Fn(e,r,cp,null,null,a),yo._currentValue=u),kc(e,r),Ut(e,r,o,a),r.child;case 6:return e===null&&Oe&&((e=a=Je)&&(a=Kp(a,r.pendingProps,Ft),a!==null?(r.stateNode=a,Ct=r,Je=null,e=!0):e=!1),e||As(r)),null;case 13:return zm(e,r,a);case 4:return ae(r,r.stateNode.containerInfo),o=r.pendingProps,e===null?r.child=la(r,null,o,a):Ut(e,r,o,a),r.child;case 11:return Cm(e,r,r.type,r.pendingProps,a);case 7:return Ut(e,r,r.pendingProps,a),r.child;case 8:return Ut(e,r,r.pendingProps.children,a),r.child;case 12:return Ut(e,r,r.pendingProps.children,a),r.child;case 10:return o=r.pendingProps,rs(r,r.type,o.value),Ut(e,r,o.children,a),r.child;case 9:return u=r.type._context,o=r.pendingProps.children,tt(r),u=ft(u),o=o(u),r.flags|=1,Ut(e,r,o,a),r.child;case 14:return Em(e,r,r.type,r.pendingProps,a);case 15:return Am(e,r,r.type,r.pendingProps,a);case 19:return Um(e,r,a);case 31:return pp(e,r,a);case 22:return km(e,r,a,r.pendingProps);case 24:return tt(r),o=ft(mt),e===null?(u=ls(),u===null&&(u=Xe,f=Vi(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=a),u=f),r.memoizedState={parent:o,cache:u},Ml(r),rs(r,mt,u)):((e.lanes&a)!==0&&(qn(e,r),Wa(r,null,null,a),Gn()),u=e.memoizedState,f=r.memoizedState,u.parent!==o?(u={parent:o,cache:o},r.memoizedState=u,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=u),rs(r,mt,o)):(o=f.cache,rs(r,mt,o),o!==u.cache&&Bn(r,[mt],a,!0))),Ut(e,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(l(156,r.tag))}function ua(e){e.flags|=4}function Tu(e,r,a,o,u){if((r=(e.mode&32)!==0)&&(r=!1),r){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(u0())e.flags|=8192;else throw na=os,sa}else e.flags&=-16777217}function Pm(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!eg(r))if(u0())e.flags|=8192;else throw na=os,sa}function Rc(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?Fo():536870912,e.lanes|=r,Il|=r)}function no(e,r){if(!Oe)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function at(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(r)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=a,r}function vp(e,r,a){var o=r.pendingProps;switch(Yi(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return at(r),null;case 3:return a=r.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ss(mt),ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ea(r)?ua(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mc())),at(r),null;case 26:var u=r.type,f=r.memoizedState;return e===null?(ua(r),f!==null?(at(r),Pm(r,f)):(at(r),Tu(r,u,null,o,a))):f?f!==e.memoizedState?(ua(r),at(r),Pm(r,f)):(at(r),r.flags&=-16777217):(e=e.memoizedProps,e!==o&&ua(r),at(r),Tu(r,u,e,o,a)),null;case 27:if(Me(r),a=fe.current,u=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==o&&ua(r);else{if(!o){if(r.stateNode===null)throw Error(l(166));return at(r),null}e=se.current,ea(r)?ks(r):(e=Y0(u,o,a),r.stateNode=e,ua(r))}return at(r),null;case 5:if(Me(r),u=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==o&&ua(r);else{if(!o){if(r.stateNode===null)throw Error(l(166));return at(r),null}if(f=se.current,ea(r))ks(r);else{var v=Yc(fe.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?v.createElement(u,{is:o.is}):v.createElement(u)}}f[qe]=r,f[kt]=o;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=f;e:switch(Bt(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ua(r)}}return at(r),Tu(r,r.type,e===null?null:e.memoizedProps,r.pendingProps,a),null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==o&&ua(r);else{if(typeof o!="string"&&r.stateNode===null)throw Error(l(166));if(e=fe.current,ea(r)){if(e=r.stateNode,a=r.memoizedProps,o=null,u=Ct,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[qe]=r,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||z0(e.nodeValue,a)),e||As(r,!0)}else e=Yc(e).createTextNode(o),e[qe]=r,r.stateNode=e}return at(r),null;case 31:if(a=r.memoizedState,e===null||e.memoizedState!==null){if(o=ea(r),a!==null){if(e===null){if(!o)throw Error(l(318));if(e=r.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[qe]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),e=!1}else a=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return r.flags&256?(er(r),r):(er(r),null);if((r.flags&128)!==0)throw Error(l(558))}return at(r),null;case 13:if(o=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=ea(r),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=r.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[qe]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),u=!1}else u=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return r.flags&256?(er(r),r):(er(r),null)}return er(r),(r.flags&128)!==0?(r.lanes=a,r):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=r.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),a!==e&&a&&(r.child.flags|=8192),Rc(r,r.updateQueue),at(r),null);case 4:return ge(),e===null&&Qu(r.stateNode.containerInfo),at(r),null;case 10:return ss(r.type),at(r),null;case 19:if(F(ot),o=r.memoizedState,o===null)return at(r),null;if(u=(r.flags&128)!==0,f=o.rendering,f===null)if(u)no(o,!1);else{if(gt!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(f=ia(e),f!==null){for(r.flags|=128,no(o,!1),e=f.updateQueue,r.updateQueue=e,Rc(r,e),r.subtreeFlags=0,e=a,a=r.child;a!==null;)Ln(a,e),a=a.sibling;return ne(ot,ot.current&1|2),Oe&&Es(r,o.treeForkCount),r.child}e=e.sibling}o.tail!==null&&rr()>Lc&&(r.flags|=128,u=!0,no(o,!1),r.lanes=4194304)}else{if(!u)if(e=ia(f),e!==null){if(r.flags|=128,u=!0,e=e.updateQueue,r.updateQueue=e,Rc(r,e),no(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Oe)return at(r),null}else 2*rr()-o.renderingStartTime>Lc&&a!==536870912&&(r.flags|=128,u=!0,no(o,!1),r.lanes=4194304);o.isBackwards?(f.sibling=r.child,r.child=f):(e=o.last,e!==null?e.sibling=f:r.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=rr(),e.sibling=null,a=ot.current,ne(ot,u?a&1|2:a&1),Oe&&Es(r,o.treeForkCount),e):(at(r),null);case 22:case 23:return er(r),Xi(),o=r.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(r.flags|=8192):o&&(r.flags|=8192),o?(a&536870912)!==0&&(r.flags&128)===0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),a=r.updateQueue,a!==null&&Rc(r,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048),e!==null&&F(Ce),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ss(mt),at(r),null;case 25:return null;case 30:return null}throw Error(l(156,r.tag))}function yp(e,r){switch(Yi(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return ss(mt),ge(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return Me(r),null;case 31:if(r.memoizedState!==null){if(er(r),r.alternate===null)throw Error(l(340));ta()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 13:if(er(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(l(340));ta()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return F(ot),null;case 4:return ge(),null;case 10:return ss(r.type),null;case 22:case 23:return er(r),Xi(),e!==null&&F(Ce),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return ss(mt),null;case 25:return null;default:return null}}function $m(e,r){switch(Yi(r),r.tag){case 3:ss(mt),ge();break;case 26:case 27:case 5:Me(r);break;case 4:ge();break;case 31:r.memoizedState!==null&&er(r);break;case 13:er(r);break;case 19:F(ot);break;case 10:ss(r.type);break;case 22:case 23:er(r),Xi(),e!==null&&F(Ce);break;case 24:ss(mt)}}function lo(e,r){try{var a=r.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var u=o.next;a=u;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==u)}}catch(N){We(r,r.return,N)}}function Za(e,r,a){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var v=o.inst,N=v.destroy;if(N!==void 0){v.destroy=void 0,u=r;var L=a,W=N;try{W()}catch(le){We(u,L,le)}}}o=o.next}while(o!==f)}}catch(le){We(r,r.return,le)}}function Im(e){var r=e.updateQueue;if(r!==null){var a=e.stateNode;try{Hr(r,a)}catch(o){We(e,e.return,o)}}}function Hm(e,r,a){a.props=Vn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){We(e,r,o)}}function io(e,r){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(u){We(e,r,u)}}function zs(e,r){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(u){We(e,r,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){We(e,r,u)}else a.current=null}function qm(e){var r=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(u){We(e,e.return,u)}}function Ru(e,r,a){try{var o=e.stateNode;Hp(o,e.type,a,r),o[kt]=r}catch(u){We(e,e.return,u)}}function Gm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&sn(e.type)||e.tag===4}function Du(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&sn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ou(e,r,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(e),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=br));else if(o!==4&&(o===27&&sn(e.type)&&(a=e.stateNode,r=null),e=e.child,e!==null))for(Ou(e,r,a),e=e.sibling;e!==null;)Ou(e,r,a),e=e.sibling}function Dc(e,r,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(o!==4&&(o===27&&sn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Dc(e,r,a),e=e.sibling;e!==null;)Dc(e,r,a),e=e.sibling}function Fm(e){var r=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,u=r.attributes;u.length;)r.removeAttributeNode(u[0]);Bt(r,o,a),r[qe]=e,r[kt]=a}catch(f){We(e,e.return,f)}}var ha=!1,jt=!1,Mu=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function wp(e,r){if(e=e.containerInfo,th=Xc,e=Kd(e),ic(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,N=-1,L=-1,W=0,le=0,ue=e,Z=null;t:for(;;){for(var te;ue!==a||u!==0&&ue.nodeType!==3||(N=v+u),ue!==f||o!==0&&ue.nodeType!==3||(L=v+o),ue.nodeType===3&&(v+=ue.nodeValue.length),(te=ue.firstChild)!==null;)Z=ue,ue=te;for(;;){if(ue===e)break t;if(Z===a&&++W===u&&(N=v),Z===f&&++le===o&&(L=v),(te=ue.nextSibling)!==null)break;ue=Z,Z=ue.parentNode}ue=te}a=N===-1||L===-1?null:{start:N,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(rh={focusedElem:e,selectionRange:a},Xc=!1,Rt=r;Rt!==null;)if(r=Rt,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Rt=e;else for(;Rt!==null;){switch(r=Rt,f=r.alternate,e=r.flags,r.tag){case 0:if((e&4)!==0&&(e=r.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=r,u=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var ve=Vn(a.type,u);e=o.getSnapshotBeforeUpdate(ve,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(_e){We(a,a.return,_e)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,a=e.nodeType,a===9)nh(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":nh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=r.sibling,e!==null){e.return=r.return,Rt=e;break}Rt=r.return}}function Vm(e,r,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ma(e,a),o&4&&lo(5,a);break;case 1:if(ma(e,a),o&4)if(e=a.stateNode,r===null)try{e.componentDidMount()}catch(v){We(a,a.return,v)}else{var u=Vn(a.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(u,r,e.__reactInternalSnapshotBeforeUpdate)}catch(v){We(a,a.return,v)}}o&64&&Im(a),o&512&&io(a,a.return);break;case 3:if(ma(e,a),o&64&&(e=a.updateQueue,e!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Hr(e,r)}catch(v){We(a,a.return,v)}}break;case 27:r===null&&o&4&&Fm(a);case 26:case 5:ma(e,a),r===null&&o&4&&qm(a),o&512&&io(a,a.return);break;case 12:ma(e,a);break;case 31:ma(e,a),o&4&&Zm(e,a);break;case 13:ma(e,a),o&4&&Jm(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Tp.bind(null,a),Zp(e,a))));break;case 22:if(o=a.memoizedState!==null||ha,!o){r=r!==null&&r.memoizedState!==null||jt,u=ha;var f=jt;ha=o,(jt=r)&&!f?ga(e,a,(a.subtreeFlags&8772)!==0):ma(e,a),ha=u,jt=f}break;case 30:break;default:ma(e,a)}}function Wm(e){var r=e.alternate;r!==null&&(e.alternate=null,Wm(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&Wo(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var lt=null,cr=!1;function fa(e,r,a){for(a=a.child;a!==null;)Km(e,r,a),a=a.sibling}function Km(e,r,a){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(pn,a)}catch{}switch(a.tag){case 26:jt||zs(a,r),fa(e,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jt||zs(a,r);var o=lt,u=cr;sn(a.type)&&(lt=a.stateNode,cr=!1),fa(e,r,a),po(a.stateNode),lt=o,cr=u;break;case 5:jt||zs(a,r);case 6:if(o=lt,u=cr,lt=null,fa(e,r,a),lt=o,cr=u,lt!==null)if(cr)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(f){We(a,r,f)}else try{lt.removeChild(a.stateNode)}catch(f){We(a,r,f)}break;case 18:lt!==null&&(cr?(e=lt,I0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Kl(e)):I0(lt,a.stateNode));break;case 4:o=lt,u=cr,lt=a.stateNode.containerInfo,cr=!0,fa(e,r,a),lt=o,cr=u;break;case 0:case 11:case 14:case 15:Za(2,a,r),jt||Za(4,a,r),fa(e,r,a);break;case 1:jt||(zs(a,r),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Hm(a,r,o)),fa(e,r,a);break;case 21:fa(e,r,a);break;case 22:jt=(o=jt)||a.memoizedState!==null,fa(e,r,a),jt=o;break;default:fa(e,r,a)}}function Zm(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Kl(e)}catch(a){We(r,r.return,a)}}}function Jm(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Kl(e)}catch(a){We(r,r.return,a)}}function jp(e){switch(e.tag){case 31:case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new Ym),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new Ym),r;default:throw Error(l(435,e.tag))}}function Oc(e,r){var a=jp(e);r.forEach(function(o){if(!a.has(o)){a.add(o);var u=Rp.bind(null,e,o);o.then(u,u)}})}function dr(e,r){var a=r.deletions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o],f=e,v=r,N=v;e:for(;N!==null;){switch(N.tag){case 27:if(sn(N.type)){lt=N.stateNode,cr=!1;break e}break;case 5:lt=N.stateNode,cr=!1;break e;case 3:case 4:lt=N.stateNode.containerInfo,cr=!0;break e}N=N.return}if(lt===null)throw Error(l(160));Km(f,v,u),lt=null,cr=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Qm(r,e),r=r.sibling}var hs=null;function Qm(e,r){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dr(r,e),ur(e),o&4&&(Za(3,e,e.return),lo(3,e),Za(5,e,e.return));break;case 1:dr(r,e),ur(e),o&512&&(jt||a===null||zs(a,a.return)),o&64&&ha&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var u=hs;if(dr(r,e),ur(e),o&512&&(jt||a===null||zs(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[vs]||f[qe]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),Bt(f,o,a),f[qe]=e,ht(f),o=f;break e;case"link":var v=Q0("link","href",u).get(o+(a.href||""));if(v){for(var N=0;N<v.length;N++)if(f=v[N],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(N,1);break t}}f=u.createElement(o),Bt(f,o,a),u.head.appendChild(f);break;case"meta":if(v=Q0("meta","content",u).get(o+(a.content||""))){for(N=0;N<v.length;N++)if(f=v[N],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(N,1);break t}}f=u.createElement(o),Bt(f,o,a),u.head.appendChild(f);break;default:throw Error(l(468,o))}f[qe]=e,ht(f),o=f}e.stateNode=o}else X0(u,e.type,e.stateNode);else e.stateNode=J0(u,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?X0(u,e.type,e.stateNode):J0(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Ru(e,e.memoizedProps,a.memoizedProps)}break;case 27:dr(r,e),ur(e),o&512&&(jt||a===null||zs(a,a.return)),a!==null&&o&4&&Ru(e,e.memoizedProps,a.memoizedProps);break;case 5:if(dr(r,e),ur(e),o&512&&(jt||a===null||zs(a,a.return)),e.flags&32){u=e.stateNode;try{Mr(u,"")}catch(ve){We(e,e.return,ve)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,Ru(e,u,a!==null?a.memoizedProps:u)),o&1024&&(Mu=!0);break;case 6:if(dr(r,e),ur(e),o&4){if(e.stateNode===null)throw Error(l(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(ve){We(e,e.return,ve)}}break;case 3:if(Kc=null,u=hs,hs=Vc(r.containerInfo),dr(r,e),hs=u,ur(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch(ve){We(e,e.return,ve)}Mu&&(Mu=!1,Xm(e));break;case 4:o=hs,hs=Vc(e.stateNode.containerInfo),dr(r,e),ur(e),hs=o;break;case 12:dr(r,e),ur(e);break;case 31:dr(r,e),ur(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Oc(e,o)));break;case 13:dr(r,e),ur(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zc=rr()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Oc(e,o)));break;case 22:u=e.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,W=ha,le=jt;if(ha=W||u,jt=le||L,dr(r,e),jt=le,ha=W,ur(e),o&8192)e:for(r=e.stateNode,r._visibility=u?r._visibility&-2:r._visibility|1,u&&(a===null||L||ha||jt||Wn(e)),a=null,r=e;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(f=L.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{N=L.stateNode;var ue=L.memoizedProps.style,Z=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ve){We(L,L.return,ve)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=u?"":L.memoizedProps}catch(ve){We(L,L.return,ve)}}}else if(r.tag===18){if(a===null){L=r;try{var te=L.stateNode;u?H0(te,!0):H0(L.stateNode,!1)}catch(ve){We(L,L.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Oc(e,a))));break;case 19:dr(r,e),ur(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Oc(e,o)));break;case 30:break;case 21:break;default:dr(r,e),ur(e)}}function ur(e){var r=e.flags;if(r&2){try{for(var a,o=e.return;o!==null;){if(Gm(o)){a=o;break}o=o.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var u=a.stateNode,f=Du(e);Dc(e,f,u);break;case 5:var v=a.stateNode;a.flags&32&&(Mr(v,""),a.flags&=-33);var N=Du(e);Dc(e,N,v);break;case 3:case 4:var L=a.stateNode.containerInfo,W=Du(e);Ou(e,W,L);break;default:throw Error(l(161))}}catch(le){We(e,e.return,le)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Xm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;Xm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function ma(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vm(e,r.alternate,r),r=r.sibling}function Wn(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Za(4,r,r.return),Wn(r);break;case 1:zs(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Hm(r,r.return,a),Wn(r);break;case 27:po(r.stateNode);case 26:case 5:zs(r,r.return),Wn(r);break;case 22:r.memoizedState===null&&Wn(r);break;case 30:Wn(r);break;default:Wn(r)}e=e.sibling}}function ga(e,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var o=r.alternate,u=e,f=r,v=f.flags;switch(f.tag){case 0:case 11:case 15:ga(u,f,a),lo(4,f);break;case 1:if(ga(u,f,a),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(W){We(o,o.return,W)}if(o=f,u=o.updateQueue,u!==null){var N=o.stateNode;try{var L=u.shared.hiddenCallbacks;if(L!==null)for(u.shared.hiddenCallbacks=null,u=0;u<L.length;u++)Ji(L[u],N)}catch(W){We(o,o.return,W)}}a&&v&64&&Im(f),io(f,f.return);break;case 27:Fm(f);case 26:case 5:ga(u,f,a),a&&o===null&&v&4&&qm(f),io(f,f.return);break;case 12:ga(u,f,a);break;case 31:ga(u,f,a),a&&v&4&&Zm(u,f);break;case 13:ga(u,f,a),a&&v&4&&Jm(u,f);break;case 22:f.memoizedState===null&&ga(u,f,a),io(f,f.return);break;case 30:break;default:ga(u,f,a)}r=r.sibling}}function zu(e,r){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Pn(a))}function Lu(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&Pn(e))}function fs(e,r,a,o){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)e0(e,r,a,o),r=r.sibling}function e0(e,r,a,o){var u=r.flags;switch(r.tag){case 0:case 11:case 15:fs(e,r,a,o),u&2048&&lo(9,r);break;case 1:fs(e,r,a,o);break;case 3:fs(e,r,a,o),u&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&Pn(e)));break;case 12:if(u&2048){fs(e,r,a,o),e=r.stateNode;try{var f=r.memoizedProps,v=f.id,N=f.onPostCommit;typeof N=="function"&&N(v,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(L){We(r,r.return,L)}}else fs(e,r,a,o);break;case 31:fs(e,r,a,o);break;case 13:fs(e,r,a,o);break;case 23:break;case 22:f=r.stateNode,v=r.alternate,r.memoizedState!==null?f._visibility&2?fs(e,r,a,o):oo(e,r):f._visibility&2?fs(e,r,a,o):(f._visibility|=2,Bl(e,r,a,o,(r.subtreeFlags&10256)!==0||!1)),u&2048&&zu(v,r);break;case 24:fs(e,r,a,o),u&2048&&Lu(r.alternate,r);break;default:fs(e,r,a,o)}}function Bl(e,r,a,o,u){for(u=u&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=e,v=r,N=a,L=o,W=v.flags;switch(v.tag){case 0:case 11:case 15:Bl(f,v,N,L,u),lo(8,v);break;case 23:break;case 22:var le=v.stateNode;v.memoizedState!==null?le._visibility&2?Bl(f,v,N,L,u):oo(f,v):(le._visibility|=2,Bl(f,v,N,L,u)),u&&W&2048&&zu(v.alternate,v);break;case 24:Bl(f,v,N,L,u),u&&W&2048&&Lu(v.alternate,v);break;default:Bl(f,v,N,L,u)}r=r.sibling}}function oo(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=e,o=r,u=o.flags;switch(o.tag){case 22:oo(a,o),u&2048&&zu(o.alternate,o);break;case 24:oo(a,o),u&2048&&Lu(o.alternate,o);break;default:oo(a,o)}r=r.sibling}}var co=8192;function Pl(e,r,a){if(e.subtreeFlags&co)for(e=e.child;e!==null;)t0(e,r,a),e=e.sibling}function t0(e,r,a){switch(e.tag){case 26:Pl(e,r,a),e.flags&co&&e.memoizedState!==null&&ob(a,hs,e.memoizedState,e.memoizedProps);break;case 5:Pl(e,r,a);break;case 3:case 4:var o=hs;hs=Vc(e.stateNode.containerInfo),Pl(e,r,a),hs=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=co,co=16777216,Pl(e,r,a),co=o):Pl(e,r,a));break;default:Pl(e,r,a)}}function r0(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function uo(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var o=r[a];Rt=o,a0(o,e)}r0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)s0(e),e=e.sibling}function s0(e){switch(e.tag){case 0:case 11:case 15:uo(e),e.flags&2048&&Za(9,e,e.return);break;case 3:uo(e);break;case 12:uo(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,Mc(e)):uo(e);break;default:uo(e)}}function Mc(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var o=r[a];Rt=o,a0(o,e)}r0(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Za(8,r,r.return),Mc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Mc(r));break;default:Mc(r)}e=e.sibling}}function a0(e,r){for(;Rt!==null;){var a=Rt;switch(a.tag){case 0:case 11:case 15:Za(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Pn(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Rt=o;else e:for(a=e;Rt!==null;){o=Rt;var u=o.sibling,f=o.return;if(Wm(o),o===a){Rt=null;break e}if(u!==null){u.return=f,Rt=u;break e}Rt=f}}}var Np={getCacheForType:function(e){var r=ft(mt),a=r.data.get(e);return a===void 0&&(a=e(),r.data.set(e,a)),a},cacheSignal:function(){return ft(mt).controller.signal}},Sp=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Xe=null,ze=null,Ue=0,Ve=0,Ar=null,Ja=!1,$l=!1,Uu=!1,xa=0,gt=0,Qa=0,Kn=0,Bu=0,kr=0,Il=0,ho=null,hr=null,Pu=!1,zc=0,n0=0,Lc=1/0,Uc=null,Xa=null,Et=0,en=null,Hl=null,pa=0,$u=0,Iu=null,l0=null,fo=0,Hu=null;function Tr(){return(Ge&2)!==0&&Ue!==0?Ue&-Ue:k.T!==null?Wu():yi()}function i0(){if(kr===0)if((Ue&536870912)===0||Oe){var e=bn;bn<<=1,(bn&3932160)===0&&(bn=262144),kr=e}else kr=536870912;return e=Xt.current,e!==null&&(e.flags|=32),kr}function fr(e,r,a){(e===Xe&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(ql(e,0),tn(e,Ue,kr,!1)),Gs(e,a),((Ge&2)===0||e!==Xe)&&(e===Xe&&((Ge&2)===0&&(Kn|=a),gt===4&&tn(e,Ue,kr,!1)),Ls(e))}function o0(e,r,a){if((Ge&6)!==0)throw Error(l(327));var o=!a&&(r&127)===0&&(r&e.expiredLanes)===0||xr(e,r),u=o?Ep(e,r):Gu(e,r,!0),f=o;do{if(u===0){$l&&!o&&tn(e,r,0,!1);break}else{if(a=e.current.alternate,f&&!_p(a)){u=Gu(e,r,!1),f=!1;continue}if(u===2){if(f=r,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var N=e;u=ho;var L=N.current.memoizedState.isDehydrated;if(L&&(ql(N,v).flags|=256),v=Gu(N,v,!1),v!==2){if(Uu&&!L){N.errorRecoveryDisabledLanes|=f,Kn|=f,u=4;break e}f=hr,hr=u,f!==null&&(hr===null?hr=f:hr.push.apply(hr,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){ql(e,0),tn(e,r,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(l(345));case 4:if((r&4194048)!==r)break;case 6:tn(o,r,kr,!Ja);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(l(329))}if((r&62914560)===r&&(u=zc+300-rr(),10<u)){if(tn(o,r,kr,!Ja),bs(o,0,!0)!==0)break e;pa=r,o.timeoutHandle=P0(c0.bind(null,o,a,hr,Uc,Pu,r,kr,Kn,Il,Ja,f,"Throttled",-0,0),u);break e}c0(o,a,hr,Uc,Pu,r,kr,Kn,Il,Ja,f,null,-0,0)}}break}while(!0);Ls(e)}function c0(e,r,a,o,u,f,v,N,L,W,le,ue,Z,te){if(e.timeoutHandle=-1,ue=r.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:br},t0(r,f,ue);var ve=(f&62914560)===f?zc-rr():(f&4194048)===f?n0-rr():0;if(ve=cb(ue,ve),ve!==null){pa=f,e.cancelPendingCommit=ve(p0.bind(null,e,r,f,a,o,u,v,N,L,le,ue,null,Z,te)),tn(e,f,v,!W);return}}p0(e,r,f,a,o,u,v,N,L)}function _p(e){for(var r=e;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var u=a[o],f=u.getSnapshot;u=u.value;try{if(!ar(f(),u))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function tn(e,r,a,o){r&=~Bu,r&=~Kn,e.suspendedLanes|=r,e.pingedLanes&=~r,o&&(e.warmLanes|=r),o=e.expirationTimes;for(var u=r;0<u;){var f=31-Mt(u),v=1<<f;o[f]=-1,u&=~v}a!==0&&pi(e,a,r)}function Bc(){return(Ge&6)===0?(mo(0),!1):!0}function qu(){if(ze!==null){if(Ve===0)var e=ze.return;else e=ze,Rs=Ts=null,nu(e),Fa=null,$n=0,e=ze;for(;e!==null;)$m(e.alternate,e),e=e.return;ze=null}}function ql(e,r){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Fp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),pa=0,qu(),Xe=e,ze=a=Cs(e.current,null),Ue=r,Ve=0,Ar=null,Ja=!1,$l=xr(e,r),Uu=!1,Il=kr=Bu=Kn=Qa=gt=0,hr=ho=null,Pu=!1,(r&8)!==0&&(r|=r&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=r;0<o;){var u=31-Mt(o),f=1<<u;r|=e[u],o&=~f}return xa=r,qi(),a}function d0(e,r){j=null,k.H=so,r===$r||r===is?(r=Wi(),Ve=3):r===sa?(r=Wi(),Ve=4):Ve=r===wu?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ar=r,ze===null&&(gt=1,Ec(e,Tt(r,e.current)))}function u0(){var e=Xt.current;return e===null?!0:(Ue&4194048)===Ue?ir===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===ir:!1}function h0(){var e=k.H;return k.H=so,e===null?so:e}function f0(){var e=k.A;return k.A=Np,e}function Pc(){gt=4,Ja||(Ue&4194048)!==Ue&&Xt.current!==null||($l=!0),(Qa&134217727)===0&&(Kn&134217727)===0||Xe===null||tn(Xe,Ue,kr,!1)}function Gu(e,r,a){var o=Ge;Ge|=2;var u=h0(),f=f0();(Xe!==e||Ue!==r)&&(Uc=null,ql(e,r)),r=!1;var v=gt;e:do try{if(Ve!==0&&ze!==null){var N=ze,L=Ar;switch(Ve){case 8:qu(),v=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(r=!0);var W=Ve;if(Ve=0,Ar=null,Gl(e,N,L,W),a&&$l){v=0;break e}break;default:W=Ve,Ve=0,Ar=null,Gl(e,N,L,W)}}Cp(),v=gt;break}catch(le){d0(e,le)}while(!0);return r&&e.shellSuspendCounter++,Rs=Ts=null,Ge=o,k.H=u,k.A=f,ze===null&&(Xe=null,Ue=0,qi()),v}function Cp(){for(;ze!==null;)m0(ze)}function Ep(e,r){var a=Ge;Ge|=2;var o=h0(),u=f0();Xe!==e||Ue!==r?(Uc=null,Lc=rr()+500,ql(e,r)):$l=xr(e,r);e:do try{if(Ve!==0&&ze!==null){r=ze;var f=Ar;t:switch(Ve){case 1:Ve=0,Ar=null,Gl(e,r,f,1);break;case 2:case 9:if(Ds(f)){Ve=0,Ar=null,g0(r);break}r=function(){Ve!==2&&Ve!==9||Xe!==e||(Ve=7),Ls(e)},f.then(r,r);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Ds(f)?(Ve=0,Ar=null,g0(r)):(Ve=0,Ar=null,Gl(e,r,f,7));break;case 5:var v=null;switch(ze.tag){case 26:v=ze.memoizedState;case 5:case 27:var N=ze;if(v?eg(v):N.stateNode.complete){Ve=0,Ar=null;var L=N.sibling;if(L!==null)ze=L;else{var W=N.return;W!==null?(ze=W,$c(W)):ze=null}break t}}Ve=0,Ar=null,Gl(e,r,f,5);break;case 6:Ve=0,Ar=null,Gl(e,r,f,6);break;case 8:qu(),gt=6;break e;default:throw Error(l(462))}}Ap();break}catch(le){d0(e,le)}while(!0);return Rs=Ts=null,k.H=o,k.A=u,Ge=a,ze!==null?0:(Xe=null,Ue=0,qi(),gt)}function Ap(){for(;ze!==null&&!xn();)m0(ze)}function m0(e){var r=Bm(e.alternate,e,xa);e.memoizedProps=e.pendingProps,r===null?$c(e):ze=r}function g0(e){var r=e,a=r.alternate;switch(r.tag){case 15:case 0:r=Dm(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=Dm(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:nu(r);default:$m(a,r),r=ze=Ln(r,xa),r=Bm(a,r,xa)}e.memoizedProps=e.pendingProps,r===null?$c(e):ze=r}function Gl(e,r,a,o){Rs=Ts=null,nu(r),Fa=null,$n=0;var u=r.return;try{if(xp(e,u,r,a,Ue)){gt=1,Ec(e,Tt(a,e.current)),ze=null;return}}catch(f){if(u!==null)throw ze=u,f;gt=1,Ec(e,Tt(a,e.current)),ze=null;return}r.flags&32768?(Oe||o===1?e=!0:$l||(Ue&536870912)!==0?e=!1:(Ja=e=!0,(o===2||o===9||o===3||o===6)&&(o=Xt.current,o!==null&&o.tag===13&&(o.flags|=16384))),x0(r,e)):$c(r)}function $c(e){var r=e;do{if((r.flags&32768)!==0){x0(r,Ja);return}e=r.return;var a=vp(r.alternate,r,xa);if(a!==null){ze=a;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=e}while(r!==null);gt===0&&(gt=5)}function x0(e,r){do{var a=yp(e.alternate,e);if(a!==null){a.flags&=32767,ze=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(e=e.sibling,e!==null)){ze=e;return}ze=e=a}while(e!==null);gt=6,ze=null}function p0(e,r,a,o,u,f,v,N,L){e.cancelPendingCommit=null;do Ic();while(Et!==0);if((Ge&6)!==0)throw Error(l(327));if(r!==null){if(r===e.current)throw Error(l(177));if(f=r.lanes|r.childLanes,f|=$a,il(e,a,f,v,N,L),e===Xe&&(ze=Xe=null,Ue=0),Hl=r,en=e,pa=a,$u=f,Iu=u,l0=o,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Dp(nl,function(){return j0(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||o){o=k.T,k.T=null,u=G.p,G.p=2,v=Ge,Ge|=4;try{wp(e,r,a)}finally{Ge=v,G.p=u,k.T=o}}Et=1,b0(),v0(),y0()}}function b0(){if(Et===1){Et=0;var e=en,r=Hl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var o=G.p;G.p=2;var u=Ge;Ge|=4;try{Qm(r,e);var f=rh,v=Kd(e.containerInfo),N=f.focusedElem,L=f.selectionRange;if(v!==N&&N&&N.ownerDocument&&Wd(N.ownerDocument.documentElement,N)){if(L!==null&&ic(N)){var W=L.start,le=L.end;if(le===void 0&&(le=W),"selectionStart"in N)N.selectionStart=W,N.selectionEnd=Math.min(le,N.value.length);else{var ue=N.ownerDocument||document,Z=ue&&ue.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),ve=N.textContent.length,_e=Math.min(L.start,ve),Ze=L.end===void 0?_e:Math.min(L.end,ve);!te.extend&&_e>Ze&&(v=Ze,Ze=_e,_e=v);var H=Cl(N,_e),$=Cl(N,Ze);if(H&&$&&(te.rangeCount!==1||te.anchorNode!==H.node||te.anchorOffset!==H.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Y=ue.createRange();Y.setStart(H.node,H.offset),te.removeAllRanges(),_e>Ze?(te.addRange(Y),te.extend($.node,$.offset)):(Y.setEnd($.node,$.offset),te.addRange(Y))}}}}for(ue=[],te=N;te=te.parentNode;)te.nodeType===1&&ue.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ue.length;N++){var ce=ue[N];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Xc=!!th,rh=th=null}finally{Ge=u,G.p=o,k.T=a}}e.current=r,Et=2}}function v0(){if(Et===2){Et=0;var e=en,r=Hl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var o=G.p;G.p=2;var u=Ge;Ge|=4;try{Vm(e,r.alternate,r)}finally{Ge=u,G.p=o,k.T=a}}Et=3}}function y0(){if(Et===4||Et===3){Et=0,yf();var e=en,r=Hl,a=pa,o=l0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Et=5:(Et=0,Hl=en=null,w0(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Xa=null),Yo(a),r=r.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(pn,r,void 0,(r.current.flags&128)===128)}catch{}if(o!==null){r=k.T,u=G.p,G.p=2,k.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var N=o[v];f(N.value,{componentStack:N.stack})}}finally{k.T=r,G.p=u}}(pa&3)!==0&&Ic(),Ls(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===Hu?fo++:(fo=0,Hu=e):fo=0,mo(0)}}function w0(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,Pn(r)))}function Ic(){return b0(),v0(),y0(),j0()}function j0(){if(Et!==5)return!1;var e=en,r=$u;$u=0;var a=Yo(pa),o=k.T,u=G.p;try{G.p=32>a?32:a,k.T=null,a=Iu,Iu=null;var f=en,v=pa;if(Et=0,Hl=en=null,pa=0,(Ge&6)!==0)throw Error(l(331));var N=Ge;if(Ge|=4,s0(f.current),e0(f,f.current,v,a),Ge=N,mo(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(pn,f)}catch{}return!0}finally{G.p=u,k.T=o,w0(e,r)}}function N0(e,r,a){r=Tt(a,r),r=yu(e.stateNode,r,2),e=Os(e,r,2),e!==null&&(Gs(e,2),Ls(e))}function We(e,r,a){if(e.tag===3)N0(e,e,a);else for(;r!==null;){if(r.tag===3){N0(r,e,a);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xa===null||!Xa.has(o))){e=Tt(a,e),a=Sm(2),o=Os(r,a,2),o!==null&&(_m(a,o,r,e),Gs(o,2),Ls(o));break}}r=r.return}}function Fu(e,r,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Sp;var u=new Set;o.set(r,u)}else u=o.get(r),u===void 0&&(u=new Set,o.set(r,u));u.has(a)||(Uu=!0,u.add(a),e=kp.bind(null,e,r,a),r.then(e,e))}function kp(e,r,a){var o=e.pingCache;o!==null&&o.delete(r),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Xe===e&&(Ue&a)===a&&(gt===4||gt===3&&(Ue&62914560)===Ue&&300>rr()-zc?(Ge&2)===0&&ql(e,0):Bu|=a,Il===Ue&&(Il=0)),Ls(e)}function S0(e,r){r===0&&(r=Fo()),e=Lr(e,r),e!==null&&(Gs(e,r),Ls(e))}function Tp(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),S0(e,a)}function Rp(e,r){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(r),S0(e,a)}function Dp(e,r){return Ot(e,r)}var Hc=null,Fl=null,Yu=!1,qc=!1,Vu=!1,rn=0;function Ls(e){e!==Fl&&e.next===null&&(Fl===null?Hc=Fl=e:Fl=Fl.next=e),qc=!0,Yu||(Yu=!0,Mp())}function mo(e,r){if(!Vu&&qc){Vu=!0;do for(var a=!1,o=Hc;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var v=o.suspendedLanes,N=o.pingedLanes;f=(1<<31-Mt(42|e)+1)-1,f&=u&~(v&~N),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,A0(o,f))}else f=Ue,f=bs(o,o===Xe?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||xr(o,f)||(a=!0,A0(o,f));o=o.next}while(a);Vu=!1}}function Op(){_0()}function _0(){qc=Yu=!1;var e=0;rn!==0&&Gp()&&(e=rn);for(var r=rr(),a=null,o=Hc;o!==null;){var u=o.next,f=C0(o,r);f===0?(o.next=null,a===null?Hc=u:a.next=u,u===null&&(Fl=a)):(a=o,(e!==0||(f&3)!==0)&&(qc=!0)),o=u}Et!==0&&Et!==5||mo(e),rn!==0&&(rn=0)}function C0(e,r){for(var a=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Mt(f),N=1<<v,L=u[v];L===-1?((N&a)===0||(N&o)!==0)&&(u[v]=yn(N,r)):L<=r&&(e.expiredLanes|=N),f&=~N}if(r=Xe,a=Ue,a=bs(e,e===r?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===r&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&et(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||xr(e,a)){if(r=a&-a,r===e.callbackPriority)return r;switch(o!==null&&et(o),Yo(a)){case 2:case 8:a=qo;break;case 32:a=nl;break;case 268435456:a=Go;break;default:a=nl}return o=E0.bind(null,e),a=Ot(a,o),e.callbackPriority=r,e.callbackNode=a,r}return o!==null&&o!==null&&et(o),e.callbackPriority=2,e.callbackNode=null,2}function E0(e,r){if(Et!==0&&Et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ic()&&e.callbackNode!==a)return null;var o=Ue;return o=bs(e,e===Xe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(o0(e,o,r),C0(e,rr()),e.callbackNode!=null&&e.callbackNode===a?E0.bind(null,e):null)}function A0(e,r){if(Ic())return null;o0(e,r,!0)}function Mp(){Yp(function(){(Ge&6)!==0?Ot(gi,Op):_0()})}function Wu(){if(rn===0){var e=Ga;e===0&&(e=Hs,Hs<<=1,(Hs&261888)===0&&(Hs=256)),rn=e}return rn}function k0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ml(""+e)}function T0(e,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,e.id&&a.setAttribute("form",e.id),r.parentNode.insertBefore(a,r),e=new FormData(e),a.parentNode.removeChild(a),e}function zp(e,r,a,o,u){if(r==="submit"&&a&&a.stateNode===u){var f=k0((u[kt]||null).action),v=o.submitter;v&&(r=(r=v[kt]||null)?k0(r.formAction):v.getAttribute("formAction"),r!==null&&(f=r,v=null));var N=new Ei("action","action",null,o,u);e.push({event:N,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(rn!==0){var L=v?T0(u,v):new FormData(u);mu(a,{pending:!0,data:L,method:u.method,action:f},null,L)}}else typeof f=="function"&&(N.preventDefault(),L=v?T0(u,v):new FormData(u),mu(a,{pending:!0,data:L,method:u.method,action:f},f,L))},currentTarget:u}]})}}for(var Ku=0;Ku<dc.length;Ku++){var Zu=dc[Ku],Lp=Zu.toLowerCase(),Up=Zu[0].toUpperCase()+Zu.slice(1);zr(Lp,"on"+Up)}zr(Pi,"onAnimationEnd"),zr(Pa,"onAnimationIteration"),zr(Zd,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr($i,"onTransitionRun"),zr(Mf,"onTransitionStart"),zr(Ii,"onTransitionCancel"),zr(Jd,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),Wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function R0(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],u=o.event;o=o.listeners;e:{var f=void 0;if(r)for(var v=o.length-1;0<=v;v--){var N=o[v],L=N.instance,W=N.currentTarget;if(N=N.listener,L!==f&&u.isPropagationStopped())break e;f=N,u.currentTarget=W;try{f(u)}catch(le){Hi(le)}u.currentTarget=null,f=L}else for(v=0;v<o.length;v++){if(N=o[v],L=N.instance,W=N.currentTarget,N=N.listener,L!==f&&u.isPropagationStopped())break e;f=N,u.currentTarget=W;try{f(u)}catch(le){Hi(le)}u.currentTarget=null,f=L}}}}function Le(e,r){var a=r[ji];a===void 0&&(a=r[ji]=new Set);var o=e+"__bubble";a.has(o)||(D0(r,e,2,!1),a.add(o))}function Ju(e,r,a){var o=0;r&&(o|=4),D0(a,e,o,r)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function Qu(e){if(!e[Gc]){e[Gc]=!0,kd.forEach(function(a){a!=="selectionchange"&&(Bp.has(a)||Ju(a,!1,e),Ju(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Gc]||(r[Gc]=!0,Ju("selectionchange",!1,r))}}function D0(e,r,a,o){switch(ig(r)){case 2:var u=hb;break;case 8:u=fb;break;default:u=fh}a=u.bind(null,r,a,e),u=void 0,!Ks||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(r,a,{capture:!0,passive:u}):e.addEventListener(r,a,!0):u!==void 0?e.addEventListener(r,a,{passive:u}):e.addEventListener(r,a,!1)}function Xu(e,r,a,o,u){var f=o;if((r&1)===0&&(r&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var N=o.stateNode.containerInfo;if(N===u)break;if(v===4)for(v=o.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;N!==null;){if(v=Fs(N),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){o=f=v;continue e}N=N.parentNode}}o=o.return}gl(function(){var W=f,le=Da(a),ue=[];e:{var Z=Qd.get(e);if(Z!==void 0){var te=Ei,ve=e;switch(e){case"keypress":if(xl(a)===0)break e;case"keydown":case"keyup":te=ec;break;case"focusin":ve="focus",te=Ri;break;case"focusout":ve="blur",te=Ri;break;case"beforeblur":case"afterblur":te=Ri;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Ns;break;case Pi:case Pa:case Zd:te=bl;break;case Jd:te=Sf;break;case"scroll":case"scrollend":te=zd;break;case"wheel":te=_f;break;case"copy":case"cut":case"paste":te=Di;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Mi;break;case"toggle":case"beforetoggle":te=Ef}var _e=(r&4)!==0,Ze=!_e&&(e==="scroll"||e==="scrollend"),H=_e?Z!==null?Z+"Capture":null:Z;_e=[];for(var $=W,Y;$!==null;){var ce=$;if(Y=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Y===null||H===null||(ce=Ws($,H),ce!=null&&_e.push(xo($,ce,Y))),Ze)break;$=$.return}0<_e.length&&(Z=new te(Z,ve,null,a,le),ue.push({event:Z,listeners:_e}))}}if((r&7)===0){e:{if(Z=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",Z&&a!==Vs&&(ve=a.relatedTarget||a.fromElement)&&(Fs(ve)||ve[Ea]))break e;if((te||Z)&&(Z=le.window===le?le:(Z=le.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(ve=a.relatedTarget||a.toElement,te=W,ve=ve?Fs(ve):null,ve!==null&&(Ze=d(ve),_e=ve.tag,ve!==Ze||_e!==5&&_e!==27&&_e!==6)&&(ve=null)):(te=null,ve=W),te!==ve)){if(_e=Ma,ce="onMouseLeave",H="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(_e=Mi,ce="onPointerLeave",H="onPointerEnter",$="pointer"),Ze=te==null?Z:Aa(te),Y=ve==null?Z:Aa(ve),Z=new _e(ce,$+"leave",te,a,le),Z.target=Ze,Z.relatedTarget=Y,ce=null,Fs(le)===W&&(_e=new _e(H,$+"enter",ve,a,le),_e.target=Y,_e.relatedTarget=Ze,ce=_e),Ze=ce,te&&ve)t:{for(_e=Pp,H=te,$=ve,Y=0,ce=H;ce;ce=_e(ce))Y++;ce=0;for(var Ne=$;Ne;Ne=_e(Ne))ce++;for(;0<Y-ce;)H=_e(H),Y--;for(;0<ce-Y;)$=_e($),ce--;for(;Y--;){if(H===$||$!==null&&H===$.alternate){_e=H;break t}H=_e(H),$=_e($)}_e=null}else _e=null;te!==null&&O0(ue,Z,te,_e,!1),ve!==null&&Ze!==null&&O0(ue,Ze,ve,_e,!0)}}e:{if(Z=W?Aa(W):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var Ie=Id;else if($d(Z))if(Hd)Ie=Of;else{Ie=Df;var we=Yd}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&_n(W.elementType)&&(Ie=Id):Ie=lc;if(Ie&&(Ie=Ie(e,W))){Sl(ue,Ie,a,le);break e}we&&we(e,Z,W),e==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&Ta(Z,"number",Z.value)}switch(we=W?Aa(W):window,e){case"focusin":($d(we)||we.contentEditable==="true")&&(Rn=we,oc=W,El=null);break;case"focusout":El=oc=Rn=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,Al(ue,a,le);break;case"selectionchange":if(Bi)break;case"keydown":case"keyup":Al(ue,a,le)}var De;if(sc)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Tn?Ua(e,a)&&(Be="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Pd&&a.locale!=="ko"&&(Tn||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Tn&&(De=Md()):(yr=le,Qo="value"in yr?yr.value:yr.textContent,Tn=!0)),we=Fc(W,Be),0<we.length&&(Be=new vl(Be,e,null,a,le),ue.push({event:Be,listeners:we}),De?Be.data=De:(De=Ba(a),De!==null&&(Be.data=De)))),(De=Af?zi(e,a):kf(e,a))&&(Be=Fc(W,"onBeforeInput"),0<Be.length&&(we=new vl("onBeforeInput","beforeinput",null,a,le),ue.push({event:we,listeners:Be}),we.data=De)),zp(ue,e,W,a,le)}R0(ue,r)})}function xo(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Fc(e,r){for(var a=r+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Ws(e,a),u!=null&&o.unshift(xo(e,u,f)),u=Ws(e,r),u!=null&&o.push(xo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Pp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function O0(e,r,a,o,u){for(var f=r._reactName,v=[];a!==null&&a!==o;){var N=a,L=N.alternate,W=N.stateNode;if(N=N.tag,L!==null&&L===o)break;N!==5&&N!==26&&N!==27||W===null||(L=W,u?(W=Ws(a,f),W!=null&&v.unshift(xo(a,W,L))):u||(W=Ws(a,f),W!=null&&v.push(xo(a,W,L)))),a=a.return}v.length!==0&&e.push({event:r,listeners:v})}var $p=/\r\n?/g,Ip=/\u0000|\uFFFD/g;function M0(e){return(typeof e=="string"?e:""+e).replace($p,`
`).replace(Ip,"")}function z0(e,r){return r=M0(r),M0(e)===r}function Ke(e,r,a,o,u,f){switch(a){case"children":typeof o=="string"?r==="body"||r==="textarea"&&o===""||Mr(e,o):(typeof o=="number"||typeof o=="bigint")&&r!=="body"&&Mr(e,""+o);break;case"className":ka(e,"class",o);break;case"tabIndex":ka(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ka(e,a,o);break;case"style":Dd(e,o,f);break;case"data":if(r!=="object"){ka(e,"data",o);break}case"src":case"href":if(o===""&&(r!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ml(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Ke(e,r,"name",u.name,u,null),Ke(e,r,"formEncType",u.formEncType,u,null),Ke(e,r,"formMethod",u.formMethod,u,null),Ke(e,r,"formTarget",u.formTarget,u,null)):(Ke(e,r,"encType",u.encType,u,null),Ke(e,r,"method",u.method,u,null),Ke(e,r,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ml(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=br);break;case"onScroll":o!=null&&Le("scroll",e);break;case"onScrollEnd":o!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(a=o.__html,a!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ml(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Le("beforetoggle",e),Le("toggle",e),Sn(e,"popover",o);break;case"xlinkActuate":pr(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":pr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":pr(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":pr(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":pr(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":pr(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":pr(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":pr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":pr(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Sn(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Od.get(a)||a,Sn(e,a,o))}}function eh(e,r,a,o,u,f){switch(a){case"style":Dd(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(a=o.__html,a!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Mr(e,o):(typeof o=="number"||typeof o=="bigint")&&Mr(e,""+o);break;case"onScroll":o!=null&&Le("scroll",e);break;case"onScrollEnd":o!=null&&Le("scrollend",e);break;case"onClick":o!=null&&(e.onclick=br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),r=a.slice(2,u?a.length-7:void 0),f=e[kt]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(r,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(r,o,u);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Sn(e,a,o)}}}function Bt(e,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var o=!1,u=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,r));default:Ke(e,r,f,v,a,null)}}u&&Ke(e,r,"srcSet",a.srcSet,a,null),o&&Ke(e,r,"src",a.src,a,null);return;case"input":Le("invalid",e);var N=f=v=u=null,L=null,W=null;for(o in a)if(a.hasOwnProperty(o)){var le=a[o];if(le!=null)switch(o){case"name":u=le;break;case"type":v=le;break;case"checked":L=le;break;case"defaultChecked":W=le;break;case"value":f=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(l(137,r));break;default:Ke(e,r,o,le,a,null)}}Ys(e,f,N,L,W,v,u,!1);return;case"select":Le("invalid",e),o=v=f=null;for(u in a)if(a.hasOwnProperty(u)&&(N=a[u],N!=null))switch(u){case"value":f=N;break;case"defaultValue":v=N;break;case"multiple":o=N;default:Ke(e,r,u,N,a,null)}r=f,a=v,e.multiple=!!o,r!=null?Ra(e,!!o,r,!1):a!=null&&Ra(e,!!o,a,!0);return;case"textarea":Le("invalid",e),f=u=o=null;for(v in a)if(a.hasOwnProperty(v)&&(N=a[v],N!=null))switch(v){case"value":o=N;break;case"defaultValue":u=N;break;case"children":f=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(l(91));break;default:Ke(e,r,v,N,a,null)}Ko(e,o,u,f);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ke(e,r,L,o,a,null)}return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(o=0;o<go.length;o++)Le(go[o],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in a)if(a.hasOwnProperty(W)&&(o=a[W],o!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,r));default:Ke(e,r,W,o,a,null)}return;default:if(_n(r)){for(le in a)a.hasOwnProperty(le)&&(o=a[le],o!==void 0&&eh(e,r,le,o,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(o=a[N],o!=null&&Ke(e,r,N,o,a,null))}function Hp(e,r,a,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,N=null,L=null,W=null,le=null;for(te in a){var ue=a[te];if(a.hasOwnProperty(te)&&ue!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":L=ue;default:o.hasOwnProperty(te)||Ke(e,r,te,null,o,ue)}}for(var Z in o){var te=o[Z];if(ue=a[Z],o.hasOwnProperty(Z)&&(te!=null||ue!=null))switch(Z){case"type":f=te;break;case"name":u=te;break;case"checked":W=te;break;case"defaultChecked":le=te;break;case"value":v=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(l(137,r));break;default:te!==ue&&Ke(e,r,Z,te,o,ue)}}dl(e,v,N,L,W,le,f,u);return;case"select":te=v=N=Z=null;for(f in a)if(L=a[f],a.hasOwnProperty(f)&&L!=null)switch(f){case"value":break;case"multiple":te=L;default:o.hasOwnProperty(f)||Ke(e,r,f,null,o,L)}for(u in o)if(f=o[u],L=a[u],o.hasOwnProperty(u)&&(f!=null||L!=null))switch(u){case"value":Z=f;break;case"defaultValue":N=f;break;case"multiple":v=f;default:f!==L&&Ke(e,r,u,f,o,L)}r=N,a=v,o=te,Z!=null?Ra(e,!!a,Z,!1):!!o!=!!a&&(r!=null?Ra(e,!!a,r,!0):Ra(e,!!a,a?[]:"",!1));return;case"textarea":te=Z=null;for(N in a)if(u=a[N],a.hasOwnProperty(N)&&u!=null&&!o.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ke(e,r,N,null,o,u)}for(v in o)if(u=o[v],f=a[v],o.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":Z=u;break;case"defaultValue":te=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==f&&Ke(e,r,v,u,o,f)}ul(e,Z,te);return;case"option":for(var ve in a)if(Z=a[ve],a.hasOwnProperty(ve)&&Z!=null&&!o.hasOwnProperty(ve))switch(ve){case"selected":e.selected=!1;break;default:Ke(e,r,ve,null,o,Z)}for(L in o)if(Z=o[L],te=a[L],o.hasOwnProperty(L)&&Z!==te&&(Z!=null||te!=null))switch(L){case"selected":e.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Ke(e,r,L,Z,o,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)Z=a[_e],a.hasOwnProperty(_e)&&Z!=null&&!o.hasOwnProperty(_e)&&Ke(e,r,_e,null,o,Z);for(W in o)if(Z=o[W],te=a[W],o.hasOwnProperty(W)&&Z!==te&&(Z!=null||te!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(l(137,r));break;default:Ke(e,r,W,Z,o,te)}return;default:if(_n(r)){for(var Ze in a)Z=a[Ze],a.hasOwnProperty(Ze)&&Z!==void 0&&!o.hasOwnProperty(Ze)&&eh(e,r,Ze,void 0,o,Z);for(le in o)Z=o[le],te=a[le],!o.hasOwnProperty(le)||Z===te||Z===void 0&&te===void 0||eh(e,r,le,Z,o,te);return}}for(var H in a)Z=a[H],a.hasOwnProperty(H)&&Z!=null&&!o.hasOwnProperty(H)&&Ke(e,r,H,null,o,Z);for(ue in o)Z=o[ue],te=a[ue],!o.hasOwnProperty(ue)||Z===te||Z==null&&te==null||Ke(e,r,ue,Z,o,te)}function L0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,r=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var u=a[o],f=u.transferSize,v=u.initiatorType,N=u.duration;if(f&&N&&L0(v)){for(v=0,N=u.responseEnd,o+=1;o<a.length;o++){var L=a[o],W=L.startTime;if(W>N)break;var le=L.transferSize,ue=L.initiatorType;le&&L0(ue)&&(L=L.responseEnd,v+=le*(L<N?1:(N-W)/(L-W)))}if(--o,r+=8*(f+v)/(u.duration/1e3),e++,10<e)break}}if(0<e)return r/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var th=null,rh=null;function Yc(e){return e.nodeType===9?e:e.ownerDocument}function U0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B0(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function sh(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ah=null;function Gp(){var e=window.event;return e&&e.type==="popstate"?e===ah?!1:(ah=e,!0):(ah=null,!1)}var P0=typeof setTimeout=="function"?setTimeout:void 0,Fp=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,Yp=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(e){return $0.resolve(null).then(e).catch(Vp)}:P0;function Vp(e){setTimeout(function(){throw e})}function sn(e){return e==="head"}function I0(e,r){var a=r,o=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(u),Kl(r);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")po(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,po(a);for(var f=a.firstChild;f;){var v=f.nextSibling,N=f.nodeName;f[vs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=v}}else a==="body"&&po(e.ownerDocument.body);a=u}while(a);Kl(r)}function H0(e,r){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function nh(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nh(a),Wo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Wp(e,r,a,o){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[vs])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Gr(e.nextSibling),e===null)break}return null}function Kp(e,r,a){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gr(e.nextSibling),e===null))return null;return e}function q0(e,r){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Gr(e.nextSibling),e===null))return null;return e}function lh(e){return e.data==="$?"||e.data==="$~"}function ih(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Zp(e,r){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=r;else if(e.data!=="$?"||a.readyState!=="loading")r();else{var o=function(){r(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Gr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return e}var oh=null;function G0(e){e=e.nextSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(r===0)return Gr(e.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}e=e.nextSibling}return null}function F0(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return e;r--}else a!=="/$"&&a!=="/&"||r++}e=e.previousSibling}return null}function Y0(e,r,a){switch(r=Yc(a),e){case"html":if(e=r.documentElement,!e)throw Error(l(452));return e;case"head":if(e=r.head,!e)throw Error(l(453));return e;case"body":if(e=r.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function po(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Wo(e)}var Fr=new Map,V0=new Set;function Vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ba=G.d;G.d={f:Jp,r:Qp,D:Xp,C:eb,L:tb,m:rb,X:ab,S:sb,M:nb};function Jp(){var e=ba.f(),r=Bc();return e||r}function Qp(e){var r=wn(e);r!==null&&r.tag===5&&r.type==="form"?dm(r):ba.r(e)}var Yl=typeof document>"u"?null:document;function W0(e,r,a){var o=Yl;if(o&&typeof r=="string"&&r){var u=Kt(r);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),V0.has(u)||(V0.add(u),e={rel:e,crossOrigin:a,href:r},o.querySelector(u)===null&&(r=o.createElement("link"),Bt(r,"link",e),ht(r),o.head.appendChild(r)))}}function Xp(e){ba.D(e),W0("dns-prefetch",e,null)}function eb(e,r){ba.C(e,r),W0("preconnect",e,r)}function tb(e,r,a){ba.L(e,r,a);var o=Yl;if(o&&e&&r){var u='link[rel="preload"][as="'+Kt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+Kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+Kt(a.imageSizes)+'"]')):u+='[href="'+Kt(e)+'"]';var f=u;switch(r){case"style":f=Vl(e);break;case"script":f=Wl(e)}Fr.has(f)||(e=y({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:e,as:r},a),Fr.set(f,e),o.querySelector(u)!==null||r==="style"&&o.querySelector(bo(f))||r==="script"&&o.querySelector(vo(f))||(r=o.createElement("link"),Bt(r,"link",e),ht(r),o.head.appendChild(r)))}}function rb(e,r){ba.m(e,r);var a=Yl;if(a&&e){var o=r&&typeof r.as=="string"?r.as:"script",u='link[rel="modulepreload"][as="'+Kt(o)+'"][href="'+Kt(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Wl(e)}if(!Fr.has(f)&&(e=y({rel:"modulepreload",href:e},r),Fr.set(f,e),a.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vo(f)))return}o=a.createElement("link"),Bt(o,"link",e),ht(o),a.head.appendChild(o)}}}function sb(e,r,a){ba.S(e,r,a);var o=Yl;if(o&&e){var u=jn(o).hoistableStyles,f=Vl(e);r=r||"default";var v=u.get(f);if(!v){var N={loading:0,preload:null};if(v=o.querySelector(bo(f)))N.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":r},a),(a=Fr.get(f))&&ch(e,a);var L=v=o.createElement("link");ht(L),Bt(L,"link",e),L._p=new Promise(function(W,le){L.onload=W,L.onerror=le}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Wc(v,r,o)}v={type:"stylesheet",instance:v,count:1,state:N},u.set(f,v)}}}function ab(e,r){ba.X(e,r);var a=Yl;if(a&&e){var o=jn(a).hoistableScripts,u=Wl(e),f=o.get(u);f||(f=a.querySelector(vo(u)),f||(e=y({src:e,async:!0},r),(r=Fr.get(u))&&dh(e,r),f=a.createElement("script"),ht(f),Bt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function nb(e,r){ba.M(e,r);var a=Yl;if(a&&e){var o=jn(a).hoistableScripts,u=Wl(e),f=o.get(u);f||(f=a.querySelector(vo(u)),f||(e=y({src:e,async:!0,type:"module"},r),(r=Fr.get(u))&&dh(e,r),f=a.createElement("script"),ht(f),Bt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function K0(e,r,a,o){var u=(u=fe.current)?Vc(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Vl(a.href),a=jn(u).hoistableStyles,o=a.get(r),o||(o={type:"style",instance:null,count:0,state:null},a.set(r,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Vl(a.href);var f=jn(u).hoistableStyles,v=f.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=u.querySelector(bo(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Fr.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fr.set(e,a),f||lb(u,e,a,v.state))),r&&o===null)throw Error(l(528,""));return v}if(r&&o!==null)throw Error(l(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Wl(a),a=jn(u).hoistableScripts,o=a.get(r),o||(o={type:"script",instance:null,count:0,state:null},a.set(r,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Vl(e){return'href="'+Kt(e)+'"'}function bo(e){return'link[rel="stylesheet"]['+e+"]"}function Z0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function lb(e,r,a,o){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=e.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),Bt(r,"link",a),ht(r),e.head.appendChild(r))}function Wl(e){return'[src="'+Kt(e)+'"]'}function vo(e){return"script[async]"+e}function J0(e,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var o=e.querySelector('style[data-href~="'+Kt(a.href)+'"]');if(o)return r.instance=o,ht(o),o;var u=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ht(o),Bt(o,"style",u),Wc(o,a.precedence,e),r.instance=o;case"stylesheet":u=Vl(a.href);var f=e.querySelector(bo(u));if(f)return r.state.loading|=4,r.instance=f,ht(f),f;o=Z0(a),(u=Fr.get(u))&&ch(o,u),f=(e.ownerDocument||e).createElement("link"),ht(f);var v=f;return v._p=new Promise(function(N,L){v.onload=N,v.onerror=L}),Bt(f,"link",o),r.state.loading|=4,Wc(f,a.precedence,e),r.instance=f;case"script":return f=Wl(a.src),(u=e.querySelector(vo(f)))?(r.instance=u,ht(u),u):(o=a,(u=Fr.get(f))&&(o=y({},a),dh(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),ht(u),Bt(u,"link",o),e.head.appendChild(u),r.instance=u);case"void":return null;default:throw Error(l(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(o=r.instance,r.state.loading|=4,Wc(o,a.precedence,e));return r.instance}function Wc(e,r,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,v=0;v<o.length;v++){var N=o[v];if(N.dataset.precedence===r)f=N;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(e,r.firstChild))}function ch(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function dh(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var Kc=null;function Q0(e,r,a){if(Kc===null){var o=new Map,u=Kc=new Map;u.set(a,o)}else u=Kc,o=u.get(a),o||(o=new Map,u.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var f=a[u];if(!(f[vs]||f[qe]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(r)||"";v=e+v;var N=o.get(v);N?N.push(f):o.set(v,[f])}}return o}function X0(e,r,a){e=e.ownerDocument||e,e.head.insertBefore(a,r==="title"?e.querySelector("head > title"):null)}function ib(e,r,a){if(a===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function eg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ob(e,r,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Vl(o.href),f=r.querySelector(bo(u));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(e.count++,e=Zc.bind(e),r.then(e,e)),a.state.loading|=4,a.instance=f,ht(f);return}f=r.ownerDocument||r,o=Z0(o),(u=Fr.get(u))&&ch(o,u),f=f.createElement("link"),ht(f);var v=f;v._p=new Promise(function(N,L){v.onload=N,v.onerror=L}),Bt(f,"link",o),a.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Zc.bind(e),r.addEventListener("load",a),r.addEventListener("error",a))}}var uh=0;function cb(e,r){return e.stylesheets&&e.count===0&&Qc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+r);0<e.imgBytes&&uh===0&&(uh=62500*qp());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>uh?50:800)+r);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Jc=null;function Qc(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Jc=new Map,r.forEach(db,e),Jc=null,Zc.call(e))}function db(e,r){if(!(r.state.loading&4)){var a=Jc.get(e);if(a)var o=a.get(null);else{a=new Map,Jc.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}u=r.instance,v=u.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,u),a.set(v,u),this.count++,o=Zc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),r.state.loading|=4}}var yo={$$typeof:B,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function ub(e,r,a,o,u,f,v,N,L){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.hiddenUpdates=_a(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function tg(e,r,a,o,u,f,v,N,L,W,le,ue){return e=new ub(e,r,a,v,L,W,le,ue,N),r=1,f===!0&&(r|=24),f=qt(3,null,null,r),e.current=f,f.stateNode=e,r=Vi(),r.refCount++,e.pooledCache=r,r.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:r},Ml(f),e}function rg(e){return e?(e=st,e):st}function sg(e,r,a,o,u,f){u=rg(u),o.context===null?o.context=u:o.pendingContext=u,o=ds(r),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Os(e,o,r),a!==null&&(fr(a,e,r),Va(a,e,r))}function ag(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function hh(e,r){ag(e,r),(e=e.alternate)&&ag(e,r)}function ng(e){if(e.tag===13||e.tag===31){var r=Lr(e,67108864);r!==null&&fr(r,e,67108864),hh(e,67108864)}}function lg(e){if(e.tag===13||e.tag===31){var r=Tr();r=Ca(r);var a=Lr(e,r);a!==null&&fr(a,e,r),hh(e,r)}}var Xc=!0;function hb(e,r,a,o){var u=k.T;k.T=null;var f=G.p;try{G.p=2,fh(e,r,a,o)}finally{G.p=f,k.T=u}}function fb(e,r,a,o){var u=k.T;k.T=null;var f=G.p;try{G.p=8,fh(e,r,a,o)}finally{G.p=f,k.T=u}}function fh(e,r,a,o){if(Xc){var u=mh(o);if(u===null)Xu(e,r,o,ed,a),og(e,o);else if(gb(u,e,r,a,o))o.stopPropagation();else if(og(e,o),r&4&&-1<mb.indexOf(e)){for(;u!==null;){var f=wn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=qs(f.pendingLanes);if(v!==0){var N=f;for(N.pendingLanes|=2,N.entangledLanes|=2;v;){var L=1<<31-Mt(v);N.entanglements[1]|=L,v&=~L}Ls(f),(Ge&6)===0&&(Lc=rr()+500,mo(0))}}break;case 31:case 13:N=Lr(f,2),N!==null&&fr(N,f,2),Bc(),hh(f,2)}if(f=mh(o),f===null&&Xu(e,r,o,ed,a),f===u)break;u=f}u!==null&&o.stopPropagation()}else Xu(e,r,o,null,a)}}function mh(e){return e=Da(e),gh(e)}var ed=null;function gh(e){if(ed=null,e=Fs(e),e!==null){var r=d(e);if(r===null)e=null;else{var a=r.tag;if(a===13){if(e=h(r),e!==null)return e;e=null}else if(a===31){if(e=g(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return ed=e,null}function ig(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ho()){case gi:return 2;case qo:return 8;case nl:case _d:return 32;case Go:return 268435456;default:return 32}default:return 32}}var xh=!1,an=null,nn=null,ln=null,wo=new Map,jo=new Map,on=[],mb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function og(e,r){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":wo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(r.pointerId)}}function No(e,r,a,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:r,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},r!==null&&(r=wn(r),r!==null&&ng(r)),e):(e.eventSystemFlags|=o,r=e.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),e)}function gb(e,r,a,o,u){switch(r){case"focusin":return an=No(an,e,r,a,o,u),!0;case"dragenter":return nn=No(nn,e,r,a,o,u),!0;case"mouseover":return ln=No(ln,e,r,a,o,u),!0;case"pointerover":var f=u.pointerId;return wo.set(f,No(wo.get(f)||null,e,r,a,o,u)),!0;case"gotpointercapture":return f=u.pointerId,jo.set(f,No(jo.get(f)||null,e,r,a,o,u)),!0}return!1}function cg(e){var r=Fs(e.target);if(r!==null){var a=d(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){e.blockedOn=r,wi(e.priority,function(){lg(a)});return}}else if(r===31){if(r=g(a),r!==null){e.blockedOn=r,wi(e.priority,function(){lg(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function td(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=mh(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Vs=o,a.target.dispatchEvent(o),Vs=null}else return r=wn(a),r!==null&&ng(r),e.blockedOn=a,!1;r.shift()}return!0}function dg(e,r,a){td(e)&&a.delete(r)}function xb(){xh=!1,an!==null&&td(an)&&(an=null),nn!==null&&td(nn)&&(nn=null),ln!==null&&td(ln)&&(ln=null),wo.forEach(dg),jo.forEach(dg)}function rd(e,r){e.blockedOn===r&&(e.blockedOn=null,xh||(xh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xb)))}var sd=null;function ug(e){sd!==e&&(sd=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sd===e&&(sd=null);for(var r=0;r<e.length;r+=3){var a=e[r],o=e[r+1],u=e[r+2];if(typeof o!="function"){if(gh(o||a)===null)continue;break}var f=wn(a);f!==null&&(e.splice(r,3),r-=3,mu(f,{pending:!0,data:u,method:a.method,action:o},o,u))}}))}function Kl(e){function r(L){return rd(L,e)}an!==null&&rd(an,e),nn!==null&&rd(nn,e),ln!==null&&rd(ln,e),wo.forEach(r),jo.forEach(r);for(var a=0;a<on.length;a++){var o=on[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<on.length&&(a=on[0],a.blockedOn===null);)cg(a),a.blockedOn===null&&on.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var u=a[o],f=a[o+1],v=u[kt]||null;if(typeof f=="function")v||ug(a);else if(v){var N=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[kt]||null)N=v.formAction;else if(gh(u)!==null)continue}else N=v.action;typeof N=="function"?a[o+1]=N:(a.splice(o,3),o-=3),ug(a)}}}function hg(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return u=v})},focusReset:"manual",scroll:"manual"})}function r(){u!==null&&(u(),u=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),u!==null&&(u(),u=null)}}}function ph(e){this._internalRoot=e}ad.prototype.render=ph.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(l(409));var a=r.current,o=Tr();sg(a,o,e,r,null,null)},ad.prototype.unmount=ph.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;sg(e.current,2,null,e,null,null),Bc(),r[Ea]=null}};function ad(e){this._internalRoot=e}ad.prototype.unstable_scheduleHydration=function(e){if(e){var r=yi();e={blockedOn:null,target:e,priority:r};for(var a=0;a<on.length&&r!==0&&r<on[a].priority;a++);on.splice(a,0,e),a===0&&cg(e)}};var fg=s.version;if(fg!=="19.2.0")throw Error(l(527,fg,"19.2.0"));G.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(r),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var pb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{pn=nd.inject(pb),Pt=nd}catch{}}return _o.createRoot=function(e,r){if(!c(e))throw Error(l(299));var a=!1,o="",u=ym,f=wm,v=jm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=tg(e,1,!1,null,null,a,o,null,u,f,v,hg),e[Ea]=r.current,Qu(e),new ph(r)},_o.hydrateRoot=function(e,r,a){if(!c(e))throw Error(l(299));var o=!1,u="",f=ym,v=wm,N=jm,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),r=tg(e,1,!0,r,a??null,o,u,L,f,v,N,hg),r.context=rg(null),a=r.current,o=Tr(),o=Ca(o),u=ds(o),u.callback=null,Os(a,u,o),a=o,r.current.lanes=a,Gs(r,a),Ls(r),e[Ea]=r.current,Qu(e),new ad(r)},_o.version="19.2.0",_o}var Ng;function Ab(){if(Ng)return yh.exports;Ng=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(s){console.error(s)}}return i(),yh.exports=Eb(),yh.exports}var kb=Ab();const Tb=rf(kb);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sg="popstate";function Rb(i={}){function s(l,c){let{pathname:d,search:h,hash:g}=l.location;return Bh("",{pathname:d,search:h,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(l,c){return typeof c=="string"?c:Oo(c)}return Ob(s,n,null,i)}function ct(i,s){if(i===!1||i===null||typeof i>"u")throw new Error(s)}function xs(i,s){if(!i){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Db(){return Math.random().toString(36).substring(2,10)}function _g(i,s){return{usr:i.state,key:i.key,idx:s}}function Bh(i,s,n=null,l){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof s=="string"?hi(s):s,state:n,key:s&&s.key||l||Db()}}function Oo({pathname:i="/",search:s="",hash:n=""}){return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function hi(i){let s={};if(i){let n=i.indexOf("#");n>=0&&(s.hash=i.substring(n),i=i.substring(0,n));let l=i.indexOf("?");l>=0&&(s.search=i.substring(l),i=i.substring(0,l)),i&&(s.pathname=i)}return s}function Ob(i,s,n,l={}){let{window:c=document.defaultView,v5Compat:d=!1}=l,h=c.history,g="POP",x=null,p=b();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function b(){return(h.state||{idx:null}).idx}function y(){g="POP";let O=b(),M=O==null?null:O-p;p=O,x&&x({action:g,location:R.location,delta:M})}function w(O,M){g="PUSH";let T=Bh(R.location,O,M);p=b()+1;let B=_g(T,p),K=R.createHref(T);try{h.pushState(B,"",K)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;c.location.assign(K)}d&&x&&x({action:g,location:R.location,delta:1})}function S(O,M){g="REPLACE";let T=Bh(R.location,O,M);p=b();let B=_g(T,p),K=R.createHref(T);h.replaceState(B,"",K),d&&x&&x({action:g,location:R.location,delta:0})}function C(O){return Mb(O)}let R={get action(){return g},get location(){return i(c,h)},listen(O){if(x)throw new Error("A history only accepts one active listener");return c.addEventListener(Sg,y),x=O,()=>{c.removeEventListener(Sg,y),x=null}},createHref(O){return s(c,O)},createURL:C,encodeLocation(O){let M=C(O);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:w,replace:S,go(O){return h.go(O)}};return R}function Mb(i,s=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ct(n,"No window.location.(origin|href) available to create URL");let l=typeof i=="string"?i:Oo(i);return l=l.replace(/ $/,"%20"),!s&&l.startsWith("//")&&(l=n+l),new URL(l,n)}function dx(i,s,n="/"){return zb(i,s,n,!1)}function zb(i,s,n,l){let c=typeof s=="string"?hi(s):s,d=Na(c.pathname||"/",n);if(d==null)return null;let h=ux(i);Lb(h);let g=null;for(let x=0;g==null&&x<h.length;++x){let p=Vb(d);g=Fb(h[x],p,l)}return g}function ux(i,s=[],n=[],l="",c=!1){let d=(h,g,x=c,p)=>{let b={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(l)&&x)return;ct(b.relativePath.startsWith(l),`Absolute route path "${b.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(l.length)}let y=wa([l,b.relativePath]),w=n.concat(b);h.children&&h.children.length>0&&(ct(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),ux(h.children,s,w,y,x)),!(h.path==null&&!h.index)&&s.push({path:y,score:qb(y,h.index),routesMeta:w})};return i.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))d(h,g);else for(let x of hx(h.path))d(h,g,!0,x)}),s}function hx(i){let s=i.split("/");if(s.length===0)return[];let[n,...l]=s,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(l.length===0)return c?[d,""]:[d];let h=hx(l.join("/")),g=[];return g.push(...h.map(x=>x===""?d:[d,x].join("/"))),c&&g.push(...h),g.map(x=>i.startsWith("/")&&x===""?"/":x)}function Lb(i){i.sort((s,n)=>s.score!==n.score?n.score-s.score:Gb(s.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var Ub=/^:[\w-]+$/,Bb=3,Pb=2,$b=1,Ib=10,Hb=-2,Cg=i=>i==="*";function qb(i,s){let n=i.split("/"),l=n.length;return n.some(Cg)&&(l+=Hb),s&&(l+=Pb),n.filter(c=>!Cg(c)).reduce((c,d)=>c+(Ub.test(d)?Bb:d===""?$b:Ib),l)}function Gb(i,s){return i.length===s.length&&i.slice(0,-1).every((l,c)=>l===s[c])?i[i.length-1]-s[s.length-1]:0}function Fb(i,s,n=!1){let{routesMeta:l}=i,c={},d="/",h=[];for(let g=0;g<l.length;++g){let x=l[g],p=g===l.length-1,b=d==="/"?s:s.slice(d.length)||"/",y=gd({path:x.relativePath,caseSensitive:x.caseSensitive,end:p},b),w=x.route;if(!y&&p&&n&&!l[l.length-1].route.index&&(y=gd({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},b)),!y)return null;Object.assign(c,y.params),h.push({params:c,pathname:wa([d,y.pathname]),pathnameBase:Jb(wa([d,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(d=wa([d,y.pathnameBase]))}return h}function gd(i,s){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,l]=Yb(i.path,i.caseSensitive,i.end),c=s.match(n);if(!c)return null;let d=c[0],h=d.replace(/(.)\/+$/,"$1"),g=c.slice(1);return{params:l.reduce((p,{paramName:b,isOptional:y},w)=>{if(b==="*"){let C=g[w]||"";h=d.slice(0,d.length-C.length).replace(/(.)\/+$/,"$1")}const S=g[w];return y&&!S?p[b]=void 0:p[b]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:h,pattern:i}}function Yb(i,s=!1,n=!0){xs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let l=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,x)=>(l.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(l.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,s?void 0:"i"),l]}function Vb(i){try{return i.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),i}}function Na(i,s){if(s==="/")return i;if(!i.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,l=i.charAt(n);return l&&l!=="/"?null:i.slice(n)||"/"}function Wb(i,s="/"){let{pathname:n,search:l="",hash:c=""}=typeof i=="string"?hi(i):i;return{pathname:n?n.startsWith("/")?n:Kb(n,s):s,search:Qb(l),hash:Xb(c)}}function Kb(i,s){let n=s.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function Sh(i,s,n,l){return`Cannot include a '${i}' character in a manually specified \`to.${s}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Zb(i){return i.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function fx(i){let s=Zb(i);return s.map((n,l)=>l===s.length-1?n.pathname:n.pathnameBase)}function mx(i,s,n,l=!1){let c;typeof i=="string"?c=hi(i):(c={...i},ct(!c.pathname||!c.pathname.includes("?"),Sh("?","pathname","search",c)),ct(!c.pathname||!c.pathname.includes("#"),Sh("#","pathname","hash",c)),ct(!c.search||!c.search.includes("#"),Sh("#","search","hash",c)));let d=i===""||c.pathname==="",h=d?"/":c.pathname,g;if(h==null)g=n;else{let y=s.length-1;if(!l&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),y-=1;c.pathname=w.join("/")}g=y>=0?s[y]:"/"}let x=Wb(c,g),p=h&&h!=="/"&&h.endsWith("/"),b=(d||h===".")&&n.endsWith("/");return!x.pathname.endsWith("/")&&(p||b)&&(x.pathname+="/"),x}var wa=i=>i.join("/").replace(/\/\/+/g,"/"),Jb=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Qb=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Xb=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ev(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var gx=["POST","PUT","PATCH","DELETE"];new Set(gx);var tv=["GET",...gx];new Set(tv);var fi=m.createContext(null);fi.displayName="DataRouter";var wd=m.createContext(null);wd.displayName="DataRouterState";m.createContext(!1);var xx=m.createContext({isTransitioning:!1});xx.displayName="ViewTransition";var rv=m.createContext(new Map);rv.displayName="Fetchers";var sv=m.createContext(null);sv.displayName="Await";var $s=m.createContext(null);$s.displayName="Navigation";var Lo=m.createContext(null);Lo.displayName="Location";var Is=m.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var af=m.createContext(null);af.displayName="RouteError";function av(i,{relative:s}={}){ct(Uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=m.useContext($s),{hash:c,pathname:d,search:h}=Bo(i,{relative:s}),g=d;return n!=="/"&&(g=d==="/"?n:wa([n,d])),l.createHref({pathname:g,search:h,hash:c})}function Uo(){return m.useContext(Lo)!=null}function Sa(){return ct(Uo(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Lo).location}var px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bx(i){m.useContext($s).static||m.useLayoutEffect(i)}function ut(){let{isDataRoute:i}=m.useContext(Is);return i?bv():nv()}function nv(){ct(Uo(),"useNavigate() may be used only in the context of a <Router> component.");let i=m.useContext(fi),{basename:s,navigator:n}=m.useContext($s),{matches:l}=m.useContext(Is),{pathname:c}=Sa(),d=JSON.stringify(fx(l)),h=m.useRef(!1);return bx(()=>{h.current=!0}),m.useCallback((x,p={})=>{if(xs(h.current,px),!h.current)return;if(typeof x=="number"){n.go(x);return}let b=mx(x,JSON.parse(d),c,p.relative==="path");i==null&&s!=="/"&&(b.pathname=b.pathname==="/"?s:wa([s,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[s,n,d,c,i])}m.createContext(null);function lv(){let{matches:i}=m.useContext(Is),s=i[i.length-1];return s?s.params:{}}function Bo(i,{relative:s}={}){let{matches:n}=m.useContext(Is),{pathname:l}=Sa(),c=JSON.stringify(fx(n));return m.useMemo(()=>mx(i,JSON.parse(c),l,s==="path"),[i,c,l,s])}function iv(i,s){return vx(i,s)}function vx(i,s,n,l,c){ct(Uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=m.useContext($s),{matches:h}=m.useContext(Is),g=h[h.length-1],x=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",y=g&&g.route;{let T=y&&y.path||"";yx(p,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let w=Sa(),S;if(s){let T=typeof s=="string"?hi(s):s;ct(b==="/"||T.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${T.pathname}" was given in the \`location\` prop.`),S=T}else S=w;let C=S.pathname||"/",R=C;if(b!=="/"){let T=b.replace(/^\//,"").split("/");R="/"+C.replace(/^\//,"").split("/").slice(T.length).join("/")}let O=dx(i,{pathname:R});xs(y||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),xs(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=hv(O&&O.map(T=>Object.assign({},T,{params:Object.assign({},x,T.params),pathname:wa([b,d.encodeLocation?d.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?b:wa([b,d.encodeLocation?d.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),h,n,l,c);return s&&M?m.createElement(Lo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},M):M}function ov(){let i=pv(),s=ev(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:d},"ErrorBoundary")," or"," ",m.createElement("code",{style:d},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},s),n?m.createElement("pre",{style:c},n):null,h)}var cv=m.createElement(ov,null),dv=class extends m.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){this.props.unstable_onError?this.props.unstable_onError(i,s):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?m.createElement(Is.Provider,{value:this.props.routeContext},m.createElement(af.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uv({routeContext:i,match:s,children:n}){let l=m.useContext(fi);return l&&l.static&&l.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=s.route.id),m.createElement(Is.Provider,{value:i},n)}function hv(i,s=[],n=null,l=null,c=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(s.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,h=n?.errors;if(h!=null){let p=d.findIndex(b=>b.route.id&&h?.[b.route.id]!==void 0);ct(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),d=d.slice(0,Math.min(d.length,p+1))}let g=!1,x=-1;if(n)for(let p=0;p<d.length;p++){let b=d[p];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(x=p),b.route.id){let{loaderData:y,errors:w}=n,S=b.route.loader&&!y.hasOwnProperty(b.route.id)&&(!w||w[b.route.id]===void 0);if(b.route.lazy||S){g=!0,x>=0?d=d.slice(0,x+1):d=[d[0]];break}}}return d.reduceRight((p,b,y)=>{let w,S=!1,C=null,R=null;n&&(w=h&&b.route.id?h[b.route.id]:void 0,C=b.route.errorElement||cv,g&&(x<0&&y===0?(yx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,R=null):x===y&&(S=!0,R=b.route.hydrateFallbackElement||null)));let O=s.concat(d.slice(0,y+1)),M=()=>{let T;return w?T=C:S?T=R:b.route.Component?T=m.createElement(b.route.Component,null):b.route.element?T=b.route.element:T=p,m.createElement(uv,{match:b,routeContext:{outlet:p,matches:O,isDataRoute:n!=null},children:T})};return n&&(b.route.ErrorBoundary||b.route.errorElement||y===0)?m.createElement(dv,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:M(),routeContext:{outlet:null,matches:O,isDataRoute:!0},unstable_onError:l}):M()},null)}function nf(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fv(i){let s=m.useContext(fi);return ct(s,nf(i)),s}function mv(i){let s=m.useContext(wd);return ct(s,nf(i)),s}function gv(i){let s=m.useContext(Is);return ct(s,nf(i)),s}function lf(i){let s=gv(i),n=s.matches[s.matches.length-1];return ct(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function xv(){return lf("useRouteId")}function pv(){let i=m.useContext(af),s=mv("useRouteError"),n=lf("useRouteError");return i!==void 0?i:s.errors?.[n]}function bv(){let{router:i}=fv("useNavigate"),s=lf("useNavigate"),n=m.useRef(!1);return bx(()=>{n.current=!0}),m.useCallback(async(c,d={})=>{xs(n.current,px),n.current&&(typeof c=="number"?i.navigate(c):await i.navigate(c,{fromRouteId:s,...d}))},[i,s])}var Eg={};function yx(i,s,n){!s&&!Eg[i]&&(Eg[i]=!0,xs(!1,n))}m.memo(vv);function vv({routes:i,future:s,state:n,unstable_onError:l}){return vx(i,void 0,n,l,s)}function bt(i){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yv({basename:i="/",children:s=null,location:n,navigationType:l="POP",navigator:c,static:d=!1}){ct(!Uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),g=m.useMemo(()=>({basename:h,navigator:c,static:d,future:{}}),[h,c,d]);typeof n=="string"&&(n=hi(n));let{pathname:x="/",search:p="",hash:b="",state:y=null,key:w="default"}=n,S=m.useMemo(()=>{let C=Na(x,h);return C==null?null:{location:{pathname:C,search:p,hash:b,state:y,key:w},navigationType:l}},[h,x,p,b,y,w,l]);return xs(S!=null,`<Router basename="${h}"> is not able to match the URL "${x}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:m.createElement($s.Provider,{value:g},m.createElement(Lo.Provider,{children:s,value:S}))}function wv({children:i,location:s}){return iv(Ph(i),s)}function Ph(i,s=[]){let n=[];return m.Children.forEach(i,(l,c)=>{if(!m.isValidElement(l))return;let d=[...s,c];if(l.type===m.Fragment){n.push.apply(n,Ph(l.props.children,d));return}ct(l.type===bt,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!l.props.index||!l.props.children,"An index route cannot have child routes.");let h={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(h.children=Ph(l.props.children,d)),n.push(h)}),n}var ud="get",hd="application/x-www-form-urlencoded";function jd(i){return i!=null&&typeof i.tagName=="string"}function jv(i){return jd(i)&&i.tagName.toLowerCase()==="button"}function Nv(i){return jd(i)&&i.tagName.toLowerCase()==="form"}function Sv(i){return jd(i)&&i.tagName.toLowerCase()==="input"}function _v(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Cv(i,s){return i.button===0&&(!s||s==="_self")&&!_v(i)}function $h(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((s,n)=>{let l=i[n];return s.concat(Array.isArray(l)?l.map(c=>[n,c]):[[n,l]])},[]))}function Ev(i,s){let n=$h(i);return s&&s.forEach((l,c)=>{n.has(c)||s.getAll(c).forEach(d=>{n.append(c,d)})}),n}var ld=null;function Av(){if(ld===null)try{new FormData(document.createElement("form"),0),ld=!1}catch{ld=!0}return ld}var kv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _h(i){return i!=null&&!kv.has(i)?(xs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):i}function Tv(i,s){let n,l,c,d,h;if(Nv(i)){let g=i.getAttribute("action");l=g?Na(g,s):null,n=i.getAttribute("method")||ud,c=_h(i.getAttribute("enctype"))||hd,d=new FormData(i)}else if(jv(i)||Sv(i)&&(i.type==="submit"||i.type==="image")){let g=i.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=i.getAttribute("formaction")||g.getAttribute("action");if(l=x?Na(x,s):null,n=i.getAttribute("formmethod")||g.getAttribute("method")||ud,c=_h(i.getAttribute("formenctype"))||_h(g.getAttribute("enctype"))||hd,d=new FormData(g,i),!Av()){let{name:p,type:b,value:y}=i;if(b==="image"){let w=p?`${p}.`:"";d.append(`${w}x`,"0"),d.append(`${w}y`,"0")}else p&&d.append(p,y)}}else{if(jd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ud,l=null,c=hd,h=i}return d&&c==="text/plain"&&(h=d,d=void 0),{action:l,method:n.toLowerCase(),encType:c,formData:d,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function of(i,s){if(i===!1||i===null||typeof i>"u")throw new Error(s)}function Rv(i,s,n){let l=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return l.pathname==="/"?l.pathname=`_root.${n}`:s&&Na(l.pathname,s)==="/"?l.pathname=`${s.replace(/\/$/,"")}/_root.${n}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${n}`,l}async function Dv(i,s){if(i.id in s)return s[i.id];try{let n=await import(i.module);return s[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ov(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Mv(i,s,n){let l=await Promise.all(i.map(async c=>{let d=s.routes[c.route.id];if(d){let h=await Dv(d,n);return h.links?h.links():[]}return[]}));return Bv(l.flat(1).filter(Ov).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Ag(i,s,n,l,c,d){let h=(x,p)=>n[p]?x.route.id!==n[p].route.id:!0,g=(x,p)=>n[p].pathname!==x.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==x.params["*"];return d==="assets"?s.filter((x,p)=>h(x,p)||g(x,p)):d==="data"?s.filter((x,p)=>{let b=l.routes[x.route.id];if(!b||!b.hasLoader)return!1;if(h(x,p)||g(x,p))return!0;if(x.route.shouldRevalidate){let y=x.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function zv(i,s,{includeHydrateFallback:n}={}){return Lv(i.map(l=>{let c=s.routes[l.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),n&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function Lv(i){return[...new Set(i)]}function Uv(i){let s={},n=Object.keys(i).sort();for(let l of n)s[l]=i[l];return s}function Bv(i,s){let n=new Set;return new Set(s),i.reduce((l,c)=>{let d=JSON.stringify(Uv(c));return n.has(d)||(n.add(d),l.push({key:d,link:c})),l},[])}function wx(){let i=m.useContext(fi);return of(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Pv(){let i=m.useContext(wd);return of(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var cf=m.createContext(void 0);cf.displayName="FrameworkContext";function jx(){let i=m.useContext(cf);return of(i,"You must render this element inside a <HydratedRouter> element"),i}function $v(i,s){let n=m.useContext(cf),[l,c]=m.useState(!1),[d,h]=m.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:p,onMouseLeave:b,onTouchStart:y}=s,w=m.useRef(null);m.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let R=M=>{M.forEach(T=>{h(T.isIntersecting)})},O=new IntersectionObserver(R,{threshold:.5});return w.current&&O.observe(w.current),()=>{O.disconnect()}}},[i]),m.useEffect(()=>{if(l){let R=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(R)}}},[l]);let S=()=>{c(!0)},C=()=>{c(!1),h(!1)};return n?i!=="intent"?[d,w,{}]:[d,w,{onFocus:Co(g,S),onBlur:Co(x,C),onMouseEnter:Co(p,S),onMouseLeave:Co(b,C),onTouchStart:Co(y,S)}]:[!1,w,{}]}function Co(i,s){return n=>{i&&i(n),n.defaultPrevented||s(n)}}function Iv({page:i,...s}){let{router:n}=wx(),l=m.useMemo(()=>dx(n.routes,i,n.basename),[n.routes,i,n.basename]);return l?m.createElement(qv,{page:i,matches:l,...s}):null}function Hv(i){let{manifest:s,routeModules:n}=jx(),[l,c]=m.useState([]);return m.useEffect(()=>{let d=!1;return Mv(i,s,n).then(h=>{d||c(h)}),()=>{d=!0}},[i,s,n]),l}function qv({page:i,matches:s,...n}){let l=Sa(),{manifest:c,routeModules:d}=jx(),{basename:h}=wx(),{loaderData:g,matches:x}=Pv(),p=m.useMemo(()=>Ag(i,s,x,c,l,"data"),[i,s,x,c,l]),b=m.useMemo(()=>Ag(i,s,x,c,l,"assets"),[i,s,x,c,l]),y=m.useMemo(()=>{if(i===l.pathname+l.search+l.hash)return[];let C=new Set,R=!1;if(s.forEach(M=>{let T=c.routes[M.route.id];!T||!T.hasLoader||(!p.some(B=>B.route.id===M.route.id)&&M.route.id in g&&d[M.route.id]?.shouldRevalidate||T.hasClientLoader?R=!0:C.add(M.route.id))}),C.size===0)return[];let O=Rv(i,h,"data");return R&&C.size>0&&O.searchParams.set("_routes",s.filter(M=>C.has(M.route.id)).map(M=>M.route.id).join(",")),[O.pathname+O.search]},[h,g,l,c,p,s,i,d]),w=m.useMemo(()=>zv(b,c),[b,c]),S=Hv(b);return m.createElement(m.Fragment,null,y.map(C=>m.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),w.map(C=>m.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),S.map(({key:C,link:R})=>m.createElement("link",{key:C,nonce:n.nonce,...R})))}function Gv(...i){return s=>{i.forEach(n=>{typeof n=="function"?n(s):n!=null&&(n.current=s)})}}var Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nx&&(window.__reactRouterVersion="7.9.4")}catch{}function Fv({basename:i,children:s,window:n}){let l=m.useRef();l.current==null&&(l.current=Rb({window:n,v5Compat:!0}));let c=l.current,[d,h]=m.useState({action:c.action,location:c.location}),g=m.useCallback(x=>{m.startTransition(()=>h(x))},[h]);return m.useLayoutEffect(()=>c.listen(g),[c,g]),m.createElement(yv,{basename:i,children:s,location:d.location,navigationType:d.action,navigator:c})}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_x=m.forwardRef(function({onClick:s,discover:n="render",prefetch:l="none",relative:c,reloadDocument:d,replace:h,state:g,target:x,to:p,preventScrollReset:b,viewTransition:y,...w},S){let{basename:C}=m.useContext($s),R=typeof p=="string"&&Sx.test(p),O,M=!1;if(typeof p=="string"&&R&&(O=p,Nx))try{let z=new URL(window.location.href),E=p.startsWith("//")?new URL(z.protocol+p):new URL(p),A=Na(E.pathname,C);E.origin===z.origin&&A!=null?p=A+E.search+E.hash:M=!0}catch{xs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=av(p,{relative:c}),[B,K,X]=$v(l,w),ee=Kv(p,{replace:h,state:g,target:x,preventScrollReset:b,relative:c,viewTransition:y});function re(z){s&&s(z),z.defaultPrevented||ee(z)}let q=m.createElement("a",{...w,...X,href:O||T,onClick:M||d?s:re,ref:Gv(S,K),target:x,"data-discover":!R&&n==="render"?"true":void 0});return B&&!R?m.createElement(m.Fragment,null,q,m.createElement(Iv,{page:T})):q});_x.displayName="Link";var Yv=m.forwardRef(function({"aria-current":s="page",caseSensitive:n=!1,className:l="",end:c=!1,style:d,to:h,viewTransition:g,children:x,...p},b){let y=Bo(h,{relative:p.relative}),w=Sa(),S=m.useContext(wd),{navigator:C,basename:R}=m.useContext($s),O=S!=null&&ty(y)&&g===!0,M=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,T=w.pathname,B=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(T=T.toLowerCase(),B=B?B.toLowerCase():null,M=M.toLowerCase()),B&&R&&(B=Na(B,R)||B);const K=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let X=T===M||!c&&T.startsWith(M)&&T.charAt(K)==="/",ee=B!=null&&(B===M||!c&&B.startsWith(M)&&B.charAt(M.length)==="/"),re={isActive:X,isPending:ee,isTransitioning:O},q=X?s:void 0,z;typeof l=="function"?z=l(re):z=[l,X?"active":null,ee?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let E=typeof d=="function"?d(re):d;return m.createElement(_x,{...p,"aria-current":q,className:z,ref:b,style:E,to:h,viewTransition:g},typeof x=="function"?x(re):x)});Yv.displayName="NavLink";var Vv=m.forwardRef(({discover:i="render",fetcherKey:s,navigate:n,reloadDocument:l,replace:c,state:d,method:h=ud,action:g,onSubmit:x,relative:p,preventScrollReset:b,viewTransition:y,...w},S)=>{let C=Xv(),R=ey(g,{relative:p}),O=h.toLowerCase()==="get"?"get":"post",M=typeof g=="string"&&Sx.test(g),T=B=>{if(x&&x(B),B.defaultPrevented)return;B.preventDefault();let K=B.nativeEvent.submitter,X=K?.getAttribute("formmethod")||h;C(K||B.currentTarget,{fetcherKey:s,method:X,navigate:n,replace:c,state:d,relative:p,preventScrollReset:b,viewTransition:y})};return m.createElement("form",{ref:S,method:O,action:R,onSubmit:l?x:T,...w,"data-discover":!M&&i==="render"?"true":void 0})});Vv.displayName="Form";function Wv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cx(i){let s=m.useContext(fi);return ct(s,Wv(i)),s}function Kv(i,{target:s,replace:n,state:l,preventScrollReset:c,relative:d,viewTransition:h}={}){let g=ut(),x=Sa(),p=Bo(i,{relative:d});return m.useCallback(b=>{if(Cv(b,s)){b.preventDefault();let y=n!==void 0?n:Oo(x)===Oo(p);g(i,{replace:y,state:l,preventScrollReset:c,relative:d,viewTransition:h})}},[x,g,p,n,l,s,i,c,d,h])}function Zv(i){xs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=m.useRef($h(i)),n=m.useRef(!1),l=Sa(),c=m.useMemo(()=>Ev(l.search,n.current?null:s.current),[l.search]),d=ut(),h=m.useCallback((g,x)=>{const p=$h(typeof g=="function"?g(new URLSearchParams(c)):g);n.current=!0,d("?"+p,x)},[d,c]);return[c,h]}var Jv=0,Qv=()=>`__${String(++Jv)}__`;function Xv(){let{router:i}=Cx("useSubmit"),{basename:s}=m.useContext($s),n=xv();return m.useCallback(async(l,c={})=>{let{action:d,method:h,encType:g,formData:x,body:p}=Tv(l,s);if(c.navigate===!1){let b=c.fetcherKey||Qv();await i.fetch(b,n,c.action||d,{preventScrollReset:c.preventScrollReset,formData:x,body:p,formMethod:c.method||h,formEncType:c.encType||g,flushSync:c.flushSync})}else await i.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:x,body:p,formMethod:c.method||h,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,s,n])}function ey(i,{relative:s}={}){let{basename:n}=m.useContext($s),l=m.useContext(Is);ct(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),d={...Bo(i||".",{relative:s})},h=Sa();if(i==null){d.search=h.search;let g=new URLSearchParams(d.search),x=g.getAll("index");if(x.some(b=>b==="")){g.delete("index"),x.filter(y=>y).forEach(y=>g.append("index",y));let b=g.toString();d.search=b?`?${b}`:""}}return(!i||i===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:wa([n,d.pathname])),Oo(d)}function ty(i,{relative:s}={}){let n=m.useContext(xx);ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Cx("useViewTransitionState"),c=Bo(i,{relative:s});if(!n.isTransitioning)return!1;let d=Na(n.currentLocation.pathname,l)||n.currentLocation.pathname,h=Na(n.nextLocation.pathname,l)||n.nextLocation.pathname;return gd(c.pathname,h)!=null||gd(c.pathname,d)!=null}function ry(){const{pathname:i}=Sa();return m.useEffect(()=>{window.scrollTo(0,0)},[i]),null}const sy="modulepreload",ay=function(i){return"/"+i},kg={},rl=function(s,n,l){let c=Promise.resolve();if(n&&n.length>0){let p=function(b){return Promise.all(b.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var h=p;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),x=g?.nonce||g?.getAttribute("nonce");c=p(n.map(b=>{if(b=ay(b),b in kg)return;kg[b]=!0;const y=b.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${w}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":sy,y||(S.as="script"),S.crossOrigin="",S.href=b,x&&S.setAttribute("nonce",x),document.head.appendChild(S),y)return new Promise((C,R)=>{S.addEventListener("load",C),S.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(g){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=g,window.dispatchEvent(x),!x.defaultPrevented)throw g}return c.then(g=>{for(const x of g||[])x.status==="rejected"&&d(x.reason);return s().catch(d)})},ny=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...n)=>rl(async()=>{const{default:l}=await Promise.resolve().then(()=>mi);return{default:l}},[]).then(({default:l})=>l(...n)):s=fetch,(...n)=>s(...n)};class df extends Error{constructor(s,n="FunctionsError",l){super(s),this.name=n,this.context=l}}class Tg extends df{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class Rg extends df{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class Dg extends df{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Ih;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Ih||(Ih={}));var ly=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};class iy{constructor(s,{headers:n={},customFetch:l,region:c=Ih.Any}={}){this.url=s,this.headers=n,this.region=c,this.fetch=ny(l)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return ly(this,arguments,void 0,function*(n,l={}){var c;try{const{headers:d,method:h,body:g,signal:x}=l;let p={},{region:b}=l;b||(b=this.region);const y=new URL(`${this.url}/${n}`);b&&b!=="any"&&(p["x-region"]=b,y.searchParams.set("forceFunctionRegion",b));let w;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=g):typeof g=="string"?(p["Content-Type"]="text/plain",w=g):typeof FormData<"u"&&g instanceof FormData?w=g:(p["Content-Type"]="application/json",w=JSON.stringify(g)));const S=yield this.fetch(y.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),d),body:w,signal:x}).catch(M=>{throw M.name==="AbortError"?M:new Tg(M)}),C=S.headers.get("x-relay-error");if(C&&C==="true")throw new Rg(S);if(!S.ok)throw new Dg(S);let R=((c=S.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),O;return R==="application/json"?O=yield S.json():R==="application/octet-stream"?O=yield S.blob():R==="text/event-stream"?O=S:R==="multipart/form-data"?O=yield S.formData():O=yield S.text(),{data:O,error:null,response:S}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new Tg(d)}:{data:null,error:d,response:d instanceof Dg||d instanceof Rg?d.context:void 0}}})}}var Dt={},Zl={},Jl={},Ql={},Xl={},ei={},oy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ui=oy();const cy=ui.fetch,Ex=ui.fetch.bind(ui),Ax=ui.Headers,dy=ui.Request,uy=ui.Response,mi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ax,Request:dy,Response:uy,default:Ex,fetch:cy},Symbol.toStringTag,{value:"Module"})),hy=vb(mi);var id={},Og;function kx(){if(Og)return id;Og=1,Object.defineProperty(id,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return id.default=i,id}var Mg;function Tx(){if(Mg)return ei;Mg=1;var i=ei&&ei.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ei,"__esModule",{value:!0});const s=i(hy),n=i(kx());class l{constructor(d){var h,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(h=d.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,h){return this.headers=new Headers(this.headers),this.headers.set(d,h),this}then(d,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let x=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var b,y,w,S;let C=null,R=null,O=null,M=p.status,T=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ee=await p.text();ee===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?R=ee:R=JSON.parse(ee))}const K=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),X=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");K&&X&&X.length>1&&(O=parseInt(X[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(R)&&(R.length>1?(C={code:"PGRST116",details:`Results contain ${R.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,O=null,M=406,T="Not Acceptable"):R.length===1?R=R[0]:R=null)}else{const K=await p.text();try{C=JSON.parse(K),Array.isArray(C)&&p.status===404&&(R=[],C=null,M=200,T="OK")}catch{p.status===404&&K===""?(M=204,T="No Content"):C={message:K}}if(C&&this.isMaybeSingle&&(!((S=C?.details)===null||S===void 0)&&S.includes("0 rows"))&&(C=null,M=200,T="OK"),C&&this.shouldThrowOnError)throw new n.default(C)}return{error:C,data:R,count:O,status:M,statusText:T}});return this.shouldThrowOnError||(x=x.catch(p=>{var b,y,w;return{error:{message:`${(b=p?.name)!==null&&b!==void 0?b:"FetchError"}: ${p?.message}`,details:`${(y=p?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(w=p?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),x.then(d,h)}returns(){return this}overrideTypes(){return this}}return ei.default=l,ei}var zg;function Rx(){if(zg)return Xl;zg=1;var i=Xl&&Xl.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Xl,"__esModule",{value:!0});const s=i(Tx());class n extends s.default{select(c){let d=!1;const h=(c??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:d=!0,nullsFirst:h,foreignTable:g,referencedTable:x=g}={}){const p=x?`${x}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${c}.${d?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:d,referencedTable:h=d}={}){const g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${c}`),this}range(c,d,{foreignTable:h,referencedTable:g=h}={}){const x=typeof g>"u"?"offset":`${g}.offset`,p=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(x,`${c}`),this.url.searchParams.set(p,`${d-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:d=!1,settings:h=!1,buffers:g=!1,wal:x=!1,format:p="text"}={}){var b;const y=[c?"analyze":null,d?"verbose":null,h?"settings":null,g?"buffers":null,x?"wal":null].filter(Boolean).join("|"),w=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Xl.default=n,Xl}var Lg;function uf(){if(Lg)return Ql;Lg=1;var i=Ql&&Ql.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ql,"__esModule",{value:!0});const s=i(Rx());class n extends s.default{eq(c,d){return this.url.searchParams.append(c,`eq.${d}`),this}neq(c,d){return this.url.searchParams.append(c,`neq.${d}`),this}gt(c,d){return this.url.searchParams.append(c,`gt.${d}`),this}gte(c,d){return this.url.searchParams.append(c,`gte.${d}`),this}lt(c,d){return this.url.searchParams.append(c,`lt.${d}`),this}lte(c,d){return this.url.searchParams.append(c,`lte.${d}`),this}like(c,d){return this.url.searchParams.append(c,`like.${d}`),this}likeAllOf(c,d){return this.url.searchParams.append(c,`like(all).{${d.join(",")}}`),this}likeAnyOf(c,d){return this.url.searchParams.append(c,`like(any).{${d.join(",")}}`),this}ilike(c,d){return this.url.searchParams.append(c,`ilike.${d}`),this}ilikeAllOf(c,d){return this.url.searchParams.append(c,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(c,d){return this.url.searchParams.append(c,`ilike(any).{${d.join(",")}}`),this}is(c,d){return this.url.searchParams.append(c,`is.${d}`),this}in(c,d){const h=Array.from(new Set(d)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cs.{${d.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(d)}`),this}containedBy(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cd.{${d.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(d)}`),this}rangeGt(c,d){return this.url.searchParams.append(c,`sr.${d}`),this}rangeGte(c,d){return this.url.searchParams.append(c,`nxl.${d}`),this}rangeLt(c,d){return this.url.searchParams.append(c,`sl.${d}`),this}rangeLte(c,d){return this.url.searchParams.append(c,`nxr.${d}`),this}rangeAdjacent(c,d){return this.url.searchParams.append(c,`adj.${d}`),this}overlaps(c,d){return typeof d=="string"?this.url.searchParams.append(c,`ov.${d}`):this.url.searchParams.append(c,`ov.{${d.join(",")}}`),this}textSearch(c,d,{config:h,type:g}={}){let x="";g==="plain"?x="pl":g==="phrase"?x="ph":g==="websearch"&&(x="w");const p=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${x}fts${p}.${d}`),this}match(c){return Object.entries(c).forEach(([d,h])=>{this.url.searchParams.append(d,`eq.${h}`)}),this}not(c,d,h){return this.url.searchParams.append(c,`not.${d}.${h}`),this}or(c,{foreignTable:d,referencedTable:h=d}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${c})`),this}filter(c,d,h){return this.url.searchParams.append(c,`${d}.${h}`),this}}return Ql.default=n,Ql}var Ug;function Dx(){if(Ug)return Jl;Ug=1;var i=Jl&&Jl.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Jl,"__esModule",{value:!0});const s=i(uf());class n{constructor(c,{headers:d={},schema:h,fetch:g}){this.url=c,this.headers=new Headers(d),this.schema=h,this.fetch=g}select(c,d){const{head:h=!1,count:g}=d??{},x=h?"HEAD":"GET";let p=!1;const b=(c??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new s.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:d,defaultToNull:h=!0}={}){var g;const x="POST";if(d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const p=c.reduce((b,y)=>b.concat(Object.keys(y)),[]);if(p.length>0){const b=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(c,{onConflict:d,ignoreDuplicates:h=!1,count:g,defaultToNull:x=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),g&&this.headers.append("Prefer",`count=${g}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const y=c.reduce((w,S)=>w.concat(Object.keys(S)),[]);if(y.length>0){const w=[...new Set(y)].map(S=>`"${S}"`);this.url.searchParams.set("columns",w.join(","))}}return new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(c,{count:d}={}){var h;const g="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var d;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Jl.default=n,Jl}var Bg;function fy(){if(Bg)return Zl;Bg=1;var i=Zl&&Zl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Zl,"__esModule",{value:!0});const s=i(Dx()),n=i(uf());class l{constructor(d,{headers:h={},schema:g,fetch:x}={}){this.url=d,this.headers=new Headers(h),this.schemaName=g,this.fetch=x}from(d){const h=new URL(`${this.url}/${d}`);return new s.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new l(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,h={},{head:g=!1,get:x=!1,count:p}={}){var b;let y;const w=new URL(`${this.url}/rpc/${d}`);let S;g||x?(y=g?"HEAD":"GET",Object.entries(h).filter(([R,O])=>O!==void 0).map(([R,O])=>[R,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([R,O])=>{w.searchParams.append(R,O)})):(y="POST",S=h);const C=new Headers(this.headers);return p&&C.set("Prefer",`count=${p}`),new n.default({method:y,url:w,headers:C,schema:this.schemaName,body:S,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return Zl.default=l,Zl}var Pg;function my(){if(Pg)return Dt;Pg=1;var i=Dt&&Dt.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.PostgrestError=Dt.PostgrestBuilder=Dt.PostgrestTransformBuilder=Dt.PostgrestFilterBuilder=Dt.PostgrestQueryBuilder=Dt.PostgrestClient=void 0;const s=i(fy());Dt.PostgrestClient=s.default;const n=i(Dx());Dt.PostgrestQueryBuilder=n.default;const l=i(uf());Dt.PostgrestFilterBuilder=l.default;const c=i(Rx());Dt.PostgrestTransformBuilder=c.default;const d=i(Tx());Dt.PostgrestBuilder=d.default;const h=i(kx());return Dt.PostgrestError=h.default,Dt.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:d.default,PostgrestError:h.default},Dt}var gy=my();const xy=rf(gy),{PostgrestClient:py,PostgrestQueryBuilder:yN,PostgrestFilterBuilder:wN,PostgrestTransformBuilder:jN,PostgrestBuilder:NN,PostgrestError:SN}=xy;class by{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const l=n.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let n=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(n+=`

Suggested solution: ${s.workaround}`),new Error(n)}static createWebSocket(s,n){const l=this.getWebSocketConstructor();return new l(s,n)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const vy="2.75.0",yy=`realtime-js/${vy}`,wy="1.0.0",Hh=1e4,jy=1e3,Ny=100;var Ao;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ao||(Ao={}));var At;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(At||(At={}));var gs;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(gs||(gs={}));var qh;(function(i){i.websocket="websocket"})(qh||(qh={}));var Xn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Xn||(Xn={}));class Sy{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),l=new TextDecoder;return this._decodeBroadcast(s,n,l)}_decodeBroadcast(s,n,l){const c=n.getUint8(1),d=n.getUint8(2);let h=this.HEADER_LENGTH+2;const g=l.decode(s.slice(h,h+c));h=h+c;const x=l.decode(s.slice(h,h+d));h=h+d;const p=JSON.parse(l.decode(s.slice(h,s.byteLength)));return{ref:null,topic:g,event:x,payload:p}}}class Ox{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(rt||(rt={}));const $g=(i,s,n={})=>{var l;const c=(l=n.skipTypes)!==null&&l!==void 0?l:[];return s?Object.keys(s).reduce((d,h)=>(d[h]=_y(h,i,s,c),d),{}):{}},_y=(i,s,n,l)=>{const c=s.find(g=>g.name===i),d=c?.type,h=n[i];return d&&!l.includes(d)?Mx(d,h):Gh(h)},Mx=(i,s)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return ky(s,n)}switch(i){case rt.bool:return Cy(s);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return Ey(s);case rt.json:case rt.jsonb:return Ay(s);case rt.timestamp:return Ty(s);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return Gh(s);default:return Gh(s)}},Gh=i=>i,Cy=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Ey=i=>{if(typeof i=="string"){const s=parseFloat(i);if(!Number.isNaN(s))return s}return i},Ay=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(s){return console.log(`JSON parse error: ${s}`),i}return i},ky=(i,s)=>{if(typeof i!="string")return i;const n=i.length-1,l=i[n];if(i[0]==="{"&&l==="}"){let d;const h=i.slice(1,n);try{d=JSON.parse("["+h+"]")}catch{d=h?h.split(","):[]}return d.map(g=>Mx(s,g))}return i},Ty=i=>typeof i=="string"?i.replace(" ","T"):i,zx=i=>{let s=i;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Ch{constructor(s,n,l={},c=Hh){this.channel=s,this.event=n,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var l;return this._hasReceived(s)&&n((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(l=>l.status===s).forEach(l=>l.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Ig;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Ig||(Ig={}));class ko{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:d,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ko.syncState(this.state,c,d,h),this.pendingDiffs.forEach(x=>{this.state=ko.syncDiff(this.state,x,d,h)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},c=>{const{onJoin:d,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=ko.syncDiff(this.state,c,d,h),g())}),this.onJoin((c,d,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:h})}),this.onLeave((c,d,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,l,c){const d=this.cloneDeep(s),h=this.transformState(n),g={},x={};return this.map(d,(p,b)=>{h[p]||(x[p]=b)}),this.map(h,(p,b)=>{const y=d[p];if(y){const w=b.map(O=>O.presence_ref),S=y.map(O=>O.presence_ref),C=b.filter(O=>S.indexOf(O.presence_ref)<0),R=y.filter(O=>w.indexOf(O.presence_ref)<0);C.length>0&&(g[p]=C),R.length>0&&(x[p]=R)}else g[p]=b}),this.syncDiff(d,{joins:g,leaves:x},l,c)}static syncDiff(s,n,l,c){const{joins:d,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(d,(g,x)=>{var p;const b=(p=s[g])!==null&&p!==void 0?p:[];if(s[g]=this.cloneDeep(x),b.length>0){const y=s[g].map(S=>S.presence_ref),w=b.filter(S=>y.indexOf(S.presence_ref)<0);s[g].unshift(...w)}l(g,b,x)}),this.map(h,(g,x)=>{let p=s[g];if(!p)return;const b=x.map(y=>y.presence_ref);p=p.filter(y=>b.indexOf(y.presence_ref)<0),s[g]=p,c(g,p,x),p.length===0&&delete s[g]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(l=>n(l,s[l]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,l)=>{const c=s[l];return"metas"in c?n[l]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[l]=c,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hg;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Hg||(Hg={}));var To;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(To||(To={}));var va;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(va||(va={}));class hf{constructor(s,n={config:{}},l){var c,d;if(this.topic=s,this.params=n,this.socket=l,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ch(this,gs.join,this.params,this.timeout),this.rejoinTimer=new Ox(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gs.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new ko(this),this.broadcastEndpointURL=zx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,n=this.timeout){var l,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==At.closed){const{config:{broadcast:h,presence:g,private:x}}=this.params,p=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(S=>S.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[To.PRESENCE]&&this.bindings[To.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,y={},w={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:x};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(S=>s?.(va.CHANNEL_ERROR,S)),this._onClose(()=>s?.(va.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var C;if(this.socket.setAuth(),S===void 0){s?.(va.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,O=(C=R?.length)!==null&&C!==void 0?C:0,M=[];for(let T=0;T<O;T++){const B=R[T],{filter:{event:K,schema:X,table:ee,filter:re}}=B,q=S&&S[T];if(q&&q.event===K&&q.schema===X&&q.table===ee&&q.filter===re)M.push(Object.assign(Object.assign({},B),{id:q.id}));else{this.unsubscribe(),this.state=At.errored,s?.(va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,s&&s(va.SUBSCRIBED);return}}).receive("error",S=>{this.state=At.errored,s?.(va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{s?.(va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,l){return this.state===At.joined&&s===To.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,n,l)}async send(s,n={}){var l,c;if(!this._canPush()&&s.type==="broadcast"){const{event:d,payload:h}=s,x={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:h,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(l=n.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=p.body)===null||c===void 0?void 0:c.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var h,g,x;const p=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((x=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||x===void 0)&&x.ack)&&d("ok"),p.receive("ok",()=>d("ok")),p.receive("error",()=>d("error")),p.receive("timeout",()=>d("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=At.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gs.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Ch(this,gs.leave,{},s),l.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=At.closed,this.bindings={}}async _fetchWithTimeout(s,n,l){const c=new AbortController,d=setTimeout(()=>c.abort(),l),h=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(d),h}_push(s,n,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Ch(this,s,n,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>Ny){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(s,n,l){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,l){var c,d;const h=s.toLocaleLowerCase(),{close:g,error:x,leave:p,join:b}=gs;if(l&&[g,x,p,b].indexOf(h)>=0&&l!==this._joinRef())return;let w=this._onMessage(h,n,l);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var C,R,O;return((C=S.filter)===null||C===void 0?void 0:C.event)==="*"||((O=(R=S.filter)===null||R===void 0?void 0:R.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===h}).map(S=>S.callback(w,l)):(d=this.bindings[h])===null||d===void 0||d.filter(S=>{var C,R,O,M,T,B;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in S){const K=S.id,X=(C=S.filter)===null||C===void 0?void 0:C.event;return K&&((R=n.ids)===null||R===void 0?void 0:R.includes(K))&&(X==="*"||X?.toLocaleLowerCase()===((O=n.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const K=(T=(M=S?.filter)===null||M===void 0?void 0:M.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return K==="*"||K===((B=n?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===h}).map(S=>{if(typeof w=="object"&&"ids"in w){const C=w.data,{schema:R,table:O,commit_timestamp:M,type:T,errors:B}=C;w=Object.assign(Object.assign({},{schema:R,table:O,commit_timestamp:M,eventType:T,new:{},old:{},errors:B}),this._getPayloadRecords(C))}S.callback(w,l)})}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,l){const c=s.toLocaleLowerCase(),d={type:c,filter:n,callback:l};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(s,n){const l=s.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&hf.isEqual(c.filter,n))})),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const l in s)if(s[l]!==n[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(gs.close,{},s)}_onError(s){this._on(gs.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=$g(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=$g(s.columns,s.old_record)),n}}const Eh=()=>{},od={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ry=[1e3,2e3,5e3,1e4],Dy=1e4,Oy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class My{constructor(s,n){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hh,this.transport=null,this.heartbeatIntervalMs=od.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Eh,this.ref=0,this.reconnectTimer=null,this.logger=Eh,this.conn=null,this.sendBuffer=[],this.serializer=new Sy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...h)=>rl(async()=>{const{default:g}=await Promise.resolve().then(()=>mi);return{default:g}},void 0).then(({default:g})=>g(...h)).catch(g=>{throw new Error(`Failed to load @supabase/node-fetch: ${g.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...h)=>d(...h)},!(!((l=n?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${s}/${qh.websocket}`,this.httpEndpoint=zx(s),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=by.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const n=s.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wy}))}disconnect(s,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},s?this.conn.close(s,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,n,l){this.logger(s,n,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ao.connecting:return Xn.Connecting;case Ao.open:return Xn.Open;case Ao.closing:return Xn.Closing;default:return Xn.Closed}}isConnected(){return this.connectionState()===Xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,n={config:{}}){const l=`realtime:${s}`,c=this.getChannels().find(d=>d.topic===l);if(c)return c;{const d=new hf(`realtime:${s}`,n,this);return this.channels.push(d),d}}push(s){const{topic:n,event:l,payload:c,ref:d}=s,h=()=>{this.encode(s,g=>{var x;(x=this.conn)===null||x===void 0||x.send(g)})};this.log("push",`${n} ${l} (${d})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(jy,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},od.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(l=>l.topic===s&&(l._isJoined()||l._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:c,payload:d,ref:h}=n,g=h?`(${h})`:"",x=d.status||"";this.log("receive",`${x} ${l} ${c} ${g}`.trim(),d),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(c,d,h)),this._triggerStateCallbacks("message",n)})}_clearTimer(s){var n;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var n;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(gs.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const l=s.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${s}${l}${c}`}_workerObjectUrl(s){let n;if(s)n=s;else{const l=new Blob([Oy],{type:"application/javascript"});n=URL.createObjectURL(l)}return n}_setConnectionState(s,n=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(s=null){let n;s?n=s:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(l=>{const c={access_token:n,version:yy};n&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(gs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${s}`,n)})}_triggerStateCallbacks(s,n){try{this.stateChangeCallbacks[s].forEach(l=>{try{l(n)}catch(c){this.log("error",`error in ${s} callback`,c)}})}catch(l){this.log("error",`error triggering ${s} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Ox(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},od.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var n,l,c,d,h,g,x,p,b;if(this.transport=(n=s?.transport)!==null&&n!==void 0?n:null,this.timeout=(l=s?.timeout)!==null&&l!==void 0?l:Hh,this.heartbeatIntervalMs=(c=s?.heartbeatIntervalMs)!==null&&c!==void 0?c:od.HEARTBEAT_INTERVAL,this.worker=(d=s?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(h=s?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=s?.heartbeatCallback)!==null&&g!==void 0?g:Eh,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=s?.reconnectAfterMs)!==null&&x!==void 0?x:(y=>Ry[y-1]||Dy),this.encode=(p=s?.encode)!==null&&p!==void 0?p:((y,w)=>w(JSON.stringify(y))),this.decode=(b=s?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class ff extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function St(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class zy extends ff{constructor(s,n,l){super(s),this.name="StorageApiError",this.status=n,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fh extends ff{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var Ly=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};const Lx=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...n)=>rl(async()=>{const{default:l}=await Promise.resolve().then(()=>mi);return{default:l}},void 0).then(({default:l})=>l(...n)):s=fetch,(...n)=>s(...n)},Uy=()=>Ly(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rl(()=>Promise.resolve().then(()=>mi),void 0)).Response:Response}),Yh=i=>{if(Array.isArray(i))return i.map(n=>Yh(n));if(typeof i=="function"||i!==Object(i))return i;const s={};return Object.entries(i).forEach(([n,l])=>{const c=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));s[c]=Yh(l)}),s},By=i=>{if(typeof i!="object"||i===null)return!1;const s=Object.getPrototypeOf(i);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var sl=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};const Ah=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Py=(i,s,n)=>sl(void 0,void 0,void 0,function*(){const l=yield Uy();i instanceof l&&!n?.noResolveJson?i.json().then(c=>{const d=i.status||500,h=c?.statusCode||d+"";s(new zy(Ah(c),d,h))}).catch(c=>{s(new Fh(Ah(c),c))}):s(new Fh(Ah(i),i))}),$y=(i,s,n,l)=>{const c={method:i,headers:s?.headers||{}};return i==="GET"||!l?c:(By(l)?(c.headers=Object.assign({"Content-Type":"application/json"},s?.headers),c.body=JSON.stringify(l)):c.body=l,s?.duplex&&(c.duplex=s.duplex),Object.assign(Object.assign({},c),n))};function Po(i,s,n,l,c,d){return sl(this,void 0,void 0,function*(){return new Promise((h,g)=>{i(n,$y(s,l,c,d)).then(x=>{if(!x.ok)throw x;return l?.noResolveJson?x:x.json()}).then(x=>h(x)).catch(x=>Py(x,g,l))})})}function xd(i,s,n,l){return sl(this,void 0,void 0,function*(){return Po(i,"GET",s,n,l)})}function Us(i,s,n,l,c){return sl(this,void 0,void 0,function*(){return Po(i,"POST",s,l,c,n)})}function Vh(i,s,n,l,c){return sl(this,void 0,void 0,function*(){return Po(i,"PUT",s,l,c,n)})}function Iy(i,s,n,l){return sl(this,void 0,void 0,function*(){return Po(i,"HEAD",s,Object.assign(Object.assign({},n),{noResolveJson:!0}),l)})}function Ux(i,s,n,l,c){return sl(this,void 0,void 0,function*(){return Po(i,"DELETE",s,l,c,n)})}var Hy=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};class qy{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}execute(){return Hy(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(St(s))return{data:null,error:s};throw s}})}}var Gy=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};class Fy{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}asStream(){return new qy(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.execute().then(s,n)}execute(){return Gy(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(St(s))return{data:null,error:s};throw s}})}}var mr=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};const Yy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vy{constructor(s,n={},l,c){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.bucketId=l,this.fetch=Lx(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,n,l,c){return mr(this,void 0,void 0,function*(){try{let d;const h=Object.assign(Object.assign({},qg),c);let g=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const x=h.metadata;typeof Blob<"u"&&l instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),x&&d.append("metadata",this.encodeMetadata(x)),d.append("",l)):typeof FormData<"u"&&l instanceof FormData?(d=l,d.append("cacheControl",h.cacheControl),x&&d.append("metadata",this.encodeMetadata(x))):(d=l,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,x&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(x)))),c?.headers&&(g=Object.assign(Object.assign({},g),c.headers));const p=this._removeEmptyFolders(n),b=this._getFinalPath(p),y=yield(s=="PUT"?Vh:Us)(this.fetch,`${this.url}/object/${b}`,d,Object.assign({headers:g},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(St(d))return{data:null,error:d};throw d}})}upload(s,n,l){return mr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,l)})}uploadToSignedUrl(s,n,l,c){return mr(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(s),h=this._getFinalPath(d),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",n);try{let x;const p=Object.assign({upsert:qg.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&l instanceof Blob?(x=new FormData,x.append("cacheControl",p.cacheControl),x.append("",l)):typeof FormData<"u"&&l instanceof FormData?(x=l,x.append("cacheControl",p.cacheControl)):(x=l,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const y=yield Vh(this.fetch,g.toString(),x,{headers:b});return{data:{path:d,fullPath:y.Key},error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(St(x))return{data:null,error:x};throw x}})}createSignedUploadUrl(s,n){return mr(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s);const c=Object.assign({},this.headers);n?.upsert&&(c["x-upsert"]="true");const d=yield Us(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:c}),h=new URL(this.url+d.url),g=h.searchParams.get("token");if(!g)throw new ff("No token returned by API");return{data:{signedUrl:h.toString(),path:s,token:g},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(St(l))return{data:null,error:l};throw l}})}update(s,n,l){return mr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,l)})}move(s,n,l){return mr(this,void 0,void 0,function*(){try{return{data:yield Us(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}copy(s,n,l){return mr(this,void 0,void 0,function*(){try{return{data:{path:(yield Us(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}createSignedUrl(s,n,l){return mr(this,void 0,void 0,function*(){try{let c=this._getFinalPath(s),d=yield Us(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:n},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const h=l?.download?`&download=${l.download===!0?"":l.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${h}`)},{data:d,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}createSignedUrls(s,n,l){return mr(this,void 0,void 0,function*(){try{const c=yield Us(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),d=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${d}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}download(s,n){const c=typeof n?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(n?.transform||{}),h=d?`?${d}`:"",g=this._getFinalPath(s),x=()=>xd(this.fetch,`${this.url}/${c}/${g}${h}`,{headers:this.headers,noResolveJson:!0});return new Fy(x,this.shouldThrowOnError)}info(s){return mr(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{const l=yield xd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Yh(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(St(l))return{data:null,error:l};throw l}})}exists(s){return mr(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{return yield Iy(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(St(l)&&l instanceof Fh){const c=l.originalError;if([400,404].includes(c?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(s,n){const l=this._getFinalPath(s),c=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&c.push(d);const g=typeof n?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(n?.transform||{});x!==""&&c.push(x);let p=c.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${l}${p}`)}}}remove(s){return mr(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}list(s,n,l){return mr(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Yy),n),{prefix:s||""});return{data:yield Us(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},l),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}listV2(s,n){return mr(this,void 0,void 0,function*(){try{const l=Object.assign({},s);return{data:yield Us(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},n),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(St(l))return{data:null,error:l};throw l}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const Wy="2.75.0",Ky={"X-Client-Info":`storage-js/${Wy}`};var ti=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};class Zy{constructor(s,n={},l,c){this.shouldThrowOnError=!1;const d=new URL(s);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ky),n),this.fetch=Lx(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ti(this,void 0,void 0,function*(){try{return{data:yield xd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(St(s))return{data:null,error:s};throw s}})}getBucket(s){return ti(this,void 0,void 0,function*(){try{return{data:yield xd(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}createBucket(s){return ti(this,arguments,void 0,function*(n,l={public:!1}){try{return{data:yield Us(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(St(c))return{data:null,error:c};throw c}})}updateBucket(s,n){return ti(this,void 0,void 0,function*(){try{return{data:yield Vh(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(St(l))return{data:null,error:l};throw l}})}emptyBucket(s){return ti(this,void 0,void 0,function*(){try{return{data:yield Us(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}deleteBucket(s){return ti(this,void 0,void 0,function*(){try{return{data:yield Ux(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}}class Jy extends Zy{constructor(s,n={},l,c){super(s,n,l,c)}from(s){return new Vy(this.url,this.headers,s,this.fetch)}}const Qy="2.75.0";let Eo="";typeof Deno<"u"?Eo="deno":typeof document<"u"?Eo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Eo="react-native":Eo="node";const Xy={"X-Client-Info":`supabase-js-${Eo}/${Qy}`},ew={headers:Xy},tw={schema:"public"},rw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sw={};var aw=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};const nw=i=>{let s;return i?s=i:typeof fetch>"u"?s=Ex:s=fetch,(...n)=>s(...n)},lw=()=>typeof Headers>"u"?Ax:Headers,iw=(i,s,n)=>{const l=nw(n),c=lw();return(d,h)=>aw(void 0,void 0,void 0,function*(){var g;const x=(g=yield s())!==null&&g!==void 0?g:i;let p=new c(h?.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${x}`),l(d,Object.assign(Object.assign({},h),{headers:p}))})};var ow=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};function cw(i){return i.endsWith("/")?i:i+"/"}function dw(i,s){var n,l;const{db:c,auth:d,realtime:h,global:g}=i,{db:x,auth:p,realtime:b,global:y}=s,w={db:Object.assign(Object.assign({},x),c),auth:Object.assign(Object.assign({},p),d),realtime:Object.assign(Object.assign({},b),h),storage:{},global:Object.assign(Object.assign(Object.assign({},y),g),{headers:Object.assign(Object.assign({},(n=y?.headers)!==null&&n!==void 0?n:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>ow(this,void 0,void 0,function*(){return""})};return i.accessToken?w.accessToken=i.accessToken:delete w.accessToken,w}function uw(i){const s=i?.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cw(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Bx="2.75.0",ii=30*1e3,Wh=3,kh=Wh*ii,hw="http://localhost:9999",fw="supabase.auth.token",mw={"X-Client-Info":`gotrue-js/${Bx}`},Kh="X-Supabase-Api-Version",Px={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xw=600*1e3;class Mo extends Error{constructor(s,n,l){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=l}}function Se(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class pw extends Mo{constructor(s,n,l){super(s,n,l),this.name="AuthApiError",this.status=n,this.code=l}}function bw(i){return Se(i)&&i.name==="AuthApiError"}class el extends Mo{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class gn extends Mo{constructor(s,n,l,c){super(s,l,c),this.name=n,this.status=l}}class un extends gn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vw(i){return Se(i)&&i.name==="AuthSessionMissingError"}class ri extends gn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cd extends gn{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class dd extends gn{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yw(i){return Se(i)&&i.name==="AuthImplicitGrantRedirectError"}class Gg extends gn{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zh extends gn{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function Th(i){return Se(i)&&i.name==="AuthRetryableFetchError"}class Fg extends gn{constructor(s,n,l){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=l}}class Jh extends gn{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yg=` 	
\r=`.split(""),ww=(()=>{const i=new Array(128);for(let s=0;s<i.length;s+=1)i[s]=-1;for(let s=0;s<Yg.length;s+=1)i[Yg[s].charCodeAt(0)]=-2;for(let s=0;s<pd.length;s+=1)i[pd[s].charCodeAt(0)]=s;return i})();function Vg(i,s,n){if(i!==null)for(s.queue=s.queue<<8|i,s.queuedBits+=8;s.queuedBits>=6;){const l=s.queue>>s.queuedBits-6&63;n(pd[l]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const l=s.queue>>s.queuedBits-6&63;n(pd[l]),s.queuedBits-=6}}function $x(i,s,n){const l=ww[i];if(l>-1)for(s.queue=s.queue<<6|l,s.queuedBits+=6;s.queuedBits>=8;)n(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Wg(i){const s=[],n=h=>{s.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=h=>{Sw(h,l,n)};for(let h=0;h<i.length;h+=1)$x(i.charCodeAt(h),c,d);return s.join("")}function jw(i,s){if(i<=127){s(i);return}else if(i<=2047){s(192|i>>6),s(128|i&63);return}else if(i<=65535){s(224|i>>12),s(128|i>>6&63),s(128|i&63);return}else if(i<=1114111){s(240|i>>18),s(128|i>>12&63),s(128|i>>6&63),s(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Nw(i,s){for(let n=0;n<i.length;n+=1){let l=i.charCodeAt(n);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(i.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}jw(l,s)}}function Sw(i,s,n){if(s.utf8seq===0){if(i<=127){n(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){s.utf8seq=l;break}if(s.utf8seq===2)s.codepoint=i&31;else if(s.utf8seq===3)s.codepoint=i&15;else if(s.utf8seq===4)s.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|i&63,s.utf8seq-=1,s.utf8seq===0&&n(s.codepoint)}}function di(i){const s=[],n={queue:0,queuedBits:0},l=c=>{s.push(c)};for(let c=0;c<i.length;c+=1)$x(i.charCodeAt(c),n,l);return new Uint8Array(s)}function _w(i){const s=[];return Nw(i,n=>s.push(n)),new Uint8Array(s)}function tl(i){const s=[],n={queue:0,queuedBits:0},l=c=>{s.push(c)};return i.forEach(c=>Vg(c,n,l)),Vg(null,n,l),s.join("")}function Cw(i){return Math.round(Date.now()/1e3)+i}function Ew(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const s=Math.random()*16|0;return(i=="x"?s:s&3|8).toString(16)})}const Rr=()=>typeof window<"u"&&typeof document<"u",Zn={tested:!1,writable:!1},Ix=()=>{if(!Rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zn.tested)return Zn.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Zn.tested=!0,Zn.writable=!0}catch{Zn.tested=!0,Zn.writable=!1}return Zn.writable};function Aw(i){const s={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,d)=>{s[d]=c})}catch{}return n.searchParams.forEach((l,c)=>{s[c]=l}),s}const Hx=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...n)=>rl(async()=>{const{default:l}=await Promise.resolve().then(()=>mi);return{default:l}},void 0).then(({default:l})=>l(...n)):s=fetch,(...n)=>s(...n)},kw=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",oi=async(i,s,n)=>{await i.setItem(s,JSON.stringify(n))},Jn=async(i,s)=>{const n=await i.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},dn=async(i,s)=>{await i.removeItem(s)};class Nd{constructor(){this.promise=new Nd.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}Nd.promiseConstructor=Promise;function Rh(i){const s=i.split(".");if(s.length!==3)throw new Jh("Invalid JWT structure");for(let l=0;l<s.length;l++)if(!gw.test(s[l]))throw new Jh("JWT not in base64url format");return{header:JSON.parse(Wg(s[0])),payload:JSON.parse(Wg(s[1])),signature:di(s[2]),raw:{header:s[0],payload:s[1]}}}async function Tw(i){return await new Promise(s=>{setTimeout(()=>s(null),i)})}function Rw(i,s){return new Promise((l,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const h=await i(d);if(!s(d,null,h)){l(h);return}}catch(h){if(!s(d,h)){c(h);return}}})()})}function Dw(i){return("0"+i.toString(16)).substr(-2)}function Ow(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=n.length;let c="";for(let d=0;d<56;d++)c+=n.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(s),Array.from(s,Dw).join("")}async function Mw(i){const n=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(l);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function zw(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await Mw(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function si(i,s,n=!1){const l=Ow();let c=l;n&&(c+="/PASSWORD_RECOVERY"),await oi(i,`${s}-code-verifier`,c);const d=await zw(l);return[d,l===d?"plain":"s256"]}const Lw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Uw(i){const s=i.headers.get(Kh);if(!s||!s.match(Lw))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function Bw(i){if(!i)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(i<=s)throw new Error("JWT has expired")}function Pw(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $w=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ai(i){if(!$w.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dh(){const i={};return new Proxy(i,{get:(s,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kg(i){return JSON.parse(JSON.stringify(i))}var Iw=function(i,s){var n={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&s.indexOf(l)<0&&(n[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(i);c<l.length;c++)s.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(i,l[c])&&(n[l[c]]=i[l[c]]);return n};const Qn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Hw=[502,503,504];async function Zg(i){var s;if(!kw(i))throw new Zh(Qn(i),0);if(Hw.includes(i.status))throw new Zh(Qn(i),i.status);let n;try{n=await i.json()}catch(d){throw new el(Qn(d),d)}let l;const c=Uw(i);if(c&&c.getTime()>=Px["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?l=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(l=n.error_code),l){if(l==="weak_password")throw new Fg(Qn(n),i.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(l==="session_not_found")throw new un}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,h)=>d&&typeof h=="string",!0))throw new Fg(Qn(n),i.status,n.weak_password.reasons);throw new pw(Qn(n),i.status||500,l)}const qw=(i,s,n,l)=>{const c={method:i,headers:s?.headers||{}};return i==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),n))};async function Te(i,s,n,l){var c;const d=Object.assign({},l?.headers);d[Kh]||(d[Kh]=Px["2024-01-01"].name),l?.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const h=(c=l?.query)!==null&&c!==void 0?c:{};l?.redirectTo&&(h.redirect_to=l.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",x=await Gw(i,s,n+g,{headers:d,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(x):{data:Object.assign({},x),error:null}}async function Gw(i,s,n,l,c,d){const h=qw(s,l,c,d);let g;try{g=await i(n,Object.assign({},h))}catch(x){throw console.error(x),new Zh(Qn(x),0)}if(g.ok||await Zg(g),l?.noResolveJson)return g;try{return await g.json()}catch(x){await Zg(x)}}function ms(i){var s;let n=null;Vw(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=Cw(i.expires_in)));const l=(s=i.user)!==null&&s!==void 0?s:i;return{data:{session:n,user:l},error:null}}function Jg(i){const s=ms(i);return!s.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,l)=>n&&typeof l=="string",!0)&&(s.data.weak_password=i.weak_password),s}function fn(i){var s;return{data:{user:(s=i.user)!==null&&s!==void 0?s:i},error:null}}function Fw(i){return{data:i,error:null}}function Yw(i){const{action_link:s,email_otp:n,hashed_token:l,redirect_to:c,verification_type:d}=i,h=Iw(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:s,email_otp:n,hashed_token:l,redirect_to:c,verification_type:d},x=Object.assign({},h);return{data:{properties:g,user:x},error:null}}function Qg(i){return i}function Vw(i){return i.access_token&&i.refresh_token&&i.expires_in}const Oh=["global","local","others"];var Ww=function(i,s){var n={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&s.indexOf(l)<0&&(n[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(i);c<l.length;c++)s.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(i,l[c])&&(n[l[c]]=i[l[c]]);return n};class Kw{constructor({url:s="",headers:n={},fetch:l}){this.url=s,this.headers=n,this.fetch=Hx(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,n=Oh[0]){if(Oh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Oh.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Se(l))return{data:null,error:l};throw l}}async inviteUserByEmail(s,n={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fn})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async generateLink(s){try{const{options:n}=s,l=Ww(s,["options"]),c=Object.assign(Object.assign({},l),n);return"newEmail"in l&&(c.new_email=l?.newEmail,delete c.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Yw,redirectTo:n?.redirectTo})}catch(n){if(Se(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:fn})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,l,c,d,h,g,x;try{const p={nextPage:null,lastPage:0,total:0},b=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(n=s?.page)===null||n===void 0?void 0:n.toString())!==null&&l!==void 0?l:"",per_page:(d=(c=s?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Qg});if(b.error)throw b.error;const y=await b.json(),w=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(x=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&x!==void 0?x:[];return S.length>0&&(S.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(C.split(";")[1].split("=")[1]);p[`${O}Page`]=R}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Se(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){ai(s);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:fn})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){ai(s);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:fn})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async deleteUser(s,n=!1){ai(s);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:fn})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async _listFactors(s){ai(s.userId);try{const{data:n,error:l}=await Te(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:l}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _deleteFactor(s){ai(s.userId),ai(s.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _listOAuthClients(s){var n,l,c,d,h,g,x;try{const p={nextPage:null,lastPage:0,total:0},b=await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(n=s?.page)===null||n===void 0?void 0:n.toString())!==null&&l!==void 0?l:"",per_page:(d=(c=s?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Qg});if(b.error)throw b.error;const y=await b.json(),w=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(x=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&x!==void 0?x:[];return S.length>0&&(S.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(C.split(";")[1].split("=")[1]);p[`${O}Page`]=R}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Se(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(s){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _getOAuthClient(s){try{return await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(s){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(s){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}}function Xg(i={}){return{getItem:s=>i[s]||null,setItem:(s,n)=>{i[s]=n},removeItem:s=>{delete i[s]}}}const ni={debug:!!(globalThis&&Ix()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qx extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class Zw extends qx{}async function Jw(i,s,n){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,s);const l=new globalThis.AbortController;return s>0&&setTimeout(()=>{l.abort(),ni.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,c.name);try{return await n()}finally{ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,c.name)}}else{if(s===0)throw ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Zw(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(ni.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Qw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Gx(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Xw(i){return parseInt(i,16)}function e1(i){const s=new TextEncoder().encode(i);return"0x"+Array.from(s,l=>l.toString(16).padStart(2,"0")).join("")}function t1(i){var s;const{chainId:n,domain:l,expirationTime:c,issuedAt:d=new Date,nonce:h,notBefore:g,requestId:x,resources:p,scheme:b,uri:y,version:w}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((s=i.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const S=Gx(i.address),C=b?`${b}://${l}`:l,R=i.statement?`${i.statement}
`:"",O=`${C} wants you to sign in with your Ethereum account:
${S}

${R}`;let M=`URI: ${y}
Version: ${w}
Chain ID: ${n}${h?`
Nonce: ${h}`:""}
Issued At: ${d.toISOString()}`;if(c&&(M+=`
Expiration Time: ${c.toISOString()}`),g&&(M+=`
Not Before: ${g.toISOString()}`),x&&(M+=`
Request ID: ${x}`),p){let T=`
Resources:`;for(const B of p){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);T+=`
- ${B}`}M+=T}return`${O}
${M}`}class Nt extends Error{constructor({message:s,code:n,cause:l,name:c}){var d;super(s,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=c??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class bd extends Nt{constructor(s,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:s}),this.name="WebAuthnUnknownError",this.originalError=n}}function r1({error:i,options:s}){var n,l,c;const{publicKey:d}=s;if(!d)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(s.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(s.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Nt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return d.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const h=window.location.hostname;if(Yx(h)){if(d.rp.id!==h)return new Nt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function s1({error:i,options:s}){const{publicKey:n}=s;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(s.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Nt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const l=window.location.hostname;if(Yx(l)){if(n.rpId!==l)return new Nt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}var Fx=function(i,s){var n={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&s.indexOf(l)<0&&(n[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(i);c<l.length;c++)s.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(i,l[c])&&(n[l[c]]=i[l[c]]);return n};class a1{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const n1=new a1;function l1(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:s,user:n,excludeCredentials:l}=i,c=Fx(i,["challenge","user","excludeCredentials"]),d=di(s).buffer,h=Object.assign(Object.assign({},n),{id:di(n.id).buffer}),g=Object.assign(Object.assign({},c),{challenge:d,user:h});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let x=0;x<l.length;x++){const p=l[x];g.excludeCredentials[x]=Object.assign(Object.assign({},p),{id:di(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function i1(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:s,allowCredentials:n}=i,l=Fx(i,["challenge","allowCredentials"]),c=di(s).buffer,d=Object.assign(Object.assign({},l),{challenge:c});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const g=n[h];d.allowCredentials[h]=Object.assign(Object.assign({},g),{id:di(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function o1(i){var s;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:tl(new Uint8Array(i.response.attestationObject)),clientDataJSON:tl(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(s=n.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function c1(i){var s;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,l=i.getClientExtensionResults(),c=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:tl(new Uint8Array(c.authenticatorData)),clientDataJSON:tl(new Uint8Array(c.clientDataJSON)),signature:tl(new Uint8Array(c.signature)),userHandle:c.userHandle?tl(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(s=n.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function Yx(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function ex(){var i,s;return!!(Rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.get)=="function")}async function d1(i){try{const s=await navigator.credentials.create(i);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new bd("Browser returned unexpected credential type",s)}:{data:null,error:new bd("Empty credential response",s)}}catch(s){return{data:null,error:r1({error:s,options:i})}}}async function u1(i){try{const s=await navigator.credentials.get(i);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new bd("Browser returned unexpected credential type",s)}:{data:null,error:new bd("Empty credential response",s)}}catch(s){return{data:null,error:s1({error:s,options:i})}}}const h1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},f1={userVerification:"preferred",hints:["security-key"]};function vd(...i){const s=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of i)if(c)for(const d in c){const h=c[d];if(h!==void 0)if(Array.isArray(h))l[d]=h;else if(n(h))l[d]=h;else if(s(h)){const g=l[d];s(g)?l[d]=vd(g,h):l[d]=vd(h)}else l[d]=h}return l}function m1(i,s){return vd(h1,i,s||{})}function g1(i,s){return vd(f1,i,s||{})}class x1{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:n,friendlyName:l,signal:c},d){try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:s,webauthn:n});if(!h)return{data:null,error:g};const x=c??n1.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:p}=h.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${l}`),p.displayName||(p.displayName=p.name)}switch(h.webauthn.type){case"create":{const p=m1(h.webauthn.credential_options.publicKey,d?.create),{data:b,error:y}=await d1({publicKey:p,signal:x});return b?{data:{factorId:s,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:y}}case"request":{const p=g1(h.webauthn.credential_options.publicKey,d?.request),{data:b,error:y}=await u1(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:p,signal:x}));return b?{data:{factorId:s,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:y}}}}catch(h){return Se(h)?{data:null,error:h}:{data:null,error:new el("Unexpected error in challenge",h)}}}async _verify({challengeId:s,factorId:n,webauthn:l}){return this.client.mfa.verify({factorId:n,challengeId:s,webauthn:l})}async _authenticate({factorId:s,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}},d){if(!n)return{data:null,error:new Mo("rpId is required for WebAuthn authentication")};try{if(!ex())return{data:null,error:new el("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:s,webauthn:{rpId:n,rpOrigins:l},signal:c},{request:d});if(!h)return{data:null,error:g};const{webauthn:x}=h;return this._verify({factorId:s,challengeId:h.challengeId,webauthn:{type:x.type,rpId:n,rpOrigins:l,credential_response:x.credential_response}})}catch(h){return Se(h)?{data:null,error:h}:{data:null,error:new el("Unexpected error in authenticate",h)}}}async _register({friendlyName:s,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c},d){if(!n)return{data:null,error:new Mo("rpId is required for WebAuthn registration")};try{if(!ex())return{data:null,error:new el("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:s});if(!h)return await this.client.mfa.listFactors().then(b=>{var y;return(y=b.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===s&&w.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:x,error:p}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:n,rpOrigins:l},signal:c},{create:d});return x?this._verify({factorId:h.id,challengeId:x.challengeId,webauthn:{rpId:n,rpOrigins:l,type:x.webauthn.type,credential_response:x.webauthn.credential_response}}):{data:null,error:p}}catch(h){return Se(h)?{data:null,error:h}:{data:null,error:new el("Unexpected error in register",h)}}}}Qw();const p1={url:hw,storageKey:fw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tx(i,s,n){return await n()}const li={};class zo{get jwks(){var s,n;return(n=(s=li[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(s){li[this.storageKey]=Object.assign(Object.assign({},li[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,n;return(n=(s=li[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){li[this.storageKey]=Object.assign(Object.assign({},li[this.storageKey]),{cachedAt:s})}constructor(s){var n,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zo.nextInstanceID,zo.nextInstanceID+=1,this.instanceID>0&&Rr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},p1),s);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Kw({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Hx(c.fetch),this.lock=c.lock||tx,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Rr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Jw:this.lock=tx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new x1(this)},this.persistSession?(c.storage?this.storage=c.storage:Ix()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Xg(this.memoryStorage)),Rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bx}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const n=Aw(window.location.href);let l="none";if(this._isImplicitGrantCallback(n)?l="implicit":await this._isPKCECallback(n)&&(l="pkce"),Rr()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:d}=await this._getSessionFromURL(n,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),yw(d)){const x=(s=d.details)===null||s===void 0?void 0:s.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:h,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Se(n)?{error:n}:{error:new el("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,l,c;try{const d=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(n=s?.options)===null||n===void 0?void 0:n.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=s?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ms}),{data:h,error:g}=d;if(g||!h)return{data:{user:null,session:null},error:g};const x=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:p,session:x},error:null}}catch(d){if(Se(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(s){var n,l,c;try{let d;if("email"in s){const{email:b,password:y,options:w}=s;let S=null,C=null;this.flowType==="pkce"&&([S,C]=await si(this.storage,this.storageKey)),d=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:b,password:y,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:C},xform:ms})}else if("phone"in s){const{phone:b,password:y,options:w}=s;d=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:y,data:(l=w?.data)!==null&&l!==void 0?l:{},channel:(c=w?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:ms})}else throw new cd("You must provide either an email or phone number and a password");const{data:h,error:g}=d;if(g||!h)return{data:{user:null,session:null},error:g};const x=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:p,session:x},error:null}}catch(d){if(Se(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(s){try{let n;if("email"in s){const{email:d,password:h,options:g}=s;n=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Jg})}else if("phone"in s){const{phone:d,password:h,options:g}=s;n=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:h,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Jg})}else throw new cd("You must provide either an email or phone number and a password");const{data:l,error:c}=n;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ri}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,l,c,d;return await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(l=s.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=s.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=s.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:n}=s;switch(n){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(s){var n,l,c,d,h,g,x,p,b,y,w;let S,C;if("message"in s)S=s.message,C=s.signature;else{const{chain:R,wallet:O,statement:M,options:T}=s;let B;if(Rr())if(typeof O=="object")B=O;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")B=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=O}const K=new URL((n=T?.url)!==null&&n!==void 0?n:window.location.href),X=await B.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ee=Gx(X[0]);let re=(l=T?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!re){const z=await B.request({method:"eth_chainId"});re=Xw(z)}const q={domain:K.host,address:ee,statement:M,uri:K.href,version:"1",chainId:re,nonce:(c=T?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=T?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(x=T?.signInWithEthereum)===null||x===void 0?void 0:x.notBefore,requestId:(p=T?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=T?.signInWithEthereum)===null||b===void 0?void 0:b.resources};S=t1(q),C=await B.request({method:"personal_sign",params:[e1(S),ee]})}try{const{data:R,error:O}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:C},!((y=s.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=s.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ms});if(O)throw O;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new ri}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:O})}catch(R){if(Se(R))return{data:{user:null,session:null},error:R};throw R}}async signInWithSolana(s){var n,l,c,d,h,g,x,p,b,y,w,S;let C,R;if("message"in s)C=s.message,R=s.signature;else{const{chain:O,wallet:M,statement:T,options:B}=s;let K;if(Rr())if(typeof M=="object")K=M;else{const ee=window;if("solana"in ee&&typeof ee.solana=="object"&&("signIn"in ee.solana&&typeof ee.solana.signIn=="function"||"signMessage"in ee.solana&&typeof ee.solana.signMessage=="function"))K=ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=M}const X=new URL((n=B?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in K&&K.signIn){const ee=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),T?{statement:T}:null));let re;if(Array.isArray(ee)&&ee[0]&&typeof ee[0]=="object")re=ee[0];else if(ee&&typeof ee=="object"&&"signedMessage"in ee&&"signature"in ee)re=ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in re&&"signature"in re&&(typeof re.signedMessage=="string"||re.signedMessage instanceof Uint8Array)&&re.signature instanceof Uint8Array)C=typeof re.signedMessage=="string"?re.signedMessage:new TextDecoder().decode(re.signedMessage),R=re.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${X.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(c=(l=B?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=B?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((h=B?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((g=B?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((x=B?.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((p=B?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((y=(b=B?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||y===void 0)&&y.length?["Resources",...B.signInWithSolana.resources.map(re=>`- ${re}`)]:[]].join(`
`);const ee=await K.signMessage(new TextEncoder().encode(C),"utf8");if(!ee||!(ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=ee}}try{const{data:O,error:M}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:tl(R)},!((w=s.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=s.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ms});if(M)throw M;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new ri}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:M})}catch(O){if(Se(O))return{data:{user:null,session:null},error:O};throw O}}async _exchangeCodeForSession(s){const n=await Jn(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(n??"").split("/");try{const{data:d,error:h}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:l},xform:ms});if(await dn(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new ri}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:h})}catch(d){if(Se(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(s){try{const{options:n,provider:l,token:c,access_token:d,nonce:h}=s,g=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:d,nonce:h,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ms}),{data:x,error:p}=g;return p?{data:{user:null,session:null},error:p}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new ri}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:x,error:p})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,l,c,d,h;try{if("email"in s){const{email:g,options:x}=s;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await si(this.storage,this.storageKey));const{error:y}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=x?.data)!==null&&n!==void 0?n:{},create_user:(l=x?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:x?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in s){const{phone:g,options:x}=s,{data:p,error:b}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=x?.data)!==null&&c!==void 0?c:{},create_user:(d=x?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},channel:(h=x?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:b}}throw new cd("You must provide either an email or phone number.")}catch(g){if(Se(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(s){var n,l;try{let c,d;"options"in s&&(c=(n=s.options)===null||n===void 0?void 0:n.redirectTo,d=(l=s.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:g}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:ms});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const x=h.session,p=h.user;return x?.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),{data:{user:p,session:x},error:null}}catch(c){if(Se(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(s){var n,l,c;try{let d=null,h=null;return this.flowType==="pkce"&&([d,h]=await si(this.storage,this.storageKey)),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(l=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=s?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:Fw})}catch(d){if(Se(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:l}=s;if(l)throw l;if(!n)throw new un;const{error:c}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:c}})}catch(s){if(Se(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const n=`${this.url}/resend`;if("email"in s){const{email:l,type:c,options:d}=s,{error:h}=await Te(this.fetch,"POST",n,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in s){const{phone:l,type:c,options:d}=s,{data:h,error:g}=await Te(this.fetch,"POST",n,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:g}}throw new cd("You must provide either an email or phone number and a type")}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=n();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await Jn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const l=s.expires_at?s.expires_at*1e3-Date.now()<kh:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",s.expires_at),!l){if(this.userStorage){const h=await Jn(this.userStorage,this.storageKey+"-user");h?.user?s.user=h.user:s.user=Dh()}if(this.storage.isServer&&s.user){let h=this.suppressGetSessionWarning;s=new Proxy(s,{get:(x,p,b)=>(!h&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(x,p,b))})}return{data:{session:s},error:null}}const{data:c,error:d}=await this._callRefreshToken(s.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:fn}):await this._useSession(async n=>{var l,c,d;const{data:h,error:g}=n;if(g)throw g;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new un}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:fn})})}catch(n){if(Se(n))return vw(n)&&(await this._removeSession(),await dn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async l=>{const{data:c,error:d}=l;if(d)throw d;if(!c.session)throw new un;const h=c.session;let g=null,x=null;this.flowType==="pkce"&&s.email!=null&&([g,x]=await si(this.storage,this.storageKey));const{data:p,error:b}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:g,code_challenge_method:x}),jwt:h.access_token,xform:fn});if(b)throw b;return h.user=p.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new un;const n=Date.now()/1e3;let l=n,c=!0,d=null;const{payload:h}=Rh(s.access_token);if(h.exp&&(l=h.exp,c=l<=n),c){const{data:g,error:x}=await this._callRefreshToken(s.refresh_token);if(x)return{data:{user:null,session:null},error:x};if(!g)return{data:{user:null,session:null},error:null};d=g}else{const{data:g,error:x}=await this._getUser(s.access_token);if(x)throw x;d={access_token:s.access_token,refresh_token:s.refresh_token,user:g.user,token_type:"bearer",expires_in:l-n,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(n){if(Se(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var l;if(!s){const{data:h,error:g}=n;if(g)throw g;s=(l=h.session)!==null&&l!==void 0?l:void 0}if(!s?.refresh_token)throw new un;const{data:c,error:d}=await this._callRefreshToken(s.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s,n){try{if(!Rr())throw new dd("No browser detected.");if(s.error||s.error_description||s.error_code)throw new dd(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Gg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Gg("No code detected.");const{data:T,error:B}=await this._exchangeCodeForSession(s.code);if(B)throw B;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:d,refresh_token:h,expires_in:g,expires_at:x,token_type:p}=s;if(!d||!g||!h||!p)throw new dd("No session defined in URL");const b=Math.round(Date.now()/1e3),y=parseInt(g);let w=b+y;x&&(w=parseInt(x));const S=w-b;S*1e3<=ii&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${y}s`);const C=w-y;b-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,w,b):b-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,w,b);const{data:R,error:O}=await this._getUser(d);if(O)throw O;const M={provider_token:l,provider_refresh_token:c,access_token:d,expires_in:y,expires_at:w,refresh_token:h,token_type:p,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:s.type},error:null}}catch(l){if(Se(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const n=await Jn(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var l;const{data:c,error:d}=n;if(d)return{error:d};const h=(l=c.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:g}=await this.admin.signOut(h,s);if(g&&!(bw(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return s!=="others"&&(await this._removeSession(),await dn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const n=Ew(),l={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:l}}}async _emitInitialSession(s){return await this._useSession(async n=>{var l,c;try{const{data:{session:d},error:h}=n;if(h)throw h;await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",s,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(s))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",d),console.error(d)}})}async resetPasswordForEmail(s,n={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await si(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(Se(d))return{data:null,error:d};throw d}}async getUserIdentities(){var s;try{const{data:n,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var n;try{const{data:l,error:c}=await this._useSession(async d=>{var h,g,x,p,b;const{data:y,error:w}=d;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(h=s.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=s.options)===null||g===void 0?void 0:g.scopes,queryParams:(x=s.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",S,{headers:this.headers,jwt:(b=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return Rr()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(l?.url),{data:{provider:s.provider,url:l?.url},error:null}}catch(l){if(Se(l))return{data:{provider:s.provider,url:null},error:l};throw l}}async linkIdentityIdToken(s){return await this._useSession(async n=>{var l;try{const{error:c,data:{session:d}}=n;if(c)throw c;const{options:h,provider:g,token:x,access_token:p,nonce:b}=s,y=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:x,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ms}),{data:w,error:S}=y;return S?{data:{user:null,session:null},error:S}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new ri}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:S})}catch(c){if(Se(c))return{data:{user:null,session:null},error:c};throw c}})}async unlinkIdentity(s){try{return await this._useSession(async n=>{var l,c;const{data:d,error:h}=n;if(h)throw h;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(c=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const l=Date.now();return await Rw(async c=>(c>0&&await Tw(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ms})),(c,d)=>{const h=200*Math.pow(2,c);return d&&Th(d)&&Date.now()+h-l<ii})}catch(l){if(this._debug(n,"error",l),Se(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const l=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",l),Rr()&&!n.skipBrowserRedirect&&window.location.assign(l),{data:{provider:s,url:l},error:null}}async _recoverAndRefresh(){var s,n;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await Jn(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Jn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await oi(this.userStorage,this.storageKey+"-user",h)),c.user=(s=h?.user)!==null&&s!==void 0?s:Dh()}else if(c&&!c.user&&!c.user){const h=await Jn(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await dn(this.storage,this.storageKey+"-user"),await oi(this.storage,this.storageKey,c)):c.user=Dh()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const d=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<kh;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${kh}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Th(h)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(c.access_token);!g&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(l,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(s){var n,l;if(!s)throw new un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Nd;const{data:d,error:h}=await this._refreshAccessToken(s);if(h)throw h;if(!d.session)throw new un;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const g={data:d.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(d){if(this._debug(c,"error",d),Se(d)){const h={data:null,error:d};return Th(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(s,n,l=!0){const c=`#_notifyAllSubscribers(${s})`;this._debug(c,"begin",n,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:s,session:n});const d=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(s,n)}catch(x){d.push(x)}});if(await Promise.all(h),d.length>0){for(let g=0;g<d.length;g+=1)console.error(d[g]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const n=Object.assign({},s),l=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&n.user&&await oi(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const d=Kg(c);await oi(this.storage,this.storageKey,d)}else{const c=Kg(n);await oi(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await dn(this.storage,this.storageKey),await dn(this.storage,this.storageKey+"-code-verifier"),await dn(this.storage,this.storageKey+"-user"),this.userStorage&&await dn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Rr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),ii);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:l}}=n;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-s)/ii);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ii}ms, refresh threshold is ${Wh} ticks`),c<=Wh&&await this._callRefreshToken(l.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof qx)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,l){const c=[`provider=${encodeURIComponent(n)}`];if(l?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,h]=await si(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(g.toString())}if(l?.queryParams){const d=new URLSearchParams(l.queryParams);c.push(d.toString())}return l?.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${s}?${c.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var l;const{data:c,error:d}=n;return d?{data:null,error:d}:await Te(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var l,c;const{data:d,error:h}=n;if(h)return{data:null,error:h};const g=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:x,error:p}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return p?{data:null,error:p}:(s.factorType==="totp"&&x.type==="totp"&&(!((c=x?.totp)===null||c===void 0)&&c.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var l;const{data:c,error:d}=n;if(d)return{data:null,error:d};const h=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?o1(s.webauthn.credential_response):c1(s.webauthn.credential_response)})}:{code:s.code}),{data:g,error:x}=await Te(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:h,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return x?{data:null,error:x}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),{data:g,error:x})})}catch(n){if(Se(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var l;const{data:c,error:d}=n;if(d)return{data:null,error:d};const h=await Te(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:l1(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:i1(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Se(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:l}=await this._challenge({factorId:s.factorId});return l?{data:null,error:l}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){var s;const{data:{user:n},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(s=n?.factors)!==null&&s!==void 0?s:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,l;const{data:{session:c},error:d}=s;if(d)return{data:null,error:d};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Rh(c.access_token);let g=null;h.aal&&(g=h.aal);let x=g;((l=(n=c.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(x="aal2");const b=h.amr||[];return{data:{currentLevel:g,nextLevel:x,currentAuthenticationMethods:b},error:null}}))}async fetchJwk(s,n={keys:[]}){let l=n.keys.find(g=>g.kid===s);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(g=>g.kid===s),l&&this.jwks_cached_at+xw>c)return l;const{data:d,error:h}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,l=d.keys.find(g=>g.kid===s),!l)?null:l}async getClaims(s,n={}){try{let l=s;if(!l){const{data:S,error:C}=await this.getSession();if(C||!S.session)return{data:null,error:C};l=S.session.access_token}const{header:c,payload:d,signature:h,raw:{header:g,payload:x}}=Rh(l);n?.allowExpired||Bw(d.exp);const p=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(l);if(S)throw S;return{data:{claims:d,header:c,signature:h},error:null}}const b=Pw(c.alg),y=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,y,h,_w(`${g}.${x}`)))throw new Jh("Invalid JWT signature");return{data:{claims:d,header:c,signature:h},error:null}}catch(l){if(Se(l))return{data:null,error:l};throw l}}}zo.nextInstanceID=0;const b1=zo;class v1 extends b1{constructor(s){super(s)}}var y1=function(i,s,n,l){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function g(b){try{p(l.next(b))}catch(y){h(y)}}function x(b){try{p(l.throw(b))}catch(y){h(y)}}function p(b){b.done?d(b.value):c(b.value).then(g,x)}p((l=l.apply(i,s||[])).next())})};class w1{constructor(s,n,l){var c,d,h;this.supabaseUrl=s,this.supabaseKey=n;const g=uw(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const x=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:tw,realtime:sw,auth:Object.assign(Object.assign({},rw),{storageKey:x}),global:ew},b=dw(l??{},p);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(y,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=b.auth)!==null&&h!==void 0?h:{},this.headers,b.global.fetch),this.fetch=iw(n,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new py(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Jy(this.storageUrl.href,this.headers,this.fetch,l?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new iy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,l)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return y1(this,void 0,void 0,function*(){var s,n;if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(n=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:l,storage:c,userStorage:d,storageKey:h,flowType:g,lock:x,debug:p},b,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v1({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),b),storageKey:h,autoRefreshToken:s,persistSession:n,detectSessionInUrl:l,storage:c,userStorage:d,flowType:g,lock:x,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new My(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,l)=>{this._handleTokenChanged(n,"CLIENT",l?.access_token)})}_handleTokenChanged(s,n,l){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j1=(i,s,n)=>new w1(i,s,n);function N1(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const s=i.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}N1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const S1="https://zppltopvyzuyhxgwrfwm.supabase.co",_1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpwcGx0b3B2eXp1eWh4Z3dyZndtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzNjIzNDIsImV4cCI6MjA3MDkzODM0Mn0.IAQjz7i33F_uy8NPgb2bGntzFjeadHMs19y-DOqhpQI",de=j1(S1,_1,{auth:{storage:window.sessionStorage,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),C1=Object.freeze(Object.defineProperty({__proto__:null,supabase:de},Symbol.toStringTag,{value:"Module"}));async function E1(i,s=null){try{const{data:n,error:l}=await de.from("rooms").select("*").eq("room_number",i).maybeSingle();if(l&&l.code!=="PGRST116")return console.error("Error finding room:",l),{room:null,error:l};if(n)return console.log("Found existing room:",n),{room:n,error:null};console.log("Creating new room:",i);const{data:c,error:d}=await de.from("rooms").insert([{room_number:i,created_by:s}]).select().single();return d?(console.error("Error creating room:",d),{room:null,error:d}):(console.log("Created new room:",c),{room:c,error:null})}catch(n){return console.error("Unexpected error in getOrCreateRoomByNumber:",n),{room:null,error:{message:n.message}}}}async function rx(i,s=200){try{const{data:n,error:l}=await de.from("messages").select(`
        *,
        user_profiles!inner(
          id,
          username,
          full_name
        )
      `).eq("room_id",i).order("created_at",{ascending:!0}).limit(s);return l?(console.error("Error fetching messages:",l),{data:null,error:l}):(console.log("Fetched messages:",n?.length||0),{data:n,error:null})}catch(n){return console.error("Unexpected error fetching messages:",n),{data:null,error:{message:n.message}}}}async function A1(i,s,n,l={}){try{const{data:c,error:d}=await de.from("messages").insert([{room_id:i,user_id:s,text:n.trim(),metadata:l}]).select(`
        *,
        user_profiles!inner(
          id,
          username,
          full_name
        )
      `).single();return d?(console.error("Error sending message:",d),{data:null,error:d}):(console.log("Message sent:",c),{data:c,error:null})}catch(c){return console.error("Unexpected error sending message:",c),{data:null,error:{message:c.message}}}}function k1(i,s){console.log(" Setting up Realtime subscription for room:",i);const n=`room:${i}:${Date.now()}`;console.log("   Channel name:",n);const l=de.channel(n).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`room_id=eq.${i}`},async c=>{console.log(" ========== REALTIME EVENT TRIGGERED =========="),console.log(" INSERT detected on messages table!"),console.log(" Event payload:",JSON.stringify(c,null,2)),console.log(" New message ID:",c.new.id),console.log(" Room ID:",c.new.room_id),console.log(" User ID:",c.new.user_id),console.log(" Text:",c.new.text),await new Promise(g=>setTimeout(g,100)),console.log(" Fetching full message details...");const{data:d,error:h}=await de.from("messages").select(`
            *,
            user_profiles!inner(
              id,
              username,
              full_name
            )
          `).eq("id",c.new.id).single();if(h){console.error(" Error fetching message details:",h);return}if(!d){console.warn(" No data returned for message ID:",c.new.id);return}console.log(" Full message fetched successfully!"),console.log("   Message:",d.text),console.log("   From:",d.user_profiles?.full_name||d.user_profiles?.username),console.log("   Profile data:",d.user_profiles),console.log(" Calling onMessage callback..."),s?(s(d),console.log(" Callback executed")):console.error(" No callback function provided!"),console.log(" ========== END REALTIME EVENT ==========")}).subscribe((c,d)=>{console.log(" Subscription status changed:",c),c==="SUBSCRIBED"?(console.log(" ========== SUBSCRIPTION ACTIVE =========="),console.log(" Listening for messages in room:",i),console.log(" Channel:",n),console.log(" ==========================================")):c==="CHANNEL_ERROR"?console.error(" Channel error:",d):c==="TIMED_OUT"?console.error(" Subscription timed out"):c==="CLOSED"&&console.warn(" Channel closed")});return console.log(" Subscription setup complete, waiting for SUBSCRIBED status..."),l}async function sx(i){i&&(console.log(" Unsubscribing from channel"),await de.removeChannel(i),console.log(" Channel unsubscribed"))}async function T1(){console.log(" Testing Realtime connection...");const i=de.channel("test-connection").on("postgres_changes",{event:"*",schema:"public",table:"messages"},s=>{console.log(" Realtime is working! Received:",s)}).subscribe(s=>{console.log("Test subscription status:",s)});return console.log("Test channel created. Try inserting a message in Supabase."),i}typeof window<"u"&&(window.testRealtime=T1);const Vx=m.createContext();function R1({children:i}){const[s,n]=m.useState(!1),[l,c]=m.useState(""),[d,h]=m.useState(null),[g,x]=m.useState([]),[p,b]=m.useState(""),[y,w]=m.useState(null),[S,C]=m.useState(null),[R,O]=m.useState(!1);m.useEffect(()=>{(async()=>{console.log(" Fetching current user...");const{data:{user:X},error:ee}=await de.auth.getUser();if(ee){console.error(" Auth error:",ee);return}if(!X){console.warn(" No authenticated user found");return}console.log(" Auth user found:",X.email);const{data:re,error:q}=await de.from("user_profiles").select("id, username, full_name").eq("id",X.id).single();if(q){console.error(" Error fetching user profile:",q);return}re?(C(re.id),console.log(" Current user profile loaded:",re.full_name||re.username),console.log("   Profile ID:",re.id)):console.error(" No user profile found for user_id:",X.id)})()},[]);const M=async K=>{if(!K||!K.trim())return{error:{message:"Please enter a valid room number"}};console.log(" Attempting to join room:",K),console.log("   Current userId state:",S);let X=S;if(!X){console.log(" User ID not in state, fetching now...");const{data:{user:ee},error:re}=await de.auth.getUser();if(re||!ee)return console.error(" Authentication failed:",re),{error:{message:"User not authenticated. Please log in again."}};console.log(" Auth user found:",ee.email);const{data:q,error:z}=await de.from("user_profiles").select("id").eq("user_id",ee.id).single();if(z||!q)return console.error(" User profile not found:",z),{error:{message:"User profile not found. Please contact support."}};X=q.id,C(X),console.log(" Fetched user profile ID:",X)}if(!X)return console.error(" Still no userId after fetch"),{error:{message:"User not authenticated"}};O(!0);try{console.log(" Joining room:",K,"with userId:",X);const{room:ee,error:re}=await E1(K.trim(),X);if(re||!ee)return console.error("Failed to join room:",re),O(!1),{error:re||{message:"Failed to create/find room"}};console.log("Room joined successfully:",ee),c(K.trim()),h(ee.id);const{data:q,error:z}=await rx(ee.id);z?console.error("Failed to fetch messages:",z):q&&(console.log("Loaded message history:",q.length),x(q)),console.log(" Setting up realtime subscription for room:",ee.id),console.log(" Current user ID:",X);const E=k1(ee.id,P=>{console.log(" ========== CALLBACK RECEIVED =========="),console.log(" New message arrived via callback!"),console.log("   Message text:",P.text),console.log("   From user ID:",P.user_id),console.log("   From user name:",P.user_profiles?.full_name||P.user_profiles?.username),console.log("   Message ID:",P.id),console.log("   My user ID:",X),console.log("   Is this my message?",P.user_id===X),x(V=>{if(console.log("    Current messages in state:",V.length),console.log("    Checking for duplicates..."),V.some(k=>{const G=k.id===P.id;return G&&console.log("    Found duplicate with ID:",k.id),G}))return console.log("    Message already exists in state, skipping"),console.log(" ========== CALLBACK COMPLETE (SKIPPED) =========="),V;console.log("    No duplicate found, adding message to state NOW!");const ie=[...V,P];return console.log("    New messages count:",ie.length),console.log(" ========== CALLBACK COMPLETE (ADDED) =========="),ie})});w(E),console.log(" Setting up polling fallback (every 3 seconds)...");const A=setInterval(async()=>{console.log(" Polling for new messages...");const{data:P}=await rx(ee.id,50);P&&P.length>0&&x(V=>{const J=P.filter(ie=>!V.some(k=>k.id===ie.id));return J.length>0?(console.log(" Found",J.length,"new messages via polling"),[...V,...J]):V})},3e3);return window.__chatPollInterval=A,n(!0),O(!1),{room:ee,error:null}}catch(ee){return console.error("Unexpected error joining room:",ee),O(!1),{error:{message:ee.message||"Failed to join room"}}}},T=async()=>{if(console.log(" Leaving room and cleaning up..."),window.__chatPollInterval&&(console.log(" Clearing polling interval"),clearInterval(window.__chatPollInterval),window.__chatPollInterval=null),d)try{const{error:K}=await de.from("messages").delete().eq("room_id",d);K?console.error("Error deleting messages:",K):console.log(" All messages deleted from room")}catch(K){console.error("Unexpected error deleting messages:",K)}y&&(await sx(y),w(null)),h(null),c(""),x([]),n(!1)},B=async()=>{const K=S;if(console.log(" Attempting to send message..."),console.log("   Input:",p),console.log("   Room ID:",d),console.log("   User ID:",K),!p.trim()||!d||!K){console.warn(" Cannot send message:",{hasInput:!!p.trim(),hasRoom:!!d,hasUser:!!K});return}const X=p.trim();b("");try{console.log(" Sending to Supabase:",X);const{data:ee,error:re}=await A1(d,K,X);if(re){console.error(" Failed to send message:",re),b(X);return}console.log(" Message sent to database!"),console.log("   Message ID:",ee?.id),console.log("   Message data:",ee),console.log("    Realtime should broadcast this to ALL users (including me)"),console.log("    Waiting for Realtime callback...")}catch(ee){console.error(" Unexpected error sending message:",ee),b(X)}};return m.useEffect(()=>()=>{y&&(console.log("Cleaning up subscription on unmount"),sx(y))},[y]),t.jsx(Vx.Provider,{value:{showChatBar:s,setShowChatBar:n,roomNumber:l,setRoomNumber:c,chatMessages:g,setChatMessages:x,messageInput:p,setMessageInput:b,handleSendMessage:B,joinRoom:M,leaveRoom:T,isJoining:R,currentUserId:S},children:i})}function Wx(){return m.useContext(Vx)}const Kx=m.createContext({}),Vr=()=>{const i=m.useContext(Kx);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},D1=({children:i})=>{const[s,n]=m.useState(null),[l,c]=m.useState(!0);m.useEffect(()=>{(async()=>{const{data:{session:p}}=await de.auth.getSession();n(p?.user??null),c(!1)})();const{data:{subscription:x}}=de.auth.onAuthStateChange(async(p,b)=>{n(b?.user??null),c(!1)});return()=>x.unsubscribe()},[]);const h={user:s,loading:l,signOut:async()=>{try{const{error:g}=await de.auth.signOut();if(g)throw console.error("Error signing out:",g),g;return{error:null}}catch(g){throw console.error("SignOut error:",g),g}}};return t.jsx(Kx.Provider,{value:h,children:i})};function O1(){const[i,s]=m.useState(""),[n,l]=m.useState(""),[c,d]=m.useState(!1),[h,g]=m.useState(!1),[x,p]=m.useState(""),[b,y]=m.useState("student"),[w,S]=m.useState(!1),[C,R]=m.useState(""),[O,M]=m.useState(!1),[T,B]=m.useState(""),[K,X]=m.useState(""),ee=ut(),re=()=>{d(!c)},q=V=>{V.preventDefault(),ee("/")},z=V=>{V.preventDefault(),ee("/signuppage")},E=async V=>{V.preventDefault(),M(!0),X(""),B("");try{const{error:J}=await de.auth.resetPasswordForEmail(C,{redirectTo:`${window.location.origin}/reset-password`});J?X(J.message):(B("Password reset email sent! Check your inbox."),R(""))}catch{X("An unexpected error occurred. Please try again.")}finally{M(!1)}},A=()=>{S(!w),X(""),B(""),R(""),p("")},P=async V=>{V.preventDefault(),g(!0),p("");try{const{data:J,error:ie}=await de.auth.signInWithPassword({email:i,password:n});if(ie){p(ie.message),g(!1);return}console.log("Login successful:",J),ee(b==="admin"?"/tracking":b==="parent"?"/parent-homepage":"/home")}catch(J){console.error("Login error:",J),p("An unexpected error occurred. Please try again.")}finally{g(!1)}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden flex items-center justify-center p-4",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"})]}),t.jsxs("div",{className:"relative z-10 bg-white/80 backdrop-blur-xl p-7 rounded-2xl shadow-xl w-full max-w-md border border-white/20 animate-fade-in-scale",children:[t.jsxs("div",{className:"text-center mb-7",children:[t.jsx("div",{className:"flex items-center justify-center -mb-3 -mt-7",children:t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-23 h-23 object-contain"})}),t.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"AutiSync v2.0"}),!w&&t.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-3 mb-3",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center justify-center",children:["Welcome Back!",t.jsx("span",{className:"text-xl mr-2 animate-wiggle",children:""})]}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Please enter your details to login! "})]})]}),x&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:x}),K&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:K}),T&&t.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg text-sm",children:T}),w?t.jsxs("form",{className:"space-y-5",onSubmit:E,children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:" Reset Your Password"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"forgotEmail",className:"flex items-center text-sm font-bold text-gray-700 mb-1",children:" Email Address"}),t.jsx("input",{type:"email",id:"forgotEmail",value:C,onChange:V=>R(V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base transition-all duration-300",placeholder:"Enter your email address",required:!0})]}),t.jsx("button",{type:"submit",disabled:O,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white py-3 rounded-xl text-base font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:O?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),"Sending Reset Email..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),"Send Reset Email"]})}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{type:"button",onClick:A,className:"text-sm font-semibold cursor-pointer text-blue-600 hover:text-blue-800 transition-colors duration-200",children:" Back to Login"})})]}):t.jsxs("form",{className:"space-y-5",onSubmit:P,children:[t.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[t.jsx("button",{type:"button",className:`px-4 py-2 rounded-xl font-bold border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-200 text-sm shadow-sm cursor-pointer ${b==="student"?"bg-blue-100 border-blue-500 text-blue-900":"bg-white border-gray-300 text-gray-600"}`,onClick:()=>y("student"),children:" Student"}),t.jsx("button",{type:"button",className:`px-4 py-2 rounded-xl font-bold border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-200 text-sm shadow-sm cursor-pointer ${b==="admin"?"bg-purple-100 border-purple-500 text-purple-900":"bg-white border-gray-300 text-gray-600"}`,onClick:()=>y("admin"),children:" Admin"}),t.jsx("button",{type:"button",className:`px-4 py-2 rounded-xl font-bold border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-200 text-sm shadow-sm cursor-pointer ${b==="parent"?"bg-green-100 border-green-500 text-green-900":"bg-white border-gray-300 text-gray-600"}`,onClick:()=>y("parent"),children:" Parent"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"flex items-center text-sm font-bold text-gray-700 mb-1",children:b==="student"?"Email Address or Username":"Email Address"}),b==="student"&&t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:" If your parent created your account, ask them for your login details"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"email",id:"email",value:i,onChange:V=>s(V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base placeholder-gray-400 transition-all duration-300",placeholder:b==="student"?"Email or ask parent for login details":"you@example.com",required:!0}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"flex items-center text-sm font-bold text-gray-700 mb-1 -mt-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:c?"text":"password",id:"password",value:n,onChange:V=>l(V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base transition-all duration-300",placeholder:"Enter your password",required:!0}),t.jsx("button",{type:"button",onClick:re,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:t.jsx("span",{className:"text-base",children:c?"":""})})]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{type:"button",onClick:A,className:"text-sm font-semibold cursor-pointer decoration-2 -mt-2 text-blue-600 hover:text-blue-800 transition-colors duration-200",children:w?"Back to Login":"Forgot password?"})}),t.jsx("button",{type:"submit",disabled:h,className:"btn-autism-friendly w-full bg-gradient-to-r from-blue-800 to-purple-800 hover:from-blue-900 hover:to-purple-900 text-white py-3 cursor-pointer rounded-xl text-base font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:h?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),"Logging in as ",b==="admin"?"Admin":b==="parent"?"Parent":"Student","..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),b==="admin"?"Login as Admin":b==="parent"?"Access Parent Portal":"Start Learning!"]})})]}),t.jsxs("div",{className:"mt-7 space-y-4",children:[t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-gray-600 text-sm",children:["Don't have an account?"," ",t.jsx("button",{onClick:z,className:"text-blue-900 cursor-pointer font-semibold decoration-2 underline-offset-2 hover:decoration-blue-600 transition-all duration-200",children:"Sign up here!"})]})}),t.jsx("div",{className:"flex items-center justify-center space-x-4 pt-5 border-t border-gray-200",children:t.jsxs("button",{onClick:q,className:"flex items-center font-semibold cursor-pointer text-sm text-black-500 hover:text-gray-700 transition-colors duration-200",children:[t.jsx("span",{className:"mr-2",children:""}),"Back to Home"]})})]}),t.jsx("div",{className:"absolute -top-4 -right-4 w-7 h-7 bg-yellow-400/30 rounded-full animate-bounce-gentle"}),t.jsx("div",{className:"absolute -bottom-4 -left-4 w-5 h-5 bg-pink-400/30 rounded-full animate-float"})]})]})}const M1=()=>{const i=ut(),s=l=>{l.preventDefault(),i("/loginpage")},n=l=>{l.preventDefault(),i("/tracking")};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"})]}),t.jsx("header",{className:"relative bg-white/80 border-b border-white/20 shadow-lg",children:t.jsx("div",{className:"container mx-auto px-6 py-2",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{onClick:n,className:"flex items-center space-x-3 cursor-pointer group",children:[t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-16 h-16 object-contain"}),t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-800 to-purple-600 bg-clip-text text-transparent",children:"AutiSync v2.0"})]}),t.jsx("button",{onClick:s,className:" cursor-pointer btn-autism-friendly bg-gradient-to-r from-blue-800 to-purple-800 hover:from-blue-900 hover:to-purple-700 text-white px-6 py-2 rounded-xl font-semibold shadow-lg transform hover:scale-105 transition-all duration-300",children:"Log In"})]})})}),t.jsx("main",{className:"relative z-10",children:t.jsxs("div",{className:"container text-center",children:[t.jsx("section",{className:"py-5",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"mb-12 mt-5 animate-fade-in-scale",children:[t.jsxs("h2",{className:"text-5xl sm:text-6xl font-bold mb-6",children:[t.jsx("span",{className:"block text-gray-800",children:"Welcome to"}),t.jsx("span",{className:"text-blue-900",children:"AutiSync v2.0"})]}),t.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20 animate-slide-up",children:[t.jsxs("p",{className:"text-xl sm:text-2xl text-gray-700 leading-relaxed",children:[t.jsx("span",{className:"font-semibold text-blue-600",children:"Understanding Autism"}),",",t.jsx("span",{className:"font-semibold text-purple-600",children:" Empowering Unique Learners"})]}),t.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"Discover how AutiSync supports your child's amazing learning journey! "})]})]})})}),t.jsxs("section",{className:"pb-16",children:[t.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold text-gray-800 mb-12 flex items-center justify-center",children:["What is Autism?",t.jsx("span",{className:"text-5xl mr-4 animate-bounce-gentle",children:""})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{icon:"",title:"A Different Brain",description:"Autism is how some people's brains work. It's not badit's just different and special!",gradient:"from-yellow-400 to-orange-500"},{icon:"",title:"Everyone is Unique",description:"Autism looks different for each person. Some need help with talking, others with sounds or changes.",gradient:"from-pink-400 to-purple-500"},{icon:"",title:"Special Strengths",description:"People with autism can focus really well, love routines, and are very loyal friends!",gradient:"from-blue-400 to-cyan-500"}].map((l,c)=>t.jsxs("div",{className:"card-autism-friendly bg-white/80 backdrop-blur-xl p-8 rounded-3xl shadow-2xl text-center border border-white/20 relative overflow-hidden",children:[t.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl ${l.gradient} opacity-10 rounded-full blur-2xl`}),t.jsx("div",{className:`inline-flex w-20 h-20 bg-gradient-to-r ${l.gradient} rounded-2xl items-center justify-center text-4xl mb-6 shadow-lg transform hover:scale-110 transition-all duration-300`,children:l.icon}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:l.title}),t.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:l.description}),t.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:[1,2,3].map(d=>t.jsx("div",{className:`w-2 h-2 bg-gradient-to-r ${l.gradient} rounded-full opacity-60`},d))})]},c))})]}),t.jsxs("section",{className:"pb-13",children:[t.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold text-gray-800 mb-12 flex items-center justify-center",children:[t.jsx("span",{className:"text-5xl mr-4 animate-float",children:""}),"How AutiSync Supports Learning"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[{icon:"",title:"Your Way to Learn",description:"AutiSync fits how you learn best. Fast or slowit's up to you!",color:"bg-blue-500"},{icon:"",title:"Fun & Visual",description:"We use games, pictures, and easy steps to help you learn.",color:"bg-purple-500"},{icon:"",title:"Routines That Help",description:"Same steps every time so you feel safe and ready.",color:"bg-green-500"},{icon:"",title:"Important Life Skills",description:"We help you practice talking, feelings, and everyday things.",color:"bg-pink-500"},{icon:"",title:"We Track Your Wins",description:"Your grown-ups can see what you're learning and how awesome you're doing!",color:"bg-indigo-500"},{icon:"",title:"Calm & Comfy",description:"AutiSync is gentle on your eyes and ears. You can change the look and sound to feel good.",color:"bg-teal-500"}].map((l,c)=>t.jsxs("div",{className:"card-autism-friendly bg-white/80 backdrop-blur-xl p-6 rounded-2xl shadow-xl text-center border border-white/20 relative overflow-hidden",style:{animationDelay:`${c*.1}s`},children:[t.jsx("div",{className:`inline-flex w-16 h-16 ${l.color} rounded-xl items-center justify-center text-3xl mb-4 shadow-lg text-white transform hover:scale-110 transition-all duration-300`,children:l.icon}),t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:l.title}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.description})]},c))})]}),t.jsx("section",{className:"pb-16",children:t.jsxs("div",{className:"w-380 mx-auto bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl p-8 text-white shadow-2xl animate-float",children:[t.jsxs("h3",{className:"text-3xl font-bold mb-4 flex items-center justify-center",children:[t.jsx("span",{className:"text-4xl mr-3 animate-wiggle",children:""}),"Ready to Start Learning?"]}),t.jsx("p",{className:"text-xl opacity-90 mb-6",children:"Join thousands of students on their amazing learning adventure!"}),t.jsx("button",{onClick:s,className:"btn-autism-friendly bg-white text-blue-600 px-8 py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Start Your Journey! "})]})})]})}),t.jsx("footer",{className:"relative z-10 bg-white/80 backdrop-blur-xl border-t border-white/20 py-6 -mt-9",children:t.jsxs("div",{className:"container mx-auto px-6 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold",children:"A"})}),t.jsx("span",{className:"text-gray-600 font-semibold",children:"AutiSync - Empowering Every Learner"})]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Making learning accessible, engaging, and fun for everyone! "})]})})]})},Mh=[{name:"Happy",image:"/assets/happy.png",color:"from-yellow-400 to-orange-500",bgColor:"bg-yellow-50"},{name:"Sad",image:"/assets/sad.png",color:"from-blue-400 to-blue-600",bgColor:"bg-blue-50"},{name:"Upset",image:"/assets/Upset.jpg",color:"from-red-400 to-red-600",bgColor:"bg-red-50"},{name:"Excited",image:"/assets/excited.png",color:"from-purple-400 to-pink-500",bgColor:"bg-purple-50"},{name:"Tired",image:"/assets/tired.jpg",color:"from-green-400 to-teal-500",bgColor:"bg-green-50"}],z1=()=>{const[i,s]=m.useState(null),[n,l]=m.useState(!1),[c,d]=m.useState(!1),[h,g]=m.useState(""),[x,p]=m.useState([{emotion:"Happy",image:"/assets/happy.png",time:"2 hours ago",userName:"Emma"},{emotion:"Tired",image:"/assets/tired.jpg",time:"5 hours ago",userName:"Alex"},{emotion:"Excited",image:"/assets/excited.png",time:"Yesterday",userName:"Sam"},{emotion:"Tired",image:"/assets/tired.jpg",time:"1 hour ago",userName:"Jordan"},{emotion:"Sad",image:"/assets/sad.png",time:"2 hours ago",userName:"Riley"},{emotion:"Excited",image:"/assets/excited.png",time:"Yesterday",userName:"Casey"}]),[b,y]=m.useState(""),[w,S]=m.useState(null),{user:C}=Vr(),R=ut(),O=z=>{const A=Math.floor((new Date-z)/(1e3*60));if(A<1)return"Just now";if(A<60)return`${A} minutes ago`;const P=Math.floor(A/60);if(P<24)return`${P} hours ago`;const V=Math.floor(P/24);return V===1?"Yesterday":V<7?`${V} days ago`:z.toLocaleDateString()},M=async(z,E,A,P)=>{try{console.log("Creating alert for profile:",z);const{data:V,error:J}=await de.from("admins").select("id").limit(1);J&&console.error("Error fetching admin:",J);const ie={profile_id:z,emotion_id:A,status:"priority",created_at:new Date().toISOString(),message:`Negative emotion detected: ${E}${P?` - ${P}`:""}`,...V&&V.length>0&&{admin_id:V[0].id}},{data:k,error:G}=await de.from("alert").insert([ie]).select();G?console.error("Error creating alert:",G):(console.log("Alert created successfully:",k),await T(z,E,P,null,V?.[0]?.id))}catch(V){console.error("Error in createAlert:",V)}},T=async(z,E,A,P,V)=>{try{const ie=` HIGH PRIORITY ALERT: ${w?.username||w?.full_name?.split(" ")[0]||"Student"} submitted "${E}"${A?`. Note: "${A}"`:""}. Please check on the student.`,k=[];if(V&&k.push({profile_id:z,message:ie,type:"alert",priority:"high",is_read:!1,created_at:new Date().toISOString()}),k.length>0){const{data:G,error:I}=await de.from("notifications").insert(k).select();I?console.error("Error creating notifications:",I):console.log("Notifications created successfully:",G)}}catch(J){console.error("Error in createNotifications:",J)}};m.useEffect(()=>{if(C){B(),K();const z=setInterval(()=>{K()},3600*1e3);return()=>{clearInterval(z)}}},[C]);const B=async()=>{if(C)try{const{data:z,error:E}=await de.from("user_profiles").select("*").eq("user_id",C.id).single();E?console.error("Error fetching profile:",E):S(z)}catch(z){console.error("Error in fetchUserProfile:",z)}},K=async()=>{try{d(!0),console.log("Fetching expressions...");const z=new Date;z.setHours(z.getHours()-24);const E=z.toISOString(),{data:A,error:P}=await de.from("Expressions").select("*").gte("created_at",E).order("created_at",{ascending:!1}).limit(50);if(console.log("Expressions query result (24h filter):",{data:A,error:P,count:A?.length,since:E}),P){console.error("Error fetching expressions:",P);const{data:V,error:J}=await de.from("Expressions").select("*").gte("created_at",E).order("created_at",{ascending:!1}).limit(50);if(console.log("Fallback simple query (24h filter):",{simpleData:V,simpleError:J}),!J&&V){const ie=V.map(k=>{const G=k.emotion==="angry"?"Upset":k.emotion==="calm"?"Tired":k.emotion?.charAt(0).toUpperCase()+k.emotion?.slice(1),oe=(xe=>{switch(xe){case"angry":return"Upset.jpg";case"calm":return"tired.jpg";case"happy":return"happy.png";case"sad":return"sad.png";case"excited":return"excited.png";default:return`${xe}.png`}})(k.emotion);return{emotion:G||"Unknown",image:`/assets/${oe||"neutral.png"}`,time:O(new Date(k.created_at)),userName:"Unknown User",note:k.note||null}});p(ie)}return}if(A&&A.length>0){const V=[...new Set(A.map(k=>k.user_id).filter(Boolean))];let J=[];if(V.length>0){const{data:k,error:G}=await de.from("user_profiles").select("user_id, full_name, username").in("user_id",V);!G&&k&&(J=k)}const ie=A.map(k=>{const G=J.find(ne=>ne.user_id===k.user_id),I=O(new Date(k.created_at)),oe=G&&(G.full_name||G.username)||"Unknown User",xe=k.emotion==="angry"?"Upset":k.emotion==="calm"?"Tired":k.emotion?.charAt(0).toUpperCase()+k.emotion?.slice(1),F=(ne=>{switch(ne){case"angry":return"Upset.jpg";case"calm":return"tired.jpg";case"happy":return"happy.png";case"sad":return"sad.png";case"excited":return"excited.png";default:return`${ne}.png`}})(k.emotion);return{emotion:xe||"Unknown",image:`/assets/${F||"neutral.png"}`,time:I,userName:oe,note:k.note||null,id:k.id,user_id:k.user_id}});console.log("Formatted expressions:",ie),p(ie)}else console.log("No expressions found"),p([])}catch(z){console.error("Error in fetchExpressions:",z),p([])}finally{d(!1)}},X=z=>{s(z),l(!0)},ee=async z=>{if(z.preventDefault(),!w?.id){alert("User profile not loaded. Please refresh and try again.");return}const E=Mh.find(A=>A.name===i);w?.full_name||w?.username||C?.user_metadata?.full_name||C?.email?.split("@")[0],E?.image;try{console.log("Starting emotion submission..."),console.log("User profile:",w),console.log("Using user profile directly for expressions");const A=w,V={happy:"happy",sad:"sad",upset:"angry",excited:"excited",tired:"calm"}[i.toLowerCase()]||i.toLowerCase(),J=i.toLowerCase()==="sad"||i.toLowerCase()==="upset",ie={user_id:A.user_id,emotion:V,note:h.trim()||null};console.log("Submitting expression:",ie);const{data:k,error:G}=await de.from("Expressions").insert([ie]).select().single();if(G){console.error("Expression creation failed:",G),alert(`Failed to save emotion: ${G.message||"Please try again."}`);return}console.log("Expression saved successfully:",k);const{data:I,error:oe}=await de.from("Expressions").select("*").eq("id",k.id).single();console.log("Expression verification:",{verifyData:I,verifyError:oe});const xe={profile_id:w.user_id,expressions_id:k.id,created_at:new Date().toISOString()},{error:_}=await de.from("user_emotion").insert([xe]);_&&console.warn("Warning: Failed to create user_emotion record:",_),J&&await M(w.user_id,i,k.id,h),l(!1),g(""),console.log("Refreshing expressions from database..."),await K(),console.log("Emotion submitted and refreshed and refreshed successfully!")}catch(A){console.error("Unexpected error saving expression:",A),alert("An unexpected error occurred. Please try again.")}l(!1),g("")},re=()=>R("/studentpage"),q=()=>{R("/studentprofile")};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"})]}),t.jsx("header",{className:"sticky top-0 z-10 bg-white/70 backdrop-blur-xl border-b border-white/20 shadow-sm",children:t.jsx("div",{className:"container mx-auto px-3 py-1",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-16 h-16 object-contain"}),t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync v2.0"})]}),t.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[t.jsx("a",{href:"/home",className:"text-blue-600 hover:text-blue-600 font-semibold transition-colors duration-200 flex items-center",children:"Home"}),t.jsx("a",{href:"/flashcardspage",className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200 flex items-center",children:"Activities"}),t.jsx("a",{href:"/studentpage",className:"text-gray-700  hover:text-blue-600 font-semibold transition-colors duration-200 flex items-center",children:"Learning Hub"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{onClick:q,className:"cursor-pointer group flex items-center space-x-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-2 hover:shadow-lg transition-all duration-300",children:[t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"w-10 h-10 rounded-xl object-cover border-2 border-white shadow-sm group-hover:scale-105 transition-transform duration-300"}),t.jsx("span",{className:"hidden sm:block text-sm font-semibold text-gray-700",children:w?.full_name||w?.username||C?.user_metadata?.full_name||C?.email?.split("@")[0]||"Student"})]})})]})})}),t.jsx("main",{className:"relative z-10 container mx-auto py-2",children:t.jsx("section",{className:"mb-",children:t.jsxs("div",{className:" bg-white/80  p-6 shadow-2xl border border-white/20 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-12 left-38 text-2xl animate-float",children:""}),t.jsx("div",{className:"absolute top-16 right-8 text-2xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute bottom-12 right-8 text-2xl animate-float-delayed",children:""}),t.jsx("div",{className:"absolute top-1/6 left-2 w-4 h-4 bg-gradient-to-r from-purple-300 to-pink-300 rounded-full animate-pulse-gentle opacity-40"}),t.jsx("div",{className:"absolute top-1/5 right-2 w-5 h-5 bg-gradient-to-r from-teal-300 to-green-300 rounded-full animate-float opacity-35"}),t.jsx("div",{className:"absolute top-2/5 left-6 4 w-4 h-4 bg-gradient-to-r from-indigo-300 to-blue-300 rounded-full animate-bounce-gentle opacity-45"}),t.jsx("div",{className:"absolute top-3/5 right-64 w-5 h-5 bg-gradient-to-r from-rose-300 to-pink-300 rounded-full animate-float-delayed opacity-40"}),t.jsx("div",{className:"absolute top-4/5 left-2 w-4 h-4 bg-gradient-to-r from-yellow-300 to-orange-300 rounded-full animate-pulse-gentle opacity-50"}),t.jsx("div",{className:"absolute top-5/6 right-2 w-5 h-5 bg-gradient-to-r from-cyan-300 to-blue-300 rounded-full animate-float opacity-45"}),t.jsx("div",{className:"absolute top-1/2 left-1 w-3 h-3 bg-gradient-to-r from-emerald-300 to-teal-300 rounded-full animate-bounce-gentle opacity-40"}),t.jsx("div",{className:"absolute top-1/2 right-8 w-3 h-3 bg-gradient-to-r from-violet-300 to-purple-300 rounded-full animate-float-delayed opacity-35"}),t.jsx("div",{className:"absolute top-2/3 right-72 w-4 h-4 bg-gradient-to-r from-orange-300 to-red-300 rounded-full animate-float opacity-38"}),t.jsx("div",{className:"absolute top-18 right-34 text-xl animate-float",children:""}),t.jsx("div",{className:"absolute top-30 left-60 text-2xl animate-float-delayed",children:""}),t.jsx("div",{className:"absolute top-44 right-60 text-xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute top-58 left-32 text-2xl animate-float",children:""}),t.jsx("div",{className:"absolute top-72 right-32 text-xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute top-86 left-26 text-2xl animate-float-delayed",children:""}),t.jsx("div",{className:"absolute top-100 right-56 text-xl animate-pulse-gentle",children:""}),t.jsx("div",{className:"absolute top-12 left-12 w-3 h-3 bg-yellow-300 rounded-full opacity-70 animate-pulse-gentle"}),t.jsx("div",{className:"absolute top-22 right-12 w-2 h-2 bg-pink-300 rounded-full opacity-60 animate-float"}),t.jsx("div",{className:"absolute top-34 left-68 w-3 h-3 bg-blue-300 rounded-full opacity-75 animate-bounce-gentle"}),t.jsx("div",{className:"absolute top-46 right-68 w-2 h-2 bg-green-300 rounded-full opacity-65 animate-float-delayed"}),t.jsx("div",{className:"absolute top-60 left-80 w-3 h-3 bg-purple-300 rounded-full opacity-70 animate-pulse-gentle"}),t.jsx("div",{className:"absolute top-74 right-4 w-2 h-2 bg-orange-300 rounded-full opacity-80 animate-float"}),t.jsx("div",{className:"absolute top-88 left-76 w-3 h-3 bg-cyan-300 rounded-full opacity-60 animate-bounce-gentle"}),t.jsx("div",{className:"absolute top-102 right-76 w-2 h-2 bg-rose-300 rounded-full opacity-75 animate-float-delayed"}),t.jsx("div",{className:"absolute top-116 left-6 w-3 h-3 bg-lime-300 rounded-full opacity-70 animate-pulse-gentle"}),t.jsx("div",{className:"absolute top-130 right-6 w-2 h-2 bg-indigo-300 rounded-full opacity-65 animate-float"}),t.jsx("div",{className:"absolute top-144 left-80 w-3 h-3 bg-teal-300 rounded-full opacity-80 animate-bounce-gentle"}),t.jsx("div",{className:"absolute top-158 right-80 w-2 h-2 bg-amber-300 rounded-full opacity-60 animate-float-delayed"}),t.jsxs("div",{className:"text-center mb-6 relative z-10",children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[t.jsx("span",{className:"text-4xl mr-3 animate-bounce-gentle",children:""}),"Video Tutorial"]}),t.jsx("p",{className:"text-lg text-gray-600",children:"Learn about emotions and feelings! Watch and learn together! "})]}),t.jsx("div",{className:"relative z-10",children:t.jsxs("video",{className:"w-150 h-70 mx-auto object-cover",controls:!0,controlsList:"nodownload",preload:"auto",playsInline:!0,children:[t.jsx("source",{src:"/VideoTutorial.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}),t.jsxs("div",{className:"mt-8 px-8",children:[t.jsx("div",{className:"text-center mt-18 mb-12",children:t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4 flex items-center justify-center",children:[t.jsx("span",{className:"text-4xl mr-3 animate-wiggle",children:""}),"How are you feeling today?"]})}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6 mb-15",children:Mh.map((z,E)=>t.jsxs("div",{className:`card-autism-friendly ${z.bgColor} p-6 rounded-3xl text-center cursor-pointer border-3 transition-all duration-300 ${i===z.name?"border-blue-500 shadow-xl scale-105":"border-white/50 hover:border-blue-300"}`,onClick:()=>X(z.name),style:{animationDelay:`${E*.1}s`},children:[t.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${z.color} rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg animate-float`,children:t.jsx("img",{src:z.image,alt:z.name,className:"w-16 h-16 rounded-xl object-cover"})}),t.jsx("span",{className:"text-lg font-bold text-gray-800",children:z.name}),t.jsx("div",{className:"mt-2",children:t.jsxs("span",{className:"text-2xl animate-bounce-gentle",children:[z.name==="Happy",z.name==="Sad",z.name==="Upset",z.name==="Excited",z.name==="Tired"]})})]},E))})]}),t.jsxs("div",{className:"mt-18 px-8",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[t.jsx("span",{className:"text-4xl mr-3 animate-float",children:""}),"Community Expression Wall",c&&t.jsx("span",{className:"ml-3 text-sm text-blue-500 animate-spin",children:""})]}),t.jsxs("p",{className:"text-sm text-gray-500 flex items-center justify-center",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Showing expressions from the last 24 hours"]})]}),t.jsx("div",{className:"max-h-[350px] overflow-y-auto pr-2 scrollbar-autism-friendly",children:t.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:x.map((z,E)=>t.jsx("div",{className:"card-autism-friendly bg-gradient-to-r from-blue-100 to-white p-6 rounded-2xl shadow-lg border-l-4 border-blue-500 w-82",style:{animationDelay:`${E*.1}s`},children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden shadow-lg",children:t.jsx("img",{src:z.image,alt:z.emotion,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center space-x-3 mb-2",children:t.jsx("span",{className:"text-xl font-bold text-gray-800",children:z.emotion})}),t.jsx("p",{className:"text-gray-700 mb-2",children:z.description}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"text-blue-600 font-bold bg-blue-50 px-2 py-1 rounded-lg",children:z.userName})]}),t.jsx("span",{className:"text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:z.time})]})]})]})},E))})})]}),t.jsx("section",{className:"mb-12 mt-10 ",children:t.jsxs("div",{className:"card-autism-friendly bg-white-500 backdrop-blur-2xl rounded-3xl p-6 shadow-2xl border border-white/20",children:[t.jsx("div",{className:"text-center mb-8",children:t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4 flex items-center justify-center",children:["Categories",t.jsx("span",{className:"text-4xl mr-3 animate-float",children:""})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:" bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-3xl text-center border-3 border-white/50 hover:border-blue-300 hover:shadow-xl transition-all duration-300 group",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-300",children:t.jsx("span",{className:"text-white text-4xl",children:""})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"ACADEMIC"}),t.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Learn basic school stuff in fun ways!"})]}),t.jsxs("div",{className:" bg-gradient-to-br from-orange-50 to-yellow-50 p-8 rounded-3xl text-center border-3 border-white/50 hover:border-orange-300 hover:shadow-xl transition-all duration-300 group",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-300",children:t.jsx("span",{className:"text-white text-4xl",children:""})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"SOCIAL/DAILY LIFE SKILL"}),t.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Practice talking, sharing, and feelings."})]})]})]})}),t.jsx("section",{className:"mb-12",children:t.jsxs("div",{className:" bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-white/20",children:[t.jsx("div",{className:"text-center mb-8",children:t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4 flex items-center justify-center",children:["Difficulty Levels",t.jsx("span",{className:"text-4xl mr-3 animate-bounce-gentle",children:""})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:" bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-3xl text-center border-3 border-white/50 hover:border-green-300 hover:shadow-xl transition-all duration-300 group",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-green-500 to-emerald-600 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-300",children:t.jsx("span",{className:"text-white text-4xl",children:""})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Beginner"}),t.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Start here. Simple and fun!"})]}),t.jsxs("div",{className:"card-autism-friendly bg-gradient-to-br from-yellow-50 to-amber-50 p-8 rounded-3xl text-center  border-3 border-white/50 hover:border-yellow-300 hover:shadow-xl transition-all duration-300 group",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-300",children:t.jsx("span",{className:"text-white text-4xl",children:""})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Intermediate"}),t.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"A little harder. Let's level up!"})]}),t.jsxs("div",{className:"card-autism-friendly bg-gradient-to-br from-red-50 to-rose-50 p-8 rounded-3xl text-center  border-3 border-white/50 hover:border-red-300 hover:shadow-xl transition-all duration-300 group",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-red-500 to-rose-600 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-300",children:t.jsx("span",{className:"text-white text-4xl",children:"!"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Proficient"}),t.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Ready for a challenge? Let's go big!"})]})]}),t.jsx("div",{className:"text-center mt-8",children:t.jsxs("button",{className:"cursor-pointer btn-autism-friendly bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 flex items-center mx-auto",onClick:()=>R("/studentpage"),children:[t.jsx("span",{className:"cursor-pointer mr-3 text-2xl",children:""}),"Start Learning"]})})]})})]})})}),n&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white/95 backdrop-blur-xl p-8 rounded-3xl w-full max-w-md shadow-2xl border border-white/20 animate-fade-in-scale",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-2xl overflow-hidden shadow-lg animate-bounce-gentle",children:t.jsx("img",{src:Mh.find(z=>z.name===i)?.image,alt:i,className:"w-full h-full object-cover"})}),t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:["You're feeling ",t.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:i}),"!"]}),t.jsxs("div",{className:"space-y-2 mb-6",children:[t.jsx("textarea",{value:h,onChange:z=>g(z.target.value),placeholder:"Why?",className:"w-full mt-7 bg-gray-200 h-22 px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all duration-200 resize-none text-gray-700 placeholder-gray-400",maxLength:200}),t.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[h.length,"/200 characters"]})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:()=>{l(!1),g("")},className:"cursor-pointer flex-1 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg",children:"Cancel"}),t.jsxs("button",{onClick:ee,className:"cursor-pointer btn-autism-friendly flex-1 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 text-white py-4 px-6 rounded-xl font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center space-x-2",children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:""}),t.jsx("span",{children:"Share My Feeling!"}),t.jsx("span",{className:"text-xl animate-pulse-gentle",children:""})]})]})]})})}),t.jsx("div",{className:"md:hidden fixed bottom-4 left-4 right-4 z-20",children:t.jsx("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 p-4",children:t.jsxs("div",{className:"flex justify-around",children:[t.jsxs("button",{onClick:re,className:"flex flex-col items-center p-2 text-gray-600 hover:text-blue-600",children:[t.jsx("span",{className:"text-2xl mb-1",children:""}),t.jsx("span",{className:"text-xs font-semibold",children:"Home"})]}),t.jsxs("a",{href:"/flashcardspage",className:"flex flex-col items-center p-2 text-gray-600 hover:text-blue-600",children:[t.jsx("span",{className:"text-2xl mb-1",children:""}),t.jsx("span",{className:"text-xs font-semibold",children:"Activity"})]}),t.jsxs("a",{href:"#emotion-selection",className:"flex flex-col items-center p-2 text-blue-600",children:[t.jsx("span",{className:"text-2xl mb-1",children:""}),t.jsx("span",{className:"text-xs font-semibold",children:"Expression"})]})]})})}),t.jsx("style",{jsx:!0,children:`
        /* Gentle floating animations */
        @keyframes float {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            filter: brightness(1);
          }
          50% { 
            transform: translateY(-12px) rotate(2deg); 
            filter: brightness(1.1);
          }
        }
        
        @keyframes float-delayed {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            filter: brightness(1);
          }
          50% { 
            transform: translateY(-8px) rotate(-1deg); 
            filter: brightness(1.05);
          }
        }
        
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
        
        .animate-float-delayed {
          animation: float-delayed 5s ease-in-out infinite;
          animation-delay: 1s;
        }
        
        /* Gentle bouncing */
        @keyframes bounce-gentle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-6px); }
        }
        
        .animate-bounce-gentle {
          animation: bounce-gentle 2.5s ease-in-out infinite;
        }
        
        /* Gentle pulsing effects */
        @keyframes pulse-gentle {
          0%, 100% { 
            transform: scale(1); 
            opacity: 1; 
          }
          50% { 
            transform: scale(1.03); 
            opacity: 0.9; 
          }
        }
        
        .animate-pulse-gentle {
          animation: pulse-gentle 3s ease-in-out infinite;
        }
        
        /* Wiggle animation */
        @keyframes wiggle {
          0%, 100% { transform: rotate(0deg); }
          25% { transform: rotate(3deg); }
          75% { transform: rotate(-3deg); }
        }
        
        .animate-wiggle {
          animation: wiggle 2s ease-in-out infinite;
        }
        
        /* Fade in scale animation */
        @keyframes fade-in-scale {
          from {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        
        .animate-fade-in-scale {
          animation: fade-in-scale 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Shimmer animation for selected level */
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        
        .animate-shimmer {
          animation: shimmer 2s ease-in-out infinite;
        }
        
        /* Autism-friendly scrollbar for Community Expression Wall */
        .scrollbar-autism-friendly::-webkit-scrollbar {
          width: 12px;
        }
        
        .scrollbar-autism-friendly::-webkit-scrollbar-track {
          background: linear-gradient(to bottom, #e0f2fe, #ddd6fe);
          border-radius: 10px;
          margin: 4px 0;
        }
        
        .scrollbar-autism-friendly::-webkit-scrollbar-thumb {
          background: linear-gradient(to bottom, #3b82f6, #8b5cf6);
          border-radius: 10px;
          border: 2px solid #e0f2fe;
          transition: all 0.3s ease;
        }
        
        .scrollbar-autism-friendly::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(to bottom, #2563eb, #7c3aed);
          transform: scale(1.1);
        }
        
        /* For Firefox */
        .scrollbar-autism-friendly {
          scrollbar-width: thin;
          scrollbar-color: #8b5cf6 #e0f2fe;
        }
        
        /* Smooth scrolling behavior */
        .scrollbar-autism-friendly {
          scroll-behavior: smooth;
        }
        
        /* Accessibility: Reduce motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
          
          .scrollbar-autism-friendly {
            scroll-behavior: auto;
          }
        }
      `})]})};async function L1({user_id:i,full_name:s,username:n,gender:l,email:c,age:d,birthdate:h,address:g,school:x,phone_number:p}){try{const b={user_id:i,username:n,full_name:s,email:c};d&&(b.age=d),h&&(b.birthdate=h),g&&(b.address=g),l&&(b.gender=l),Object.keys(b).forEach(S=>{(b[S]===null||b[S]===void 0)&&delete b[S]}),console.log("Creating profile with cleaned data:",b),console.log("Waiting for auth user to be fully committed..."),await new Promise(S=>setTimeout(S,2e3));let y=0;const w=5;for(;y<w;){try{const{data:R,error:O}=await de.auth.getUser();if(O||!R?.user||R.user.id!==i)throw console.warn(`Auth user verification failed on attempt ${y+1}`),new Error("Auth user not ready");console.log(`Auth user verified on attempt ${y+1}`)}catch(R){if(console.warn(`Auth verification failed on attempt ${y+1}:`,R.message),y<w-1){const O=2e3*(y+1);console.log(`Waiting ${O}ms before retry...`),await new Promise(M=>setTimeout(M,O)),y++;continue}}const{data:S,error:C}=await de.from("user_profiles").insert([b]).select();if(!C)return console.log("Profile created successfully on attempt",y+1),{data:S,error:C};if(C.code==="23503")if(console.warn(`Foreign key constraint violation on attempt ${y+1}. Retrying...`),y++,y<w){const R=2500*y;console.log(`Waiting ${R}ms before retry...`),await new Promise(O=>setTimeout(O,R))}else return console.error("All retry attempts failed. Auth user may not exist:",i),{data:null,error:{message:"Account creation failed after multiple attempts. The authentication system may need more time. Please wait a moment and try logging in, or refresh the page and try again.",code:"FK_CONSTRAINT_VIOLATION_RETRY_FAILED",originalError:C}};else return console.error("Non-foreign-key error:",C),{data:S,error:C}}}catch(b){return console.error("Unexpected error in createUserProfile:",b),{data:null,error:{message:b.message}}}}async function U1(){const{data:i,error:s}=await de.from("user_profiles").select("*");return{data:i,error:s}}async function B1(i){const{data:s,error:n}=await de.from("user_profiles").select("*").eq("user_id",i).single();return{data:s,error:n}}async function Zx({user_id:i,full_name:s,email:n,phone_number:l,address:c}){try{console.log("parentsApi: Creating parent with data:",{user_id:i,full_name:s,email:n,phone_number:l,address:c});const d={user_id:i,full_name:s,email:n,phone_number:l,address:c};Object.keys(d).forEach(x=>{(d[x]===null||d[x]===void 0)&&delete d[x]});const{data:h,error:g}=await de.from("parents").insert([d]).select();return console.log("parentsApi: Insert result:",{data:h,error:g}),{data:h,error:g}}catch(d){return console.error("parentsApi: Unexpected error:",d),{data:null,error:{message:d.message}}}}async function Jx(i){const{data:s,error:n}=await de.from("parents").select("*").eq("user_id",i).single();return{data:s,error:n}}async function P1(i,s){const{data:n,error:l}=await de.from("parents").select("children_ids").eq("id",i).single();if(l)return{data:null,error:l};const c=n.children_ids||[],d=[...new Set([...c,s])],{data:h,error:g}=await de.from("parents").update({children_ids:d}).eq("id",i).select();return{data:h,error:g}}async function $1({user_id:i,full_name:s,email:n,phone_number:l,address:c,department:d,permissions:h}){try{console.log("adminsApi: Creating admin with data:",{user_id:i,full_name:s,email:n,phone_number:l,address:c,department:d,permissions:h});const g={user_id:i,full_name:s,email:n,phone_number:l,address:c,department:d,permissions:h||{}};Object.keys(g).forEach(b=>{(g[b]===null||g[b]===void 0)&&delete g[b]});const{data:x,error:p}=await de.from("admins").insert([g]).select();return console.log("adminsApi: Insert result:",{data:x,error:p}),{data:x,error:p}}catch(g){return console.error("adminsApi: Unexpected error:",g),{data:null,error:{message:g.message}}}}async function I1(i){const{data:s,error:n}=await de.from("admins").select("*").eq("user_id",i).single();return{data:s,error:n}}async function H1(i,s){const{data:n,error:l}=await de.from("admins").update(s).eq("user_id",i);return{data:n,error:l}}function q1(){const i=ut(),[s,n]=m.useState({fullName:"",username:"",email:"",password:"",confirmPassword:"",age:"",birthdate:"",address:"",gender:"",phoneNumber:"",profilePicture:null}),[l,c]=m.useState(!1),[d,h]=m.useState(!1),[g,x]=m.useState(!1),[p,b]=m.useState(""),[y,w]=m.useState(""),[S,C]=m.useState("student"),[R,O]=m.useState(null),M=ee=>{n({...s,[ee.target.name]:ee.target.value})},T=ee=>{const re=ee.target.files[0];if(re){n({...s,profilePicture:re});const q=URL.createObjectURL(re);O(q)}},B=ee=>{ee.preventDefault(),i("/loginpage")},K=ee=>{ee.preventDefault(),i("/")},X=async ee=>{if(ee.preventDefault(),x(!0),b(""),w(""),s.password!==s.confirmPassword){b("Passwords do not match!"),x(!1);return}if(s.password.length<6){b("Password must be at least 6 characters long!"),x(!1);return}try{console.log("Starting signup process for:",s.email);const{data:re,error:q}=await de.auth.signUp({email:s.email,password:s.password,options:{data:{full_name:s.fullName,user_type:S,username:s.username,gender:s.gender,age:s.age,birthdate:s.birthdate,address:s.address}}});if(console.log("Auth signup result:",{authData:re,signUpError:q}),q){console.error("Auth signup failed:",q),b(q.message),x(!1);return}const z=re.user?.id||re.session?.user?.id;if(!z){console.error("No user ID returned from auth signup"),console.error("Full auth data:",re),b("Failed to create user account. Please try again."),x(!1);return}if(console.log("Using user ID for profile creation:",z),console.log("Waiting for auth user to be fully committed..."),await new Promise(E=>setTimeout(E,3e3)),re.user&&!re.user.email_confirmed_at&&console.log("User needs email confirmation, but we can still create profile"),S==="student"){const E={user_id:z,full_name:s.fullName,username:s.username,gender:s.gender,email:s.email,age:parseInt(s.age)||null,birthdate:s.birthdate||null,address:s.address,school:null};console.log("Creating student profile with data:",E);const{data:A,error:P}=await L1(E);if(P){console.error("Error creating user profile:",P),P.code==="FK_CONSTRAINT_VIOLATION_RETRY_FAILED"?b("Account created but profile setup is taking longer than expected. Please wait a moment and try logging in with your credentials, or refresh this page and try again."):b(`Failed to create student profile: ${P.message}`),x(!1);return}const V=A?.[0]?.id;if(!V){console.error("Profile creation result:",A),b("Failed to get profile ID after creating student profile."),x(!1);return}console.log("Using profile ID:",V)}else if(S==="parent"){const E={user_id:z,full_name:s.fullName,email:s.email,phone_number:s.phoneNumber,address:s.address};console.log("Creating parent record with data:",E);const{error:A}=await Zx(E);if(A){console.error("Error creating parent record:",A),b(`Failed to create parent account: ${A.message}`),x(!1);return}}else if(S==="admin"){const E={user_id:z,full_name:s.fullName,email:s.email,phone_number:s.phoneNumber,address:s.address,department:s.department||"General",permissions:{can_view_students:!0,can_edit_students:!1,can_delete_students:!1,can_view_reports:!0,can_manage_activities:!1}};console.log("Creating admin record with data:",E);const{error:A}=await $1(E);if(A){console.error("Error creating admin record:",A),b(`Failed to create admin account: ${A.message}`),x(!1);return}}w("Account created successfully! Please check your email to verify your account."),console.log("Signup successful - all records created:",re),setTimeout(()=>{i("/loginpage")},3e3)}catch(re){console.error("Signup error:",re),b("An unexpected error occurred. Please try again.")}finally{x(!1)}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden flex items-center justify-center p-4",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"})]}),t.jsxs("div",{className:"relative z-10 bg-white/70 backdrop-blur-xl p-8 rounded-3xl shadow-2xl w-full max-w-lg border border-white/20 animate-fade-in-scale",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"flex items-center -mt-7 justify-center ",children:t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-22 h-22 object-contain"})}),t.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-1 -mt-2",children:"AutiSync v2.0"}),t.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-2xl p-4 mb-4",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[t.jsx("span",{className:"text-2xl mr-2 animate-bounce-gentle",children:""}),"Create Your Account!"]}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Join the amazing learning adventure! Let's get started on your journey! "})]})]}),p&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-xl text-sm",children:p}),y&&t.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-xl text-sm",children:y}),t.jsxs("form",{className:"space-y-6",onSubmit:X,children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-3 text-center",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"What type of account would you like to create?"]}),t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsxs("button",{type:"button",className:`px-4 py-3 rounded-xl font-bold border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-200 text-sm shadow-sm flex items-center space-x-2 cursor-pointer ${S==="student"?"bg-blue-100 border-blue-500 text-blue-900 transform scale-105":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,onClick:()=>C("student"),children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{children:"Student"})]}),t.jsxs("button",{type:"button",className:`px-4 py-3 rounded-xl font-bold border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-200 text-sm shadow-sm flex items-center space-x-2 cursor-pointer ${S==="admin"?"bg-purple-100 border-purple-500 text-purple-900 transform scale-105":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,onClick:()=>C("admin"),children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{children:"Teacher/Admin"})]}),t.jsxs("button",{type:"button",className:`px-4 py-3 rounded-xl font-bold border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-200 text-sm shadow-sm flex items-center space-x-2 cursor-pointer ${S==="parent"?"bg-green-100 border-green-500 text-green-900 transform scale-105":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,onClick:()=>C("parent"),children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{children:"Parent"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"fullName",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Full Name"]}),t.jsx("input",{type:"text",id:"fullName",name:"fullName",value:s.fullName,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",placeholder:"Enter your full name",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Profile Picture (Optional)"]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center overflow-hidden",children:R?t.jsx("img",{src:R,alt:"Profile Preview",className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-2xl text-gray-400",children:""})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{type:"file",id:"profilePicture",accept:"image/*",onChange:T,className:"hidden"}),t.jsxs("label",{htmlFor:"profilePicture",className:"inline-flex items-center px-4 py-2 border-2 border-blue-300 text-blue-700 bg-blue-50 rounded-xl hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all duration-200 cursor-pointer text-sm font-medium",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Choose Photo"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You can skip this and add a photo later"})]})]})]}),S==="student"&&t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"username",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Username"]}),t.jsx("input",{type:"text",id:"username",name:"username",value:s.username,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",placeholder:"Choose a fun username!",required:S==="student",minLength:"3",maxLength:"20"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be your display name in the app (3-20 characters)"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"email",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Email Address"]}),t.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",placeholder:"you@example.com",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"address",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Address"]}),t.jsx("input",{type:"text",id:"address",name:"address",value:s.address,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",placeholder:"Enter your address",required:!0})]}),S==="student"&&t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"age",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Age"]}),t.jsx("input",{type:"number",id:"age",name:"age",value:s.age,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",placeholder:"How old are you?",min:"5",max:"25",required:S==="student"})]}),S==="student"&&t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"birthdate",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Birthdate"]}),t.jsx("input",{type:"date",id:"birthdate",name:"birthdate",value:s.birthdate,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",required:S==="student"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please enter your date of birth"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"gender",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Gender"]}),t.jsxs("select",{id:"gender",name:"gender",value:s.gender,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg transition-all duration-300",required:!0,children:[t.jsx("option",{value:"",children:"Select your gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"}),t.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(S==="admin"||S==="parent")&&t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"phoneNumber",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Phone Number"]}),t.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:s.phoneNumber,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg placeholder-gray-400 transition-all duration-300",placeholder:"+63 912 345 6789",required:S==="admin"||S==="parent"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"password",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Password"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:l?"text":"password",id:"password",name:"password",value:s.password,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg transition-all duration-300",placeholder:"Create a strong password",required:!0}),t.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors duration-200 cursor-pointer",children:t.jsx("span",{className:"text-lg",children:l?"":""})})]})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"confirmPassword",className:"flex items-center text-sm font-bold text-gray-700 mb-2",children:[t.jsx("span",{className:"text-lg mr-2",children:""}),"Confirm Password"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:d?"text":"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:M,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-lg transition-all duration-300",placeholder:"Confirm your password",required:!0}),t.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors duration-200 cursor-pointer",children:t.jsx("span",{className:"text-lg",children:d?"":""})})]})]}),t.jsx("button",{type:"submit",disabled:g,className:"btn-autism-friendly w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white py-4 rounded-xl text-lg font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:g?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),"Creating Account..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),S==="admin"?"Create Admin Account!":S==="parent"?"Create Parent Account!":"Start My Learning Adventure!"]})})]}),t.jsxs("div",{className:"mt-8 space-y-4",children:[t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-gray-600 text-sm",children:["Already have an account?"," ",t.jsx("button",{onClick:B,className:"text-blue-500 hover:text-blue-600 font-semibold underline decoration-2 underline-offset-2 hover:decoration-blue-600 transition-all duration-200",children:"Log in here! "})]})}),t.jsx("div",{className:"flex items-center justify-center space-x-4 pt-6 border-t border-gray-200",children:t.jsxs("button",{onClick:K,className:"flex items-center text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[t.jsx("span",{className:"mr-2",children:""}),"Back to Home"]})})]}),t.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-green-400/30 rounded-full animate-bounce-gentle"}),t.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-blue-400/30 rounded-full animate-float"})]}),t.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-white/80 backdrop-blur-sm rounded-2xl px-6 py-3 shadow-lg border border-white/20 animate-float",children:t.jsxs("p",{className:"text-sm font-semibold text-gray-700 flex items-center",children:[t.jsx("span",{className:"text-lg mr-2 animate-pulse-gentle",children:""}),"Welcome to your amazing learning journey! "]})})]})}async function $o(){try{console.log(" Fetching all badges from database...");const{data:i,error:s}=await de.from("badges").select("*").order("created_at",{ascending:!0});return console.log(" getAllBadges query result:",{data:i,error:s}),console.log(" Number of badges fetched:",i?.length||0),s?(console.error("Error fetching badges:",s),{data:[],error:s}):{data:i||[],error:null}}catch(i){return console.error("Unexpected error fetching badges:",i),{data:[],error:{message:i.message}}}}async function Io(i){try{const{data:s,error:n}=await de.from("student_badges").select("*").eq("student_id",i).order("earned_at",{ascending:!1});return n?(console.error("Error fetching student badges:",n),{data:[],error:n}):{data:s||[],error:null}}catch(s){return console.error("Unexpected error fetching student badges:",s),{data:[],error:{message:s.message}}}}async function G1(i,s,n={}){try{console.log("Awarding badge:",{studentId:i,badgeId:s,activityContext:n});const{data:l,error:c}=await de.from("student_badges").select("*").eq("student_id",i).eq("badge_id",s);if(l&&l.length>0)return console.log("Student already has this badge"),{data:l[0],error:null};const{data:d,error:h}=await de.from("badges").select("*").eq("id",s).single();if(h)return console.error("Error fetching badge details:",h),{data:null,error:h};const{data:g,error:x}=await de.from("student_badges").insert([{student_id:i,badge_id:s,earned_at:new Date().toISOString(),badge_name:d.title,badge_icon:d.icon_url,badge_rarity:"Common",activity_name:n.activityName||"",activity_category:n.category||"",activity_difficulty:n.difficulty||"",session_score:n.score?.toString()||""}]).select("*");return x?(console.error("Error awarding badge:",x),{data:null,error:x}):(console.log("Badge awarded successfully:",g),{data:g[0],error:null})}catch(l){return console.error("Unexpected error awarding badge:",l),{data:null,error:{message:l.message}}}}async function Qx(i){try{console.log(" Checking badges for student:",i);const{data:s,error:n}=await $o();if(n)return console.error("Error fetching badges:",n),{data:[],error:n};const{data:l,error:c}=await Io(i);if(c)return console.error("Error fetching student badges:",c),{data:[],error:c};const d=l.map(p=>p.badge_id),{data:h,error:g}=await de.from("user_activity_progress").select(`
        *,
        activities (
          title,
          category,
          difficulty
        )
      `).eq("user_id",i);if(g)return console.error("Error fetching progress:",g),{data:[],error:g};console.log(" Student progress data:",h);const x=[];for(const p of s){if(d.includes(p.id))continue;const b=p.criteria;let y=!1,w={};if(console.log(` Checking badge: ${p.title}`,b),b.activity==="any"&&b.count===1)y=h.length>0;else if(b.score===100&&b.activity==="any"){const S=h.filter(C=>C.score>=100);if(y=S.length>0,y&&S.length>0){const C=S[0];w={activityName:C.activities?.title,category:C.activities?.category,difficulty:C.activities?.difficulty,score:C.score}}}else if(b.activity==="academic"&&b.count===5)y=h.filter(C=>C.activities?.category?.toLowerCase().includes("academic")||C.activities?.title?.toLowerCase().includes("academic")).length>=5;else if(b.activity==="color"&&b.count===2){const S=h.filter(R=>R.activities?.category?.toLowerCase().includes("color")||R.activities?.title?.toLowerCase().includes("color")),C=new Set(S.map(R=>R.activities?.difficulty));y=S.length>=2&&C.size>=2}else if(b.activity==="matching"&&b.count===1)y=h.filter(C=>C.activities?.title?.toLowerCase().includes("match")||C.activities?.category?.toLowerCase().includes("match")).length>=1;else if(b.activity==="shape"&&b.count===2)y=h.filter(C=>C.activities?.category?.toLowerCase().includes("shape")||C.activities?.title?.toLowerCase().includes("shape")).length>=2;else if(b.activity==="number_flashcard"&&b.count===1)y=h.filter(C=>C.activities?.title?.toLowerCase().includes("number")&&C.activities?.title?.toLowerCase().includes("flashcard")||C.activities?.category?.toLowerCase().includes("number")).length>=1;else if(b.unique_types===3)y=new Set(h.map(C=>C.activities?.category).filter(Boolean)).size>=3;else if(b.min_score===80&&b.count===5)y=h.filter(C=>C.score>=80).length>=5;else if(b.activity==="social_daily_life"&&b.count===3)y=h.filter(C=>C.activities?.category?.toLowerCase().includes("social")||C.activities?.category?.toLowerCase().includes("daily")||C.activities?.category?.toLowerCase().includes("life")).length>=3;else if(b.unique_types===5){const S=h.map(R=>{const O=R.activities?.category?.toLowerCase()||"",M=R.activities?.title?.toLowerCase()||"";return O.includes("number")||M.includes("number")||M.includes("count")?"Numbers":O.includes("shape")||M.includes("shape")?"Shapes":O.includes("color")||M.includes("color")?"Colors":O.includes("identification")||M.includes("identification")?"Identification":O.includes("matching")||M.includes("matching")?"Matching":O.includes("memory")||M.includes("memory")?"Memory":O.includes("puzzle")||M.includes("puzzle")?"Puzzles":O.includes("social")||O.includes("daily")||O.includes("life")?"Social/Daily Life":O.includes("academic")?"Academic":O||"Other"}).filter(Boolean),C=new Set(S);console.log(" All-Rounder Debug:",{totalProgress:h.length,rawCategories:h.map(R=>R.activities?.category),rawTitles:h.map(R=>R.activities?.title),standardizedCategories:S,uniqueCategories:Array.from(C),uniqueCount:C.size,requiredCount:5,progressDetails:h.map(R=>({id:R.activity_id,category:R.activities?.category,title:R.activities?.title}))}),y=C.size>=5}if(console.log(` Badge ${p.title}: shouldAward = ${y}`),y){const{data:S,error:C}=await G1(i,p.id,w);S&&!C?(x.push(S),console.log(` Awarded badge: ${p.title}`)):C&&console.error(` Error awarding badge ${p.title}:`,C)}}return console.log(" Newly earned badges:",x),{data:x,error:null}}catch(s){return console.error("Unexpected error checking badges:",s),{data:[],error:{message:s.message}}}}const F1=()=>{const i=ut(),{user:s}=Vr(),[n,l]=m.useState(4),[c,d]=m.useState(new Date),[h,g]=m.useState([]),[x,p]=m.useState(!0),[b,y]=m.useState(null),[w,S]=m.useState(null);m.useEffect(()=>{const M=setInterval(()=>d(new Date),1e3);return()=>clearInterval(M)},[]),m.useEffect(()=>{(async()=>{if(s?.id)try{const{data:T,error:B}=await de.from("user_profiles").select("*").eq("user_id",s.id).single();B&&B.code!=="PGRST116"?console.error("Error fetching user profile:",B):T&&(console.log(" User profile loaded:",T),y(T))}catch(T){console.error("Error fetching user profile:",T)}})()},[s?.id]),m.useEffect(()=>{(async()=>{if(s?.id)try{const{data:T,error:B}=await de.from("streaks").select("current_streak, longest_streak, last_active_date").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(1).single();B&&B.code!=="PGRST116"?console.error("Error fetching streak data:",B):T&&(console.log(" Streak data loaded:",T),console.log(" Current streak from database:",T.current_streak),S(T))}catch(T){console.error("Error fetching streak data:",T)}})()},[s?.id]),m.useEffect(()=>{(async()=>{if(!s?.id){console.log("No user ID available:",s);return}console.log("Current user object:",s),console.log("Using user ID for badges:",s.id),p(!0);try{const[T,B]=await Promise.all([$o(),Io(s.id)]);console.log("All badges result:",T),console.log("Student badges result:",B);const K=B.data||[];console.log("Earned badges data:",K),console.log("Number of badges earned:",K.length);let X=T.data||[];X.length===0&&(console.log(" No badges from badges table, creating comprehensive badge list..."),X=[{id:"f9aba128-a8e5-4b2c-8b2e-27ad1403faa6",title:"First Step",description:"Awarded for completing your first activity."},{id:"97054c4c-4b60-4bae-b1d9-46c5b7d0c99a",title:"Perfect Scorer",description:"Awarded for getting a perfect score in any activity."},{id:"2f73958d-d18c-4135-96bd-c65ca554a207",title:"Academic Star",description:"Complete 5 academic activities."},{id:"c0e0441c-0688-4a4c-bd82-fad73c4392c1",title:"Color Master",description:"Complete 2 color activities in different difficulty levels."},{id:"55544bd9-53a5-42ac-bee8-c6b05632dfff",title:"Match Finder",description:"Finish a matching type activity."},{id:"027f2d92-6a2f-4f07-bda5-aaced096eb00",title:"Shape Explorer",description:"Complete 2 shape activities."},{id:"d1ec22b8-9c28-44a4-9ee6-851b30948140",title:"Number Ninja",description:"Complete at least 1 number flashcard activity."},{id:"899d3e1b-6a3f-4c88-b52c-4960bb6f0201",title:"Consistency Champ",description:"Complete 3 activities in different types."},{id:"9e1e1566-6aec-479b-9f42-456e0c248386",title:"High Achiever",description:"Complete 5 activities with 80%+ average score."},{id:"1d3f149c-6db2-4303-93a0-a75540902e4f",title:"Daily Life Hero",description:"Complete 3 social/daily life skill activities."},{id:"dc7243ea-43fb-48af-86c0-7f6dcd4430dd",title:"All-Rounder",description:"Complete 5 different types of activity."}]);const ee=K.map(q=>q.badge_id);console.log("Earned badge IDs:",ee);const re=X.map(q=>{const z=ee.includes(q.id),E={"First Step":"","Perfect Scorer":"","Academic Star":"","Color Master":"","Match Finder":"","Shape Explorer":"","Number Ninja":"","Consistency Champ":"","High Achiever":"","Daily Life Hero":"","All-Rounder":""},A={"First Step":"from-yellow-400 to-yellow-600","Perfect Scorer":"from-green-400 to-green-600","Academic Star":"from-blue-400 to-blue-600","Color Master":"from-purple-400 to-purple-600","Match Finder":"from-pink-400 to-pink-600","Shape Explorer":"from-blue-400 to-indigo-600","Number Ninja":"from-green-400 to-green-600","Consistency Champ":"from-orange-400 to-orange-600","High Achiever":"from-red-400 to-red-600","Daily Life Hero":"from-teal-400 to-teal-600","All-Rounder":"from-gradient-to-r from-purple-400 to-pink-600"},P={"First Step":"bg-yellow-50","Perfect Scorer":"bg-green-50","Academic Star":"bg-blue-50","Color Master":"bg-purple-50","Match Finder":"bg-pink-50","Shape Explorer":"bg-blue-50","Number Ninja":"bg-green-50","Consistency Champ":"bg-orange-50","High Achiever":"bg-red-50","Daily Life Hero":"bg-teal-50","All-Rounder":"bg-purple-50"},V={"First Step":"animate-bounce-gentle","Perfect Scorer":"animate-pulse-gentle","Academic Star":"animate-pulse-gentle","Color Master":"animate-bounce-gentle","Match Finder":"animate-wiggle","Shape Explorer":"animate-float","Number Ninja":"animate-wiggle","Consistency Champ":"animate-pulse-gentle","High Achiever":"animate-bounce-gentle","Daily Life Hero":"animate-float-delayed","All-Rounder":"animate-float"};return{icon:E[q.title]||"",title:q.title,description:q.description,status:z?"EARNED":"LOCKED",color:z?A[q.title]||"from-blue-400 to-blue-600":"from-gray-400 to-gray-500",bgColor:z?P[q.title]||"bg-blue-50":"bg-gray-50",animation:z?V[q.title]||"animate-pulse-gentle":""}});g(re)}catch(T){console.error("Error fetching badges data:",T)}finally{p(!1)}})()},[s?.id]);const C=M=>{M.preventDefault(),i("/flashcardspage")},R=()=>{i("/studentprofile")},O=["You're amazing! ","Keep going! ","You're doing great! ","You're a star! ","Super job! "];return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"})]}),t.jsx("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-black/80 shadow-sm h-18 ",children:t.jsx("div",{className:"container mx-auto px-3 py-2",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-16 h-16 object-contain"})}),t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[t.jsx("a",{href:"/home",className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200 flex items-center",children:"Home"}),t.jsx("a",{href:"/flashcardspage",className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-200 flex items-center",children:"Activities"}),t.jsx("a",{href:"/studentpage",className:"text-blue-600 font-semibold transition-colors duration-200 flex items-center",children:"Learning Hub"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"text-sm text-gray-600 font-medium",children:c.toLocaleTimeString()}),t.jsxs("div",{onClick:R,className:"cursor-pointer group flex items-center space-x-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-2 hover:shadow-lg transition-all duration-300",children:[t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"w-10 h-10 rounded-xl object-cover border-2 border-white shadow-sm group-hover:scale-105 transition-transform duration-300"}),t.jsx("span",{className:"hidden sm:block text-sm font-semibold text-gray-700",children:s?.user_metadata?.username||s?.user_metadata?.full_name?.split(" ")[0]||"User"})]})]})]})})}),t.jsxs("div",{className:"relative z-10 h-48 sm:h-64 overflow-hidden",children:[t.jsx("img",{src:"/assets/bg_cover.png",alt:"Learning Banner",className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"}),t.jsxs("div",{className:"absolute bottom-4 left-6 text-white",children:[t.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",children:"Ready for Today's Adventure? "}),t.jsx("p",{className:"text-lg opacity-90",children:O[Math.floor(Math.random()*O.length)]})]})]}),t.jsxs("main",{className:"relative z-10 container mx-auto px-6 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"card-autism-friendly bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-white/20",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("span",{className:"text-3xl mr-3 animate-wiggle",children:""}),t.jsxs("div",{className:"flex",children:[t.jsx("h2",{className:"text-2xl font-bold pt-1 text-gray-800",children:"Welcome, "}),t.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[s?.user_metadata?.username||s?.user_metadata?.full_name?.split(" ")[0]||"User","!"]})]})]}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:"These are all your rewards and achievements! You're doing amazing work! "})]}),t.jsxs("div",{className:"card-autism-friendly bg-gradient-to-br from-orange-50 to-red-50 rounded-3xl p-6 shadow-2xl border-2 border-orange-200/50 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-orange-200/20 rounded-full blur-2xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center justify-between -mb-3 -mt-3",children:[t.jsxs("div",{className:"-mt-5",children:[t.jsx("span",{className:"text-6xl font-bold text-orange-600",children:w?w.current_streak:n}),t.jsx("span",{className:"text-4xl font-bold text-gray-800 ml-2",children:"day Streak!"})]}),t.jsx("div",{className:"flex items-center justify-center animate-bounce-gentle",children:t.jsx("img",{src:"/assets/firesticker.png",alt:"Streak",className:"w-28 h-28 relative right-10 object-contain -mt-2",style:{mixBlendMode:"multiply",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"}})})]}),t.jsx("p",{className:"text-gray-600 font-medium -mt-5",children:"You're doing Great, Keep Going! "}),t.jsx("div",{className:"mt-4 w-full bg-orange-200/50 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2 rounded-full animate-progress-fill",style:{width:`${(w?w.current_streak:n)/7*100}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w?w.current_streak:n,"/7 days to Perfect Week badge!"]})]})]})]}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:" bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-white/20",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[t.jsx("div",{children:t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center",children:[t.jsx("span",{className:"text-4xl mr-3 animate-float",children:""}),"Your Amazing Badges"]})}),t.jsxs("button",{onClick:C,className:"cursor-pointer btn-autism-friendly bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-6 py-3 rounded-2xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center",children:[t.jsx("span",{className:"mr-2",children:""}),"Collect More Badges!"]})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:x?Array.from({length:8}).map((M,T)=>t.jsxs("div",{className:"bg-gray-100 p-4 rounded-2xl animate-pulse",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl mx-auto mb-3"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded"})]},T)):h.map((M,T)=>t.jsxs("div",{className:`card-autism-friendly ${M.bgColor} p-4 rounded-2xl text-center relative overflow-hidden border-2 ${M.status==="EARNED"?"border-green-200 shadow-lg":"border-gray-200 opacity-75"}`,children:[M.status==="EARNED"&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx("span",{className:"text-green-500 text-lg animate-bounce-in",children:""})}),t.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${M.color} rounded-xl mx-auto mb-3 flex items-center justify-center text-2xl text-white shadow-lg ${M.animation}`,children:M.icon}),t.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:M.title}),t.jsx("p",{className:"text-xs text-gray-600 mb-2 leading-tight",children:M.description}),t.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${M.status==="EARNED"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:M.status}),M.status==="EARNED"&&t.jsx("div",{className:"absolute bottom-1 right-1",children:t.jsx("span",{className:"text-yellow-400 text-sm animate-pulse-gentle",children:""})})]},T))}),t.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-200/50",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-800",children:"Progress Summary"}),t.jsx("p",{className:"text-sm text-gray-600",children:x?"Loading badges...":`You've earned ${h.filter(M=>M.status==="EARNED").length} out of ${h.length} badges!`})]}),t.jsx("div",{className:"text-3xl animate-bounce-gentle",children:""})]}),!x&&t.jsx("div",{className:"mt-2 w-full bg-blue-200/50 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full animate-progress-fill",style:{width:`${h.length>0?h.filter(M=>M.status==="EARNED").length/h.length*100:0}%`}})})]})]})})]}),t.jsx("div",{className:"md:hidden fixed bottom-4 left-4 right-4 z-20",children:t.jsx("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 p-4",children:t.jsxs("div",{className:"flex justify-around",children:[t.jsxs("a",{href:"/studentpage",className:"flex flex-col items-center p-2 text-blue-600",children:[t.jsx("span",{className:"text-2xl mb-1",children:""}),t.jsx("span",{className:"text-xs font-semibold",children:"Home"})]}),t.jsxs("a",{href:"/flashcardspage",className:"flex flex-col items-center p-2 text-gray-600 hover:text-blue-600",children:[t.jsx("span",{className:"text-2xl mb-1",children:""}),t.jsx("span",{className:"text-xs font-semibold",children:"Activity"})]}),t.jsxs("a",{href:"/expression-debug",className:"flex flex-col items-center p-2 text-gray-600 hover:text-blue-600",children:[t.jsx("span",{className:"text-2xl mb-1",children:""}),t.jsx("span",{className:"text-xs font-semibold",children:"Expression"})]})]})})})]})]})};function Y1(){const[i,s]=m.useState(""),[n,l]=m.useState(""),[c,d]=m.useState(!1),[h,g]=m.useState(!1),[x,p]=m.useState(!1),[b,y]=m.useState(""),[w,S]=m.useState(""),[C]=Zv(),R=ut();m.useEffect(()=>{const T=C.get("access_token"),B=C.get("refresh_token");if(!T||!B){y("Invalid reset link. Please try requesting a new password reset.");return}de.auth.setSession({access_token:T,refresh_token:B})},[C]);const O=async T=>{if(T.preventDefault(),p(!0),y(""),S(""),i!==n){y("Passwords do not match!"),p(!1);return}if(i.length<6){y("Password must be at least 6 characters long!"),p(!1);return}try{const{error:B}=await de.auth.updateUser({password:i});B?y(B.message):(S("Password updated successfully! Redirecting to login..."),setTimeout(()=>{R("/loginpage")},2e3))}catch{y("An unexpected error occurred. Please try again.")}finally{p(!1)}},M=()=>{R("/loginpage")};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden flex items-center justify-center p-4",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"})]}),t.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl p-8 max-w-md w-full border border-white/20 relative z-10",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Reset Your Password"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your new password below"})]}),b&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:b}),w&&t.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg text-sm",children:w}),t.jsxs("form",{className:"space-y-5",onSubmit:O,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"flex items-center text-sm font-bold text-gray-700 mb-1",children:" New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:c?"text":"password",id:"password",value:i,onChange:T=>s(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base transition-all duration-300",placeholder:"Enter your new password",required:!0,minLength:"6"}),t.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:t.jsx("span",{className:"text-base",children:c?"":""})})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"flex items-center text-sm font-bold text-gray-700 mb-1",children:" Confirm New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:h?"text":"password",id:"confirmPassword",value:n,onChange:T=>l(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base transition-all duration-300",placeholder:"Confirm your new password",required:!0,minLength:"6"}),t.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:t.jsx("span",{className:"text-base",children:h?"":""})})]})]}),t.jsx("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white py-3 rounded-xl text-base font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:x?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),"Updating Password..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-2",children:""}),"Update Password"]})})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:M,className:"text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200",children:" Back to Login"})})]})]})}async function V1(i,s,n,l="completed"){try{if(console.log(" Recording activity progress:",{studentId:i,activityId:s,score:n,completionStatus:l}),!i)return console.error(" No studentId provided"),{data:null,error:{message:"Student ID is required"}};if(!s)return console.error(" No activityId provided"),{data:null,error:{message:"Activity ID is required"}};console.log(" Getting student full name...");const{data:c,error:d}=await de.from("user_profiles").select("full_name").eq("user_id",i).single();if(d)return console.error(" Error getting student profile:",d),{data:null,error:d};const h=c?.full_name||"Unknown Student";if(console.log(" Student name:",h),console.log(" Verifying studentId exists in user_profiles..."),!c)return console.error(" Student profile not found in user_profiles"),{data:null,error:{message:"Student profile not found"}};console.log(" Student profile verified:",c),console.log(" Checking for existing progress...");const{data:g,error:x}=await de.from("user_activity_progress").select("*").eq("user_id",i).eq("activity_id",s).single();if(x&&x.code!=="PGRST116")return console.error(" Error checking existing progress:",x),{data:null,error:x};console.log(" Existing progress:",g);let p;if(g){console.log(" Updating existing progress...");const{data:b,error:y}=await de.from("user_activity_progress").update({score:n,completion_status:l,student_name:h,date_completed:new Date().toISOString()}).eq("user_id",i).eq("activity_id",s).select();p={data:b,error:y},console.log(" Update result:",p)}else{console.log(" Inserting new progress record...");const b={user_id:i,activity_id:s,score:n,completion_status:l,student_name:h,date_completed:new Date().toISOString()};console.log(" Progress record to insert:",b);const{data:y,error:w}=await de.from("user_activity_progress").insert([b]).select();p={data:y,error:w},console.log(" Insert result:",p)}if(p.error)return console.error(" Error recording activity progress:",p.error),console.error(" Error details:",JSON.stringify(p.error,null,2)),{data:null,error:p.error};console.log(" Activity progress recorded successfully!",p.data);try{console.log(" Checking for badges after activity completion...");const{data:b,error:y}=await Qx(i);y?console.error(" Error checking badges:",y):b&&b.length>0&&(console.log(" New badges earned:",b),p.newBadges=b)}catch(b){console.error(" Unexpected error checking badges:",b)}return p}catch(c){return console.error("Unexpected error recording progress:",c),{data:null,error:{message:c.message}}}}async function Xx(){try{console.log(" Fetching all students progress...");const{data:i,error:s}=await de.from("user_activity_progress").select("*").order("date_completed",{ascending:!1});if(console.log(" Raw progress records:",i),console.log(" Progress error (if any):",s),s)return console.error("Error fetching all students progress:",s),{data:null,error:s};if(!i||i.length===0)return{data:{students:[],totalStudents:0,totalActivitiesCompleted:0},error:null};const n=[...new Set(i.map(w=>w.user_id))],{data:l,error:c}=await de.from("user_profiles").select("user_id, full_name, username").in("user_id",n);c&&console.error("Error fetching user profiles:",c),console.log(" User IDs to fetch:",n),console.log(" User profiles fetched:",l);const d=[...new Set(i.map(w=>w.activity_id))],{data:h,error:g}=await de.from("activities").select("id, title, category_id").in("id",d);g&&console.error("Error fetching activities:",g);const x=h?[...new Set(h.map(w=>w.category_id).filter(Boolean))]:[];let p=[];if(x.length>0){const{data:w,error:S}=await de.from('"Categories"').select("id, category_name").in("id",x);S||(p=w||[])}const b={};i.forEach(w=>{const S=w.user_id,C=l?.find(B=>B.user_id===S),R=h?.find(B=>B.id===w.activity_id),O=p?.find(B=>B.id===R?.category_id);console.log(" Processing record for student:",S),console.log(" Found user profile:",C);const M=C?C.full_name||C.username:`Student ${S.slice(0,8)}`;console.log(" Student name resolved to:",M),b[S]||(b[S]={studentId:S,studentName:M,activities:[],totalActivities:0,completedActivities:0,averageScore:0,totalScore:0,lastActivity:null});const T=b[S];T.activities.push({activityId:w.activity_id,activityTitle:R?.title||"Unknown Activity",categoryId:O?.category_name||"Other",score:w.score,completionStatus:w.completion_status,dateCompleted:w.date_completed}),T.totalActivities++,w.completion_status==="completed"&&(T.completedActivities++,T.totalScore+=w.score||0),(!T.lastActivity||new Date(w.date_completed)>new Date(T.lastActivity))&&(T.lastActivity=w.date_completed)}),Object.values(b).forEach(w=>{w.completedActivities>0&&(w.averageScore=Math.round(w.totalScore/w.completedActivities)),w.completionRate=w.totalActivities>0?Math.round(w.completedActivities/w.totalActivities*100):0});const y=Object.values(b);return{data:{students:y,totalStudents:y.length,totalActivitiesCompleted:y.reduce((w,S)=>w+S.completedActivities,0)},error:null}}catch(i){return console.error("Error fetching all students progress:",i),{data:null,error:{message:i.message}}}}async function mf(i){try{console.log("Getting student progress stats for:",i);const{data:s,error:n}=await de.from("user_activity_progress").select("*").eq("user_id",i).order("date_completed",{ascending:!1});if(n)return console.error("Error fetching student progress stats:",n),{data:null,error:n};console.log("Progress API: Found",s?.length||0,"progress records for student",i);let l=[],c=[];if(s&&s.length>0){const C=[...new Set(s.map(M=>M.activity_id))],{data:R,error:O}=await de.from("activities").select("id, title, category_id").in("id",C);if(O)console.error("Progress API: Error fetching activities:",O);else{l=R||[],console.log("Progress API: Found",l.length,"activities:",l);const M=[...new Set(l.map(T=>T.category_id).filter(Boolean))];if(console.log("Progress API: Category IDs:",M),M.length>0){const{data:T,error:B}=await de.from("Categories").select("id, name").in("id",M);B?console.error("Progress API: Error fetching categories:",B):(c=T||[],console.log("Progress API: Found categories:",c))}}}const d=s?.length||0,h=s?.filter(C=>C.completion_status==="completed").length||0,g=s?.reduce((C,R)=>C+(R.score||0),0)||0,x=h>0?Math.round(g/h):0,p=d>0?Math.round(h/d*100):0,b=new Date;b.setDate(b.getDate()-7);const y=s?.filter(C=>new Date(C.date_completed)>=b).length||0,w={};return s?.forEach(C=>{const R=l.find(B=>B.id===C.activity_id),O=R?.category_id||"unknown",M=c.find(B=>B.id===O);let T;M?.name?T=M.name:R?.title?T="General Activities":T="Unknown Category",console.log("Progress API: Activity",C.activity_id,"Category ID:",O,"Category Name:",T),w[T]||(w[T]={total:0,completed:0,totalScore:0}),w[T].total++,C.completion_status==="completed"&&(w[T].completed++,w[T].totalScore+=C.score||0)}),{data:{totalActivities:d,completedActivities:h,averageScore:x,completionRate:p,recentActivities:y,categoryStats:w},error:null}}catch(s){return console.error("Error getting student progress stats:",s),{data:null,error:{message:s.message}}}}async function gf(i,s=50){try{console.log("Getting student progress for:",i);const{data:n,error:l}=await de.from("user_activity_progress").select("*").eq("user_id",i).order("date_completed",{ascending:!1}).limit(s);if(l)return console.error("Error fetching student progress:",l),{data:null,error:l};let c=[];if(n&&n.length>0){const h=[...new Set(n.map(p=>p.activity_id))],{data:g,error:x}=await de.from("activities").select("id, title, category_id, difficulty_id").in("id",h);x||(c=g||[])}return{data:n?.map(h=>{const g=c.find(x=>x.id===h.activity_id);return{id:h.id,activityId:h.activity_id,activityTitle:g?.title||"Unknown Activity",categoryId:g?.category_id,difficultyId:g?.difficulty_id,score:h.score,completionStatus:h.completion_status,dateCompleted:h.date_completed,studentName:h.student_name,student_id:h.student_id,timeSpent:h.time_spent||null}})||[],error:null}}catch(n){return console.error("Error getting student progress:",n),{data:null,error:{message:n.message}}}}const W1=Object.freeze(Object.defineProperty({__proto__:null,getAllStudentsProgress:Xx,getStudentProgress:gf,getStudentProgressStats:mf,recordActivityProgress:V1},Symbol.toStringTag,{value:"Module"})),K1=i=>{const[s,n]=m.useState([]),[l,c]=m.useState(!1),[d,h]=m.useState(null),g=async()=>{if(i){c(!0);try{const{data:p,error:b}=await Qx(i);b?(console.error("Error checking badges:",b),h(b.message)):(console.log(" New badges awarded:",p),await x())}catch(p){console.error("Error in badge check:",p),h(p.message)}finally{c(!1)}}},x=async()=>{if(i)try{const{data:p,error:b}=await Io(i);b?(console.error("Error fetching student badges:",b),h(b.message)):n(p||[])}catch(p){console.error("Error fetching badges:",p),h(p.message)}};return m.useEffect(()=>{i&&x()},[i]),{badges:s,loading:l,error:d,checkBadges:g,refreshBadges:x}},Z1=()=>{const{user:i,signOut:s}=Vr(),n=ut(),[l,c]=m.useState({username:"Student",full_name:"",email:"",gender:"",address:"",birthdate:"",achievements:0,day_streak:0,activities_done:0,accuracy_rate:83}),[d,h]=m.useState(!0),[g,x]=m.useState(""),[p,b]=m.useState(!1),[y,w]=m.useState(!1),[S,C]=m.useState(""),[R,O]=m.useState(!1),[M,T]=m.useState([]),{badges:B,loading:K}=K1(i?.id),[X,ee]=m.useState({accuracyRates:[{category:"Colors",accuracy:85,completed:"2/3",icon:"",color:"bg-purple-500"},{category:"Shapes",accuracy:78,completed:"3/3",icon:"",color:"bg-blue-500"},{category:"Numbers",accuracy:82,completed:"2/3",icon:"",color:"bg-green-500"},{category:"Letters",accuracy:74,completed:"3/3",icon:"",color:"bg-indigo-500"},{category:"Patterns",accuracy:69,completed:"1/3",icon:"",color:"bg-pink-500"}],completionRate:0});m.useEffect(()=>{i?(console.log("User authenticated, loading profile..."),q(),re()):(console.log("No user found, redirecting..."),x("Please log in to view your profile"),h(!1))},[i]),m.useEffect(()=>{i&&!K&&B!==null&&(console.log(" Badges loaded, recalculating stats..."),z())},[i,K,B]);const re=async()=>{try{const{data:I,error:oe}=await $o();oe?console.error("Error loading badges:",oe):T(I||[])}catch(I){console.error("Error loading badges:",I)}},q=async()=>{try{h(!0),console.log("Loading profile for user:",i),console.log("User ID:",i.id),console.log("User email:",i.email),console.log("User metadata:",i.user_metadata),console.log("Testing database connection...");const{data:I,error:oe}=await de.from("user_profiles").select("count").limit(1);if(oe){console.error("Cannot access user_profiles table:",oe),console.log("Falling back to basic profile creation..."),await E();return}console.log("Table access successful, checking for profile..."),console.log("Looking for profile with user_id (int4):",i.id);const{data:xe,error:_}=await de.from("user_profiles").select("*").eq("user_id",i.id).maybeSingle();if(console.log("Profile query result:",{existingProfile:xe,profileError:_}),_&&_.code!=="PGRST116"){if(console.error("Error fetching profile:",_),console.error("Error details:",{message:_.message,code:_.code,details:_.details,hint:_.hint}),_.code==="42P01"||_.message.includes("does not exist")){console.log("Table does not exist, creating basic profile"),await E();return}x("Failed to load profile: "+_.message),h(!1);return}xe?(console.log("Profile found:",xe),console.log("User metadata from signup:",i.user_metadata),c({username:xe.username||i.user_metadata?.username||i.email?.split("@")[0]||"Student",full_name:xe.full_name||i.user_metadata?.full_name||"",email:xe.email||i.email||"",gender:xe.gender||i.user_metadata?.gender||"",address:xe.address||i.user_metadata?.address||"",birthdate:xe.birthdate||xe.birthday||i.user_metadata?.birthdate||i.user_metadata?.birthday||"",achievements:xe.achievements||0,day_streak:xe.day_streak||0,activities_done:xe.activities_done||0,accuracy_rate:xe.accuracy_rate||83}),await z()):(console.log("No profile found, creating one..."),await A())}catch(I){console.error("Error loading profile:",I),console.error("Error object:",{message:I.message,stack:I.stack,name:I.name}),x("Failed to load profile: "+(I.message||"Unknown error"))}finally{h(!1)}},z=async()=>{try{console.log(" Calculating student stats for user:",i.id),console.log(" Badges available for stats:",B);const{data:I,error:oe}=await gf(i.id);if(console.log("Progress data:",I),console.log("Progress error:",oe),!oe&&I&&I.length>0){const xe=I.length,_=I.filter(fe=>fe.score&&fe.score>0),F=_.length>0?Math.round(_.reduce((fe,be)=>fe+be.score,0)/_.length):0,ne=xe>0?100:0;console.log(" Student badges data:",B),console.log(" Badges loading state:",K);const se=B?B.length:0;console.log(" Calculated achievements:",se);let he=0;try{const{data:fe,error:be}=await de.from("streaks").select("current_streak, longest_streak, last_active_date").eq("user_id",i.id).order("updated_at",{ascending:!1}).limit(1).single();be&&be.code!=="PGRST116"?(console.error("Error fetching streak data:",be),he=0):fe&&(console.log(" Streak data loaded in profile:",fe),he=fe.current_streak||0)}catch(fe){console.error("Error fetching streak data in profile:",fe),he=0}console.log("Calculated stats:",{activitiesDone:xe,averageAccuracy:F,completionRate:ne,achievements:se,dayStreak:he}),c(fe=>({...fe,activities_done:xe,accuracy_rate:F,achievements:se,day_streak:he})),ee(fe=>({...fe,completionRate:ne}))}else console.log("No progress data found for user")}catch(I){console.error("Error calculating student stats:",I)}},E=async()=>{const I=i.user_metadata||{};console.log("Creating basic profile from metadata:",I),c({username:I.username||i.email?.split("@")[0]||"Student",full_name:I.full_name||"",email:i.email||"",gender:I.gender||"",address:I.address||"",birthdate:I.birthdate||I.birthday||"",achievements:0,day_streak:0,activities_done:0,accuracy_rate:83}),await z(),C("Profile loaded from signup data!"),setTimeout(()=>C(""),3e3)},A=async()=>{try{const I=i.user_metadata||{};let oe=i.email;if(!oe)oe=`student_${i.id}@autisync.local`;else{const{data:fe}=await de.from("user_profiles").select("user_id").eq("email",i.email).maybeSingle();fe&&fe.user_id!==i.id&&(oe=`${i.email.split("@")[0]}_${i.id}@${i.email.split("@")[1]}`)}let xe=I.username||I.full_name?.split(" ")[0]||i.email?.split("@")[0]||"student",_=xe,F=1;for(;;){const{data:fe}=await de.from("user_profiles").select("user_id").eq("username",_).maybeSingle();if(!fe||fe.user_id===i.id)break;if(_=`${xe}_${F}`,F++,F>100){_=`student_${i.id}`;break}}const ne={user_id:i.id,username:_,full_name:I.full_name||"",email:oe,gender:I.gender||"",address:I.address||"",birthdate:I.birthdate||I.birthday||""};console.log("Creating profile with user_id (int4):",ne);const{data:se,error:he}=await de.from("user_profiles").insert([ne]).select().single();if(he)if(console.error("Error creating profile:",he),he.message.includes("duplicate key value violates unique constraint"))if(he.message.includes("username_key")){ne.username=`student_${i.id}_${Date.now()}`;const{data:fe,error:be}=await de.from("user_profiles").insert([ne]).select().single();if(be){x("Error creating profile: Unable to generate unique username. Please try again.");return}else{console.log("Profile created successfully on retry:",fe),c({username:fe.username,full_name:fe.full_name||"",email:fe.email||i.email||"",gender:fe.gender||"",address:fe.address||"",birthdate:fe.birthdate||fe.birthday||"",achievements:0,day_streak:0,activities_done:0,accuracy_rate:83}),await z(),C("Profile created successfully!"),setTimeout(()=>C(""),3e3);return}}else{x("Error creating profile: "+he.message);return}else{x("Error creating profile: "+he.message);return}console.log("Profile created successfully:",se),c({username:se.username,full_name:se.full_name||"",email:se.email||i.email||"",gender:se.gender||"",address:se.address||"",birthdate:se.birthdate||se.birthday||"",achievements:0,day_streak:0,activities_done:0,accuracy_rate:83}),await z(),C("Profile created successfully!"),setTimeout(()=>C(""),3e3)}catch(I){console.error("Error creating profile:",I),x("Failed to create profile: "+I.message)}},P=async()=>{if(i){b(!0);try{const{data:I}=await de.from("user_profiles").select("username").eq("user_id",i.id).single();let oe=l.username;if(I&&I.username!==l.username){const{data:F}=await de.from("user_profiles").select("user_id").eq("username",l.username).maybeSingle();if(F&&F.user_id!==i.id){let ne=l.username,se=1;for(oe=`${ne}_${se}`;;){const{data:he}=await de.from("user_profiles").select("user_id").eq("username",oe).maybeSingle();if(!he)break;if(se++,oe=`${ne}_${se}`,se>100){oe=`${ne}_${i.id}`;break}}c(he=>({...he,username:oe})),x(`Username was changed to "${oe}" to ensure uniqueness.`),setTimeout(()=>x(""),5e3)}}const xe={username:oe,full_name:l.full_name,email:l.email,gender:l.gender,address:l.address,birthdate:l.birthdate},{error:_}=await de.from("user_profiles").update(xe).eq("user_id",i.id);_?(console.error("Error updating profile:",_),console.error("Update error details:",{message:_.message,code:_.code,details:_.details}),_.code==="42P01"||_.message.includes("does not exist")?(x(""),C("Profile updated locally (database not available)!"),O(!1),setTimeout(()=>C(""),3e3)):(x("Error updating profile: "+_.message),C(""))):(console.log("Profile updated successfully"),x(""),C("Profile updated successfully!"),O(!1),setTimeout(()=>C(""),3e3))}catch(I){console.error("Error saving profile:",I),x("Failed to save profile: "+I.message)}finally{b(!1)}}},V=I=>{const{name:oe,value:xe}=I.target;c(_=>({..._,[oe]:xe}))},J=()=>{O(!0),x(""),C("")},ie=()=>{O(!1),x(""),C(""),i&&q()},k=async()=>{try{w(!0),x(""),console.log("Logging out user...");const{error:I}=await de.auth.signOut();if(I){console.error("Error signing out:",I),x("Failed to sign out. Please try again."),w(!1);return}console.log("Sign out successful, navigating to login..."),localStorage.clear(),sessionStorage.clear(),n("/loginpage",{replace:!0})}catch(I){console.error("Unexpected error during logout:",I),x("Failed to sign out. Please try again."),w(!1)}},G=[{icon:"",label:"Achievements",value:l.achievements,color:"from-yellow-400 to-orange-500"},{icon:"",label:"Day Streak",value:l.day_streak,color:"from-red-400 to-pink-500"},{icon:"",label:"Activities Done",value:l.activities_done,color:"from-blue-400 to-indigo-500"},{icon:"",label:"Accuracy Rate",value:`${l.accuracy_rate}%`,color:"from-purple-400 to-blue-500"},{icon:"",label:"Completion Rate",value:`${X.completionRate}%`,color:"from-green-400 to-teal-500"}];return d?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading your profile..."})]})}):i?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute top-1/2 right-32 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute bottom-32 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce"})]}),t.jsx("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-white/20 shadow-sm",children:t.jsx("div",{className:"container mx-auto px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-center -my-2",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-16 h-16 object-contain"}),t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>n("/studentpage"),className:"bg-gradient-to-r from-green-500 to-teal-500 text-white px-6 py-2 rounded-xl font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"Back to Learning Hub"}),t.jsx("button",{onClick:k,disabled:y,className:"bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-2 rounded-xl font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Logging Out...":"Log Out"}),R&&t.jsx("button",{onClick:P,disabled:p,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-xl font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50",children:p?"Saving...":"Save Profile"})]})]})})}),t.jsxs("main",{className:"container mx-auto px-6 py-8 relative z-10",children:[g&&t.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-300 text-red-700 rounded-xl",children:g}),S&&t.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-300 text-green-700 rounded-xl",children:S}),t.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 mb-8 shadow-2xl border border-white/20",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden shadow-2xl border-4 border-white animate-pulse",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Student Profile",className:"w-full h-full object-cover"})})}),t.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-2",children:["Hi, ",l.username||l.full_name||"Student","! "]}),t.jsx("p",{className:"text-lg text-gray-600",children:"You're doing amazing things every day! "})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:G.map((I,oe)=>t.jsxs("div",{className:`bg-gradient-to-r ${I.color} rounded-2xl p-4 text-white text-center shadow-lg transform hover:scale-105 transition-all duration-200`,style:{animationDelay:`${oe*.1}s`},children:[t.jsx("div",{className:"text-2xl mb-1",children:I.icon}),t.jsx("div",{className:"text-xl font-bold",children:I.value}),t.jsx("div",{className:"text-xs opacity-90",children:I.label})]},oe))})]})]})}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-white/20 mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[t.jsx("span",{className:"text-3xl mr-3",children:""}),"Personal Information"]}),t.jsx("div",{className:"flex gap-2",children:R?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:ie,className:"bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 text-white px-4 py-2 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center text-sm",children:[t.jsx("span",{className:"mr-1",children:""}),"Cancel"]}),t.jsx("button",{onClick:P,disabled:p,className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-4 py-2 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-sm",children:p?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-1",children:""}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-1",children:""}),"Save"]})})]}):t.jsxs("button",{onClick:J,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center text-xl cursor-pointer",children:[t.jsx("span",{className:"mr-1",children:""}),"Edit"]})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl border border-purple-200/50",children:[t.jsx("span",{className:"text-2xl mr-4",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Username"}),R?t.jsx("input",{type:"text",name:"username",value:l.username,onChange:V,className:"w-full bg-transparent border-b border-purple-400 focus:outline-none text-gray-800 py-1",minLength:"3",maxLength:"20"}):t.jsxs("p",{className:"text-gray-800 font-medium",children:["@",l.username]})]})]}),t.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200/50",children:[t.jsx("span",{className:"text-2xl mr-4",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Email"}),R?t.jsx("input",{type:"email",name:"email",value:l.email,onChange:V,className:"w-full bg-transparent border-b border-blue-400 focus:outline-none text-gray-800 py-1"}):t.jsx("p",{className:"text-gray-800 font-medium",children:l.email||"No email provided"})]})]}),t.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-2xl border border-green-200/50",children:[t.jsx("span",{className:"text-2xl mr-4",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Full Name"}),R?t.jsx("input",{type:"text",name:"full_name",value:l.full_name,onChange:V,className:"w-full bg-transparent border-b border-green-400 focus:outline-none text-gray-800 py-1"}):t.jsx("p",{className:"text-gray-800 font-medium",children:l.full_name||"Not provided"})]})]}),t.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl border border-indigo-200/50",children:[t.jsx("span",{className:"text-2xl mr-4",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Gender"}),R?t.jsxs("select",{name:"gender",value:l.gender,onChange:V,className:"w-full bg-transparent border-b border-indigo-400 focus:outline-none text-gray-800 py-1",children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"male",children:"Male"}),t.jsx("option",{value:"female",children:"Female"}),t.jsx("option",{value:"other",children:"Other"})]}):t.jsx("p",{className:"text-gray-800 font-medium",children:l.gender||"Not provided"})]})]}),t.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-pink-50 to-red-50 rounded-2xl border border-pink-200/50",children:[t.jsx("span",{className:"text-2xl mr-4",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Birthdate"}),R?t.jsx("input",{type:"date",name:"birthdate",value:l.birthdate,onChange:V,className:"w-full bg-transparent border-b border-pink-400 focus:outline-none text-gray-800 py-1"}):t.jsx("p",{className:"text-gray-800 font-medium",children:l.birthdate||"Not provided"})]})]}),t.jsxs("div",{className:"flex items-start p-4 bg-gradient-to-r from-gray-50 to-slate-50 rounded-2xl border border-gray-200/50 md:col-span-2",children:[t.jsx("span",{className:"text-2xl mr-4 mt-1",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Address"}),R?t.jsx("textarea",{name:"address",value:l.address,onChange:V,rows:3,className:"w-full bg-transparent border-b border-gray-400 focus:outline-none text-gray-800 py-1 resize-none"}):t.jsx("p",{className:"text-gray-800 font-medium",children:l.address||"Not provided"})]})]})]})]})]})]}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please log in to view your profile"}),t.jsx("button",{onClick:()=>n("/login"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-2xl font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"Go to Login"})]})})},J1="/assets/button_hover-CKjl2Xrm.mp3",Q1="/assets/button-click-Bqo91Nrs.mp3",Sd=()=>{const i=m.useRef(null),s=m.useRef(null),[n,l]=m.useState(!1),[c,d]=m.useState(!1),h=m.useCallback(()=>{if(!n)try{i.current=new Audio(J1),i.current.volume=.5,i.current.preload="metadata",s.current=new Audio(Q1),s.current.volume=.6,s.current.preload="metadata",l(!0)}catch(b){console.log("Audio initialization failed:",b)}},[n]);m.useEffect(()=>{const b=()=>{d(!0),h(),document.removeEventListener("click",b)};return c||document.addEventListener("click",b),()=>{document.removeEventListener("click",b)}},[c,h]);const g=m.useCallback(()=>{if(!(!c||!n))try{if(i.current){i.current.currentTime=0;const b=i.current.play();b!==void 0&&b.catch(y=>{console.log("Hover sound blocked by browser:",y.message)})}}catch(b){console.log("Error playing hover sound:",b)}},[c,n]),x=m.useCallback(()=>{if(!(!c||!n))try{if(s.current){s.current.currentTime=0;const b=s.current.play();b!==void 0&&b.catch(y=>{console.log("Click sound blocked by browser:",y.message)})}}catch(b){console.log("Error playing click sound:",b)}},[c,n]),p=m.useCallback(b=>({onMouseEnter:()=>{c||(h(),d(!0)),g()},onClick:y=>{c||(h(),d(!0)),x(),b&&b(y)}}),[g,x,c,h]);return{playHoverSound:g,playClickSound:x,getButtonSoundHandlers:p,audioInitialized:n,userInteracted:c}},X1=({onSelectCategory:i,onJoinFriend:s})=>{const{getButtonSoundHandlers:n}=Sd();return t.jsxs("div",{className:"bg-gradient-to-br -mt-15 from-blue-50 via-purple-50 to-pink-50 rounded-3xl p-8 pt-13 shadow-2xl border border-white/20 w-270 mx-auto ",children:[t.jsx("img",{src:"/assets/categoryheader.jpg",alt:"Learning Adventure",className:"w-full -mt-8 sm:max-w-3xl sm:h-75 rounded-3xl shadow-2xl mx-auto transform hover:scale-105 transition-all duration-500 border-4 border-white/50 backdrop-blur-sm"}),t.jsxs("div",{className:"flex flex-row justify-center gap-110 mb-2 pt-10",children:[t.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 mb-4 animate-text-shimmer",children:"Choose Category"}),t.jsx("button",{className:"btn-autism-friendly bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white text-lg font-bold px-8 py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 mb-2 cursor-pointer",...n(s),children:"Join a Friend"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[t.jsxs("button",{className:"bg-white/80 backdrop-blur-xl border-2 border-blue-200 hover:border-blue-400 rounded-3xl shadow-xl hover:shadow-2xl p-6 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 cursor-pointer ",...n(()=>i("Academic")),children:[t.jsx("div",{className:"text-6xl mb-3",children:""}),t.jsx("div",{className:"font-bold text-xl text-blue-700 mb-1",children:"Academic"}),t.jsx("div",{className:"text-base text-gray-600",children:"Learn school subjects and skills!"})]}),t.jsxs("button",{className:"bg-white/80 backdrop-blur-xl border-2 border-purple-200 hover:border-purple-400 rounded-3xl shadow-xl hover:shadow-2xl p-6 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-purple-300 cursor-pointer ",...n(()=>i("Social / Daily Life Skill")),children:[t.jsx("div",{className:"text-6xl mb-3",children:""}),t.jsx("div",{className:"font-bold text-xl text-purple-700 mb-1",children:"Social / Daily Life Skill"}),t.jsx("div",{className:"text-base text-gray-600",children:"Practice life and social skills!"})]})]})]})},e2=({onSelectDifficulty:i,onJoinFriend:s,selectedCategory:n,onGoBack:l})=>{const{getButtonSoundHandlers:c}=Sd();return t.jsxs("div",{className:"bg-gradient-to-br -mt-10 from-blue-50 via-purple-50 to-pink-50 rounded-3xl shadow-2xl p-10 border border-white/20 relative overflow-hidden mx-auto w-270",children:[t.jsx("div",{className:"absolute top-0 right-0 w-270 h-32 bg-gradient-to-bl from-purple-200/20 to-transparent rounded-full blur-2xl"}),t.jsxs("div",{className:"relative z-10 -mt-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6 mb-5",children:[t.jsx("div",{className:"text-center sm:text-left",children:t.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-800 flex items-center justify-center sm:justify-start mb-2",children:[t.jsx("span",{className:"text-4xl sm:text-5xl mr-3 animate-bounce-gentle",children:""}),"Choose Your Level"]})}),t.jsxs("button",{...c(l),className:"bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 px-6 py-3 rounded-2xl transition-all duration-300 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:scale-105",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{className:"font-semibold",children:"Go Back"})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 rounded-2xl p-6 mb-8 border-2 border-purple-100 relative",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-100/20 via-purple-100/20 to-pink-100/20 rounded-2xl animate-pulse-gentle"}),t.jsx("div",{className:"relative z-10 text-center",children:t.jsxs("p",{className:"text-xl sm:text-2xl text-gray-800 flex items-center justify-center",children:[t.jsx("span",{className:"font-bold text-purple-600",children:"Selected Category:"}),t.jsx("span",{className:"ml-3 font-bold text-pink-600",children:n}),t.jsx("span",{className:"ml-3 text-3xl animate-bounce-gentle",children:""})]})})]}),t.jsxs("div",{className:"flex flex-row justify-center gap-110 mb-2 pt-4",children:[t.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 mb-4 animate-text-shimmer",children:"Choose Difficulty"}),t.jsx("button",{className:"btn-autism-friendly bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white text-lg font-bold px-8 py-3 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 mb-2",...c(s),children:"Join a Friend"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[t.jsxs("button",{className:"bg-white/80 backdrop-blur-xl border-2 border-green-200 hover:border-green-400 rounded-3xl shadow-xl hover:shadow-2xl p-8 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-green-300 cursor-pointer ",...c(()=>i("Beginner")),children:[t.jsx("div",{className:"text-7xl mb-4",children:""}),t.jsx("div",{className:"font-bold text-2xl text-green-700 mb-2",children:"Beginner"}),t.jsx("div",{className:"text-base text-gray-600 text-center",children:"Perfect for beginners!"})]}),t.jsxs("button",{className:"bg-white/80 backdrop-blur-xl border-2 border-orange-200 hover:border-orange-400 rounded-3xl shadow-xl hover:shadow-2xl p-8 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-orange-300 cursor-pointer ",...c(()=>i("Intermediate")),children:[t.jsx("div",{className:"text-7xl mb-4",children:""}),t.jsx("div",{className:"font-bold text-2xl text-orange-700 mb-2",children:"Intermediate"}),t.jsx("div",{className:"text-base text-gray-600 text-center",children:"A fun challenge!"})]}),t.jsxs("button",{className:"bg-white/80 backdrop-blur-xl border-2 border-red-200 hover:border-red-400 rounded-3xl shadow-xl hover:shadow-2xl p-8 flex flex-col items-center justify-center transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-red-300 cursor-pointer ",...c(()=>i("Proficient")),children:[t.jsx("div",{className:"text-7xl mb-4",children:""}),t.jsx("div",{className:"font-bold text-2xl text-red-700 mb-2",children:"Proficient"}),t.jsx("div",{className:"text-base text-gray-600 text-center",children:"For experts like you!"})]})]})]})},t2=[{id:1,name:"Identification",icon:"",color:"from-blue-500 to-indigo-600",bgColor:"bg-blue-50",hoverColor:"hover:bg-blue-100",category:"Academic"},{id:2,name:"Numbers",icon:"",color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",hoverColor:"hover:bg-green-100",category:"Academic"},{id:3,name:"Colors",icon:"",color:"from-purple-500 to-violet-600",bgColor:"bg-purple-50",hoverColor:"hover:bg-purple-100",category:"Academic"},{id:4,name:"Academic Puzzles",icon:"",color:"from-indigo-500 to-blue-600",bgColor:"bg-indigo-50",hoverColor:"hover:bg-indigo-100",category:"Academic"},{id:5,name:"Matching Type",icon:"",color:"from-pink-500 to-rose-600",bgColor:"bg-pink-50",hoverColor:"hover:bg-pink-100",category:"Academic"},{id:6,name:"Visual Memory Challenge",icon:"",color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-50",hoverColor:"hover:bg-purple-100",category:"Academic"},{id:7,name:"Cashier Game",icon:"",color:"from-green-500 to-teal-600",bgColor:"bg-green-50",hoverColor:"hover:bg-green-100",category:"Social / Daily Life Skill"},{id:8,name:"Money Value Game",icon:"",color:"from-yellow-500 to-orange-600",bgColor:"bg-yellow-50",hoverColor:"hover:bg-yellow-100",category:"Social / Daily Life Skill"},{id:9,name:"Social Greetings",icon:"",color:"from-purple-500 to-pink-600",bgColor:"bg-purple-50",hoverColor:"hover:bg-purple-100",category:"Social / Daily Life Skill"},{id:10,name:"Hygiene Hero",icon:"",color:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-50",hoverColor:"hover:bg-cyan-100",category:"Social / Daily Life Skill"},{id:11,name:"Safe Street Crossing",icon:"",color:"from-emerald-500 to-green-600",bgColor:"bg-emerald-50",hoverColor:"hover:bg-emerald-100",category:"Social / Daily Life Skill"},{id:12,name:"Household Chores Helper",icon:"",color:"from-orange-500 to-yellow-600",bgColor:"bg-orange-50",hoverColor:"hover:bg-orange-100",category:"Social / Daily Life Skill"}],r2=({isOpen:i,onClose:s,onSelect:n,selectedCategory:l})=>{const{getButtonSoundHandlers:c}=Sd();if(!i)return null;const d=t2.filter(h=>h.category===l);return t.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-125 relative border border-gray-100 overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 p-6 text-white relative",children:[t.jsx("button",{className:"absolute top-4 right-4 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-all duration-200 transform hover:scale-110",...c(s),children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-",children:"Choose Your Learning Adventure"}),t.jsx("p",{className:"text-sm text-white/90",children:"Pick an activity that excites you! "})]})]}),t.jsx("div",{className:"p-1",children:t.jsx("div",{className:"grid grid-cols-1 gap-1",children:d.map(h=>t.jsxs("button",{...c(()=>{n(h.name),s()}),className:`
                  ${h.bgColor} ${h.hoverColor}
                  cursor-pointer rounded-2xl h-25 shadow-lg hover:shadow-xl
                  transition-all duration-300 transform hover:scale-105
                  border-2 border-white/50 hover:border-white
                  group relative overflow-hidden
                `,children:[t.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[t.jsx("div",{className:" absolute top-2 right-2 w-4 h-4 bg-white/30 rounded-full animate-pulse"}),t.jsx("div",{className:"absolute bottom-4 left-4 w-3 h-3 bg-white/20 rounded-full animate-bounce"})]}),t.jsx("div",{className:`
                  w-12 h-12 bg-gradient-to-r ${h.color} 
                  rounded-2xl mx-auto mb-1 flex items-center justify-center
                  shadow-lg group-hover:shadow-xl transform group-hover:scale-110
                  transition-all duration-300
                `,children:t.jsx("span",{className:"text-2xl text-white",children:h.icon})}),t.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-gray-900 transition-colors duration-200",children:h.name}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"})]},h.id))})})]})})};var zh,ax;function s2(){if(ax)return zh;ax=1;var i={linear:function(s,n,l,c){var d=l-n;return d*s/c+n},easeInQuad:function(s,n,l,c){var d=l-n;return d*(s/=c)*s+n},easeOutQuad:function(s,n,l,c){var d=l-n;return-d*(s/=c)*(s-2)+n},easeInOutQuad:function(s,n,l,c){var d=l-n;return(s/=c/2)<1?d/2*s*s+n:-d/2*(--s*(s-2)-1)+n},easeInCubic:function(s,n,l,c){var d=l-n;return d*(s/=c)*s*s+n},easeOutCubic:function(s,n,l,c){var d=l-n;return d*((s=s/c-1)*s*s+1)+n},easeInOutCubic:function(s,n,l,c){var d=l-n;return(s/=c/2)<1?d/2*s*s*s+n:d/2*((s-=2)*s*s+2)+n},easeInQuart:function(s,n,l,c){var d=l-n;return d*(s/=c)*s*s*s+n},easeOutQuart:function(s,n,l,c){var d=l-n;return-d*((s=s/c-1)*s*s*s-1)+n},easeInOutQuart:function(s,n,l,c){var d=l-n;return(s/=c/2)<1?d/2*s*s*s*s+n:-d/2*((s-=2)*s*s*s-2)+n},easeInQuint:function(s,n,l,c){var d=l-n;return d*(s/=c)*s*s*s*s+n},easeOutQuint:function(s,n,l,c){var d=l-n;return d*((s=s/c-1)*s*s*s*s+1)+n},easeInOutQuint:function(s,n,l,c){var d=l-n;return(s/=c/2)<1?d/2*s*s*s*s*s+n:d/2*((s-=2)*s*s*s*s+2)+n},easeInSine:function(s,n,l,c){var d=l-n;return-d*Math.cos(s/c*(Math.PI/2))+d+n},easeOutSine:function(s,n,l,c){var d=l-n;return d*Math.sin(s/c*(Math.PI/2))+n},easeInOutSine:function(s,n,l,c){var d=l-n;return-d/2*(Math.cos(Math.PI*s/c)-1)+n},easeInExpo:function(s,n,l,c){var d=l-n;return s==0?n:d*Math.pow(2,10*(s/c-1))+n},easeOutExpo:function(s,n,l,c){var d=l-n;return s==c?n+d:d*(-Math.pow(2,-10*s/c)+1)+n},easeInOutExpo:function(s,n,l,c){var d=l-n;return s===0?n:s===c?n+d:(s/=c/2)<1?d/2*Math.pow(2,10*(s-1))+n:d/2*(-Math.pow(2,-10*--s)+2)+n},easeInCirc:function(s,n,l,c){var d=l-n;return-d*(Math.sqrt(1-(s/=c)*s)-1)+n},easeOutCirc:function(s,n,l,c){var d=l-n;return d*Math.sqrt(1-(s=s/c-1)*s)+n},easeInOutCirc:function(s,n,l,c){var d=l-n;return(s/=c/2)<1?-d/2*(Math.sqrt(1-s*s)-1)+n:d/2*(Math.sqrt(1-(s-=2)*s)+1)+n},easeInElastic:function(s,n,l,c){var d=l-n,h,g,x;return x=1.70158,g=0,h=d,s===0?n:(s/=c)===1?n+d:(g||(g=c*.3),h<Math.abs(d)?(h=d,x=g/4):x=g/(2*Math.PI)*Math.asin(d/h),-(h*Math.pow(2,10*(s-=1))*Math.sin((s*c-x)*(2*Math.PI)/g))+n)},easeOutElastic:function(s,n,l,c){var d=l-n,h,g,x;return x=1.70158,g=0,h=d,s===0?n:(s/=c)===1?n+d:(g||(g=c*.3),h<Math.abs(d)?(h=d,x=g/4):x=g/(2*Math.PI)*Math.asin(d/h),h*Math.pow(2,-10*s)*Math.sin((s*c-x)*(2*Math.PI)/g)+d+n)},easeInOutElastic:function(s,n,l,c){var d=l-n,h,g,x;return x=1.70158,g=0,h=d,s===0?n:(s/=c/2)===2?n+d:(g||(g=c*(.3*1.5)),h<Math.abs(d)?(h=d,x=g/4):x=g/(2*Math.PI)*Math.asin(d/h),s<1?-.5*(h*Math.pow(2,10*(s-=1))*Math.sin((s*c-x)*(2*Math.PI)/g))+n:h*Math.pow(2,-10*(s-=1))*Math.sin((s*c-x)*(2*Math.PI)/g)*.5+d+n)},easeInBack:function(s,n,l,c,d){var h=l-n;return d===void 0&&(d=1.70158),h*(s/=c)*s*((d+1)*s-d)+n},easeOutBack:function(s,n,l,c,d){var h=l-n;return d===void 0&&(d=1.70158),h*((s=s/c-1)*s*((d+1)*s+d)+1)+n},easeInOutBack:function(s,n,l,c,d){var h=l-n;return d===void 0&&(d=1.70158),(s/=c/2)<1?h/2*(s*s*(((d*=1.525)+1)*s-d))+n:h/2*((s-=2)*s*(((d*=1.525)+1)*s+d)+2)+n},easeInBounce:function(s,n,l,c){var d=l-n,h;return h=i.easeOutBounce(c-s,0,d,c),d-h+n},easeOutBounce:function(s,n,l,c){var d=l-n;return(s/=c)<1/2.75?d*(7.5625*s*s)+n:s<2/2.75?d*(7.5625*(s-=1.5/2.75)*s+.75)+n:s<2.5/2.75?d*(7.5625*(s-=2.25/2.75)*s+.9375)+n:d*(7.5625*(s-=2.625/2.75)*s+.984375)+n},easeInOutBounce:function(s,n,l,c){var d=l-n,h;return s<c/2?(h=i.easeInBounce(s*2,0,d,c),h*.5+n):(h=i.easeOutBounce(s*2-c,0,d,c),h*.5+d*.5+n)}};return zh=i,zh}var a2=s2();function n2(i){return i*Math.PI/180}function Dr(i,s){return i+Math.random()*(s-i)}function l2(i,s){return Math.floor(i+Math.random()*(s-i+1))}var Ro;(function(i){i[i.Circle=0]="Circle",i[i.Square=1]="Square",i[i.Strip=2]="Strip"})(Ro||(Ro={}));var hn;(function(i){i[i.Positive=1]="Positive",i[i.Negative=-1]="Negative"})(hn||(hn={}));const i2=1e3/60;class o2{constructor(s,n,l,c){this.getOptions=n;const{colors:d,initialVelocityX:h,initialVelocityY:g}=this.getOptions();this.context=s,this.x=l,this.y=c,this.w=Dr(5,20),this.h=Dr(5,20),this.radius=Dr(5,10),this.vx=typeof h=="number"?Dr(-h,h):Dr(h.min,h.max),this.vy=typeof g=="number"?Dr(-g,0):Dr(g.min,g.max),this.shape=l2(0,2),this.angle=n2(Dr(0,360)),this.angularSpin=Dr(-.2,.2),this.color=d[Math.floor(Math.random()*d.length)],this.rotateY=Dr(0,1),this.rotationDirection=Dr(0,1)?hn.Positive:hn.Negative}update(s){const{gravity:n,wind:l,friction:c,opacity:d,drawShape:h}=this.getOptions(),g=s/i2;this.x+=this.vx*g,this.y+=this.vy*g,this.vy+=n*g,this.vx+=l*g,this.vx*=c**g,this.vy*=c**g,this.rotateY>=1&&this.rotationDirection===hn.Positive?this.rotationDirection=hn.Negative:this.rotateY<=-1&&this.rotationDirection===hn.Negative&&(this.rotationDirection=hn.Positive);const x=.1*this.rotationDirection*g;if(this.rotateY+=x,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=d,this.context.lineCap="round",this.context.lineWidth=2,h&&typeof h=="function")h.call(this,this.context);else switch(this.shape){case Ro.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ro.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ro.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class c2{constructor(s,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=c=>{this.particles.splice(c,1)},this.getParticle=()=>{const c=Dr(this.x,this.w+this.x),d=Dr(this.y,this.h+this.y);return new o2(this.context,this.getOptions,c,d)},this.animate=c=>{const{canvas:d,context:h,particlesGenerated:g,lastNumberOfPieces:x}=this,{run:p,recycle:b,numberOfPieces:y,debug:w,tweenFunction:S,tweenDuration:C}=this.getOptions();if(!p)return!1;const R=this.particles.length,O=b?R:g;if(O<y){x!==y&&(this.tweenProgress=0,this.tweenFrom=O,this.lastNumberOfPieces=y),this.tweenProgress=Math.min(C,Math.max(0,this.tweenProgress+c));const M=S(this.tweenProgress,this.tweenFrom,y,C),T=Math.round(M-O);for(let B=0;B<T;B++)this.particles.push(this.getParticle());this.particlesGenerated+=T}w&&(h.font="12px sans-serif",h.fillStyle="#333",h.textAlign="right",h.fillText(`Particles: ${R}`,d.width-10,d.height-20));for(let M=this.particles.length-1;M>=0;M--){const T=this.particles[M];T.update(c),(T.y>d.height||T.y<-100||T.x>d.width+100||T.x<-100)&&(b&&O<=y?this.particles[M]=this.getParticle():this.removeParticleAt(M))}return R>0||O<y},this.canvas=s;const l=this.canvas.getContext("2d");if(!l)throw new Error("Could not get canvas context");this.context=l,this.getOptions=n}}const xf={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:a2.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class d2{constructor(s,n){this.lastFrameTime=0,this.setOptionsWithDefaults=c=>{const d={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...d,...xf,...c},Object.assign(this,c.confettiSource)},this.update=(c=0)=>{const{options:{run:d,onConfettiComplete:h,frameRate:g},canvas:x,context:p}=this,b=Math.min(c-this.lastFrameTime,50);if(g&&b<1e3/g){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=c-(g?b%g:0),d&&(p.fillStyle="white",p.clearRect(0,0,x.width,x.height)),this.generator.animate(b)?this.rafId=requestAnimationFrame(this.update):(h&&typeof h=="function"&&this.generator.particlesGenerated>0&&h.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=s;const l=this.canvas.getContext("2d");if(!l)throw new Error("Could not get canvas context");this.context=l,this.generator=new c2(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(s){const n=this._options?.run,l=this._options?.recycle;this.setOptionsWithDefaults(s),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof s.recycle=="boolean"&&s.recycle&&l===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof s.run=="boolean"&&s.run&&n===!1&&this.update()}}const u2=Ps.createRef();class pf extends Ps.Component{constructor(s){super(s),this.canvas=Ps.createRef(),this.canvas=s.canvasRef||u2}componentDidMount(){if(this.canvas.current){const s=Lh(this.props)[0];this.confetti=new d2(this.canvas.current,s)}}componentDidUpdate(){const s=Lh(this.props)[0];this.confetti&&(this.confetti.options=s)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[s,n]=Lh(this.props),l={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return t.jsx("canvas",{width:s.width,height:s.height,ref:this.canvas,...n,style:l})}}pf.defaultProps={...xf};pf.displayName="ReactConfetti";function Lh(i){const s={},n={},l={},c=[...Object.keys(xf),"confettiSource","drawShape","onConfettiComplete","frameRate"],d=["canvasRef"];for(const h in i){const g=i[h];c.includes(h)?s[h]=g:d.includes(h)?d[h]=g:l[h]=g}return[s,l,n]}const nx=Ps.forwardRef((i,s)=>t.jsx(pf,{canvasRef:s,...i})),vt={COMMON:"common",RARE:"rare",EPIC:"epic",LEGENDARY:"legendary"},Vt={PERFORMANCE:"performance",COMPLETION:"completion",EXPLORATION:"exploration",MASTERY:"mastery",STREAK:"streak",SPECIAL:"special"},h2=(i,s,n)=>[{id:"perfect_score",name:"Perfect Score Champion",description:"Answered every question correctly! Amazing!",icon:"",gradient:"from-yellow-400 via-yellow-500 to-amber-600",rarity:vt.LEGENDARY,type:Vt.PERFORMANCE,criteria:(l,c,d)=>l===c&&c>0,points:100},{id:"excellent_performance",name:"Excellence Star",description:"Scored 80% or higher! Outstanding work!",icon:"",gradient:"from-purple-400 via-purple-500 to-purple-600",rarity:vt.EPIC,type:Vt.PERFORMANCE,criteria:(l,c,d)=>l>=c*.8&&l<c,points:50},{id:"good_effort",name:"Rising Star",description:"Scored 60% or higher! Great progress!",icon:"",gradient:"from-blue-400 via-blue-500 to-blue-600",rarity:vt.RARE,type:Vt.PERFORMANCE,criteria:(l,c,d)=>l>=c*.6&&l<c*.8,points:25},{id:"completion_badge",name:"Activity Finisher",description:"Completed the entire activity! Well done!",icon:"",gradient:"from-green-400 via-green-500 to-green-600",rarity:vt.COMMON,type:Vt.COMPLETION,criteria:(l,c,d)=>c>0,points:10},{id:"category_explorer",name:`${i} Explorer`,description:`Discovered the wonderful world of ${i}!`,icon:f2(i),gradient:"from-indigo-400 via-indigo-500 to-indigo-600",rarity:vt.COMMON,type:Vt.EXPLORATION,criteria:(l,c,d)=>d.category===i&&l>0,points:15},{id:"difficulty_master",name:`${s} Difficulty Master`,description:`Conquered ${s} level challenges!`,icon:m2(s),gradient:g2(s),rarity:x2(s),type:Vt.MASTERY,criteria:(l,c,d)=>d.difficulty===s&&l>0,points:p2(s)},{id:"fast_learner",name:"Quick Thinker",description:"Answered questions rapidly and accurately!",icon:"",gradient:"from-yellow-300 via-orange-400 to-red-500",rarity:vt.RARE,type:Vt.SPECIAL,criteria:(l,c,d)=>d.averageTime&&d.averageTime<10&&l>=c*.7,points:40},{id:"first_try_success",name:"First Try Hero",description:"Got the first answer right immediately!",icon:"",gradient:"from-pink-400 via-rose-500 to-red-600",rarity:vt.RARE,type:Vt.SPECIAL,criteria:(l,c,d)=>d.firstQuestionCorrect===!0,points:30},{id:"persistent_learner",name:"Never Give Up",description:"Showed great persistence throughout!",icon:"",gradient:"from-emerald-400 via-teal-500 to-cyan-600",rarity:vt.COMMON,type:Vt.SPECIAL,criteria:(l,c,d)=>c>=3&&l>0,points:20},{id:"color_master",name:"Color Master",description:"Awarded for completing 5 color-related activities",icon:"",gradient:"from-purple-400 via-purple-500 to-purple-600",rarity:vt.RARE,type:Vt.MASTERY,criteria:(l,c,d)=>d.colorActivitiesCompleted>=5,points:75},{id:"shape_explorer",name:"Shape Explorer",description:"Awarded after finishing 5 shape activities",icon:"",gradient:"from-blue-400 via-indigo-500 to-indigo-600",rarity:vt.RARE,type:Vt.MASTERY,criteria:(l,c,d)=>d.shapeActivitiesCompleted>=5,points:75},{id:"number_ninja",name:"Number Ninja",description:"Earned by correctly answering 20 number-related questions",icon:"",gradient:"from-green-400 via-green-500 to-green-600",rarity:vt.EPIC,type:Vt.MASTERY,criteria:(l,c,d)=>d.correctNumberAnswers>=20,points:100},{id:"consistency_champ",name:"Consistency Champ",description:"Given for completing activities 3 days in a row",icon:"",gradient:"from-orange-400 via-orange-500 to-red-500",rarity:vt.EPIC,type:Vt.STREAK,criteria:(l,c,d)=>d.consecutiveDays>=3,points:100},{id:"helper_badge",name:"Helper Badge",description:"For activities done collaboratively with a parent/teacher",icon:"",gradient:"from-orange-400 via-orange-500 to-orange-600",rarity:vt.RARE,type:Vt.SPECIAL,criteria:(l,c,d)=>d.collaborativeActivities>=1,points:50},{id:"daily_life_hero",name:"Daily Life Hero",description:'Awarded for finishing 5 "Daily Life Skills" activities',icon:"",gradient:"from-teal-400 via-teal-500 to-teal-600",rarity:vt.RARE,type:Vt.MASTERY,criteria:(l,c,d)=>d.dailyLifeActivitiesCompleted>=5,points:75},{id:"all_rounder",name:"All-Rounder",description:"Earned when a student completes at least one activity in every category",icon:"",gradient:"from-yellow-400 via-yellow-500 to-amber-600",rarity:vt.LEGENDARY,type:Vt.MASTERY,criteria:(l,c,d)=>d.allCategoriesCompleted===!0,points:150}];function f2(i){return{Academic:"",Social:"","Life Skills":"","Daily Life Skills":"",Communication:"",Math:"",Numbers:"",Science:"",Reading:"",Art:"",Colors:"",Shapes:"",Music:"",Physical:""}[i]||""}function m2(i){return{Beginner:"",Intermediate:"",Proficient:""}[i]||""}function g2(i){return{Beginner:"from-green-300 via-green-400 to-green-500",Intermediate:"from-orange-400 via-orange-500 to-red-500",Proficient:"from-purple-500 via-indigo-500 to-blue-600"}[i]||"from-green-300 via-green-400 to-green-500"}function x2(i){return{Beginner:vt.COMMON,Intermediate:vt.RARE,Proficient:vt.EPIC}[i]||vt.COMMON}function p2(i){return{Beginner:15,Intermediate:25,Proficient:50}[i]||15}function b2(i,s,n,l,c,d={}){const h=h2(n,l),g=[],x={...d,category:n,difficulty:l,activity:c,percentage:s>0?i/s*100:0};return h.forEach(p=>{p.criteria(i,s,x)&&g.push({...p,earnedAt:new Date().toISOString(),sessionScore:`${i}/${s}`,percentage:x.percentage.toFixed(1)})}),g}function v2(i,s="guest"){try{const c=[...y2(s),...i].filter((d,h,g)=>h===g.findIndex(x=>x.id===d.id));return localStorage.setItem(`student_badges_${s}`,JSON.stringify(c)),c}catch(n){return console.error("Error saving badges:",n),i}}function y2(i="guest"){try{const s=localStorage.getItem(`student_badges_${i}`);return s?JSON.parse(s):[]}catch(s){return console.error("Error retrieving badges:",s),[]}}function w2(i){const s=i.length,n=i.some(c=>c.rarity===vt.LEGENDARY),l=i.some(c=>c.rarity===vt.EPIC);return n?{title:"GREAT JOB! ",message:"You received New Badges!",emotion:""}:l||s>=4?{title:"Good Job! ",message:"You received New Badges!",emotion:""}:s>=3?{title:"AMAZING WORK! ",message:"You received New Badges!",emotion:""}:s>=2?{title:"NICE ONE! ",message:"You received New Badges!",emotion:""}:{title:"WELL DONE! ",message:"You received New Badges!",emotion:""}}const Uh=m.memo(({src:i,className:s,autoPlay:n,loop:l,muted:c,controls:d,style:h})=>{const g=m.useRef();return m.useEffect(()=>{g.current&&g.current.load()},[i]),t.jsxs("video",{ref:g,className:s,autoPlay:n,loop:l,muted:c,controls:d,preload:"metadata",playsInline:!0,loading:"lazy",style:h,onLoadStart:x=>{x.target.playbackRate=1,c||(x.target.volume=.7)},children:[t.jsx("source",{src:i,type:"video/mp4"}),"Your browser does not support the video tag."]})}),j2=({category:i,difficulty:s,activity:n,onComplete:l})=>{const c=ut(),{user:d}=Vr(),h=m.useRef({}),g=m.useRef({}),[x,p]=m.useState(0),[b,y]=m.useState(null),[w,S]=m.useState(!1),[C,R]=m.useState(0),[O,M]=m.useState(!1),[T,B]=m.useState(!1),[K,X]=m.useState(!1),[ee,re]=m.useState(!1),[q,z]=m.useState([]),[E,A]=m.useState({startTime:new Date,questionTimes:[],firstQuestionCorrect:!1}),[P,V]=m.useState(!1),[J,ie]=m.useState(null),[k,G]=m.useState(!1),I=["/assets/GreatJob.png","/assets/NiceWork.png","/assets/WellDone.png"],[oe,xe]=m.useState(I[0]),[_,F]=m.useState(0),[ne,se]=m.useState([]),[he,fe]=m.useState(0),[be,ae]=m.useState(1),[ge,Ee]=m.useState("customer"),[Me,$e]=m.useState(""),[Re,Pe]=m.useState(!1),[Fe,gr]=m.useState(0),[ps,Wr]=m.useState(1),[al,Ot]=m.useState([]),[et,xn]=m.useState(null),[yf,rr]=m.useState(!0),[Ho,gi]=m.useState(!1),[qo,nl]=m.useState(""),[_d,Go]=m.useState(!1),[Cd,Ed]=m.useState([]),[pn,Pt]=m.useState(0),[$t,Mt]=m.useState(0),[xi,ll]=m.useState(1),[yt,Hs]=m.useState(null),[bn,vn]=m.useState(!1),[qs,bs]=m.useState(!1),[xr,yn]=m.useState(!1),[Fo,_a]=m.useState(""),[Gs,il]=m.useState(""),[pi,bi]=m.useState([]),[vi,Ca]=m.useState(0),[Yo,yi]=m.useState(0),[wi,Or]=m.useState(1),[qe,kt]=m.useState(null),[Ea,ji]=m.useState(!1),[wf,Vo]=m.useState(!1),[Ad,vs]=m.useState(!1),[Wo,Fs]=m.useState(""),[wn,Aa]=m.useState(""),[jn,ht]=m.useState(""),[kd,ol]=m.useState(!1),[Wt,Kr]=m.useState(!1),[Td,Nn]=m.useState(null),[Ni,Rd]=m.useState([]),[Sn,ka]=m.useState(0),[pr,It]=m.useState(0),[ys,Si]=m.useState(1),[Zr,cl]=m.useState(0),[ws,_i]=m.useState([]),[Kt,dl]=m.useState(!1),[Ys,Ta]=m.useState([]),[Ra,ul]=m.useState(""),[Ko,Mr]=m.useState(!1),[Zo,hl]=m.useState(""),[Dd,_n]=m.useState(!1),[Od,fl]=m.useState(0),[ml,br]=m.useState(!1),[Vs,Da]=m.useState(!1),[vr,js]=m.useState(0),[Jo,Cn]=m.useState(0),[gl,Ws]=m.useState(0),[Jr,Ks]=m.useState([]),[Zs,yr]=m.useState(0),[Qo,Oa]=m.useState(0),[Md,xl]=m.useState([]),[Ci,Xo]=m.useState(null),[Zt,Js]=m.useState(null),[Ei,En]=m.useState([]),[zd,Ai]=m.useState(!1),[ki,Qs]=m.useState(!1),[pl,Ma]=m.useState(""),[Ld,Ti]=m.useState(""),[jf,Ri]=m.useState([]),[_t,bl]=m.useState([]),[Qr,Di]=m.useState(null),[Nf,vl]=m.useState(null),[sr,yl]=m.useState(!1),[za,wl]=m.useState([]),[Oi,jl]=m.useState([]),[ec,An]=m.useState(!1),[Mi,tc]=m.useState(null),[Ns,rc]=m.useState(null),[Sf,Ud]=m.useState(0),[_f,Cf]=m.useState(1),[Ef,Bd]=m.useState("math"),[sc,kn]=m.useState(!1),[Af,Pd]=m.useState(null),[La,Nl]=m.useState(null),[Ua,Ba]=m.useState(1),[Tn,zi]=m.useState(0),[kf,Tf]=m.useState(!1),[$d,Sl]=m.useState([]),[_l,Ss]=m.useState([]),[Rf,Li]=m.useState(!1),[Id,Hd]=m.useState(""),[ac,nc]=m.useState(!1),[qd,Gd]=m.useState(""),[Fd,Yd]=m.useState(""),[Df,lc]=m.useState(!1),[Of,Ui]=m.useState(null),[ar,Xs]=m.useState([]),[Vd,Cl]=m.useState([]),[Wd,Kd]=m.useState({}),[ic,Bi]=m.useState(0),[Rn,oc]=m.useState(!1),[El,cc]=m.useState(""),[Al,wr]=m.useState(!1),[Ht,Xr]=m.useState(!1),[Dn,jr]=m.useState(""),[Pi,Pa]=m.useState(""),[Zd,$i]=m.useState([]),[Mf,Ii]=m.useState([]),[Jd,Qd]=m.useState(!1),[dc,zr]=m.useState(null),[Hi,Jt]=m.useState(""),[On,$a]=m.useState(!1),[qi,Mn]=m.useState(""),[_s,Lr]=m.useState([]),[Xd,zn]=m.useState([]),[st,Ia]=m.useState([]),[qt,Ha]=m.useState(!1),[Cs,Ln]=m.useState(0),[Un,Nr]=m.useState(!1),[pe,kl]=m.useState(null),[uc,Gi]=m.useState(!1),[Tt,Sr]=m.useState("memorize"),[es,Tl]=m.useState([]),[qa,Gt]=m.useState([0,1,2,3]),[nr,_r]=m.useState(!0),[nt,Cr]=m.useState(null),[Es,hc]=m.useState(0),[Fi,Yi]=m.useState(1),[eu,Ct]=m.useState(!1),[Je,Oe]=m.useState(8),[ts,Ft]=m.useState(!1),[Ur,As]=m.useState(0),[ks,fc]=m.useState(0),[ea,ta]=m.useState(0),[mc,Rl]=m.useState(!1),[gc,Ts]=m.useState(""),[Rs,rs]=m.useState(""),[ss,ra]=m.useState(null),Bn=m.useRef(null),lr=m.useRef(null),it=m.useRef(null),tt=m.useRef(null),ft=m.useRef(null),Ye=m.useRef(null),xc=m.useRef(null),tu="/assets/sounds/Activitycompletion.mp3",Br="/assets/sounds/correct.mp3",Pr="/assets/sounds/wrong.mp3",mt="/assets/sounds/Activitycompletion.mp3",Vi=()=>{if(i==="Academic"){if(n==="Academic Puzzles")return"/assets/sounds/BgMusicc_AcademicPuzzle.mp3";if(n==="Matching Type")return"/assets/sounds/BgMusic_MatchingType.mp3";if(n==="Numbers"||n==="Identification")return"/assets/sounds/BgMusic_Numbersidentification.mp3";if(n==="Visual Memory Challenge")return"/assets/sounds/Jungle_BGmusic.wav";if(n==="Colors")return"/assets/sounds/BgMusic_Numbersidentification.mp3"}if(i==="Social / Daily Life Skill"){if(n==="Hygiene Hero")return"/assets/sounds/Jungle_BGmusic.wav";if(n==="Cashier Game"||n==="Money Value Game")return"/assets/sounds/Jungle_BGmusic.wav";if(n==="Safe Street Crossing"||n==="Social Greetings")return"/assets/sounds/BgMusic_Numbersidentification.mp3";if(n==="Household Chores Helper")return"/assets/sounds/BgMusicc_AcademicPuzzle.mp3"}return"/assets/sounds/Jungle_BGmusic.wav"};m.useEffect(()=>{const j=Vi();if(Ye.current&&j){Ye.current.src=j,Ye.current.volume=.3,Ye.current.loop=!0;const D=Ye.current.play();D!==void 0&&D.catch(U=>{console.log("Background music autoplay prevented by browser. Music will start on first user interaction:",U);const Q=()=>{Ye.current&&!k&&Ye.current.play().catch(me=>console.log("Play error:",me)),document.removeEventListener("click",Q)};document.addEventListener("click",Q)})}return()=>{Ye.current&&(Ye.current.pause(),Ye.current.currentTime=0)}},[i,n]),m.useEffect(()=>{Ye.current&&(k?Ye.current.pause():Ye.current.play().catch(j=>{console.log("Background music play prevented:",j)}))},[k]);const Pn=()=>{G(!k)};m.useEffect(()=>{K&&(Bn.current&&Bn.current.pause(),lr.current&&(lr.current.currentTime=0,lr.current.play()))},[K]),m.useEffect(()=>{if(O&&it.current){it.current.currentTime=0,it.current.play();const j=Math.floor(Math.random()*I.length);xe(I[j])}},[O]),m.useEffect(()=>{T&&tt.current&&(tt.current.currentTime=0,tt.current.play())},[T]),m.useEffect(()=>{if(Ns!==null&&Ns>0){const j=setTimeout(()=>{rc(Ns-1)},1e3);return()=>clearTimeout(j)}},[Ns]),m.useEffect(()=>(n==="Identification"&&s==="Intermediate"?Ye.current&&(Ye.current.volume=.3,Ye.current.loop=!0,Ye.current.play().catch(console.error)):Ye.current&&(Ye.current.pause(),Ye.current.currentTime=0),()=>{Ye.current&&(Ye.current.pause(),Ye.current.currentTime=0)}),[n,s]);const as=(j,D=.9,U=1)=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const Q=new SpeechSynthesisUtterance(j);Q.rate=D,Q.pitch=U,Q.volume=1;const me=window.speechSynthesis.getVoices(),ye=me.find(je=>je.name.includes("Google UK English Female")||je.name.includes("Google US English Female")||je.name.includes("Microsoft Zira")||je.name.includes("Microsoft Linda")||je.name.includes("Female")&&je.lang.startsWith("en")||je.lang.startsWith("en-")&&je.name.includes("Female"))||me.find(je=>je.lang.startsWith("en-US")||je.lang.startsWith("en-GB"));ye&&(Q.voice=ye,console.log(" Using voice:",ye.name)),window.speechSynthesis.speak(Q),console.log(" Speaking:",j)}else console.warn(" Text-to-speech not supported in this browser")},Dl=j=>({onClick:D=>{j&&j(D)}}),Ga=async(j,D,U,Q)=>{try{console.log(" Recording activity completion:",{studentId:j,activityId:D,score:U,status:Q});const{recordActivityProgress:me}=await rl(async()=>{const{recordActivityProgress:or}=await Promise.resolve().then(()=>W1);return{recordActivityProgress:or}},void 0),ye={Identification:{Beginner:95,Intermediate:96,Proficient:97},Numbers:{Beginner:98,Intermediate:99,Proficient:100},Colors:{Beginner:101,Intermediate:102,Proficient:103},"Academic Puzzles":{Beginner:104,Intermediate:105,Proficient:106},"Matching Type":{Beginner:107,Intermediate:108,Proficient:109},"Visual Memory Challenge":{Beginner:110,Intermediate:111,Proficient:112}};let je=D;n&&s&&ye[n]&&ye[n][s]?je=ye[n][s]:je=95,console.log(" Using activity ID:",je,"for",n,s);const xt=await me(j,je,U,Q);return xt.error?(console.error(" Error recording activity progress:",xt.error),{success:!1,errors:[xt.error.message||"Failed to record activity progress"]}):(console.log(" Activity progress recorded successfully:",xt.data),{success:!0,errors:[]})}catch(me){return console.error("Error recording activity completion:",me),{success:!1,errors:[me.message]}}};m.useEffect(()=>{"speechSynthesis"in window&&(window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices()}))},[]);const zt={Academic:{Beginner:{Identification:[{questionText:"What are they doing?",videoSrc:"/assets/flashcards/brushyourteeth.mp4",answerChoices:["Sleeping","Eating","Reading a Book","Brushing Teeth"],correctAnswer:"Brushing Teeth"},{questionText:"What animal is this?",videoSrc:"/assets/flashcards/dog_academic.mp4",answerChoices:["Dog","Cat","Fish","Bird"],correctAnswer:"Dog"},{questionText:"What number is this?",videoSrc:"/assets/flashcards/Easy-identificaction/number9.mp4",answerChoices:["Eight (8)","Seven (7)","Nine (9)","Ten (10)"],correctAnswer:"Nine (9)"},{questionText:"What number is this?",videoSrc:"/assets/flashcards/Easy-identificaction/number4.mp4",answerChoices:["Four (4)","Eight (8)","Six (6)","Ten (10)"],correctAnswer:"Four (4)"},{questionText:"What number is this?",videoSrc:"/assets/flashcards/Easy-identificaction/number8.mp4",answerChoices:["Six (6)","Nine (9)","Eight (8)","Three (3)"],correctAnswer:"Eight (8)"}],Numbers:[{questionText:"How many cows are there?",imageSrc:"/assets/cow.png",answerChoices:["Six (6)","Seven (7)","Eight (8)","Five (5)"],correctAnswer:"Seven (7)"},{questionText:"What number is missing?",videoSrc:"/assets/flashcards/Easy-Numbers/numbers-4-easy.mp4",answerChoices:["One (1)","Two (2)","Three (3)","Four (4)"],correctAnswer:"Four (4)"},{questionText:"What number is missing?",videoSrc:"/assets/flashcards/Easy-Numbers/numbers-1-easy.mp4",answerChoices:["Three (3)","Four (4)","Two (2)","One (1)"],correctAnswer:"One (1)"},{questionText:"What numbers are missing?",videoSrc:"/assets/flashcards/Easy-Numbers/number6&7-easy.mp4",answerChoices:["Six and Seven (6 & 7)","Six and Eight (6 & 8)","Five and Seven (5 & 7)","Five and Eight (5 & 8)"],correctAnswer:"Six and Seven (6 & 7)"},{questionText:"What number is missing?",videoSrc:"/assets/flashcards/Easy-Numbers/numbers-2-easy.mp4",answerChoices:["Two (2)","Five (5)","Three (3)","Six (6)"],correctAnswer:"Two (2)"}],Colors:[{questionText:"What is the Color of the Grass?",videoSrc:"/assets/flashcards/Colors-Easy/Green.mp4",answerChoices:["Red","Blue","Green","Yellow"],correctAnswer:"Green"},{questionText:"What is the Color of the Sky?",videoSrc:"/assets/flashcards/Colors-Easy/Blue.mp4",answerChoices:["Red","Blue","Green","Yellow"],correctAnswer:"Blue"},{questionText:"What is the Color of the Flower?",videoSrc:"/assets/flashcards/Colors-Easy/Red.mp4",answerChoices:["Red","Blue","Green","Yellow"],correctAnswer:"Red"},{questionText:"What is the Color of the Bird?",videoSrc:"/assets/flashcards/Colors-Easy/Yellow.mp4",answerChoices:["Red","Blue","Green","Yellow"],correctAnswer:"Yellow"},{questionText:"What is the Color of the Grass?",videoSrc:"/assets/flashcards/Colors-Easy/Black.mp4",answerChoices:["Red","Black","Green","Yellow"],correctAnswer:"Black"}],"Matching Type":[{questionText:"Simple Recognition - Match the pairs!",gameType:"matching",leftItems:[{id:5,content:" Car",type:"text"},{id:6,content:" Chair",type:"text"},{id:7,content:" Book",type:"text"},{id:9,content:" House",type:"text"}],rightItems:[{id:"b",content:"/assets/flashcards/MatchingType-Easy/Sitting.mp4",type:"video",matchId:6},{id:"e",content:"/assets/flashcards/MatchingType-Easy/Live.mp4",type:"video",matchId:9},{id:"f",content:"/assets/flashcards/MatchingType-Easy/Drive.mp4",type:"video",matchId:5},{id:"i",content:"/assets/flashcards/MatchingType-Easy/Reading.mp4",type:"video",matchId:7}]}],"Academic Puzzles":[{puzzleType:"logic",questionText:"Color puzzle",instruction:"Which one is RED?",options:["","",""],correctAnswer:"",hint:"Look for the red colored object!"},{puzzleType:"logic",questionText:"Circle puzzle",instruction:"Find the CIRCLE.",options:["","",""],correctAnswer:"",hint:"A circle is round with no corners!"},{puzzleType:"math",questionText:"Apple Counting Puzzle",instruction:"How many apples are there?",objects:["","",""],options:[2,3,4],correctAnswer:3,hint:"Count each apple: 1, 2, 3!"},{puzzleType:"logic",questionText:"Shape Matching",instruction:"Which one is a STAR?",options:["","",""],correctAnswer:"",hint:"Stars have points and shine in the sky!"},{puzzleType:"logic",questionText:"",instruction:"Which one says MEOW?",options:["","",""],correctAnswer:"",hint:"Cats say meow!"}],"Visual Memory Challenge":[{roundId:1,gameType:"memory",questionText:"Memorize these cards!",cards:[{id:1,image:"",name:"Dog"},{id:2,image:"",name:"Cat"},{id:3,image:"",name:"Frog"},{id:4,image:"",name:"Bear"}],memorizationTime:8,shuffleCount:4},{roundId:2,gameType:"memory",questionText:"Remember the shapes!",cards:[{id:1,image:"",name:"Star"},{id:2,image:"",name:"Heart"},{id:3,image:"",name:"Circle"},{id:4,image:"",name:"Triangle"}],memorizationTime:8,shuffleCount:4},{roundId:3,gameType:"memory",questionText:"Find the fruits!",cards:[{id:1,image:"",name:"Apple"},{id:2,image:"",name:"Banana"},{id:3,image:"",name:"Orange"},{id:4,image:"",name:"Grapes"}],memorizationTime:8,shuffleCount:4}]},Intermediate:{Identification:[{questionText:"What is this Animal?",videoSrc:"/assets/flashcards/Animals/Snake.mp4",answerChoices:["Lizard","Worm","Snake","Monkey"],correctAnswer:"Snake"},{questionText:"What animal is this?",videoSrc:"/assets/flashcards/Animals/Frog.mp4",answerChoices:["Grasshopper","Fish","Bird","Frog"],correctAnswer:"Frog"},{questionText:"What animal is this?",videoSrc:"/assets/flashcards/Animals/panda.mp4",answerChoices:["Panda","Monkey","Cat","Lion"],correctAnswer:"Panda"},{questionText:"What animal is this?",videoSrc:"/assets/flashcards/Animals/Racoon.mp4",answerChoices:["Dog","Squirrel","Cat","Racoon"],correctAnswer:"Racoon"},{questionText:"What animal is this?",videoSrc:"/assets/flashcards/Animals/Lion.mp4",answerChoices:["Tiger","Lion","Cat","Dog"],correctAnswer:"Lion"}],Numbers:[{questionText:"How many apples?",videoSrc:"/assets/flashcards/Numbers_Medium/7_Numbers.mp4",answerChoices:["Six (6)","Seven (7)","Eight (8)","Five (5)"],correctAnswer:"Seven (7)"},{questionText:"How many ducks?",videoSrc:"/assets/flashcards/Numbers_Medium/add_6.mp4",answerChoices:["Five (5)","Four (4)","Seven (7)","Six (6)"],correctAnswer:"Six (6)"},{questionText:"How many Ice Cream?",videoSrc:"/assets/flashcards/Numbers_Medium/5_Numbers.mp4",answerChoices:["Three (3)","Six (6)","Four (4)","Five (5)"],correctAnswer:"Five (5)"},{questionText:"How many apples?",videoSrc:"/assets/flashcards/Numbers_Medium/add_4.mp4",answerChoices:["Four (4)","Three (3)","Six (6)","Five (5)"],correctAnswer:"Four (4)"},{questionText:"How many balls?",videoSrc:"/assets/flashcards/Numbers_Medium/11_Numbers.mp4",answerChoices:["Thirteen (13)","Eleven (11)","Twelve (12)","Ten (10)"],correctAnswer:"Eleven (11)"}],Colors:[{questionText:"What is the Color of the Orange?",videoSrc:"/assets/flashcards/Colors-Medium/Orange.mp4",answerChoices:["Brown","Pink","Orange","Purple"],correctAnswer:"Orange"},{questionText:"What is the Color of the Flower?",videoSrc:"/assets/flashcards/Colors-Medium/Purple.mp4",answerChoices:["Brown","Pink","Orange","Purple"],correctAnswer:"Purple"},{questionText:"What is the Color of the Flower?",videoSrc:"/assets/flashcards/Colors-Medium/Pink.mp4",answerChoices:["Brown","Pink","Orange","Purple"],correctAnswer:"Pink"},{questionText:"What is the Color of the Dog?",videoSrc:"/assets/flashcards/Colors-Medium/Brown.mp4",answerChoices:["Brown","Pink","Orange","Purple"],correctAnswer:"Brown"},{questionText:"What is the Color of the Wolf?",videoSrc:"/assets/flashcards/Colors-Medium/Gray.mp4",answerChoices:["Brown","Pink","Gray","Purple"],correctAnswer:"Gray"}],"Matching Type":[{questionText:"Categories & School Concepts - Match the pairs!",gameType:"matching",leftItems:[{id:2,content:"3 + 7 = ?",type:"text"},{id:3,content:" Clock",type:"text"},{id:4,content:" Sun",type:"text"},{id:7,content:" Bed",type:"text"},{id:8,content:" Pencil",type:"text"}],rightItems:[{id:"b",content:"/assets/flashcards/MatchingType-Medium/Time.mp4",type:"video",matchId:3},{id:"d",content:"/assets/flashcards/MatchingType-Medium/Writing.mp4",type:"video",matchId:8},{id:"e",content:"/assets/flashcards/MatchingType-Medium/Ten.mp4",type:"video",matchId:2},{id:"g",content:"/assets/flashcards/MatchingType-Medium/Sleeping.mp4",type:"video",matchId:7},{id:"i",content:"/assets/flashcards/MatchingType-Medium/Sun.mp4",type:"video",matchId:4}]}],"Academic Puzzles":[{puzzleType:"logic",questionText:"Animal Sounds",instruction:"Which animal says MOO?",options:["","",""],correctAnswer:"",hint:"Cows say moo - they live on farms!"},{puzzleType:"math",questionText:"Simple Math Puzzle",instruction:"",equation:{first:2,operator1:"+",second:1},options:[2,3,4],correctAnswer:3,hint:"Add 2 and 1 together!"},{puzzleType:"sequence",questionText:"Sequence Puzzle",instruction:"What comes next?",sequence:["","","","?"],options:["","",""],correctAnswer:"",hint:"Look at the pattern - it repeats!"},{puzzleType:"sorting",questionText:"Sorting Puzzle",instruction:"Choose the fruit into the FRUIT basket.",items:[{id:1,content:" Apple",category:"fruit"},{id:2,content:" Car",category:"vehicle"},{id:3,content:" Banana",category:"fruit"}],correctItems:[1,3],hint:"Fruits are things you can eat!"},{puzzleType:"logic",questionText:"Pattern Puzzle",instruction:"What come's next?",options:["","","",""],correctAnswer:"",hint:""}],"Visual Memory Challenge":[{roundId:1,gameType:"memory",questionText:"Track the vehicles!",cards:[{id:1,image:"",name:"Car"},{id:2,image:"",name:"Bus"},{id:3,image:"",name:"Bicycle"},{id:4,image:"",name:"Airplane"}],memorizationTime:8,shuffleCount:5},{roundId:2,gameType:"memory",questionText:"Remember the colors!",cards:[{id:1,image:"",name:"Red Ball"},{id:2,image:"",name:"Blue Ball"},{id:3,image:"",name:"Green Ball"},{id:4,image:"",name:"Yellow Ball"}],memorizationTime:8,shuffleCount:5},{roundId:3,gameType:"memory",questionText:"Track the numbers!",cards:[{id:1,image:"1",name:"One"},{id:2,image:"2",name:"Two"},{id:3,image:"3",name:"Three"},{id:4,image:"4",name:"Four"}],memorizationTime:8,shuffleCount:5}]},Proficient:{"Matching Type":[{questionText:"Associations & Cause-Effect - Match the pairs!",gameType:"matching",leftItems:[{id:9,content:" Night",type:"text"},{id:3,content:" Children",type:"text"},{id:4,content:" Chef",type:"text"},{id:5,content:" Plant",type:"text"},{id:6,content:" Doctor",type:"text"},{id:7,content:" Teacher",type:"text"}],rightItems:[{id:"b",content:"/assets/flashcards/MatchingType-Hard/Teacher.mp4",type:"video",matchId:7},{id:"d",content:"/assets/flashcards/MatchingType-Hard/Tree.mp4",type:"video",matchId:5},{id:"e",content:"/assets/flashcards/MatchingType-Hard/Play.mp4",type:"video",matchId:3},{id:"g",content:"/assets/flashcards/MatchingType-Hard/Doctor.mp4",type:"video",matchId:6},{id:"h",content:"/assets/flashcards/MatchingType-Hard/Cook.mp4",type:"video",matchId:4},{id:"j",content:"/assets/flashcards/MatchingType-Hard/Night.mp4",type:"video",matchId:9}]}],Numbers:[{questionText:"How many Apples?",videoSrc:"/assets/flashcards/Numbers_Hard/3_Numbers.mp4",answerChoices:["4","5","3","2"],correctAnswer:"3"},{questionText:"What is 8 x 4?",videoSrc:"/assets/flashcards/Numbers_Hard/32_multiplication.mp4",answerChoices:["32","34","33","31"],correctAnswer:"32"},{questionText:"How many ducks ?",videoSrc:"/assets/flashcards/Numbers_Hard/1_Numbers.mp4",answerChoices:["3","1","2","4"],correctAnswer:"1"},{questionText:"What is 3 x 9?",videoSrc:"/assets/flashcards/Numbers_Hard/27_multiplication.mp4",answerChoices:["28","30","27","29"],correctAnswer:"27"},{questionText:"What is 5 x 7?",videoSrc:"/assets/flashcards/Numbers_Hard/35_multiplication.mp4",answerChoices:["35","36","34","37 "],correctAnswer:"35"}],Identification:[{questionText:"What is the national Animal of the Philippines??",videoSrc:"/assets/flashcards/Identification-Hard/Carabao.mp4",answerChoices:["Carabao","Cow","Horse","Goat"],correctAnswer:"Carabao"},{questionText:"What is the national Fruit of the Philippines?",videoSrc:"/assets/flashcards/Identification-Hard/Mango.mp4",answerChoices:["Banana","Watermelon","Durian","Mango"],correctAnswer:"Mango"},{questionText:"Who is the national hero of the Philippines?",videoSrc:"/assets/flashcards/Identification-Hard/Joserizal.mp4",answerChoices:["Andres Bonifacio","Jose Rizal","Emilio Aguinaldo","Apolinario Mabini"],correctAnswer:"Jose Rizal"},{questionText:"What is the national sport of the Philippines?",videoSrc:"/assets/flashcards/Identification-Hard/Arnis.mp4",answerChoices:["Basketball","Arnis","Volleyball","Soccer"],correctAnswer:"Arnis"},{questionText:"What animal is the national flower of the Philippines?",videoSrc:"/assets/flashcards/Identification-Hard/Sampaguita.mp4",answerChoices:["Rose","Orchid","Sunflower","Sampaguita"],correctAnswer:"Sampaguita"}],"Academic Puzzles":[{puzzleType:"math",questionText:"Advanced Math Puzzle",instruction:"",equation:{first:5,operator1:"-",second:2},options:[2,3,4],correctAnswer:3,hint:"Take away 2 from 5!"},{puzzleType:"logic",questionText:"Color Mixing Puzzle",instruction:"Red + Yellow = ?",options:["Orange","Green","Purple"],correctAnswer:"Orange",hint:"When you mix red and yellow, you get orange!"},{puzzleType:"logic",questionText:"Word Association Puzzle",instruction:"Which one belongs with 'FISH'?",options:[" Water"," Dog"," Apple"],correctAnswer:" Water",hint:"Where do fish live?"},{puzzleType:"sequence",questionText:"Pattern Puzzle",instruction:"Complete the pattern:",sequence:["","","","","...?"],options:["","",""],correctAnswer:"",hint:"Look at the alternating pattern!"},{puzzleType:"logic",questionText:"Real-life Puzzle",instruction:"The traffic light is Red. What should you do?",options:["Go","Stop","Jump"],correctAnswer:"Stop",hint:"Red means stop for safety!"}],"Visual Memory Challenge":[{roundId:1,gameType:"memory",questionText:"Advanced Memory Test!",cards:[{id:1,image:"",name:"Books"},{id:2,image:"",name:"Pencil"},{id:3,image:"",name:"Backpack"},{id:4,image:"",name:"Ruler"}],memorizationTime:8,shuffleCount:6},{roundId:2,gameType:"memory",questionText:"Sports Memory Challenge!",cards:[{id:1,image:"",name:"Soccer Ball"},{id:2,image:"",name:"Basketball"},{id:3,image:"",name:"Tennis"},{id:4,image:"",name:"Volleyball"}],memorizationTime:8,shuffleCount:6},{roundId:3,gameType:"memory",questionText:"Master Level Memory!",cards:[{id:1,image:"",name:"Star"},{id:2,image:"",name:"Moon"},{id:3,image:"",name:"Sun"},{id:4,image:"",name:"Lightning"}],memorizationTime:8,shuffleCount:6}]}},"Social / Daily Life Skill":{"Cashier Game":[{questionText:"I want a burger and fries, please!",orderItems:["Burger","Fries"],menuOptions:[{name:"Burger",image:"",price:"$3.99"},{name:"Fries",image:"",price:"$2.49"},{name:"Pizza",image:"",price:"$4.99"},{name:"Hot Dog",image:"",price:"$2.99"},{name:"Drink",image:"",price:"$1.99"},{name:"Ice Cream",image:"",price:"$2.99"}],correctAnswer:["Burger","Fries"],gameType:"cashier"},{questionText:"Can I have a pizza slice and a drink?",orderItems:["Pizza","Drink"],menuOptions:[{name:"Burger",image:"",price:"$3.99"},{name:"Fries",image:"",price:"$2.49"},{name:"Pizza",image:"",price:"$4.99"},{name:"Drink",image:"",price:"$1.99"},{name:"Hot Dog",image:"",price:"$2.99"},{name:"Ice Cream",image:"",price:"$2.99"}],correctAnswer:["Pizza","Drink"],gameType:"cashier"},{questionText:"I'll take a hot dog, please!",orderItems:["Hot Dog"],menuOptions:[{name:"Burger",image:"",price:"$3.99"},{name:"Fries",image:"",price:"$2.49"},{name:"Pizza",image:"",price:"$4.99"},{name:"Hot Dog",image:"",price:"$2.99"},{name:"Drink",image:"",price:"$1.99"},{name:"Ice Cream",image:"",price:"$2.99"}],correctAnswer:["Hot Dog"],gameType:"cashier"},{questionText:"I want fries and ice cream, please!",orderItems:["Fries","Ice Cream"],menuOptions:[{name:"Burger",image:"",price:"$3.99"},{name:"Fries",image:"",price:"$2.49"},{name:"Ice Cream",image:"",price:"$2.99"},{name:"Pizza",image:"",price:"$4.99"},{name:"Hot Dog",image:"",price:"$2.99"},{name:"Drink",image:"",price:"$1.99"}],correctAnswer:["Fries","Ice Cream"],gameType:"cashier"},{questionText:"Can I get a burger, fries, and a drink?",orderItems:["Burger","Fries","Drink"],menuOptions:[{name:"Burger",image:"",price:"$3.99"},{name:"Fries",image:"",price:"$2.49"},{name:"Pizza",image:"",price:"$4.99"},{name:"Drink",image:"",price:"$1.99"},{name:"Hot Dog",image:"",price:"$2.99"},{name:"Ice Cream",image:"",price:"$2.99"}],correctAnswer:["Burger","Fries","Drink"],gameType:"cashier"}],"Shopping Skills":[{questionText:"You need to buy milk. Where should you go?",imageSrc:"/assets/flashcards/grocery_store.jpg",answerChoices:["Grocery Store","Library","Bank","Post Office"],correctAnswer:"Grocery Store"}],"Social Greetings":[{id:1,title:"Morning Greeting to Parents",situation:"",context:"morning",background:" Home Kitchen",character:"",characterType:"Parent",studentThought:"I should greet my parent nicely!",otherCharacterSpeech:"Good morning, sweetheart!",choices:[{text:"Good night!",emoji:"",correct:!1,feedback:"That's for bedtime! Try a morning greeting instead."},{text:"Good morning, Mom!",emoji:"",correct:!0,feedback:"Perfect! Starting the day with a nice greeting makes everyone happy!"},{text:"Goodbye!",emoji:"",correct:!1,feedback:"That's for when you're leaving. Try a greeting for when you wake up!"},{text:"See you later!",emoji:"",correct:!1,feedback:"That's for when you're going away. What would you say when you first see someone?"}]},{id:2,title:"Morning Greeting to Teacher",situation:"",context:"morning",background:" School Classroom",character:"",characterType:"Teacher",studentThought:"I should be polite to my teacher!",otherCharacterSpeech:"Hello! Welcome to class today!",choices:[{text:"Hi Mom!",emoji:"",correct:!1,feedback:"That's not your mom - it's your teacher! Try again."},{text:"Bye!",emoji:"",correct:!1,feedback:"That's for leaving, not arriving! What would you say when you first get to school?"},{text:"Good morning, Teacher!",emoji:"",correct:!0,feedback:"Excellent! Polite greetings show respect to your teacher!"},{text:"Good night!",emoji:"",correct:!1,feedback:"That's for bedtime! Try a morning greeting instead."}]},{id:3,title:"Greeting a Friend at Recess",situation:"",context:"afternoon",background:" School Playground",character:"",characterType:"Friend",studentThought:"That looks fun!",otherCharacterSpeech:"Hey! Want to play with me?",choices:[{text:"Hi, friend!",emoji:"",correct:!0,feedback:"Great! Friendly greetings help make strong friendships!"},{text:"Good morning!",emoji:"",correct:!1,feedback:"It's recess time, not morning! Try a more casual greeting."},{text:"Goodbye!",emoji:"",correct:!1,feedback:"That's for leaving, but you just arrived! Try saying hello instead."},{text:"Good night!",emoji:"",correct:!1,feedback:"That's for bedtime! What would you say to a friend during playtime?"}]},{id:4,title:"Saying Goodbye After School",situation:"",context:"afternoon",background:" School Classroom",character:"",characterType:"Teacher",studentThought:"I should say goodbye nicely!",otherCharacterSpeech:"See you tomorrow! ",choices:[{text:"Goodbye Teacher! See you tomorrow!",emoji:"",correct:!0,feedback:"Wonderful! Saying goodbye nicely ends the day on a positive note!"},{text:"Good morning!",emoji:"",correct:!1,feedback:"The day is ending, not starting! Try a goodbye greeting."},{text:"Hi!",emoji:"",correct:!1,feedback:"That's for when you arrive! What do you say when you're leaving?"},{text:"Thank you for the breakfast!",emoji:"",correct:!1,feedback:"That's for your parent at home! What would you say to your teacher when leaving?"}]},{id:5,title:"Meeting a New Friend",situation:"",context:"afternoon",background:" School Hallway",character:"",characterType:"New Student",studentThought:"I should be friendly!",otherCharacterSpeech:"Hi! I'm new here.",choices:[{text:"Hello! Welcome to our school!",emoji:"",correct:!0,feedback:"Wonderful! Making new friends starts with a warm greeting!"},{text:"Goodbye!",emoji:"",correct:!1,feedback:"That's for leaving! Try a greeting to make them feel welcome."},{text:"Good night!",emoji:"",correct:!1,feedback:"That's for bedtime! What would you say to welcome someone?"},{text:"See you tomorrow!",emoji:"",correct:!1,feedback:"That's for later! Try greeting them first."}]}],"Hygiene Hero":[{scenario:"dirty_hands",questionText:"Oh no! Your hands are dirty after playing!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/DirtyHands.mp4",isCharacterVideo:!0,answerChoices:[{text:"Brush my teeth",video:"/assets/flashcards/HygieneHero/BrushMyTeeth.mp4"},{text:"Take a bath",video:"/assets/flashcards/HygieneHero/TakeABath.mp4"},{text:"Wash my hands",video:"/assets/flashcards/HygieneHero/WashingHands.mp4"}],correctAnswer:"Wash my hands",gameType:"hygiene",successAnimation:"",successMessage:"Great job! Clean hands are healthy hands!"},{scenario:"messy_hair",questionText:" Your hair is messy!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/MessyHair.mp4",isCharacterVideo:!0,answerChoices:[{text:"Get a haircut",video:"/assets/flashcards/HygieneHero/GetAHaircut.mp4"},{text:"Wash my hands",video:"/assets/flashcards/HygieneHero/WashingHands.mp4"},{text:"Take a bath",video:"/assets/flashcards/HygieneHero/TakeABath.mp4"}],correctAnswer:"Get a haircut",gameType:"hygiene",successAnimation:"",successMessage:"Perfect! You look great now!"},{scenario:"runny_nose",questionText:" Achoo! Your nose is runnings!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/RunnyNose.mp4",isCharacterVideo:!0,answerChoices:[{text:"Wash my hands",video:"/assets/flashcards/HygieneHero/WashingHands.mp4"},{text:"Wipe my nose",video:"/assets/flashcards/HygieneHero/WipeMyNose.mp4"},{text:"Take a bath",video:"/assets/flashcards/HygieneHero/TakeABath.mp4"}],correctAnswer:"Wipe my nose",gameType:"hygiene",successAnimation:"",successMessage:"Good choice! Keep those germs away!"},{scenario:"dirty_teeth",questionText:" Time to take care of your teeth!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/DirtyTeeth.mp4",isCharacterVideo:!0,answerChoices:[{text:"Take a bath",video:"/assets/flashcards/HygieneHero/TakeABath.mp4"},{text:"Brush my teeth",video:"/assets/flashcards/HygieneHero/BrushMyTeeth.mp4"},{text:"Wipe my nose",video:"/assets/flashcards/HygieneHero/WipeMyNose.mp4"}],correctAnswer:"Brush my teeth",gameType:"hygiene",successAnimation:"",successMessage:"Fantastic! Healthy teeth make you smile!"},{scenario:"dirty_ears",questionText:"Your ears are dirty!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/DirtyEars.jpg",isCharacterVideo:!1,answerChoices:[{text:"Wash my hands",video:"/assets/flashcards/HygieneHero/WashingHands.mp4"},{text:"Wipe my nose",video:"/assets/flashcards/HygieneHero/WipeMyNose.mp4"},{text:"Clean my ears",video:"/assets/flashcards/HygieneHero/CleanMyEars.mp4"}],correctAnswer:"Clean my ears",gameType:"hygiene",successAnimation:"",successMessage:"Excellent! Now you can hear everything clearly!"},{scenario:"sweaty_body",questionText:"After playing, you're all sweaty!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/SweatyBody.mp4",isCharacterVideo:!0,answerChoices:[{text:"Wash my hands",video:"/assets/flashcards/HygieneHero/WashingHands.mp4"},{text:"Take a bath",video:"/assets/flashcards/HygieneHero/TakeABath.mp4"},{text:"Brush my teeth",video:"/assets/flashcards/HygieneHero/BrushMyTeeth.mp4"}],correctAnswer:"Take a bath",gameType:"hygiene",successAnimation:"",successMessage:"Amazing! You're fresh and clean now!"},{scenario:"after_sneezing",questionText:"Achoo!  You just sneezed!",scenarioImage:"",backgroundImage:"",characterEmoji:"/assets/flashcards/HygieneHero/Sneezing.mp4",isCharacterVideo:!0,answerChoices:[{text:"Use tissue",video:"/assets/flashcards/HygieneHero/UseTissue.mp4"},{text:"Wash my hands",video:"/assets/flashcards/HygieneHero/WashingHands.mp4"},{text:"Take a bath",video:"/assets/flashcards/HygieneHero/TakeABath.mp4"}],correctAnswer:"Use tissue",gameType:"hygiene",successAnimation:"",successMessage:"Smart! Covering sneezes keeps everyone healthy!"}],"Safe Street Crossing":[{scenario:"green_walk_signal",questionText:" Look! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"/assets/GoSign.png",isTrafficLightImage:!0,lightStatus:"walk",safetyLevel:"safe",answerChoices:["CROSS","WAIT"],correctAnswer:"CROSS",gameType:"street",successAnimation:"",successMessage:"Great! Green means GO!",feedbackMessage:"Perfect choice! The walk signal is green!"},{scenario:"red_traffic_light",questionText:" Stop and look! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"",lightStatus:"stop",safetyLevel:"unsafe",answerChoices:["CROSS","WAIT"],correctAnswer:"WAIT",gameType:"street",successAnimation:"",successMessage:"Smart waiting! Red means STOP!",feedbackMessage:"Excellent! Always wait for red lights!"},{scenario:"approaching_car",questionText:" A car is coming! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"",lightStatus:"caution",safetyLevel:"unsafe",answerChoices:["CROSS","WAIT"],correctAnswer:"WAIT",gameType:"street",successAnimation:"",successMessage:"Very safe choice! Let cars pass first!",feedbackMessage:"Great thinking! Always let cars pass safely!"},{scenario:"clear_street",questionText:" The street is empty and clear! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"/assets/GoSign.png",isTrafficLightImage:!0,lightStatus:"clear",safetyLevel:"safe",answerChoices:["CROSS","WAIT"],correctAnswer:"CROSS",gameType:"street",successAnimation:"",successMessage:"Perfect! Safe to cross now!",feedbackMessage:"Wonderful! You checked and it's safe!"},{scenario:"yellow_light_warning",questionText:" Yellow light means be careful! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"",lightStatus:"caution",safetyLevel:"unsafe",answerChoices:["CROSS","WAIT"],correctAnswer:"WAIT",gameType:"street",successAnimation:"",successMessage:"Good choice! Yellow means be careful!",feedbackMessage:"Smart! Yellow means slow down and wait!"},{scenario:"busy_intersection",questionText:" Lots of cars and people! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"",lightStatus:"busy",safetyLevel:"unsafe",answerChoices:["CROSS","WAIT"],correctAnswer:"WAIT",gameType:"street",successAnimation:"",successMessage:"Wise decision! Wait for a safe moment!",feedbackMessage:"Excellent patience! Busy times need extra care!"},{scenario:"crosswalk_signal",questionText:" The crosswalk shows a walking person! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"/assets/GoSign.png",isTrafficLightImage:!0,lightStatus:"walk",safetyLevel:"safe",answerChoices:["CROSS","WAIT"],correctAnswer:"CROSS",gameType:"street",successAnimation:"",successMessage:"Perfect timing! Cross safely now!",feedbackMessage:"Great job reading the crosswalk signal!"},{scenario:"emergency_vehicle",questionText:" An ambulance is coming with sirens! What should you do?",scenarioImage:"",backgroundImage:"",characterEmoji:"",trafficLight:"/assets/GoSign.png",isTrafficLightImage:!0,lightStatus:"emergency",safetyLevel:"unsafe",answerChoices:["CROSS","WAIT"],correctAnswer:"WAIT",gameType:"street",successAnimation:"",successMessage:"Hero move! Let emergency vehicles go first!",feedbackMessage:"Amazing! Emergency vehicles always have the right of way!"}],"Money Value Game":[{gameId:1,gameName:"Money Value Adventure",description:"Learn the value of Philippine Peso currency through interactive shopping!",totalRounds:3,gameType:"money",rounds:[{roundId:1,budget:150,items:[{id:1,name:"Juice",image:"",price:10,category:"food",affordable:!0},{id:2,name:"Car",image:"",price:45e4,category:"vehicle",affordable:!1},{id:3,name:"Phone",image:"",price:25e3,category:"electronics",affordable:!1},{id:4,name:"Pancake",image:"/assets/pancakes.jpg",price:15,category:"food",affordable:!0,isImagePath:!0}]},{roundId:2,budget:500,items:[{id:5,name:"Book",image:"",price:450,category:"school",affordable:!0},{id:6,name:"House",image:"",price:25e5,category:"property",affordable:!1},{id:7,name:"Bicycle",image:"",price:3500,category:"vehicle",affordable:!1},{id:8,name:"Bread",image:"",price:20,category:"food",affordable:!0}]},{roundId:3,budget:100,items:[{id:9,name:"Ipad",image:"",price:2800,category:"entertainment",affordable:!1},{id:10,name:"Ice Cream",image:"",price:30,category:"dessert",affordable:!0},{id:11,name:"Pancake",image:"/assets/pancakes.jpg",price:15,category:"food",affordable:!1,isImagePath:!0},{id:12,name:"Pencil",image:"",price:10,category:"education",affordable:!0}]}],badges:{completion:{id:"money_master",name:"Money Master",description:"Completed all 3 rounds of Money Value Adventure!",icon:"",points:100}}}],"Household Chores Helper":[{choreId:"washing_dishes",choreName:"Washing Dishes",choreIcon:"",description:"Clean the dishes!",steps:[{stepId:1,instruction:"What do you do first?",emoji:"",choices:["Get the sponge","Turn on TV","Play games"],correctChoice:"Get the sponge",feedback:"Great! Now we're ready to clean!"},{stepId:2,instruction:"What do you need?",emoji:"",choices:["Water and soap","Juice","Toys"],correctChoice:"Water and soap",feedback:"Perfect! Water and soap clean dishes!"},{stepId:3,instruction:"How do you clean?",emoji:"",choices:["Scrub the dishes","Throw them","Hide them"],correctChoice:"Scrub the dishes",feedback:"Excellent! The dishes are clean now!"}],gameType:"household_chores",totalSteps:3,successMessage:"Great job! You can wash dishes!",badge:" Dish Washing Star!"},{choreId:"making_bed",choreName:"Making the Bed",choreIcon:"",description:"Make your bed neat!",steps:[{stepId:1,instruction:"What do you do first?",emoji:"",choices:["Pull up the blanket","Jump on bed","Leave it messy"],correctChoice:"Pull up the blanket",feedback:"Good! The bed looks neater!"},{stepId:2,instruction:"What's next after pulling up the blanket?",emoji:"",choices:["Put the pillow on top","Throw pillow away","Sleep now"],correctChoice:"Put the pillow on top",feedback:"Perfect! Your bed looks nice!"},{stepId:3,instruction:"Last step?",emoji:"",choices:["Make it smooth","Make it messy","Do nothing"],correctChoice:"Make it smooth",feedback:"Amazing! Your bed is perfect!"}],gameType:"household_chores",totalSteps:3,successMessage:"Wonderful! You make your bed well!",badge:" Bed Making Pro!"},{choreId:"wiping_table",choreName:"Wiping the Table",choreIcon:"",description:"Clean the table!",steps:[{stepId:1,instruction:"What do you need?",emoji:"",choices:["A cloth","A toy","A book"],correctChoice:"A cloth",feedback:"Great! You picked the right tool!"},{stepId:2,instruction:"What helps clean better?",emoji:"",choices:["Wet the cloth","Keep it dry","Throw it"],correctChoice:"Wet the cloth",feedback:"Perfect! Wet cloth cleans better!"},{stepId:3,instruction:"How do you clean?",emoji:"",choices:["Wipe the dirts","Ignore the mess","Make it dirty"],correctChoice:"Wipe the dirts",feedback:"Excellent! The table is clean!"}],gameType:"household_chores",totalSteps:3,successMessage:"Awesome! You clean tables well!",badge:" Table Cleaning Expert!"},{choreId:"watering_plants",choreName:"Watering the Plants",choreIcon:"",description:"Give plants water!",steps:[{stepId:1,instruction:"What do you need?",emoji:"",choices:["A watering can","A ball","A phone"],correctChoice:"A watering can",feedback:"Great choice! Plants need water!"},{stepId:2,instruction:"Where do you pour?",emoji:"",choices:["On the soil","On the floor","On yourself"],correctChoice:"On the soil",feedback:"Perfect! Plants drink from soil!"},{stepId:3,instruction:"How much water?",emoji:"",choices:["Just enough","Too much","None"],correctChoice:"Just enough",feedback:"Excellent! Not too much, not too little!"}],gameType:"household_chores",totalSteps:3,successMessage:"Amazing! You take care of plants!",badge:" Plant Care Champion!"},{choreId:"sweeping_floor",choreName:"Sweeping the Floor",choreIcon:"",description:"Clean the floor!",steps:[{stepId:1,instruction:"What do you use?",emoji:"",choices:["A broom","A pillow","A toy"],correctChoice:"A broom",feedback:"Good! A broom cleans floors!"},{stepId:2,instruction:"What do you do?",emoji:"",choices:["Sweep the dirt","Spread the dirt","Ignore it"],correctChoice:"Sweep the dirt",feedback:"Nice! You're sweeping well!"},{stepId:3,instruction:"Where does dirt go?",emoji:"",choices:["In the trash","On the bed","Leave it"],correctChoice:"In the trash",feedback:"Perfect! The floor is clean!"}],gameType:"household_chores",totalSteps:3,successMessage:"Fantastic! You sweep very well!",badge:" Sweeping Star!"}]}},Ae=zt[i]?.[s]?.[n]||zt[i]?.[n]||[],Qt=Ae.length,ru=j=>{const D=[...j];for(let U=D.length-1;U>0;U--){const Q=Math.floor(Math.random()*(U+1));[D[U],D[Q]]=[D[Q],D[U]]}return D},ns=Ae[x],Ce=ns?.gameType==="matching"&&ns.rightItems&&Mi?{...ns,rightItems:Mi}:ns;m.useEffect(()=>{ns?.gameType==="matching"&&ns.rightItems?tc(ru(ns.rightItems)):tc(null),bl([]),yl(!1),wl([]),jl([]),An(!1)},[x,i,s,n]),m.useEffect(()=>{if(Ce?.gameType==="matching"&&Ce?.leftItems){const D=Ce.leftItems.filter(U=>U!=null).length;_t.length>=D&&!sr?An(!0):_t.length<D&&An(!1)}},[_t,Ce,sr]);const ls=Ce?.gameType==="cashier",Lt=Ce?.gameType==="hygiene",Ol=Ce?.gameType==="matching",$r=Ce?.gameType==="puzzle"||n==="Academic Puzzles",sa=n==="Safe Street Crossing",is=n==="Social Greetings",os=n==="Money Value Game",Ds=n==="Household Chores Helper",Ir=Ce?.gameType==="memory"||n==="Visual Memory Challenge",aa=()=>{const j=Ce?.shuffleCount||3;let D=0;const U=()=>{if(D>=j){Ft(!1),setTimeout(()=>{console.log(" Shuffle complete, entering question phase..."),Sr("question")},500);return}const Q=Math.floor(Math.random()*4);let me=Math.floor(Math.random()*4);for(;me===Q;)me=Math.floor(Math.random()*4);console.log(` Shuffling: Position ${Q}  Position ${me}`),Gt(ye=>{const je=[...ye];return[je[Q],je[me]]=[je[me],je[Q]],console.log("New positions:",je),je}),D++,setTimeout(U,1500)};U()},na=j=>{if(Tt!=="question"||!nt)return;ra(j),As(Q=>Q+1);const D=qa[j],U=es[D];setTimeout(()=>{U.id===nt.id?(fc(Q=>Q+1),hc(Q=>Q+1),R(Q=>Q+1),rs("correct"),Ts(` Correct! You found the ${nt.name}!`),M(!0),setTimeout(()=>{M(!1),ra(null),Wi()},2500)):(ta(Q=>Q+1),rs("wrong"),Ts(` Oops! That was the ${U.name}, not the ${nt.name}. Try again!`),B(!0),setTimeout(()=>{B(!1),ra(null),Wi()},2500))},700)},Wi=()=>{Fi<3?(Yi(j=>j+1),p(j=>j+1),Sr("memorize"),_r(!0),Oe(12),Gt([0,1,2,3]),Cr(null),S(!1),y(null),ra(null)):pc()},pc=()=>{Sr("complete"),X(!0)},Fa=j=>{if(w)return;const D=typeof j=="string"?j:j?.text||"";as(D),y(D),S(!0),D===Ce.correctAnswer?(gr(U=>U+1),R(U=>U+1),gi(!0),nl(Ce.successAnimation),M(!0),setTimeout(()=>{gi(!1),M(!1)},2e3)):(B(!0),setTimeout(()=>{B(!1)},1500))},$n=()=>{if(Lt&&!_d){Go(!0),Wr(1),gr(0),Ot([]),Pt(0);const D=[...zt[i]?.["Hygiene Hero"]||[]].sort(()=>Math.random()-.5);Ed(D);const U=D[0];if(U){xn(U),Ot([U.scenario]);const Q=Ae.findIndex(me=>me.scenario===U.scenario);Q!==-1&&p(Q)}}},In=j=>{if(console.log(" Street answer clicked:",j),console.log("State check - isAnswered:",w,"showStreetFeedback:",xr),w||xr){console.log(" Answer blocked - already answered or showing feedback");return}as(j==="CROSS"?"Cross the street":"Wait for safe signal"),console.log(" Processing answer:",j),y(j),S(!0);const D=yt||et;if(console.log(" Current scenario:",D),!D){console.error(" No current scenario available!"),console.log("streetScenario:",yt,"currentScenario:",et);return}const U=j===D.correctAnswer;console.log(" Answer check - Selected:",j,"Expected:",D.correctAnswer,"Correct:",U),U?(Mt(Q=>Q+1),R(Q=>Q+1),il("safe"),_a(D.feedbackMessage||D.successMessage),j==="CROSS"&&(bs(!0),setTimeout(()=>bs(!1),2e3)),M(!0),setTimeout(()=>{if(M(!1),yn(!1),bs(!1),xi<5){ll(ye=>ye+1),y(null),S(!1);const Q=vi+1;Ca(Q);const me=pi[Q];me&&(console.log("Next scenario:",me),Hs(me),xn(me))}else console.log("Game complete!"),X(!0)},3e3)):(il("unsafe"),_a(D.feedbackMessage||"Not safe! Always check before crossing."),B(!0),setTimeout(()=>{if(B(!1),yn(!1),xi<5){ll(ye=>ye+1),y(null),S(!1);const Q=vi+1;Ca(Q);const me=pi[Q];me&&(console.log("Next scenario after wrong answer:",me),Hs(me),xn(me))}else console.log("Game complete after wrong answer!"),X(!0)},3e3)),yn(!0)},Hn=()=>{console.log(" Initializing Safe Street Crossing game"),console.log("Activity:",n,"isStreetGameActive:",bn),vn(!0),ll(1),Mt(0),Ot([]),y(null),S(!1),yn(!1),bs(!1),_a(""),il(""),Ca(0);const j=zt[i]?.["Safe Street Crossing"]||[];console.log("Total street scenarios available:",j.length);const U=[...j].sort(()=>Math.random()-.5).slice(0,5);bi(U),console.log("Shuffled and selected 5 scenarios");const Q=U[0];console.log(" First scenario loaded:",Q),Q?(Hs(Q),xn(Q),console.log(" Street game initialized successfully")):console.error(" Failed to load first scenario")},Ya=()=>{Mt(0),ll(1),Hs(null),vn(!1),bs(!1),yn(!1),_a(""),il(""),bi([]),Ca(0)},bc=j=>{Wt||(as(j.text),Nn(j),Kr(!0),j.correct?(yi(D=>D+20),R(D=>D+1),Aa("correct"),Fs(j.feedback),Vo(!0),vs(!0),M(!0),setTimeout(()=>{if(Vo(!1),vs(!1),M(!1),wi<5){Or(Q=>Q+1),Kr(!1),Nn(null);const D=Sn+1;ka(D);const U=Ni[D];kt(U),ht(U.otherCharacterSpeech),ol(!0)}else X(!0)},3e3)):(Aa("incorrect"),Fs(j.feedback),vs(!0),B(!0),setTimeout(()=>{if(vs(!1),B(!1),wi<5){Or(Q=>Q+1),Kr(!1),Nn(null);const D=Sn+1;ka(D);const U=Ni[D];kt(U),ht(U.otherCharacterSpeech),ol(!0)}else X(!0)},2500)))},la=()=>{if(is&&!Ea){ji(!0),Or(1),yi(0),Ot([]),Kr(!1),Nn(null),ka(0);const U=[...zt[i]?.[s]?.["Social Greetings"]||zt[i]?.["Social Greetings"]||[]].sort(()=>Math.random()-.5).slice(0,5);Rd(U);const Q=U[0];kt(Q),Q&&(ht(Q.otherCharacterSpeech),ol(!0))}},Ki=j=>{if(!ls)return;as(j.name);const D=[...ne,j];se(D);const U=D.reduce((Q,me)=>{const ye=Ce.menuOptions.find(je=>je.name===me.name);return Q+parseFloat(ye.price.replace("$",""))},0);fe(U)},cs=j=>{const D=ne.filter((Q,me)=>me!==j);se(D);const U=D.reduce((Q,me)=>{const ye=Ce.menuOptions.find(je=>je.name===me.name);return Q+parseFloat(ye.price.replace("$",""))},0);fe(U)},Ml=()=>{if(w)return;S(!0),ae(3);const j=ne.map(Q=>Q.name).sort(),D=[...Ce.correctAnswer].sort();JSON.stringify(j)===JSON.stringify(D)?(F(Q=>Q+10),R(Q=>Q+1),Ee("customer"),$e("Thank you! You got my food right! Good job!"),Pe(!0),M(!0)):(Ee("customer"),$e("That's not what I asked for. Try again next time!"),Pe(!0),B(!0))},qn=()=>{se([]),fe(0),ae(1),Pe(!1),Ee("customer"),$e("")},ds=()=>{if(os&&!Kt){dl(!0),Si(1),It(0),Ta([]),fl(0),Da(!1),br(!1),js(0),Cn(0),Ws(0),Ks([]),yr(0);const j=Ae[0];if(j&&j.rounds){const D=j.rounds[0];cl(D.budget),_i(D.items)}}},Os=j=>{if(!Kt||Vs)return;const D=j.price<=Zr;Ws(U=>U+1),yr(U=>U+1),D?(Ta(U=>[...U,j]),fl(U=>U+j.price),It(U=>U+1),js(U=>U+1),R(U=>U+1),hl("correct"),ul(` Correct! You can afford the ${j.name} for ${j.price.toLocaleString()}`),_n(!0),M(!0),Mr(!0),it.current&&(it.current.currentTime=0,it.current.play()),setTimeout(()=>{_n(!1),M(!1),Mr(!1)},2e3)):(Cn(U=>U+1),hl("wrong"),ul(` Sorry! The ${j.name} costs ${j.price.toLocaleString()}, but you only have ${Zr.toLocaleString()}`),B(!0),Mr(!0),tt.current&&(tt.current.currentTime=0,tt.current.play()),setTimeout(()=>{B(!1),Mr(!1);const U={round:ys,attempts:Zs+1,correctPurchases:Ys.length,totalPossibleCorrect:ws.filter(Q=>Q.price<=Zr).length,completed:!0};Ks(Q=>[...Q,U]),ys<3?Va():zl()},2500))},Va=()=>{if(ys<3){const j={round:ys,attempts:Zs,correctPurchases:Ys.length,totalPossibleCorrect:ws.filter(Q=>Q.price<=Zr).length,completed:!0};Ks(Q=>[...Q,j]);const D=ys+1;Si(D),Ta([]),fl(0),Da(!1),yr(0);const U=Ae[0];if(U&&U.rounds){const Q=U.rounds[D-1];cl(Q.budget),_i(Q.items)}}else zl()},zl=()=>{const j={round:ys,attempts:Zs,correctPurchases:Ys.length,totalPossibleCorrect:ws.filter(me=>me.price<=Zr).length,completed:!0};Ks(me=>[...me,j]);const D=6,U=gl>0?Math.round(vr/gl*100):0,Q=Math.round(vr/D*100);R(vr),br(!0),Da(!0),lr.current&&(lr.current.currentTime=0,lr.current.play().catch(console.error)),setTimeout(()=>{l(vr,D,{correctAnswers:vr,wrongAnswers:Jo,totalAttempts:gl,accuracyPercentage:U,completionPercentage:Q,roundBreakdown:Jr,finalScore:vr,maxPossibleScore:D})},3e3)},Zi=()=>{dl(!1),Si(1),It(0),cl(0),_i([]),Ta([]),ul(""),Mr(!1),hl(""),_n(!1),fl(0),br(!1),Da(!1),js(0),Cn(0),Ws(0),Ks([]),yr(0)},Gn=()=>{Zi(),ds()};m.useEffect(()=>{ls&&be===1&&setTimeout(()=>{Ee("customer"),$e(Ce.questionText),Pe(!0)},1e3)},[x,ls]),m.useEffect(()=>{Lt&&$n()},[x,Lt]),m.useEffect(()=>{n==="Safe Street Crossing"&&!bn&&(console.log("Effect: Initializing Street Game"),Hn())},[n]),m.useEffect(()=>{is&&la()},[x,is]),m.useEffect(()=>{os&&ds()},[x,os]),m.useEffect(()=>{if(console.log(" Memory Game Effect Triggered",{isMemoryGame:Ir,currentQuestionIndex:x}),Ir&&Ce&&Ce.cards){console.log(" Setting cards:",Ce.cards),Tl(Ce.cards),Ct(!0),Sr("memorize"),_r(!0),Oe(12),Gt([0,1,2,3]),ra(null),Ft(!1);const j=Ce.cards[Math.floor(Math.random()*Ce.cards.length)];console.log(" Target card selected at start:",j),Cr(j);const D=setTimeout(()=>{console.log(" Starting memorization phase..."),Sr("memorize"),_r(!0),Oe(12);const U=setInterval(()=>{Oe(Q=>Q<=1?(clearInterval(U),console.log(" Timer finished, starting shuffle..."),Sr("shuffle"),_r(!1),Ft(!0),setTimeout(()=>{aa()},500),0):Q-1)},1e3)},500);return()=>clearTimeout(D)}},[x,Ir]),m.useEffect(()=>{$r&&Ji()},[x,$r]),m.useEffect(()=>{Ds&&yc()},[Ds]);const Wa=()=>{ae(2)},Ji=()=>{const j=zt[i]?.[s]?.["Academic Puzzles"]||[];if(j.length>0){const D=j[x%j.length];kl(D),Bd(D.puzzleType),Ln(0),Ha(!1),Ia([]),Lr([]),Nr(!1),kn(!0)}},Hr=(j,D=null)=>{console.log("handlePuzzleAnswer called with:",{answer:j,isCorrect:D,correctAnswer:pe.correctAnswer}),Ln(Q=>Q+1);let U=D;U===null&&(pe.puzzleType==="matching"||pe.puzzleType==="logic"||pe.puzzleType==="math"||pe.puzzleType==="sequence"||pe.puzzleType,U=j===pe.correctAnswer),console.log("Answer check result:",{answer:j,correctAnswer:pe.correctAnswer,correct:U}),U?(Ud(Q=>Q+1),R(Q=>Q+1),Jt(" Excellent! You solved the puzzle!"),Mn("correct"),$a(!0),Gi(!0),Nr(!0),M(!0),setTimeout(()=>M(!1),1500),it.current&&it.current.play(),setTimeout(()=>{Gi(!1),x<Ae.length-1?(p(x+1),y(null),S(!1),Ln(0),Ha(!1),Nr(!1),kl(null),Ia([]),Lr([]),zn([])):X(!0)},1500)):(Jt(" Not quite right. Try again!"),Mn("incorrect"),$a(!0),B(!0),setTimeout(()=>B(!1),1500),tt.current&&tt.current.play(),setTimeout(()=>{$a(!1),x<Ae.length-1?(p(x+1),y(null),S(!1),Ln(0),Ha(!1),Nr(!1),kl(null),Ia([]),Lr([]),zn([])):X(!0)},1500))},Ka=(j,D)=>{const U=[..._s],Q=U.findIndex(me=>me.id===j.id);Q>=0?U[Q]={...j,position:D}:U.push({...j,position:D}),Lr(U)},Ll=()=>{if(pe)switch(pe.puzzleType){case"sequence":if(pe.items.every(D=>_s.some(U=>U.id===D.id))){const D=pe.items.every(U=>{const Q=_s.find(me=>me.id===U.id);return Q&&Q.position===U.order-1});Hr(null,D)}break;case"spelling":if(st.length===pe.targetWord.length){const D=st.join("")===pe.targetWord;Hr(st.join(""),D)}break}},vc=(j,D,U)=>{Di({item:D,side:U}),vl({x:j.clientX,y:j.clientY})},Qi=(j,D,U)=>{if(Qr){if(Qr.side==="left"&&U==="right"&&!_t.find(me=>me.leftId===Qr.item.id||me.rightId===D.id)){const me={leftId:Qr.item.id,rightId:D.id,leftContent:Qr.item.content,rightContent:D.content,isCorrect:D.matchId===Qr.item.id};bl(ye=>[...ye,me])}Di(null),vl(null)}},Xi=async()=>{const j=_t.filter(me=>me.isCorrect),D=_t.filter(me=>!me.isCorrect);wl(j.map(me=>({leftId:me.leftId,rightId:me.rightId}))),jl(D.map(me=>({leftId:me.leftId,rightId:me.rightId}))),yl(!0);const U=Ce?.leftItems?.length||0,Q=j.length;Oa(Q),R(me=>me+Q),Q===U?(Ma(` PERFECT SCORE! All ${U} answers correct! Excellent work! `),Ti("correct")):Q>=Math.ceil(U*.7)?(Ma(` Great job! ${Q}/${U} correct. ${U-Q} to review.`),Ti("partial")):(Ma(` Keep trying! ${Q}/${U} correct. Review and try again!`),Ti("incorrect")),Qs(!0),await ia(Q,U),rc(5),setTimeout(()=>{c(-1)},5e3)},Xt=()=>{bl([]),wl([]),jl([]),yl(!1),An(!1),Qs(!1),Oa(0),Ma("")},ir=(j,D)=>{const U=document.getElementById(`left-item-${j}`),Q=document.getElementById(`right-item-${D}`);if(!U||!Q)return"";const me=U.getBoundingClientRect(),ye=Q.getBoundingClientRect(),je=document.getElementById("matching-container")?.getBoundingClientRect();if(!je)return"";const xt=me.right-je.left,or=me.top+me.height/2-je.top,oa=ye.left-je.left,Qe=ye.top+ye.height/2-je.top;return`M ${xt} ${or} L ${oa} ${Qe}`},qr=()=>{bl([]),wl([]),jl([]),Di(null),vl(null),yl(!1),An(!1),xl([]),Xo(null),Js(null),En([]),Ai(!1),Qs(!1),Ma(""),Ri([]),Oa(0)},eo=()=>{if(!Ae||Ae.length===0)return null;const j=Math.floor(Math.random()*Ae.length);return Ae[j]},yc=()=>{if(!Ae||Ae.length===0)return;const j=eo();if(!j)return;Nl(j.choreId),Ba(0),Bi([]),Ss([]),Sl([]),Xs([]),Cl([]),Ui(null),zi(0),wr(!1),Xr(!1),jr(""),Pa(""),Yd(`Let's learn how to ${j.choreName.toLowerCase()}! Watch carefully and follow the steps.`),lc(!0);const D=j.steps,U=[],Q=[];D.forEach(me=>{me.requiredTools&&U.push(...me.requiredTools),me.environmentItems&&Q.push(...me.environmentItems)}),$i([...new Set(U)]),Ii([...new Set(Q)]),setTimeout(()=>lc(!1),3e3)},Ms=j=>{if(w)return;as(j);const D=new Date;y(j),S(!0);const U=j===Ae[x].correctAnswer,Q=i==="Social / Daily Life Skill";U?(R(ye=>ye+1),M(!0),x===0&&(A(ye=>({...ye,firstQuestionCorrect:!0})),ie({name:"First Try Hero",icon:"",message:"Great start! Keep it up!"}),V(!0),setTimeout(()=>V(!1),2e3)),C+1===Ae.length&&x===Ae.length-1&&(ie({name:"Perfect Score Champion",icon:"",message:"Perfect! Amazing work!"}),V(!0),setTimeout(()=>V(!1),3e3)),setTimeout(()=>{M(!1),Q&&(x<Ae.length-1?(p(x+1),y(null),S(!1),qn(),Ya(),qr()):X(!0))},1500)):(B(!0),setTimeout(()=>{B(!1),Q&&(x<Ae.length-1?(p(x+1),y(null),S(!1),qn(),Ya(),qr()):X(!0))},1500));const me=(new Date-D)/1e3;A(ye=>({...ye,questionTimes:[...ye.questionTimes,me]}))},er=()=>{if(M(!1),B(!1),Pe(!1),Lt&&ps<5){Wr(U=>U+1),y(null),S(!1);const j=pn+1;Pt(j);const D=Cd[j];if(D){xn(D),Ot(Q=>[...Q,D.scenario]);const U=Ae.findIndex(Q=>Q.scenario===D.scenario);U!==-1&&p(U)}}else Lt&&ps>=5?X(!0):sa&&xi>=5||(x<Ae.length-1?(p(x+1),y(null),S(!1),qn(),Ya(),qr()):X(!0))},ot=(j,D)=>{const Q=(new Date-E.startTime)/1e3,me=E.questionTimes.length>0?E.questionTimes.reduce((je,xt)=>je+xt,0)/E.questionTimes.length:Q/D,ye={...E,category:i,difficulty:s,activity:n,totalTime:Q,averageTime:me,percentage:D>0?j/D*100:0};return b2(j,D,i,s,n,ye)},ia=async(j,D)=>{if(console.log(" Activity completion started:",{finalScore:j,totalQuestions:D,userId:d?.id,category:i,difficulty:s,activity:n}),d?.id)try{const U=Math.round(j/D*100),me=((je,xt,or)=>{const oa={"Numbers 1-10":1,"Numbers 11-20":1,"Basic Math":1,"Counting Adventure":1,Numbers:1,"Basic Shapes":2,"Shape Recognition":2,"Shape Detective":2,Shapes:2,"Basic Colors":4,"Advanced Colors":4,"Color Mixing":4,Colors:4,"Hygiene Hero":3,"Cashier Game":3,"Safe Street Crossing":3,"Tooth Brushing":3,"Grocery Helper":3,Identification:5,"Animal Recognition":5,"Object Naming":5,"Matching Type":6,Matching:6,"Match Finder":6,"Visual Memory Challenge":7,"Memory Game":7,"Academic Puzzles":8,Puzzles:8};if(oa[je])return oa[je];if(xt==="Academic"){if(je.toLowerCase().includes("number")||je.toLowerCase().includes("count"))return 1;if(je.toLowerCase().includes("shape"))return 2;if(je.toLowerCase().includes("color"))return 4;if(je.toLowerCase().includes("identification"))return 5;if(je.toLowerCase().includes("matching"))return 6;if(je.toLowerCase().includes("memory"))return 7;if(je.toLowerCase().includes("puzzle"))return 8}else if(xt==="Social / Daily Life Skill"||xt==="Social/Daily Life")return 3;return 1})(n,i,s);console.log(" Activity mapping details:",{activityName:n,category:i,difficulty:s,mappedActivityId:me}),console.log(" Calling handleActivityCompletion with:",{studentId:d.id,activityId:me,score:U,status:"completed"});const ye=await Ga(d.id,me,U,"completed");console.log(" Activity completion result:",ye),ye.errors&&ye.errors.length>0?console.error(" Activity completion errors:",ye.errors):console.log(" Activity completion recorded successfully!")}catch(U){console.error(" Failed to record activity completion:",U)}else console.warn(" No user ID found, cannot record activity completion");l(j,D)},us=async()=>{X(!1);let j=ot(C,Qt);if(n==="Visual Memory Challenge"||Ir){j.push({name:"Memory Master",description:"Completed the Visual Memory Challenge!",icon:"",rarity:"gold",category:"Academic"});const D=Ur>0?Math.round(ks/Ur*100):0;D===100?j.push({name:"Perfect Memory",description:"100% accuracy! Amazing memory skills!",icon:"",rarity:"legendary",category:"Academic"}):D>=80?j.push({name:"Memory Expert",description:"Excellent memory performance!",icon:"",rarity:"gold",category:"Academic"}):D>=60&&j.push({name:"Memory Pro",description:"Great memory tracking!",icon:"",rarity:"silver",category:"Academic"})}if(n==="Cashier Game"&&(_>=80?j.push({name:"Master Cashier",description:"Earned 80+ points as a cashier!",icon:"",rarity:"gold",category:"Social Skills"}):_>=60?j.push({name:"Senior Cashier",description:"Earned 60+ points as a cashier!",icon:"",rarity:"silver",category:"Social Skills"}):_>=40&&j.push({name:"Junior Cashier",description:"Earned 40+ points as a cashier!",icon:"",rarity:"bronze",category:"Social Skills"})),n==="Hygiene Hero"&&(j.push({name:"Hygiene Hero",description:"Completed the hygiene game and learned healthy habits!",icon:"",rarity:"gold",category:"Daily Life Skills"}),Fe>=5?j.push({name:"Perfect Hygiene Master",description:"Got all 5 hygiene scenarios correct!",icon:"",rarity:"legendary",category:"Daily Life Skills"}):Fe>=4?j.push({name:"Hygiene Expert",description:"Excellent hygiene knowledge!",icon:"",rarity:"gold",category:"Daily Life Skills"}):Fe>=3&&j.push({name:"Clean & Healthy",description:"Good hygiene habits!",icon:"",rarity:"silver",category:"Daily Life Skills"})),n==="Safe Street Crossing"&&(j.push({name:"Brave Crosser",description:"Completed the street safety game and learned safe crossing!",icon:"",rarity:"gold",category:"Daily Life Skills"}),$t>=5?j.push({name:"Safety Champion",description:"Perfect score! You know all the street safety rules!",icon:"",rarity:"legendary",category:"Daily Life Skills"}):$t>=4?j.push({name:"Street Safety Expert",description:"Excellent knowledge of crossing safely!",icon:"",rarity:"gold",category:"Daily Life Skills"}):$t>=3&&j.push({name:"Careful Walker",description:"Good job learning to cross safely!",icon:"",rarity:"silver",category:"Daily Life Skills"})),z(j),j.length>0&&v2(j),j.length>0)setTimeout(()=>{re(!0),ft.current&&(ft.current.currentTime=0,ft.current.play())},500);else{if(Ir||n==="Visual Memory Challenge"){const D=Ur>0?Math.round(ks/Ur*100):0;l(C,Qt,{correctAnswers:ks,wrongAnswers:ea,totalAttempts:Ur,accuracyPercentage:D,finalScore:ks,maxPossibleScore:3})}else l(C,Qt);ia(C,Qt)}};return Ae.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-600",children:["No flashcards available for ",i," - ",s," - ",n]}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Please select a different combination."})]}):t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"w-270 bg-white/90 backdrop-blur-xl rounded-3xl mx-auto shadow-2xl border border-white/20 p-6 text-center animate-fade-in-scale",children:[t.jsx("div",{className:"absolute top-0 left-0 w-3 h-32 bg-gradient-to-br from-blue-200/20 to-purple-200/20 rounded-full blur-2xl animate-float"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-gradient-to-bl from-pink-200/20 to-yellow-200/20 rounded-full blur-xl animate-float-delayed"}),t.jsx("button",{onClick:Pn,className:"absolute top-4 right-4 z-50 bg-white/80 hover:bg-white rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 border-2 border-purple-200/50",title:k?"Unmute Music":"Mute Music",children:t.jsx("span",{className:"text-2xl",children:k?"":""})}),t.jsxs("div",{className:"relative z-10 ",children:[t.jsx("div",{className:"-mt-20 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl px-6 py-1 border border-blue-200/30 inline-block",children:t.jsxs("div",{className:"text-base font-bold text-gray-700 flex items-center justify-center space-x-2",children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:Lt?"":Ds?"":""}),t.jsx("span",{children:Lt?`Round ${ps} of 5`:Ds&&La?`Learning: ${Ae.find(j=>j.choreId===La)?.choreName||"Chore"}`:`Question ${x+1} of ${Qt}`}),t.jsx("span",{className:"text-2xl animate-pulse-gentle",children:""})]})}),!ls&&!Lt&&!sa&&!is&&!os&&!Ol&&!$r&&!Ds&&!Ir&&t.jsx("h2",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 leading-relaxed",children:Ae[x].questionText}),t.jsxs("div",{className:"flex justify-center flex-wrap gap-4 mb-4",children:[Ae[x].imageSrc&&t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-4 border-2 border-blue-200/30 shadow-lg",children:t.jsx("img",{src:Ae[x].imageSrc,alt:Ae[x].questionText,className:"w-full max-w-lg object-contain rounded-xl"})}),Ae[x].videoSrc&&t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-4 border-2 border-purple-200/30 shadow-lg",children:t.jsx(Uh,{ref:Bn,src:Ae[x].videoSrc,className:"w-full max-w-xl rounded-xl shadow-md",controls:!0,autoPlay:!0,loop:!0,muted:!0,style:{maxHeight:"70vh"}})})]}),!ls&&!Lt&&!sa&&!is&&!os&&!Ol&&!$r&&!Ds&&!Ir?t.jsxs("div",{className:"relative",children:[O&&t.jsxs("div",{className:"fixed inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain"})]}),T&&t.jsxs("div",{className:"fixed inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-6",children:Ae[x].answerChoices.map((j,D)=>t.jsx("button",{className:`
                    w-[500px]
                    ${j===Ae[x].correctAnswer&&w?"h-10 bg-gradient-to-r from-green-400 to-green-500 text-white border-green-300 scale-105 shadow-2xl animate-success-pulse":b===j&&j!==Ae[x].correctAnswer?"h-10 bg-gradient-to-r from-red-400 to-red-500 text-white border-red-300 scale-105 shadow-2xl":"h-10 -mb-2 bg-blue-100 hover:bg-blue-200 text-gray-800 border-blue-200/50 hover:border-purple-300/70"} 
                    text-xl font-bold py-6 px-4 rounded-2xl cursor-pointer transition-all duration-300 border-2 backdrop-blur-sm transform
                    focus:outline-none focus:ring-4 focus:ring-purple-200/50
                    ${w?"":"hover:animate-bounce-gentle"}
                    min-h-[4rem] flex items-center justify-center
                  `,...Dl(()=>Ms(j)),disabled:w,children:t.jsx("span",{className:"relative z-10",children:j})},D))})]}):Lt?t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-green-50 to-purple-50 rounded-3xl pb-8 border-4 border-blue-200 relative overflow-hidden",children:[O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]}),t.jsx("div",{className:"absolute top-4 right-4 text-6xl opacity-20 animate-float",children:Ce?.backgroundImage||""}),t.jsxs("div",{className:"flex flex-col items-center mb-8 relative",children:[Ho&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:t.jsx("div",{className:"text-8xl animate-bounce-gentle",children:qo})}),t.jsx("div",{className:`text-[8rem] mb-4 -mt-7 transition-all duration-500 ${Ho?"scale-110":""}`,children:Ce?.isCharacterVideo?t.jsx(Uh,{src:Ce?.characterEmoji,className:"w-64 h-64 object-contain rounded-xl mx-auto",autoPlay:!0,loop:!0,muted:!0,style:{display:"block"}}):Ce?.characterEmoji?.startsWith("/")||Ce?.characterEmoji?.includes(".jpg")||Ce?.characterEmoji?.includes(".png")||Ce?.characterEmoji?.includes(".jpeg")?t.jsx("img",{src:Ce?.characterEmoji,alt:"Character",className:"w-64 h-64 object-contain rounded-xl mx-auto"}):Ce?.characterEmoji||""}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border-3 border-blue-300 shadow-xl -mt-12",children:[t.jsx("div",{className:"text-4xl -mt-3",children:Ce?.scenarioImage}),t.jsx("div",{className:"text-xl font-bold text-gray-800 leading-relaxed",children:Ce?.questionText})]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-[1000px] mx-auto",children:Ce?.answerChoices.map((j,D)=>{const U=typeof j=="string"?j:j.text||"",Q=typeof j=="object"?j.image:null,me=typeof j=="object"?j.video:null,ye=U===Ce.correctAnswer,je=b===U&&!ye;return t.jsxs("button",{onClick:()=>Fa(j),disabled:w,className:`
                          ${ye&&w?"bg-gradient-to-r from-green-400 to-green-500 text-white border-green-300 scale-105 shadow-2xl animate-success-pulse":je?"bg-gradient-to-r from-red-400 to-red-500 text-white border-red-300 scale-105 shadow-2xl":"bg-white hover:bg-blue-50 text-gray-800 border-blue-200 hover:border-blue-400"} 
                          text-xl font-bold py-2 px-2 rounded-2xl cursor-pointer transition-all duration-300 border-3 backdrop-blur-sm transform
                          focus:outline-none focus:ring-4 focus:ring-blue-300
                          ${w?"":"hover:scale-105 hover:shadow-xl"}
                          min-h-[10rem] flex flex-col items-center justify-center gap-3 shadow-lg
                        `,children:[me?t.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata",className:"w-68 h-62 object-contain rounded-lg -m-9 ",style:{display:"block"},children:t.jsx("source",{src:me,type:"video/mp4"})},me):Q?typeof Q=="string"&&Q.startsWith("/")?t.jsx("img",{src:Q,alt:U,className:"w-12 h-12 object-contain"}):t.jsx("div",{className:"text-4xl",children:Q}):null,t.jsx("span",{className:"-mt-2 relative z-10 text-center",children:U})]},me||U||D)})})]})}):sa?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"text-center -mt-2 mb-2",children:t.jsx("div",{className:"inline-flex bg-gradient-to-r from-green-100 to-blue-100 rounded-full px-8 py-2 border-3 border-green-300 shadow-xl",children:t.jsxs("span",{className:"text-xl font-bold text-green-800 flex items-center space-x-3",children:[t.jsx("span",{className:"text-3xl animate-bounce-gentle",children:""}),t.jsx("span",{children:"Street Safety"}),t.jsx("span",{className:"text-3xl animate-pulse-gentle",children:""})]})})}),t.jsxs("div",{className:"bg-gradient-to-br from-sky-100 via-blue-50 to-green-100 rounded-3xl p-8 border-4 border-blue-300 relative overflow-hidden shadow-2xl min-h-[600px]",children:[O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]}),t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-200/30 to-green-200/30 rounded-3xl",children:[t.jsx("div",{className:"absolute top-4 left-8 text-4xl animate-float",children:""}),t.jsx("div",{className:"absolute top-8 right-12 text-3xl animate-float-delayed",children:""}),t.jsx("div",{className:"absolute top-12 left-1/3 text-2xl animate-bounce-gentle",children:""})]}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between items-end px-4 opacity-20",children:[t.jsx("div",{className:"text-8xl",children:""}),t.jsx("div",{className:"text-6xl",children:""}),t.jsx("div",{className:"text-7xl",children:""}),t.jsx("div",{className:"text-9xl",children:""}),t.jsx("div",{className:"text-5xl",children:""})]}),t.jsxs("div",{className:"flex flex-col items-center mb-8 relative z-10",children:[qs&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-green-100/90 rounded-3xl backdrop-blur-sm",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-9xl mb-4",children:[t.jsx("span",{className:"animate-slide-right",children:""}),t.jsx("span",{className:"animate-pulse text-green-500",children:""}),t.jsx("span",{className:"animate-bounce-gentle",children:""})]}),t.jsx("div",{className:"text-3xl font-bold text-green-600 animate-bounce-gentle",children:" SAFE CROSSING! WELL DONE! "}),t.jsx("div",{className:"text-lg text-green-700 mt-2",children:"You made the right choice! "})]})}),t.jsx("div",{className:"relative w-full max-w-4xl mx-auto",children:t.jsxs("div",{className:"flex items-end justify-between mb-6",children:[t.jsxs("div",{className:"flex flex-col items-center mx-4",children:[t.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-2xl border-4 border-gray-600 relative",children:[t.jsx("div",{className:`text-8xl transition-all duration-500 ${(yt||et)?.trafficLight===""||(yt||et)?.isTrafficLightImage?"animate-pulse-gentle drop-shadow-lg scale-110":(yt||et)?.trafficLight===""?"animate-pulse drop-shadow-lg scale-110":(yt||et)?.trafficLight===""?"animate-bounce-gentle drop-shadow-lg":"animate-pulse-gentle"}`,children:(yt||et)?.isTrafficLightImage?t.jsx("img",{src:(yt||et)?.trafficLight,alt:"Go Sign",className:"w-32 h-32 object-contain mx-auto"}):(yt||et)?.trafficLight||""}),t.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2",children:t.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold shadow-lg ${(yt||et)?.lightStatus==="walk"?"bg-green-200 text-green-800 animate-pulse-gentle":(yt||et)?.lightStatus==="stop"?"bg-red-200 text-red-800 animate-pulse":"bg-yellow-200 text-yellow-800 animate-bounce-gentle"}`,children:(yt||et)?.lightStatus?.toUpperCase()||"LOOK"})})]}),t.jsx("div",{className:"w-2 h-16 bg-gray-600 shadow-lg"})]}),t.jsxs("div",{className:"flex-1 relative mx-4",children:[t.jsxs("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 h-56 rounded-lg border-4 border-gray-500 shadow-xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"w-full h-4 bg-yellow-300 opacity-80 rounded flex space-x-6",children:[t.jsx("div",{className:"flex-1 bg-yellow-400 rounded"}),t.jsx("div",{className:"w-8 bg-transparent"}),t.jsx("div",{className:"flex-1 bg-yellow-400 rounded"}),t.jsx("div",{className:"w-8 bg-transparent"}),t.jsx("div",{className:"flex-1 bg-yellow-400 rounded"})]})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"text-8xl animate-pulse-gentle",children:(yt||et)?.scenarioImage||""})}),(yt||et)?.scenarioImage?.includes("")&&t.jsx("div",{className:"absolute top-3 left-6 text-5xl animate-slide-right",children:""})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-10 bg-white opacity-60 flex space-x-1",children:[...Array(8)].map((j,D)=>t.jsx("div",{className:"flex-1 bg-white"},D))})]})]})}),xr&&t.jsx("div",{className:`
                      ${Gs==="safe"?"bg-gradient-to-r from-green-100 to-blue-100 border-green-400":"bg-gradient-to-r from-yellow-100 to-red-100 border-yellow-400"} 
                      rounded-2xl p-6 border-3 shadow-xl mb-6 max-w-2xl animate-fade-in
                    `,children:t.jsxs("div",{className:"text-xl font-bold text-center",children:[Gs==="safe"&&t.jsx("span",{className:"text-4xl mr-3",children:""}),Gs==="unsafe"&&t.jsx("span",{className:"text-4xl mr-3",children:""}),Fo]})})]}),t.jsxs("div",{className:"flex justify-center space-x-6 mb-8",children:[t.jsxs("button",{onClick:()=>{console.log(" CROSS button clicked!"),In("CROSS")},disabled:w||xr,className:`
                      group relative overflow-hidden
                      ${b==="CROSS"&&(yt||et)?.correctAnswer==="CROSS"?"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white border-green-300 scale-105 shadow-xl animate-success-pulse":b==="CROSS"&&(yt||et)?.correctAnswer!=="CROSS"?"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white border-red-300 scale-105 shadow-xl animate-pulse":"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:from-blue-600 hover:via-blue-700 hover:to-blue-800 text-white border-blue-300 hover:border-blue-400"} 
                      text-xl font-bold py-6 px-12 rounded-2xl transition-all duration-300 border-3 shadow-lg transform
                      focus:outline-none focus:ring-4 focus:ring-blue-300/50
                      ${!w&&!xr?"hover:scale-105 hover:shadow-xl cursor-pointer active:scale-100":"cursor-not-allowed opacity-60"}
                      min-w-[270px] min-h-[180px] flex flex-col items-center justify-center
                    `,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/15 via-white/8 to-transparent opacity-40 rounded-2xl group-hover:opacity-60 transition-opacity"}),t.jsx("span",{className:"text-4xl mb-2 relative z-10 animate-bounce-gentle group-hover:animate-pulse",children:""}),t.jsx("span",{className:"relative z-10 text-lg font-black",children:"CROSS NOW"}),t.jsx("div",{className:"absolute top-2 right-2 text-lg opacity-50 group-hover:opacity-80 transition-opacity",children:""})]}),t.jsxs("button",{onClick:()=>{console.log(" WAIT button clicked!"),In("WAIT")},disabled:w||xr,className:`
                      group relative overflow-hidden
                      ${b==="WAIT"&&(yt||et)?.correctAnswer==="WAIT"?"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white border-green-300 scale-105 shadow-xl animate-success-pulse":b==="WAIT"&&(yt||et)?.correctAnswer!=="WAIT"?"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white border-red-300 scale-105 shadow-xl animate-pulse":"bg-gradient-to-r from-orange-500 via-orange-600 to-orange-700 hover:from-orange-600 hover:via-orange-700 hover:to-orange-800 text-white border-orange-300 hover:border-orange-400"} 
                      text-xl font-bold py-6 px-12 rounded-2xl transition-all duration-300 border-3 shadow-lg transform
                      focus:outline-none focus:ring-4 focus:ring-orange-300/50
                      ${!w&&!xr?"hover:scale-105 hover:shadow-xl cursor-pointer active:scale-100":"cursor-not-allowed opacity-60"}
                       min-w-[270px] min-h-[180px] flex flex-col items-center justify-center
                    `,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/15 via-white/8 to-transparent opacity-40 rounded-2xl group-hover:opacity-60 transition-opacity"}),t.jsx("span",{className:"text-4xl mb-2 relative z-10 animate-pulse-gentle group-hover:animate-bounce",children:""}),t.jsx("span",{className:"relative z-10 text-lg font-black",children:"WAIT HERE"}),t.jsx("div",{className:"absolute top-2 right-2 text-lg opacity-50 group-hover:opacity-80 transition-opacity",children:""})]})]}),t.jsx("div",{className:"text-center space-y-4"})]})]}):ls?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-gradient-to-b from-blue-50 to-green-50 rounded-2xl p-2 -mt-2 border-2 border-blue-200 relative",children:[O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-40 h-40 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-40 h-40 object-contain"})]}),t.jsxs("div",{className:"flex justify-between items-center relative max-h-[260px]",children:[t.jsxs("div",{className:"flex mt-14 flex-col items-center relative",children:[Me&&t.jsxs("div",{className:"absolute -top-15 left-1/2 transform -translate-x-1/2 bg-white rounded-2xl p-2 border-2 border-pink-300 shadow-lg w-[200px] z-10 animate-bounce-gentle",children:[t.jsx("div",{className:"text-lg font-bold text-gray-800 text-center leading-tight",children:Me}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:t.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-8 border-l-transparent border-r-transparent border-t-white"})})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[10rem] relative bottom-10 -mb-6",children:""}),t.jsx("div",{className:"relative bottom-10 bg-pink-500 text-white px-3 py-2 rounded-full text-base font-bold shadow-md",children:"Customer"})]})]}),t.jsx("div",{className:"flex-1 mx-4 ",children:t.jsx("div",{className:"h-20 bg-gradient-to-t from-amber-400 to-amber-200 rounded-xl border-2 border-amber-500 relative flex items-center justify-center shadow-md",children:t.jsx("span",{className:"text-base font-bold text-amber-900",children:" Restaurant Counter "})})}),t.jsxs("div",{className:"flex flex-col mt-14 items-center relative",children:[Re&&ge==="cashier"&&t.jsxs("div",{className:"absolute -top-20 left-1/2 transform -translate-x-1/2 bg-white rounded-2xl p-3 border-2 border-blue-300 shadow-lg max-w-sm z-10 animate-bounce-gentle",children:[t.jsx("div",{className:"text-md font-bold text-gray-800 text-center leading-tight",children:Me}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:t.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-8 border-l-transparent border-r-transparent border-t-white"})})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[10rem] relative bottom-10 -mb-6",children:""}),t.jsx("div",{className:"relative bottom-10 bg-blue-500 text-white px-3 py-2 rounded-full text-base font-bold shadow-md",children:"You (Cashier)"})]})]})]})]}),t.jsxs("div",{className:"mt-3 space-y-3",children:[be===1&&t.jsx("div",{className:"text-center",children:Re&&t.jsx("button",{onClick:Wa,className:"bg-green-500 hover:bg-green-600 text-white py-3 px-8 rounded-xl font-bold text-base transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-md",children:" GET ORDER"})}),be===2&&t.jsxs("div",{children:[t.jsx("div",{className:"bg-blue-100 border-2 border-blue-300 rounded-xl p-3 mb-3 text-center",children:t.jsx("h3",{className:"text-base font-bold text-gray-800",children:" Find the food the customer wants"})}),t.jsx("div",{className:"grid grid-cols-4 gap-3 mb-3",children:Ce.menuOptions.slice(0,4).map((j,D)=>t.jsxs("button",{onClick:()=>Ki(j),disabled:w,className:"bg-white hover:bg-blue-50 border-2 border-gray-300 hover:border-blue-400 rounded-xl p-4 transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-md",children:[t.jsx("div",{className:"text-5xl mb-2",children:j.image}),t.jsx("div",{className:"font-bold text-gray-800 text-base",children:j.name}),t.jsx("div",{className:"text-green-600 font-semibold text-sm",children:j.price})]},D))}),ne.length>0&&t.jsxs("div",{className:"flex gap-3 items-start mb-3",children:[t.jsxs("div",{className:"flex-1 bg-green-100 border-2 border-green-300 rounded-xl p-3",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 text-center",children:" Food I picked:"}),t.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:ne.map((j,D)=>t.jsxs("div",{className:"bg-white border-2 border-green-400 rounded-lg p-2 flex items-center space-x-2 shadow-sm",children:[t.jsx("span",{className:"text-2xl",children:j.image}),t.jsx("span",{className:"font-semibold text-sm",children:j.name}),t.jsx("button",{onClick:()=>cs(D),disabled:w,className:"bg-red-100 hover:bg-red-200 text-red-600 px-2 py-1 rounded-md text-sm cursor-pointer font-bold",children:""})]},D))})]}),!w&&t.jsx("div",{className:"flex items-center",children:t.jsx("button",{onClick:Ml,className:"bg-purple-500 relative top-7  hover:bg-purple-600 text-white py-4 px-6 rounded-xl font-bold text-base transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-md whitespace-nowrap",children:" Give food to customer"})})]})]}),be===3&&t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"bg-purple-100 border-2 border-purple-300 rounded-xl p-4",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:" Good job helping the customer!"}),t.jsxs("div",{className:"text-base font-bold text-purple-600",children:["You got ",_," points! "]})]})})]})]}):ls?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-b from-blue-50 to-green-50 rounded-3xl p-4 border-4 border-blue-200 relative",children:t.jsxs("div",{className:"flex justify-between items-center relative min-h-[300px]",children:[t.jsxs("div",{className:"flex flex-col items-center relative",children:[Re&&ge==="customer"&&t.jsxs("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-white rounded-3xl p-3 border-4 border-pink-300 shadow-2xl w-[250px] z-10 animate-bounce-gentle",children:[t.jsx("div",{className:"text-xl font-bold text-gray-800 text-center leading-relaxed",children:Me}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:t.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-16 border-l-transparent border-r-transparent border-t-white"})})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[12rem] mb-4",children:""}),t.jsx("div",{className:"bg-pink-500 text-white px-8 py-4 rounded-full text-2xl font-bold shadow-lg",children:"Customer"})]})]}),t.jsx("div",{className:"flex-1 mx-16 mt-20",children:t.jsx("div",{className:"h-32 bg-gradient-to-t from-amber-400 to-amber-200 rounded-2xl border-4 border-amber-500 relative flex items-center justify-center shadow-lg",children:t.jsx("span",{className:"text-2xl font-bold text-amber-900",children:" Restaurant Counter "})})}),t.jsxs("div",{className:"flex flex-col items-center relative",children:[Re&&ge==="cashier"&&t.jsxs("div",{className:"absolute -top-32 left-1/2 transform -translate-x-1/2 bg-white rounded-3xl p-8 border-4 border-blue-300 shadow-2xl max-w-lg z-10 animate-bounce-gentle",children:[t.jsx("div",{className:"text-xl font-bold text-gray-800 text-center leading-relaxed",children:Me}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:t.jsx("div",{className:"w-0 h-0 border-l-8 border-r-8 border-t-16 border-l-transparent border-r-transparent border-t-white"})})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[12rem] mb-4",children:""}),t.jsx("div",{className:"bg-blue-500 text-white px-8 py-4 rounded-full text-2xl font-bold shadow-lg",children:"You (Cashier)"})]})]})]})}),t.jsxs("div",{className:"mt-8 space-y-6",children:[be===1&&t.jsx("div",{className:"text-center",children:Re&&t.jsx("button",{onClick:Wa,className:"bg-green-500 hover:bg-green-600 text-white py-6 px-12 rounded-2xl font-bold text-xl transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-lg",children:" GET ORDER"})}),be===2&&t.jsxs("div",{children:[t.jsx("div",{className:"bg-blue-100 border-4 border-blue-300 rounded-2xl p-6 mb-6 text-center",children:t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:" Find the food the customer wants"})}),t.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:Ce.menuOptions.map((j,D)=>t.jsxs("button",{onClick:()=>Ki(j),disabled:w,className:"bg-white hover:bg-blue-50 border-4 border-gray-300 hover:border-blue-400 rounded-2xl p-6 transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-lg",children:[t.jsx("div",{className:"text-5xl mb-3",children:j.image}),t.jsx("div",{className:"font-bold text-gray-800 text-lg",children:j.name}),t.jsx("div",{className:"text-green-600 font-semibold text-lg",children:j.price})]},D))}),ne.length>0&&t.jsxs("div",{className:"bg-green-100 border-4 border-green-300 rounded-2xl p-6 mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:" Food I picked:"}),t.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:ne.map((j,D)=>t.jsxs("div",{className:"bg-white border-3 border-green-400 rounded-xl p-4 flex items-center space-x-3 shadow-md",children:[t.jsx("span",{className:"text-3xl",children:j.image}),t.jsx("span",{className:"font-semibold text-lg",children:j.name}),t.jsx("button",{onClick:()=>cs(D),disabled:w,className:"bg-red-100 hover:bg-red-200 text-red-600 px-3 py-2 rounded-lg text-lg cursor-pointer font-bold",children:""})]},D))})]}),ne.length>0&&!w&&t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:Ml,className:"bg-purple-500 hover:bg-purple-600 text-white py-6 px-12 rounded-2xl font-bold text-xl transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-lg",children:" Give food to customer"})})]}),be===3&&t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"bg-purple-100 border-4 border-purple-300 rounded-2xl p-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:" Good job helping the customer!"}),t.jsxs("div",{className:"text-xl font-bold text-purple-600",children:["You got ",_," points! "]})]})})]})]}):is?t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-gradient-to-b from-green-50 to-blue-50 rounded-2xl p-3 -mt-2 border-3 border-green-200 relative",children:[O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-52 h-52 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-52 h-52 object-contain"})]}),t.jsxs("div",{className:"flex justify-between items-center relative min-h-[220px]",children:[t.jsxs("div",{className:"flex flex-col items-center relative",children:[qe?.studentThought&&t.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-white rounded-2xl p-3 border-3 border-blue-300 shadow-lg w-[220px] z-10 animate-bounce-gentle",children:[t.jsx("div",{className:"text-base font-bold text-gray-800 text-center leading-snug",children:qe.studentThought}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:t.jsx("div",{className:"w-0 h-0 border-l-6 border-r-6 border-t-10 border-l-transparent border-r-transparent border-t-white"})})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[9rem]",children:""}),t.jsx("div",{className:"bg-blue-500 text-white px-4 py-2 -mt-3 rounded-full text-base font-bold shadow-lg",children:"You"})]})]}),t.jsx("div",{className:"flex-1 mx-6 mt-10",children:t.jsx("div",{className:"h-25 bg-gradient-to-t from-yellow-400 to-yellow-200 rounded-xl border-3 border-yellow-500 relative flex items-center justify-center shadow-lg",children:t.jsxs("span",{className:"text-xl font-bold text-yellow-900",children:[qe?.background,qe?.context==="morning"?"":qe?.context==="afternoon"?"":qe?.context==="evening"?"":""]})})}),t.jsxs("div",{className:"flex flex-col items-center relative",children:[qe?.otherCharacterSpeech&&t.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-white rounded-2xl p-3 border-3 border-pink-300 shadow-lg w-[220px] z-10 animate-bounce-gentle",children:[t.jsx("div",{className:"text-base font-bold text-gray-800 text-center leading-snug",children:qe.otherCharacterSpeech}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:t.jsx("div",{className:"w-0 h-0 border-l-6 border-r-6 border-t-10 border-l-transparent border-r-transparent border-t-white"})})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[9rem]",children:qe?.character}),t.jsx("div",{className:"bg-pink-500 text-white px-4 py-2 -mt-3 rounded-full text-base font-bold shadow-lg",children:qe?.characterType})]})]})]}),t.jsx("div",{className:"text-center mb-3",children:t.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 border-3 border-purple-300 rounded-xl p-3",children:[t.jsx("p",{className:"text-lg font-bold text-gray-800",children:qe?.title}),t.jsx("p",{className:"text-base text-gray-600",children:qe?.situation})]})}),t.jsx("div",{className:"grid grid-cols-2 gap-3 mb-2",children:qe?.choices?.map((j,D)=>t.jsxs("button",{onClick:()=>bc(j),disabled:Wt,className:`
                        p-4 rounded-xl font-bold text-base transition-all duration-300 transform hover:scale-105 cursor-pointer shadow-lg border-3
                        ${j.correct&&Wt?"bg-green-100 border-green-400 text-green-800":!j.correct&&Wt?"bg-red-100 border-red-400 text-red-800":"bg-white hover:bg-blue-50 border-gray-300 hover:border-blue-400 text-gray-800"}
                        ${Wt?"cursor-not-allowed":""}
                      `,children:[t.jsx("div",{className:"text-4xl mb-2",children:j.emoji}),t.jsx("div",{className:"leading-snug text-lg",children:j.text}),j.correct&&Wt&&t.jsx("div",{className:"text-green-600 font-bold mt-2 text-sm",children:" Perfect greeting!"}),!j.correct&&Wt&&Td===j&&t.jsx("div",{className:"text-red-600 font-bold mt-2 text-sm",children:" Try a different approach"})]},D))})]})}):os?t.jsx("div",{className:"space-y-6 -mt-5",children:t.jsxs("div",{className:"bg-gradient-to-b from-green-50 to-blue-50 rounded-3xl p-4 border-4 border-green-200 relative overflow-hidden",children:[O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]}),t.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 border-4 border-blue-300 rounded-2xl p-3 mb-6 text-center relative",children:[t.jsx("div",{className:"absolute -top-3 -left-3 text-5xl animate-pulse-gentle",children:""}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Your Budget"}),t.jsxs("div",{className:"text-4xl font-extrabold text-green-600 bg-white/70 backdrop-blur-sm rounded-xl p-2 border-2 border-green-200",children:["",Zr.toLocaleString()]}),t.jsx("p",{className:"text-md text-gray-600 mt-3",children:"Choose items you can afford!"})]}),t.jsx("div",{className:"grid grid-cols-4 gap-3 mb-3",children:ws.map((j,D)=>{const U=Ys.some(Q=>Q.id===j.id);return t.jsx("div",{className:`
                          relative bg-white/90 backdrop-blur-xl rounded-lg p-4 border-2 shadow transition-all duration-300
                          border-blue-300 hover:border-blue-500
                          ${U?"ring-2 ring-green-400 bg-green-50":""}
                        `,children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mb-1",style:{fontSize:"55px"},children:j.isImagePath?t.jsx("img",{src:j.image,alt:j.name,className:"w-24 h-24 object-cover mx-auto rounded-lg"}):j.image}),t.jsx("h4",{className:"font-bold text-gray-800 mb-1 leading-tight",style:{fontSize:"23px"},children:j.name}),t.jsxs("div",{className:"font-bold mb-2 p-1 rounded text-green-600 bg-blue-100",style:{fontSize:"18px"},children:["",j.price.toLocaleString()]}),t.jsx("button",{onClick:()=>Os(j),disabled:U||Vs,className:`
                              w-full py-1 px-2 rounded font-bold transition-all duration-300 shadow-sm
                              ${U?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white cursor-pointer"}
                              ${Vs?"opacity-50 cursor-not-allowed":""}
                            `,style:{fontSize:"18px"},children:U?" Bought!":" Buy"})]})},j.id)})}),Ko&&t.jsxs("div",{className:`rounded-2xl p-6 text-center border-4 mb-6 ${Zo==="correct"?"bg-gradient-to-r from-green-100 to-blue-100 border-green-400":"bg-gradient-to-r from-orange-100 to-red-100 border-orange-400"}`,children:[t.jsx("div",{className:"text-6xl mb-4",children:Zo==="correct"?"":""}),t.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-3",children:Ra})]}),t.jsxs("div",{className:"bg-purple-100 border-4 border-purple-300 rounded-2xl p-2 mb-4",children:[t.jsxs("div",{className:"text-xl font-bold text-purple-800",children:["Correct Purchases: ",pr," "]}),Ys.length>0&&t.jsxs("div",{className:"text-md text-gray-700 ",children:["Total Spent: ",Od.toLocaleString()]})]}),(()=>{const j=ws.filter(U=>U.price<=Zr),D=j.length>0&&j.every(U=>Ys.some(Q=>Q.id===U.id));return t.jsx("button",{onClick:Va,disabled:!D||Vs,className:`py-4 px-8 rounded-2xl text-xl font-bold shadow-lg transition-all duration-300 w-full
                        ${D&&!Vs?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white transform hover:scale-105 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed opacity-60"}`,children:ys<3?" Next Round":" Complete Game"})})(),ml&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/90 via-green-400/90 to-blue-400/90 backdrop-blur-md rounded-3xl flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-12 text-center shadow-2xl border-4 border-yellow-300 relative animate-modal-appear",children:[t.jsx("div",{className:"absolute -top-8 -right-8 text-8xl animate-spin-slow",children:""}),t.jsx("div",{className:"absolute -bottom-4 -left-4 text-6xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"text-8xl mb-6 animate-bounce-gentle",children:""}),t.jsx("h3",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-600 to-green-600 mb-4",children:"Money Master Achievement!"}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-green-50 rounded-2xl p-6 mb-6 border-2 border-yellow-200",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-800 mb-3",children:" Badge Earned: Money Master "}),t.jsx("p",{className:"text-lg text-gray-700 mb-2",children:"You completed all 3 rounds and learned about Philippine Peso values!"}),t.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Final Score: ",pr," correct purchases! "]})]}),t.jsxs("div",{className:"flex gap-4 justify-center",children:[t.jsx("button",{onClick:Gn,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white py-3 px-6 rounded-2xl text-lg font-bold shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:" Play Again"}),t.jsx("button",{onClick:()=>ia(pr,3),className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-3 px-6 rounded-2xl text-lg font-bold shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:" Continue Adventure"})]})]})})]})}):Ir?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"-mb-0 bg-gradient-to-r from-purple-100 via-pink-100 to-blue-100 border-4 border-purple-300 rounded-3xl p-2 text-center relative overflow-hidden shadow-2xl",children:[t.jsx("div",{className:"absolute top-2 right-2 text-6xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute -bottom-2 -left-2 text-5xl animate-float",children:""}),t.jsx("div",{className:"absolute top-2 left-2 text-4xl animate-pulse-gentle",children:""}),t.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2",children:" Visual Memory Challenge "})]}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border-2 border-purple-200 text-center",children:[Tt==="memorize"&&nt&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-2xl font-bold text-purple-600",children:"Memorize the Cards!"}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl p-3 border-3 border-yellow-300 inline-block my-3",children:[t.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Remember this card:"}),t.jsx("div",{className:"text-6xl",children:nt.image}),t.jsx("p",{className:"text-xl font-bold text-gray-800 mt-1",children:nt.name})]}),t.jsx("div",{className:"text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-purple-600 animate-pulse",children:Je}),t.jsx("p",{className:"text-lg text-gray-600",children:"seconds remaining..."})]}),Tt==="shuffle"&&nt&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-5xl animate-spin-slow",children:""}),t.jsx("h3",{className:"text-2xl font-bold text-blue-600",children:"Watch the Shuffle!"}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl p-3 border-3 border-yellow-300 inline-block ",children:[t.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-1",children:"Find this card:"}),t.jsx("div",{className:"text-6xl",children:nt.image}),t.jsx("p",{className:"text-xl font-bold text-gray-800 mt-2",children:nt.name})]}),t.jsx("p",{className:"text-lg text-gray-600",children:"Keep tracking the cards..."})]}),Tt==="question"&&nt&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h3",{className:"-mt-2 text-2xl font-bold text-green-600",children:["Find This Card! ",t.jsx("span",{className:"text-4xl animate-bounce-gentle",children:""})]}),t.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl p-3 border-3 border-yellow-300 inline-block",children:[t.jsx("div",{className:"text-6xl",children:nt.image}),t.jsx("p",{className:"text-xl font-bold text-gray-800 mt-1",children:nt.name})]}),t.jsx("p",{className:"text-md text-gray-600",children:"Click where it is now!"})]})]}),t.jsx("div",{className:"relative w-full h-80 max-w-4xl mx-auto",children:es&&es.length>0?es.map((j,D)=>{const U=qa.indexOf(D),ye=U*(23+2.33),je=ss===U;return t.jsx("div",{onClick:()=>na(U),className:`
                        absolute w-[22%] h-[290px] cursor-pointer
                        ${Tt==="question"?"hover:scale-105 hover:shadow-2xl":""}
                        ${ts?"z-50":"z-10"}
                        transition-all duration-[1500ms] ease-in-out
                      `,style:{left:`${ye}%`,transformStyle:"preserve-3d",transform:ts?"translateY(-30px) scale(1.08)":"translateY(0) scale(1)"},children:t.jsxs("div",{className:"relative w-full h-full transition-transform duration-700",style:{transformStyle:"preserve-3d",transform:nr||je?"rotateY(0deg)":"rotateY(180deg)"},children:[t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-white to-blue-50 rounded-2xl border-4 border-blue-300 shadow-xl flex flex-col items-center justify-center p-4",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[t.jsx("div",{className:"text-7xl mb-2",children:j?.image}),t.jsx("p",{className:"text-lg font-bold text-gray-800",children:j?.name})]}),t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 via-pink-400 to-blue-400 rounded-2xl border-4 border-purple-600 shadow-xl flex items-center justify-center",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[t.jsx("div",{className:"text-6xl animate-pulse-gentle",children:""}),t.jsx("div",{className:"absolute top-2 left-2 text-2xl",children:""}),t.jsx("div",{className:"absolute bottom-2 right-2 text-2xl",children:""})]})]})},`card-${D}`)}):t.jsx("div",{className:"text-center text-2xl text-gray-500 py-20",children:"Loading cards... "})}),O&&t.jsxs("div",{className:"fixed inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain"})]}),T&&t.jsxs("div",{className:"fixed inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]})]}):Ol?t.jsx("div",{className:"space-y-8",children:!Ce?.leftItems||!Ce?.rightItems?t.jsxs("div",{className:"bg-red-50 border-4 border-red-200 rounded-3xl p-8 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-2xl font-bold text-red-800 mb-2",children:"Oops! Data Missing"}),t.jsx("p",{className:"text-lg text-red-600",children:"The matching game data couldn't be loaded. Please try again."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center justify-center text-center bg-gradient-to-r -mt-6 from-blue-50 to-purple-50 rounded-2xl p-2 border-3 border-blue-200 relative overflow-hidden",children:[t.jsx("div",{className:"absolute -top-4 -right-4 text-6xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute -bottom-2 -left-2 text-4xl animate-float",children:""}),t.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-1 flex items-center space-x-3",children:[t.jsx("span",{className:"text-2xl animate-pulse-gentle",children:""}),t.jsx("span",{children:"Click to Connect!"})]})]}),t.jsxs("div",{id:"matching-container",ref:xc,className:"bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 rounded-3xl p-4 border-4 border-purple-200 relative overflow-hidden shadow-2xl",children:[O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]}),t.jsx("div",{className:"absolute top-2 right-2 text-2xl animate-spin-slow",children:""}),t.jsx("div",{className:"absolute bottom-2 left-2 text-xl animate-float-delayed",children:""}),t.jsxs("div",{className:"flex justify-between items-start gap-4 relative",children:[t.jsxs("div",{className:"w-1/3 space-y-2",children:[t.jsx("h4",{className:"text-sm font-bold text-center text-gray-800 bg-gradient-to-r from-blue-100 to-purple-100 py-2 rounded-xl border-2 border-blue-200",children:" Click From Here"}),Ce.leftItems.map((j,D)=>t.jsxs("button",{id:`left-item-${j.id}`,ref:U=>h.current[j.id]=U,onMouseDown:U=>vc(U,j,"left"),disabled:_t.some(U=>U.leftId===j.id),className:`
                          w-full rounded-xl border-2 transition-all duration-300 transform text-lg h-20 min-h-[6rem]
                          ${_t.some(U=>U.leftId===j.id)?sr?za.some(U=>U.leftId===j.id)?"bg-gradient-to-r from-green-200 to-green-300 border-green-500 border-4 shadow-lg":"bg-gradient-to-r from-red-200 to-red-300 border-red-500 border-4 shadow-lg":"bg-gradient-to-r from-blue-200 to-blue-300 border-blue-400 cursor-not-allowed opacity-90":Qr?.item.id===j.id?"bg-gradient-to-r from-yellow-200 to-orange-300 border-yellow-400 scale-105 shadow-xl animate-pulse-gentle":"bg-gradient-to-r from-white to-blue-50 border-blue-200 hover:border-blue-400 hover:scale-105 hover:shadow-lg cursor-grab active:cursor-grabbing"}
                          ${_t.some(U=>U.leftId===j.id)?"":"hover:animate-bounce-gentle"}
                          flex items-center justify-center text-center font-bold
                          focus:outline-none focus:ring-2 focus:ring-blue-300
                        `,children:[j.type==="emoji"?t.jsx("span",{className:"text-5xl",children:j.content}):t.jsx("span",{className:"text-2xl text-gray-800 font-medium",children:j.content}),_t.some(U=>U.leftId===j.id)&&t.jsx("span",{className:"ml-2 text-lg animate-bounce-gentle",children:sr?za.some(U=>U.leftId===j.id)?"":"":""})]},j.id))]}),t.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-10",style:{top:0,left:0},children:_t.map((j,D)=>{const U=ir(j.leftId,j.rightId),Q=za.some(Er=>Er.leftId===j.leftId&&Er.rightId===j.rightId);Oi.some(Er=>Er.leftId===j.leftId&&Er.rightId===j.rightId);const me=document.getElementById(`left-item-${j.leftId}`),ye=document.getElementById(`right-item-${j.rightId}`),je=document.getElementById("matching-container");let xt=0,or=0,oa=0,Qe=0;if(me&&ye&&je){const Er=me.getBoundingClientRect(),Fn=ye.getBoundingClientRect(),Yn=je.getBoundingClientRect();xt=Er.right-Yn.left,or=Er.top+Er.height/2-Yn.top,oa=Fn.left-Yn.left,Qe=Fn.top+Fn.height/2-Yn.top}return t.jsxs("g",{children:[t.jsx("path",{d:U,stroke:sr?Q?"#10b981":"#ef4444":"#60A5FA",strokeWidth:"4",strokeLinecap:"round",fill:"none",className:"animate-draw-line",strokeDasharray:"none"}),t.jsx("path",{d:U,stroke:sr?Q?"#059669":"#dc2626":"#93C5FD",strokeWidth:"2",strokeLinecap:"round",fill:"none",className:"animate-draw-line",style:{animationDelay:"0.1s"},strokeDasharray:"none"}),t.jsx("circle",{cx:xt,cy:or,r:"4",fill:sr?Q?"#10b981":"#ef4444":"#60A5FA",stroke:"#ffffff",strokeWidth:"2",className:"animate-pulse"}),t.jsx("circle",{cx:oa,cy:Qe,r:"4",fill:sr?Q?"#10b981":"#ef4444":"#60A5FA",stroke:"#ffffff",strokeWidth:"2",className:"animate-pulse"})]},`${j.leftId}-${j.rightId}`)})}),t.jsxs("div",{className:"w-1/3 space-y-2 relative z-20",children:[t.jsx("h4",{className:"text-sm font-bold text-center text-gray-800 bg-gradient-to-r from-pink-100 to-purple-100 py-2 rounded-xl border-2 border-pink-200",children:" Drop Here"}),Ce.rightItems.map((j,D)=>t.jsxs("button",{id:`right-item-${j.id}`,ref:U=>g.current[j.id]=U,onMouseUp:U=>Qi(U,j,"right"),disabled:_t.some(U=>U.rightId===j.id),className:`
                          w-full rounded-xl border-2 transition-all duration-300 transform text-lg min-h-[6rem] h-23
                          ${_t.some(U=>U.rightId===j.id)?sr?za.some(U=>U.rightId===j.id)?"bg-gradient-to-r from-green-200 to-green-300 border-green-500 border-4 shadow-lg":"bg-gradient-to-r from-red-200 to-red-300 border-red-500 border-4 shadow-lg":"bg-gradient-to-r from-blue-200 to-blue-300 border-blue-400 cursor-not-allowed opacity-90":Qr&&Qr.side==="left"?"bg-gradient-to-r from-yellow-100 to-orange-100 border-yellow-300 hover:scale-105 hover:shadow-lg cursor-crosshair border-dashed border-2":"bg-gradient-to-r from-white to-pink-50 border-pink-200 hover:border-pink-400 hover:scale-105 hover:shadow-lg"}
                          ${_t.some(U=>U.rightId===j.id)?"":"hover:animate-bounce-gentle"}
                          flex items-center justify-center text-center font-bold overflow-hidden relative
                          focus:outline-none focus:ring-2 focus:ring-pink-300
                        `,children:[j.type==="emoji"?t.jsx("span",{className:"text-2xl",children:j.content}):j.type==="video"?t.jsx(Uh,{src:j.content,className:"absolute inset-0 w-full h-full object-cover rounded-lg",autoPlay:!0,loop:!0,muted:!0,onError:U=>{console.error("Video failed to load:",j.content),U.target.style.display="none"}}):t.jsx("span",{className:"text-lg text-gray-800 font-medium",children:j.content}),_t.some(U=>U.rightId===j.id)&&t.jsx("span",{className:"ml-2 text-lg animate-bounce-gentle",children:sr?za.some(U=>U.rightId===j.id)?"":"":""})]},j.id))]})]}),ki&&t.jsxs("div",{className:`
                    mt-6 p-4 rounded-2xl border-3 text-center text-xl font-bold animate-fade-in
                    ${Ld==="correct"?"bg-gradient-to-r from-green-100 to-blue-100 border-green-400 text-green-800":"bg-gradient-to-r from-yellow-100 to-orange-100 border-yellow-400 text-orange-800"}
                  `,children:[t.jsx("div",{children:pl}),Ns!==null&&Ns>0&&t.jsxs("div",{className:"mt-2 text-lg animate-pulse",children:[" Returning to activities in ",Ns," second",Ns!==1?"s":"","..."]})]}),t.jsx("div",{className:"mt-6 flex space-x-4",children:sr?t.jsxs("button",{onClick:()=>c(-1),className:`flex-1 py-4 px-6 rounded-2xl border-3 font-bold text-lg transition-all duration-300 transform\r
                        bg-gradient-to-r from-blue-400 to-purple-600 text-white border-blue-500 hover:scale-105 hover:shadow-xl cursor-pointer\r
                        focus:outline-none focus:ring-4 focus:ring-blue-300`,children:[t.jsx("span",{className:"text-2xl mr-2",children:""}),"Back to Activities"]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:Xi,disabled:!ec,className:`
                          flex-1 py-4 px-6 rounded-2xl border-3 font-bold text-lg transition-all duration-300 transform
                          ${ec?"bg-gradient-to-r from-green-400 to-green-600 text-white border-green-500 hover:scale-105 hover:shadow-xl cursor-pointer animate-pulse-gentle":"bg-gray-200 text-gray-500 border-gray-300 cursor-not-allowed opacity-60"}
                          focus:outline-none focus:ring-4 focus:ring-green-300
                        `,children:[t.jsx("span",{className:"text-2xl mr-2",children:""}),"Check Answers"]}),t.jsxs("button",{onClick:Xt,disabled:_t.length===0,className:`
                          flex-1 py-4 px-6 rounded-2xl border-3 font-bold text-lg transition-all duration-300 transform
                          ${_t.length>0?"bg-gradient-to-r from-orange-400 to-red-500 text-white border-orange-500 hover:scale-105 hover:shadow-xl cursor-pointer":"bg-gray-200 text-gray-500 border-gray-300 cursor-not-allowed opacity-60"}
                          focus:outline-none focus:ring-4 focus:ring-orange-300
                        `,children:[t.jsx("span",{className:"text-2xl mr-2",children:""}),"Reset"]})]})}),(zd||sr&&za.length===10)&&t.jsxs("div",{className:"mt-6 bg-gradient-to-r from-green-100 to-blue-100 rounded-2xl p-6 border-3 border-green-400 text-center animate-fade-in",children:[t.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:""}),t.jsx("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"Excellent Work!"}),t.jsx("p",{className:"text-lg text-green-700",children:"You matched all pairs perfectly! Great job! "})]})]})]})}):Ds?t.jsxs("div",{className:"max-w-5xl mx-auto space-y-4 md:space-y-6 px-4",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 md:p-6 shadow-lg border border-blue-200 text-center relative overflow-hidden",role:"banner","aria-live":"polite",children:[t.jsx("div",{className:"absolute top-2 right-2 text-2xl md:text-3xl animate-bounce",children:""}),t.jsx("div",{className:"absolute bottom-2 left-2 text-xl md:text-2xl animate-pulse",children:""}),t.jsx("h3",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:Ae.find(j=>j.choreId===La)?.choreName||"Household Chores"}),t.jsxs("div",{className:"text-xs md:text-sm font-medium text-gray-600 bg-white rounded-full px-3 md:px-4 py-1 inline-block",children:["Step ",Ua+1," of ",Ae.find(j=>j.choreId===La)?.steps?.length||0]})]}),(()=>{const j=Ae.find(U=>U.choreId===La),D=j?.steps?.[Ua];return!D||!j?t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("div",{className:"text-red-800 font-semibold",children:"Oops! Something went wrong."}),t.jsx("div",{className:"text-red-600 text-sm mt-2",children:"Unable to load the current step. Please try again."})]}):t.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-xl border border-gray-100 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-100/30 to-transparent rounded-full -mr-16 -mt-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-purple-100/30 to-transparent rounded-full -ml-12 -mb-12"}),O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm bg-white/50 flex flex-col justify-center items-center z-50 rounded-xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-64 h-64 object-contain animate-bounce-gentle"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm bg-white/50 flex flex-col justify-center items-center z-50 rounded-xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain animate-bounce-gentle"})]}),t.jsxs("div",{className:"text-center mb-8 md:mb-10 relative z-10",children:[t.jsx("div",{className:"text-6xl md:text-8xl mb-4 md:mb-6 animate-bounce-gentle",children:D.emoji||j.choreIcon||""}),t.jsx("h4",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-4 leading-relaxed px-4",children:D.instruction}),t.jsx("div",{className:"w-12 md:w-16 h-1 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full mx-auto"})]}),t.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 relative z-10 max-w-4xl mx-auto",children:D.choices.map((U,Q)=>t.jsxs("button",{disabled:Ht,onClick:()=>{if(Ht)return;U===D.correctChoice?(R(ye=>ye+1),M(!0),Xr(!0),Pa(D.feedback||"Perfect! Great job! "),jr("correct"),Ss(ye=>[...ye,Ua]),setTimeout(()=>{Ua<j.steps.length-1?Ba(ye=>ye+1):wr(!0),M(!1),B(!1),Xr(!1)},2500)):(B(!0),Xr(!0),Pa(`The correct answer is: ${D.correctChoice}`),jr("incorrect"),setTimeout(()=>{Ua<j.steps.length-1?Ba(ye=>ye+1):wr(!0),M(!1),B(!1),Xr(!1)},2500))},className:`flex-1 group transition-all duration-300 transform focus:outline-none focus:ring-4 focus:ring-blue-300 relative overflow-hidden rounded-xl p-4 sm:p-6 text-center ${Ht?"cursor-not-allowed opacity-60":"hover:scale-105 hover:shadow-lg cursor-pointer bg-gradient-to-r from-gray-50 to-blue-50 hover:from-blue-100 hover:to-purple-100 border-2 border-gray-200 hover:border-blue-400"}`,"aria-label":`Choice ${String.fromCharCode(65+Q)}: ${U}`,children:[!Ht&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 transform -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:`text-lg sm:text-xl font-bold mb-2 transition-colors duration-300 ${Ht&&U===D.correctChoice?"text-green-800":Ht?"text-gray-500":"text-gray-800"}`,children:String.fromCharCode(65+Q)}),t.jsx("div",{className:`font-semibold text-sm sm:text-base leading-relaxed transition-colors duration-300 ${Ht&&U===D.correctChoice?"text-green-800":Ht?"text-gray-500":"text-gray-800"}`,children:U})]})]},Q))})]})})(),Ht&&Pi&&t.jsxs("div",{className:`rounded-xl p-4 md:p-6 text-center shadow-lg border-2 transform transition-all duration-300 animate-fade-in ${Dn==="correct"?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300 text-green-800":"bg-gradient-to-r from-red-50 to-pink-50 border-red-300 text-red-800"}`,role:"alert","aria-live":"assertive",children:[t.jsx("div",{className:"text-3xl md:text-4xl mb-2",children:Dn==="correct"?"":""}),t.jsx("div",{className:"text-base md:text-lg font-semibold mb-2",children:Pi}),Dn==="incorrect"&&t.jsxs("div",{className:"text-xs md:text-sm mt-2 opacity-80 flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Moving to next step..."})]}),Dn==="correct"&&t.jsxs("div",{className:"text-xs md:text-sm mt-2 opacity-80 flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Great! Moving to next step..."})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4 px-4",children:[Al&&x>0&&t.jsxs("button",{onClick:()=>{const j=x-1;p(j),Ba(0),Bi([]),Ss([]),Sl([]),$i([]),Ii([]),Xs([]),Cl([]),Ui(null),zi(0),wr(!1),Xr(!1),jr(""),Pa("");const D=Ae[j];D&&D.choreId&&Nl(D.choreId)},className:"w-full sm:w-auto bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 md:px-8 py-3 md:py-4 rounded-xl font-bold text-base md:text-lg transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-2","aria-label":"Go back to previous chore",children:[t.jsx("span",{className:"text-xl md:text-2xl",children:""}),t.jsx("span",{className:"text-center",children:"Back"})]}),Al&&t.jsxs("button",{onClick:()=>{if(x<Ae.length-1){const j=x+1;p(j),Ba(0),Bi([]),Ss([]),Sl([]),$i([]),Ii([]),Xs([]),Cl([]),Ui(null),zi(0),wr(!1),Xr(!1),jr(""),Pa("");const D=Ae[j];D&&D.choreId&&Nl(D.choreId)}else X(!0)},className:"w-full sm:w-auto bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-6 md:px-8 py-3 md:py-4 rounded-xl font-bold text-base md:text-lg transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-2","aria-label":x<Ae.length-1?"Continue to next chore challenge":"Complete the mission",children:[t.jsx("span",{className:"text-xl md:text-2xl",children:x<Ae.length-1?"":""}),t.jsx("span",{className:"text-center",children:x<Ae.length-1?"Next Chore Challenge":"Complete Mission"})]})]}),O&&Al&&t.jsxs("div",{className:"bg-gradient-to-r from-green-50 via-blue-50 to-purple-50 border-2 border-green-300 rounded-xl p-8 text-center shadow-xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-100/20 via-blue-100/20 to-purple-100/20 animate-pulse"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),t.jsx("div",{className:"text-green-800 text-2xl font-bold mb-2",children:"Fantastic Work!"}),t.jsx("div",{className:"text-green-700 text-lg",children:"You've mastered this household chore! "})]})]})]}):null]})]}),w&&t.jsx("div",{className:"absolute right-7 bottom-90 animate-slide-in-right",children:t.jsxs("button",{...Dl(er),className:"w-50 relative right-6 top-38 cursor-pointer bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 hover:from-purple-600 hover:via-pink-600 hover:to-purple-700 text-white  py-3 rounded-2xl text-lg font-bold shadow-2xl transform hover:scale-110 transition-all duration-300 flex items-center space-x-3 border-2 border-white/30 backdrop-blur-sm animate-pulse-gentle",children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:x<Ae.length-1?"":""}),t.jsx("span",{children:x<Ae.length-1?"Next Question":"Finish"}),t.jsx("span",{className:"text-xl animate-float",children:""})]})}),$r&&pe&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-2xl p-4 border-3 border-indigo-200 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute -top-2 -right-2 text-4xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute -bottom-1 -left-1 text-3xl animate-float",children:""}),t.jsxs("h3",{className:"text-2xl font-bold text-indigo-800 mb-2 flex items-center justify-center space-x-3",children:[t.jsx("span",{className:"text-3xl animate-pulse-gentle",children:""}),t.jsx("span",{children:"Academic Puzzle"})]}),qt&&t.jsx("div",{className:"mt-3 bg-yellow-100 border-2 border-yellow-300 rounded-xl p-3 animate-fade-in",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("span",{className:"text-lg font-medium text-yellow-800",children:["Hint: ",pe.hint]})]})})]}),t.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl p-6 border-4 border-indigo-200 relative",children:[pe.puzzleType==="math"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"text-center mb-6",children:t.jsx("p",{className:"text-2xl font-bold text-indigo-700",children:pe.instruction})}),pe.objects?t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"text-6xl mb-4 space-x-2",children:pe.objects.map((j,D)=>t.jsx("span",{className:"inline-block animate-bounce-gentle",style:{animationDelay:`${D*.1}s`},children:j},D))})}):pe.equation?t.jsxs("div",{className:"text-center text-4xl font-bold text-indigo-800 mb-6",children:[pe.equation.first," ",pe.equation.operator1," ",pe.equation.second," = ?"]}):null,t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:pe.options.map((j,D)=>t.jsx("button",{onClick:()=>Hr(j),className:"bg-gradient-to-r from-blue-100 to-indigo-100 hover:from-blue-200 hover:to-indigo-200 border-3 border-blue-300 hover:border-blue-500 rounded-2xl p-6 text-3xl font-bold text-indigo-800 transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300",children:j},D))})]}),pe.puzzleType==="spelling"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"flex justify-center space-x-3 mb-6",children:pe.targetWord.split("").map((j,D)=>t.jsx("div",{className:"w-16 h-16 bg-yellow-100 border-3 border-yellow-400 rounded-xl flex items-center justify-center text-2xl font-bold text-yellow-800",children:st[D]||"?"},D))})}),t.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-3",children:pe.letters.map((j,D)=>t.jsx("button",{onClick:()=>{if(st.length<pe.targetWord.length){const U=[...st,j];Ia(U)}},disabled:st.includes(j),className:"bg-gradient-to-r from-purple-100 to-pink-100 hover:from-purple-200 hover:to-pink-200 border-3 border-purple-300 hover:border-purple-500 rounded-xl p-4 text-2xl font-bold text-purple-800 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-purple-300",children:j},D))}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{onClick:()=>{const j=st.join("");Hr(j)},disabled:st.length!==pe.targetWord.length,className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white px-8 py-3 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("span",{className:"text-xl mr-2",children:""}),"Check Answer"]})})]}),pe.puzzleType==="matching"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"text-center mb-6",children:t.jsx("p",{className:"text-2xl font-bold text-indigo-700",children:pe.instruction})}),t.jsx("div",{className:"text-center mb-6",children:t.jsx("div",{className:"inline-block bg-blue-100 border-4 border-blue-400 rounded-xl p-4 text-2xl font-bold text-blue-800",children:pe.word})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:pe.objects.map((j,D)=>t.jsx("button",{onClick:()=>Hr(j.id),className:"bg-gradient-to-r from-yellow-100 to-orange-100 hover:from-yellow-200 hover:to-orange-200 border-3 border-yellow-300 hover:border-yellow-500 rounded-xl p-6 text-xl font-semibold text-gray-700 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-yellow-300",children:j.content},j.id))})]}),pe.puzzleType==="sorting"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"text-center mb-6",children:t.jsx("p",{className:"text-2xl font-bold text-purple-700",children:pe.instruction})}),t.jsx("div",{className:"text-center mb-6",children:t.jsxs("div",{className:"inline-block bg-green-100 border-4 border-green-400 rounded-xl p-6 min-w-[200px] min-h-[100px]",children:[t.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:" FRUIT BASKET"}),t.jsx("div",{className:"text-sm text-green-600",children:st.length>0?`${st.length} item(s) selected`:"Drag fruits here"})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:pe.items.map((j,D)=>t.jsx("button",{onClick:()=>{st.includes(j.id)?Ia(st.filter(U=>U!==j.id)):Ia([...st,j.id])},className:`border-3 rounded-xl p-4 text-lg font-semibold transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 ${st.includes(j.id)?"bg-green-200 border-green-500 text-green-800 ring-green-300":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200 ring-gray-300"}`,children:j.content},j.id))}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{onClick:()=>{const j=pe.correctItems.every(D=>st.includes(D))&&st.every(D=>pe.correctItems.includes(D));Hr(st,j)},className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-8 py-3 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-300",children:[t.jsx("span",{className:"text-xl mr-2",children:""}),"Check Answer"]})})]}),pe.puzzleType==="logic"&&t.jsxs("div",{className:"space-y-6",children:[pe.options&&!pe.sequence&&!pe.shapes&&t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-2xl font-bold text-green-700",children:pe.instruction}),pe.objects&&t.jsx("div",{className:"flex justify-center space-x-2 my-4",children:pe.objects.map((j,D)=>t.jsx("span",{className:"text-4xl",children:j},D))})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:pe.options.map((j,D)=>t.jsx("button",{onClick:()=>Hr(j),className:"bg-gradient-to-r from-green-100 to-emerald-100 hover:from-green-200 hover:to-emerald-200 border-3 border-green-300 hover:border-green-500 rounded-2xl p-6 text-6xl font-semibold transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-green-300",children:j},D))})]}),pe.sequence&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center items-center space-x-4 mb-6",children:pe.sequence.map((j,D)=>t.jsx("div",{className:"text-6xl animate-pulse-gentle",style:{animationDelay:`${D*.2}s`},children:j},D))}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:pe.options.map((j,D)=>t.jsx("button",{onClick:()=>Hr(j),className:"bg-gradient-to-r from-green-100 to-emerald-100 hover:from-green-200 hover:to-emerald-200 border-3 border-green-300 hover:border-green-500 rounded-2xl p-6 text-4xl transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-green-300",children:j},D))})]}),pe.shapes&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:pe.categories.map((j,D)=>t.jsx("div",{className:"bg-gray-100 border-3 border-gray-300 rounded-xl p-4 min-h-[100px] text-center",children:t.jsx("div",{className:"font-bold text-lg text-gray-700 mb-2 capitalize",children:j})},j))}),t.jsx("div",{className:"text-center text-lg text-gray-600",children:"Drag shapes to the correct category!"})]})]}),pe.puzzleType==="sequence"&&t.jsxs("div",{className:"space-y-6",children:[pe.sequence&&pe.options&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:pe.instruction})}),t.jsx("div",{className:"flex justify-center items-center space-x-4 mb-6",children:pe.sequence.map((j,D)=>t.jsx("div",{className:"text-6xl animate-pulse-gentle",style:{animationDelay:`${D*.2}s`},children:j},D))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:pe.options.map((j,D)=>t.jsx("button",{onClick:()=>Hr(j),className:"bg-gradient-to-r from-blue-100 to-cyan-100 hover:from-blue-200 hover:to-cyan-200 border-3 border-blue-300 hover:border-blue-500 rounded-2xl p-6 text-xl font-semibold transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300",children:j},D))})]}),pe.items&&!pe.options&&t.jsxs("div",{children:[t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:Array.from({length:pe.items.length},(j,D)=>t.jsxs("div",{className:"bg-yellow-100 border-3 border-yellow-400 rounded-xl p-4 h-24 flex items-center justify-center text-center relative",onDrop:U=>{U.preventDefault();const Q=JSON.parse(U.dataTransfer.getData("text/plain"));Ka(Q,D)},onDragOver:U=>U.preventDefault(),children:[t.jsx("div",{className:"absolute -top-2 -left-2 bg-yellow-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm",children:D+1}),t.jsx("div",{className:"text-lg font-medium",children:_s.find(U=>U.position===D)?.content||"Drop here"})]},D))}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:pe.items.map((j,D)=>t.jsx("div",{draggable:!0,onDragStart:U=>U.dataTransfer.setData("text/plain",JSON.stringify(j)),className:`bg-gradient-to-r from-cyan-100 to-blue-100 border-3 border-cyan-300 rounded-xl p-4 text-center cursor-move transition-all duration-300 transform hover:scale-105 ${_s.some(U=>U.id===j.id)?"opacity-50":"hover:shadow-lg"}`,children:t.jsx("div",{className:"text-lg font-medium text-cyan-800",children:j.content})},j.id))}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{onClick:Ll,disabled:_s.length!==pe.items.length,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-2xl font-bold text-xl transition-all duration-300 transform hover:scale-105 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-green-300",children:[t.jsx("span",{className:"text-2xl mr-2",children:""}),"Check Order"]})})]})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4",children:[Un&&t.jsxs("button",{onClick:()=>{const j=zt[i]?.[s]?.["Academic Puzzles"]?.length||1;x<j-1?(p(D=>D+1),$a(!1),Nr(!1),Ji()):X(!0)},className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-bold text-xl transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300",children:[t.jsx("span",{className:"text-2xl mr-2",children:x<(zt[i]?.[s]?.["Academic Puzzles"]?.length||1)-1?"":""}),x<(zt[i]?.[s]?.["Academic Puzzles"]?.length||1)-1?"Next Puzzle":"Finish",t.jsx("span",{className:"text-xl ml-2 animate-float",children:""})]}),!qt&&!Un&&t.jsxs("button",{onClick:()=>Ha(!0),className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white px-6 py-3 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-yellow-300",children:[t.jsx("span",{className:"text-xl mr-2",children:""}),"Get Hint"]})]}),O&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:it,src:Br}),t.jsx("img",{src:oe,alt:"Correct",className:"w-100 h-100 object-contain"})]}),T&&t.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm flex flex-col justify-center items-center z-50 rounded-2xl",children:[t.jsx("audio",{ref:tt,src:Pr}),t.jsx("img",{src:"/assets/NiceTry.png",alt:"Nice Try",className:"w-64 h-64 object-contain"})]})]}),P&&J&&t.jsx("div",{className:"fixed top-20 right-4 z-40 animate-slide-in-right",children:t.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 text-white p-4 rounded-2xl shadow-2xl border-2 border-white/30 backdrop-blur-sm flex items-center space-x-3 min-w-[280px]",children:[t.jsx("div",{className:"text-3xl animate-bounce-gentle",children:J.icon}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-lg",children:J.name}),t.jsx("div",{className:"text-sm opacity-90",children:J.message})]}),t.jsx("div",{className:"text-2xl animate-pulse-gentle",children:""})]})}),K&&t.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-black/30 via-purple-900/20 to-pink-900/20 backdrop-blur-md z-50 animate-fade-in",children:[t.jsx(nx,{width:window.innerWidth,height:window.innerHeight}),t.jsx("audio",{ref:lr,src:tu}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-12 w-[500px] shadow-2xl text-center relative border border-white/30 overflow-hidden animate-modal-appear",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50/50 via-pink-50/50 to-blue-50/50"}),t.jsx("div",{className:"absolute -top-12 -right-12 w-32 h-32 bg-gradient-to-bl from-purple-200/30 to-transparent rounded-full blur-2xl animate-float"}),t.jsx("div",{className:"absolute -bottom-8 -left-8 w-24 h-24 bg-gradient-to-tr from-pink-200/30 to-transparent rounded-full blur-xl animate-float-delayed"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"relative mb-6",children:[t.jsx("div",{className:"text-8xl animate-bounce-gentle drop-shadow-2xl",children:""}),t.jsx("div",{className:"absolute -top-2 -right-4 text-4xl animate-spin-slow",children:""}),t.jsx("div",{className:"absolute -bottom-2 -left-4 text-3xl animate-float",children:""}),t.jsx("div",{className:"absolute top-2 left-8 text-2xl animate-pulse-gentle",children:""})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border-2 border-purple-200/50",children:[t.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4 animate-text-shimmer",children:"Amazing Work!"}),t.jsxs("div",{className:"bg-blue/70 backdrop-blur-sm rounded-xl p-4 border border-purple-100",children:[t.jsxs("p",{className:"text-2xl font-bold text-gray-800 mb-2",children:["You scored ",t.jsx("span",{className:"text-3xl text-purple-600",children:C})," out of ",t.jsx("span",{className:"text-3xl text-pink-600",children:Lt||sa?5:Qt}),"!"]}),n==="Cashier Game"&&t.jsxs("p",{className:"text-xl font-bold text-green-600 mb-2",children:["Cashier Points: ",t.jsx("span",{className:"text-2xl",children:_})," "]}),n==="Safe Street Crossing"&&t.jsxs("p",{className:"text-xl font-bold text-green-600 mb-2",children:["Safety Score: ",t.jsx("span",{className:"text-2xl",children:$t}),"/5 "]}),t.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-3",children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:""}),t.jsx("span",{className:"text-lg font-semibold text-gray-700",children:Lt?Fe===5?"Perfect Hygiene Hero!":Fe>=4?"Excellent Hygiene!":Fe>=3?"Great Job Learning!":"Keep Practicing!":n==="Safe Street Crossing"?$t===5?"Perfect Safety Champion!":$t>=4?"Excellent Street Safety!":$t>=3?"Great Job Staying Safe!":"Keep Learning Safety!":C===Qt?"Perfect Score!":C>=Qt*.8?"Excellent!":C>=Qt*.6?"Great Job!":"Keep Learning!"}),t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:""})]})]})]}),t.jsxs("button",{className:"bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 hover:from-green-600 hover:via-blue-600 hover:to-purple-600 text-white px-10 py-4 rounded-2xl cursor-pointer text-xl font-bold transition-all duration-300 shadow-2xl transform hover:scale-110 flex items-center mx-auto space-x-3 border-2 border-white/30 backdrop-blur-sm",onClick:us,children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:""}),t.jsx("span",{children:"Continue Adventure"}),t.jsx("span",{className:"text-xl animate-float",children:""})]})]})]})]}),ee&&t.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-black/40 via-purple-900/30 to-pink-900/30 backdrop-blur-md z-50 animate-fade-in",children:[t.jsx(nx,{width:window.innerWidth,height:window.innerHeight,colors:["#FFD700","#FFA500","#FF6347","#9370DB","#00CED1","#FF69B4"],numberOfPieces:200,recycle:!0,run:ee}),t.jsx("audio",{ref:ft,src:mt}),t.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl p-8 max-w-2xl w-full mx-4 shadow-2xl text-center relative border border-white/30 overflow-hidden animate-modal-appear max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-50/50 via-purple-50/50 to-blue-50/50"}),t.jsx("div",{className:"absolute -top-16 -right-16 w-40 h-40 bg-gradient-to-bl from-yellow-200/30 to-transparent rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute -bottom-12 -left-12 w-32 h-32 bg-gradient-to-tr from-purple-200/30 to-transparent rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute top-20 left-20 w-24 h-24 bg-gradient-to-br from-pink-200/20 to-transparent rounded-full blur-xl animate-pulse-gentle"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"mb-8",children:(()=>{const j=w2(q);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative mb-6",children:[t.jsx("div",{className:"text-8xl animate-bounce-gentle drop-shadow-2xl",children:""}),t.jsx("div",{className:"absolute -top-4 -right-8 text-4xl animate-spin-slow",children:""}),t.jsx("div",{className:"absolute -bottom-4 -left-8 text-3xl animate-float",children:j.emotion}),t.jsx("div",{className:"absolute top-8 left-16 text-2xl animate-pulse-gentle",children:""})]}),t.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-purple-50 rounded-2xl p-2 mb-6 border-2 border-amber-200/50",children:[t.jsx("h2",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-amber-600 via-purple-600 to-blue-600 mb-3 animate-text-shimmer",children:j.title}),t.jsx("p",{className:"text-lg text-gray-700 font-semibold mb-2",children:j.message})]})]})})()}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 max-h-60 overflow-y-auto",children:q.map((j,D)=>t.jsxs("div",{className:`
                      bg-gradient-to-br ${j.gradient} p-6 rounded-2xl shadow-2xl transform 
                      hover:scale-105 transition-all duration-300 border-2 border-white/30 
                      backdrop-blur-sm animate-badge-appear relative overflow-hidden group
                      ${j.rarity==="legendary"?"ring-4 ring-yellow-300/60 shadow-yellow-200/30":j.rarity==="epic"?"ring-3 ring-purple-300/60 shadow-purple-200/30":j.rarity==="rare"?"ring-2 ring-blue-300/60 shadow-blue-200/30":"shadow-gray-200/20"}
                    `,style:{animationDelay:`${D*.15}s`},children:[t.jsx("div",{className:`
                      absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold uppercase
                      ${j.rarity==="legendary"?"bg-yellow-200/90 text-yellow-900":j.rarity==="epic"?"bg-purple-200/90 text-purple-900":j.rarity==="rare"?"bg-blue-200/90 text-blue-900":"bg-gray-200/90 text-gray-800"}
                      transform group-hover:scale-110 transition-transform duration-300
                    `,children:j.rarity}),t.jsx("div",{className:"absolute top-2 left-2 bg-white/20 backdrop-blur-sm rounded-full px-2 py-1",children:t.jsxs("span",{className:"text-xs font-bold text-white",children:["+",j.points,"pts"]})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent skew-x-12 -translate-x-full group-hover:animate-shine"}),t.jsxs("div",{className:"text-center text-white relative z-10",children:[t.jsx("div",{className:"text-5xl mb-3 animate-bounce-gentle drop-shadow-lg transform group-hover:scale-110 transition-transform duration-300",children:j.icon}),t.jsx("h3",{className:"text-xl font-bold mb-2 drop-shadow-sm",children:j.name}),t.jsx("p",{className:"text-sm opacity-90 leading-relaxed",children:j.description})]})]},j.id))}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("button",{className:"flex-1 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 hover:from-green-600 hover:via-blue-600 hover:to-purple-600 text-white px-8 py-4 rounded-2xl text-xl font-bold transition-all duration-300 shadow-2xl transform hover:scale-105 flex items-center justify-center space-x-3 border-2 border-white/30 backdrop-blur-sm group",onClick:()=>{if(re(!1),Ir||n==="Visual Memory Challenge"){const j=Ur>0?Math.round(ks/Ur*100):0;l(C,Qt,{correctAnswers:ks,wrongAnswers:ea,totalAttempts:Ur,accuracyPercentage:j,finalScore:ks,maxPossibleScore:3})}else l(C,Qt);ia(C,Qt)},children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle group-hover:animate-spin-slow",children:""}),t.jsx("span",{children:"Continue Adventure"}),t.jsx("span",{className:"text-xl animate-float",children:""})]}),t.jsxs("button",{className:"flex-1 bg-gradient-to-r from-amber-100 via-yellow-100 to-amber-200 hover:from-amber-200 hover:via-yellow-200 hover:to-amber-300 text-amber-800 px-8 py-4 rounded-2xl text-lg font-bold transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-3 border-2 border-amber-200/50",onClick:()=>c("/studentpage"),children:[t.jsx("span",{className:"text-xl animate-bounce-gentle",children:""}),t.jsx("span",{children:"View Collection"}),t.jsx("span",{className:"text-lg animate-pulse-gentle",children:""})]})]})]})]})]}),t.jsx("style",{children:`
        /* Gentle floating animations */
        @keyframes float {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            filter: brightness(1);
          }
          50% { 
            transform: translateY(-8px) rotate(1deg); 
            filter: brightness(1.05);
          }
        }
        
        @keyframes float-delayed {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            filter: brightness(1);
          }
          50% { 
            transform: translateY(-6px) rotate(-0.5deg); 
            filter: brightness(1.03);
          }
        }
        
        .animate-float {
          animation: float 3.5s ease-in-out infinite;
        }
        
        .animate-float-delayed {
          animation: float-delayed 4s ease-in-out infinite;
          animation-delay: 1.2s;
        }
        
        /* Gentle bouncing */
        @keyframes bounce-gentle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-4px); }
        }
        
        .animate-bounce-gentle {
          animation: bounce-gentle 2s ease-in-out infinite;
        }
        
        /* Gentle pulsing */
        @keyframes pulse-gentle {
          0%, 100% { 
            transform: scale(1); 
            opacity: 1; 
          }
          50% { 
            transform: scale(1.02); 
            opacity: 0.95; 
          }
        }
        
        @keyframes success-pulse {
          0%, 100% { 
            transform: scale(1.05); 
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.4); 
          }
          50% { 
            transform: scale(1.08); 
            box-shadow: 0 0 40px rgba(34, 197, 94, 0.6); 
          }
        }
        
        .animate-pulse-gentle {
          animation: pulse-gentle 2.5s ease-in-out infinite;
        }
        
        .animate-success-pulse {
          animation: success-pulse 1.5s ease-in-out infinite;
        }
        
        /* Slide and scale animations */
        @keyframes fade-in-scale {
          from {
            opacity: 0;
            transform: scale(0.95) translateY(20px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        
        @keyframes modal-appear {
          from {
            opacity: 0;
            transform: scale(0.9) translateY(-30px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        
        @keyframes slide-in-right {
          from {
            opacity: 0;
            transform: translateX(20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        .animate-fade-in-scale {
          animation: fade-in-scale 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-modal-appear {
          animation: modal-appear 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.5s ease-out;
        }
        
        /* Badge preview slide animation */
        @keyframes badge-slide-in {
          from {
            opacity: 0;
            transform: translateX(100%) scale(0.8);
          }
          to {
            opacity: 1;
            transform: translateX(0) scale(1);
          }
        }
        
        .animate-slide-in-right {
          animation: badge-slide-in 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Text effects */
        @keyframes text-shimmer {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        .animate-text-shimmer {
          background-size: 200% 200%;
          animation: text-shimmer 3s ease-in-out infinite;
        }
        
        /* Slow gentle spin */
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
          animation: spin-slow 8s linear infinite;
        }
        
        /* Fade in */
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        .animate-fade-in {
          animation: fade-in 0.4s ease-out;
        }
        
        /* Badge specific animations */
        @keyframes badge-appear {
          from {
            opacity: 0;
            transform: scale(0.5) rotate(180deg);
          }
          to {
            opacity: 1;
            transform: scale(1) rotate(0deg);
          }
        }
        
        @keyframes shine {
          from {
            transform: translateX(-100%) skewX(-12deg);
          }
          to {
            transform: translateX(200%) skewX(-12deg);
          }
        }
        
        .animate-badge-appear {
          animation: badge-appear 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-shine {
          animation: shine 2s ease-in-out infinite;
          animation-delay: 1s;
        }
        
        /* Slide across animation for menu items */
        @keyframes slide-across {
          from {
            transform: translateX(-100%);
          }
          to {
            transform: translateX(100%);
          }
        }
        
        .animate-slide-across {
          animation: slide-across 0.6s ease-in-out;
        }
        
        /* Connection line drawing animation */
        @keyframes draw-line {
          from {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
          }
          to {
            stroke-dasharray: 1000;
            stroke-dashoffset: 0;
          }
        }
        
        .animate-draw-line {
          animation: draw-line 0.8s ease-in-out forwards;
        }
        
        /* Memory Game Card Shuffle Animation - Physical Movement */
        @keyframes card-shuffle {
          0% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          20% {
            transform: translateY(-30px) scale(1.05);
            opacity: 0.9;
          }
          50% {
            transform: translateY(-40px) scale(1.1) rotateZ(5deg);
            opacity: 0.8;
            z-index: 100;
          }
          80% {
            transform: translateY(-30px) scale(1.05);
            opacity: 0.9;
          }
          100% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
        }
        
        .animate-card-shuffle {
          animation: card-shuffle 1.8s ease-in-out;
        }
        
        /* Card Flip Animation */
        @keyframes flip-card {
          0% {
            transform: rotateY(0deg);
          }
          50% {
            transform: rotateY(90deg);
          }
          100% {
            transform: rotateY(180deg);
          }
        }
        
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
        
        .backface-hidden {
          backface-visibility: hidden;
          -webkit-backface-visibility: hidden;
        }
        
        /* Memory Timer Pulse */
        @keyframes timer-pulse {
          0%, 100% {
            transform: scale(1);
            opacity: 1;
          }
          50% {
            transform: scale(1.1);
            opacity: 0.8;
          }
        }
        
        /* Accessibility: Reduce motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
        
        /* Enhanced focus styles for accessibility */
        button:focus-visible {
          outline: 3px solid #8b5cf6;
          outline-offset: 3px;
          box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.2);
        }
      `}),t.jsx("audio",{ref:Ye})]})},N2=({onProfileClick:i})=>{const s=ut(),{user:n}=Vr(),l=()=>s("/studentprofile");return t.jsx("header",{className:"bg-blue-500 text-white  ",children:t.jsxs("div",{className:" container -my-1 mx-auto px-6 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("img",{src:"/assets/logo.png",alt:"AutiSync Logo",className:"w-16 h-16 object-contain"}),t.jsx("h1",{className:"text-2xl font-bold text-white bg-clip-text S",children:"AutiSync v2.0"})]}),t.jsxs("nav",{className:"flex items-center text-lg space-x-6 absolute left-1/2 transform -translate-x-1/2",children:[t.jsx("a",{href:"/home",className:"text-white hover:text-blue-900 transition-colors duration-200 flex items-center",children:"Home"}),t.jsx("a",{href:"/flashcardspage",className:"text-white hover:text-blue-900 transition-colors duration-200 flex items-center",children:"Activities"}),t.jsx("a",{href:"/studentpage",className:"text-white  hover:text-blue-900 transition-colors duration-200 flex items-center",children:"Learning Hub"})]}),t.jsxs("div",{onClick:l,className:"cursor-pointer group flex items-center space-x-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-1 w-23 hover:shadow-lg transition-all duration-300",children:[t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"w-8 h-8 rounded-xl object-cover border-2 border-white shadow-sm group-hover:scale-105 transition-transform duration-300"}),t.jsx("span",{className:"hidden sm:block text-sm font-semibold text-gray-700",children:n?.user_metadata?.username||n?.user_metadata?.full_name?.split(" ")[0]||"User"})]})]})})},S2=()=>{const{showChatBar:i,setShowChatBar:s,roomNumber:n,chatMessages:l,messageInput:c,setMessageInput:d,handleSendMessage:h,leaveRoom:g,currentUserId:x}=Wx(),p=m.useRef(null);m.useEffect(()=>{p.current&&p.current.scrollIntoView({behavior:"smooth"})},[l]);const b=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),h())},y=async()=>{await g()};return i?t.jsxs("aside",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 backdrop-blur-xl shadow-2xl border border-white/20 w-full sm:w-80 lg:w-96 h-screen sm:h-[calc(100vh-56px)] fixed top-0 sm:top-[56px] left-0 z-50 flex flex-col transition-all duration-500 ease-in-out transform animate-slide-in",children:[t.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-4 shadow-xl flex-shrink-0 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 bg-white/10 opacity-20",children:[t.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full animate-float"}),t.jsx("div",{className:"absolute top-1/2 -left-8 w-16 h-16 bg-white/10 rounded-full animate-float-delayed"})]}),t.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm border border-white/30 shadow-lg",children:t.jsx("span",{className:"text-2xl animate-bounce",children:""})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("h3",{className:"text-xl font-bold text-white truncate flex items-center",children:["Chat with Friends",t.jsx("span",{className:"ml-2 text-yellow-300 animate-pulse",children:""})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-ping"}),t.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse absolute"}),t.jsxs("p",{className:"text-sm text-white/90 truncate ml-2",children:["Room: ",t.jsx("span",{className:"font-bold text-yellow-300",children:n})]})]})]})]}),t.jsx("button",{onClick:y,className:"w-10 h-10 bg-red-500/90 hover:bg-red-600 text-white rounded-xl transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-110 hover:rotate-90 focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer",title:"Leave Room",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.length===0&&t.jsxs("div",{className:"p-6 text-center flex-shrink-0 animate-fade-in-up",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-20 h-20 bg-gradient-to-r from-yellow-300/30 to-pink-300/30 rounded-full animate-pulse"})]}),t.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/20",children:[t.jsx("h4",{className:"text-xl font-bold mb-2 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Welcome to Chat! "}),t.jsx("div",{className:"flex justify-center space-x-2 mt-3",children:["","",""].map((w,S)=>t.jsx("span",{className:"text-lg animate-twinkle",style:{animationDelay:`${S*.3}s`},children:w},S))})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 relative",children:[t.jsxs("div",{className:"absolute inset-0 opacity-5",children:[t.jsx("div",{className:"absolute top-4 right-4 w-32 h-32 bg-purple-300 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-8 left-8 w-24 h-24 bg-pink-300 rounded-full blur-2xl"})]}),t.jsx("div",{className:"relative z-10 space-y-4",children:l.map((w,S)=>{const C=w.user_id===x,R=w.user_profiles?.full_name||w.user_profiles?.username||"Friend";return console.log(" Message Render:",{text:w.text?.substring(0,30),msgUserId:w.user_id,currentUserId:x,isCurrentUser:C,senderName:R}),t.jsx("div",{className:`flex ${C?"justify-end":"justify-start"} animate-message-appear`,style:{animationDelay:`${S*.1}s`},children:t.jsxs("div",{className:"flex flex-col max-w-[85%] sm:max-w-[80%]",children:[t.jsxs("div",{className:`p-4 rounded-2xl text-sm shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl relative overflow-hidden ${C?"bg-gradient-to-br from-purple-500 via-purple-600 to-pink-600 text-white rounded-br-sm":"bg-white text-gray-800 border-2 border-gray-200 rounded-bl-sm"}`,children:[C&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"}),t.jsx("p",{className:"leading-relaxed break-words relative z-10 mb-2",children:w.text}),t.jsx("div",{className:`text-xs opacity-70 ${C?"text-white/90":"text-gray-500"}`,children:new Date(w.created_at||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),t.jsx("div",{className:`text-xs mt-1 px-2 font-medium ${C?"text-right text-purple-700":"text-left text-gray-600"}`,children:C?"You":R})]})},w.id)})}),t.jsx("div",{ref:p})]}),t.jsxs("div",{className:"p-4 bg-white/70 backdrop-blur-xl border-t-2 border-gradient-to-r from-purple-200 to-pink-200 flex-shrink-0 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-50/50 to-pink-50/50"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"flex space-x-2 mb-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-purple-300 scrollbar-track-transparent",children:["","","","","","","",""].map((w,S)=>t.jsx("button",{onClick:()=>d(C=>C+w),className:"text-2xl p-3 bg-gradient-to-br from-white to-gray-50 hover:from-purple-50 hover:to-pink-50 rounded-2xl transition-all duration-300 transform hover:scale-110 hover:rotate-12 shadow-md hover:shadow-lg border border-purple-100 flex-shrink-0 min-w-[3rem]",title:`Add ${w} to message`,style:{animationDelay:`${S*.1}s`},children:t.jsx("span",{className:"animate-bounce-subtle",children:w})},w))}),t.jsx("div",{className:"relative",children:t.jsxs("div",{className:"relative bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border-2 border-purple-200/50 transition-all duration-300 focus-within:border-purple-400 focus-within:shadow-xl",children:[t.jsx("textarea",{value:c,onChange:w=>d(w.target.value),onKeyPress:b,placeholder:"write your message...",className:"w-full p-4 pr-16 border-none rounded-2xl resize-none h-17 text-sm bg-transparent focus:outline-none placeholder-gray-400 transition-all duration-300",maxLength:200}),t.jsxs("div",{className:`absolute bottom-2 right-16 text-xs transition-colors duration-300 ${c.length>180?"text-red-500 font-bold":c.length>150?"text-yellow-600":"text-gray-400"}`,children:[c.length,"/200"]}),t.jsx("button",{onClick:h,disabled:!c.trim(),className:`absolute bottom-2 right-2 w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 transform ${c.trim()?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:scale-110 hover:rotate-12 shadow-lg hover:shadow-xl animate-pulse-gentle":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,title:"Send message",children:t.jsx("svg",{className:"w-4 h-4 transform rotate-45",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})})]})]}),t.jsx("style",{jsx:!0,children:`
        /* Modern slide-in animation for chat bar */
        @keyframes slide-in {
          from {
            transform: translateX(-100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        .animate-slide-in {
          animation: slide-in 0.5s ease-out;
        }
        
        /* Enhanced message animations */
        @keyframes message-appear {
          from {
            opacity: 0;
            transform: translateY(20px) scale(0.9);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        
        .animate-message-appear {
          animation: message-appear 0.4s ease-out;
        }
        
        /* Floating animations for header elements */
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        @keyframes float-delayed {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-15px) rotate(-3deg); }
        }
        
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        
        .animate-float-delayed {
          animation: float-delayed 8s ease-in-out infinite;
        }
        
        /* Gentle animations for autism-friendly design */
        @keyframes bounce-gentle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }
        
        @keyframes pulse-gentle {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
        
        @keyframes bounce-subtle {
          0%, 100% { transform: translateY(0); }
          25% { transform: translateY(-2px); }
          75% { transform: translateY(-1px); }
        }
        
        .animate-bounce-gentle {
          animation: bounce-gentle 2s ease-in-out infinite;
        }
        
        .animate-pulse-gentle {
          animation: pulse-gentle 2s ease-in-out infinite;
        }
        
        .animate-bounce-subtle {
          animation: bounce-subtle 2s ease-in-out infinite;
        }
        
        /* Twinkle animation for stars */
        @keyframes twinkle {
          0%, 100% { opacity: 0.5; transform: scale(1); }
          50% { opacity: 1; transform: scale(1.2); }
        }
        
        .animate-twinkle {
          animation: twinkle 1.5s ease-in-out infinite;
        }
        
        /* Shimmer effect */
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        
        .animate-shimmer {
          animation: shimmer 2s ease-in-out infinite;
        }
        
        /* Fade in up animation */
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-fade-in-up {
          animation: fade-in-up 0.6s ease-out;
        }
        
        /* Slow spin for decorative elements */
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
          animation: spin-slow 8s linear infinite;
        }
        
        /* Enhanced scrollbar */
        .scrollbar-thin {
          scrollbar-width: thin;
        }
        
        .scrollbar-thin::-webkit-scrollbar {
          width: 6px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
          background: transparent;
          border-radius: 3px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
          background: linear-gradient(to bottom, #a855f7, #ec4899);
          border-radius: 3px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(to bottom, #9333ea, #db2777);
        }
        
        /* Accessibility and reduced motion */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
        
        /* Enhanced focus styles for accessibility */
        button:focus-visible {
          outline: 2px solid #a855f7;
          outline-offset: 2px;
          box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.1);
        }
        
        textarea:focus-visible {
          outline: 2px solid #a855f7;
          outline-offset: 2px;
          box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.1);
        }
        
        /* Smooth hover effects */
        .transition-hover {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Gradient border animation */
        @keyframes gradient-border {
          0% { border-image-source: linear-gradient(45deg, #a855f7, #ec4899, #f59e0b); }
          33% { border-image-source: linear-gradient(45deg, #ec4899, #f59e0b, #a855f7); }
          66% { border-image-source: linear-gradient(45deg, #f59e0b, #a855f7, #ec4899); }
          100% { border-image-source: linear-gradient(45deg, #a855f7, #ec4899, #f59e0b); }
        }
      `})]}):null},_2=()=>{ut();const[i,s]=m.useState(null),[n,l]=m.useState(null),[c,d]=m.useState(null),[h,g]=m.useState(!1),[x,p]=m.useState(!1),b=Ps.useRef(null),[y,w]=m.useState(!0);Sd();const{showChatBar:S,setShowChatBar:C,roomNumber:R,setRoomNumber:O,joinRoom:M,isJoining:T}=Wx(),B=E=>{s(E),E==="Social / Daily Life Skill"&&(l("Beginner"),p(!0))},K=E=>{l(E),p(!0)},X=E=>{d(E),p(!1),b.current&&(b.current.pause(),w(!1))},ee=(E,A)=>{C(!1),s(null),l(null),d(null),b.current&&(b.current.currentTime=0,b.current.play(),w(!0)),console.log(`Completed with score: ${E}/${A}`)},re=()=>{g(!0)},q=E=>{O(E.target.value)},z=async()=>{if(!R||!R.trim()){alert("Please enter a valid room number");return}const{room:E,error:A}=await M(R);if(A){console.error("Failed to join room:",A),alert(A.message||"Failed to join room. Please try again.");return}g(!1),console.log("Successfully joined room:",E)};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-blue-200/20 rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute top-1/2 right-20 w-48 h-48 bg-purple-200/20 rounded-full blur-2xl animate-float-delayed"}),t.jsx("div",{className:"absolute bottom-20 left-1/3 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-bounce-gentle"}),t.jsx("div",{className:"absolute top-1/4 right-1/4 w-16 h-16 bg-yellow-200/30 rounded-full blur-lg animate-pulse-gentle"})]}),t.jsx(N2,{}),t.jsx(S2,{}),t.jsx("audio",{ref:b,src:"/assets/sounds/game-bgmusic.mp3",autoPlay:!0,loop:!0,style:{display:"none"}}),t.jsx("div",{className:"h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 animate-gradient-flow"}),t.jsxs("main",{className:`transition-all duration-500 relative z-10 ${S?"sm:ml-80 lg:ml-96":""} max-w-none sm:max-w-7xl mx-auto `,children:[(!i||!n||!c)&&t.jsx("div",{className:"text-center mb-12 sm:mb-16 animate-fade-in-scale",children:t.jsxs("div",{className:"sm:mb-15 relative",children:[t.jsx("div",{className:"absolute top-14 -left-4 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full opacity-60 animate-float"}),t.jsx("div",{className:"absolute -bottom-34 -right-4 w-6 h-6 bg-gradient-to-br from-pink-400 to-purple-400 rounded-full opacity-60 animate-float-delayed"}),t.jsx("div",{className:"absolute top-10 -right-8 w-4 h-4 bg-gradient-to-br from-blue-400 to-indigo-400 rounded-full opacity-60 animate-bounce-gentle"}),t.jsx("div",{className:"absolute top-34 left-4 text-3xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute -bottom-24 right-4 text-2xl animate-float",children:""})]})}),t.jsx("div",{className:"relative",children:i?n?c?t.jsx("div",{className:"transform transition-all duration-700 ease-out animate-fade-in-scale",children:t.jsx(j2,{category:i,difficulty:n,activity:c,onComplete:ee})}):t.jsx("div",{className:"transform transition-all duration-700 ease-out animate-slide-up",children:t.jsxs("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl p-6 sm:p-10 border border-white/20 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50/50 via-purple-50/50 to-pink-50/50"}),t.jsx("div",{className:"absolute -top-16 -right-16 w-64 h-64 bg-gradient-to-bl from-purple-200/20 to-transparent rounded-full blur-3xl animate-float"}),t.jsx("div",{className:"absolute -bottom-16 -left-16 w-48 h-48 bg-gradient-to-tr from-pink-200/20 to-transparent rounded-full blur-2xl animate-float-delayed"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6 mb-8",children:[t.jsxs("div",{className:"text-center sm:text-left",children:[t.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-800 flex items-center justify-center sm:justify-start mb-2",children:[t.jsx("span",{className:"text-4xl sm:text-5xl mr-3 animate-spin-slow",children:""}),"Ready to Start!"]}),t.jsx("p",{className:"text-lg text-gray-600",children:"Everything looks perfect! Let's begin your adventure!"})]}),t.jsxs("button",{onClick:()=>l(null),className:"cursor-pointer bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 px-6 py-3 rounded-2xl transition-all duration-300 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:scale-105",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{className:"font-semibold",children:"Go Back"})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 rounded-3xl p-8 mb-10 border-2 border-purple-100 relative",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-100/20 via-purple-100/20 to-pink-100/20 rounded-3xl animate-pulse-gentle"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-6",children:"Your Perfect Selection:"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-6 sm:space-y-0 sm:space-x-12",children:[t.jsxs("div",{className:"text-center transform hover:scale-110 transition-all duration-300",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl flex items-center justify-center mb-4 shadow-xl",children:t.jsx("div",{className:"text-4xl animate-bounce-gentle",children:""})}),t.jsx("div",{className:"font-bold text-lg text-gray-700",children:i})]}),t.jsx("div",{className:"text-6xl text-gray-300 hidden sm:block animate-pulse-gentle",children:""}),t.jsxs("div",{className:"text-center transform hover:scale-110 transition-all duration-300",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-3xl flex items-center justify-center mb-4 shadow-xl",children:t.jsx("div",{className:"text-4xl animate-bounce-gentle",children:""})}),t.jsx("div",{className:"font-bold text-lg text-gray-700",children:n})]})]})]})]}),t.jsxs("button",{onClick:()=>p(!0),className:"bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-500 hover:from-indigo-600 hover:via-purple-700 hover:to-pink-600 text-white px-10 py-5 rounded-3xl text-xl sm:text-2xl font-bold shadow-2xl transform hover:scale-110 transition-all duration-300 flex items-center mx-auto space-x-4 border-4 border-white/20 backdrop-blur-sm",children:[t.jsx("span",{className:"text-3xl animate-bounce-gentle",children:""}),t.jsx("span",{children:"Choose Your Activity"}),t.jsx("span",{className:"text-3xl animate-float",children:""})]})]})]})}):t.jsx("div",{className:"-mt-10 transform transition-all duration-700 ease-out sm:space-y-8 animate-slide-up",children:t.jsx(e2,{onSelectDifficulty:K,selectedCategory:i,onGoBack:()=>s(null),onJoinFriend:re})}):t.jsx("div",{className:"transform transition-all duration-700 ease-out -mt-10 animate-slide-up",children:t.jsx(X1,{onSelectCategory:B,onJoinFriend:re})})})]}),t.jsx(r2,{isOpen:x,onClose:()=>p(!1),onSelect:X,selectedCategory:i}),h&&t.jsx("div",{className:"fixed inset-0 backdrop-blur-md bg-gradient-to-br from-black/40 via-purple-900/20 to-pink-900/20 z-50 flex items-center justify-center p-4 animate-fade-in",children:t.jsxs("div",{className:"bg-white/90 backdrop-blur-xl p-8 sm:p-10 rounded-3xl shadow-2xl w-full max-w-md transform transition-all duration-500 scale-100 border border-white/20 relative overflow-hidden animate-modal-appear",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50/30 to-pink-50/30"}),t.jsx("div",{className:"absolute -top-12 -right-12 w-32 h-32 bg-gradient-to-bl from-purple-200/20 to-transparent rounded-full blur-2xl animate-float"}),t.jsx("div",{className:"absolute -bottom-8 -left-8 w-24 h-24 bg-gradient-to-tr from-pink-200/20 to-transparent rounded-full blur-xl animate-float-delayed"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"relative inline-block mb-4",children:[t.jsx("div",{className:"text-7xl animate-bounce-gentle",children:""}),t.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-400 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-xs animate-pulse",children:""})})]}),t.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-3",children:"Join a Friend! "})]}),t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Room number (e.g., 1234)",className:"w-full p-4 border-3 border-purple-200 rounded-2xl text-lg text-center font-bold bg-white/70 backdrop-blur-sm focus:border-purple-500 focus:outline-none focus:ring-4 focus:ring-purple-200/50 transition-all duration-300 shadow-lg",value:R,onChange:q}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-2xl animate-pulse",children:""})]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4",children:[t.jsx("button",{className:`flex-1 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 hover:from-purple-600 hover:via-pink-600 hover:to-purple-700 text-white px-6 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl flex items-center justify-center space-x-3 ${T?"opacity-70 cursor-not-allowed":""}`,onClick:z,disabled:T,children:T?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-2xl animate-spin",children:""}),t.jsx("span",{children:"Joining..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-2xl animate-bounce-gentle",children:""}),t.jsx("span",{children:"Join Room"}),t.jsx("span",{className:"text-xl animate-pulse",children:""})]})}),t.jsx("button",{className:"flex-1 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 px-6 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg",onClick:()=>g(!1),disabled:T,children:"Cancel"})]})]})]})}),t.jsx("style",{children:`
        /* Gentle floating animations */
        @keyframes float {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            filter: brightness(1);
          }
          50% { 
            transform: translateY(-12px) rotate(2deg); 
            filter: brightness(1.1);
          }
        }
        
        @keyframes float-delayed {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            filter: brightness(1);
          }
          50% { 
            transform: translateY(-8px) rotate(-1deg); 
            filter: brightness(1.05);
          }
        }
        
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
        
        .animate-float-delayed {
          animation: float-delayed 5s ease-in-out infinite;
          animation-delay: 1s;
        }
        
        /* Gentle bouncing - autism-friendly */
        @keyframes bounce-gentle {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-6px); }
        }
        
        @keyframes bounce-in {
          0% { transform: scale(0.5) rotate(180deg); opacity: 0; }
          50% { transform: scale(1.1) rotate(0deg); }
          100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .animate-bounce-gentle {
          animation: bounce-gentle 2.5s ease-in-out infinite;
        }
        
        .animate-bounce-in {
          animation: bounce-in 0.6s ease-out;
        }
        
        /* Gentle pulsing effects */
        @keyframes pulse-gentle {
          0%, 100% { 
            transform: scale(1); 
            opacity: 1; 
          }
          50% { 
            transform: scale(1.03); 
            opacity: 0.9; 
          }
        }
        
        @keyframes success-pulse {
          0%, 100% { 
            transform: scale(1); 
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3); 
          }
          50% { 
            transform: scale(1.05); 
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.5); 
          }
        }
        
        .animate-pulse-gentle {
          animation: pulse-gentle 3s ease-in-out infinite;
        }
        
        .animate-success-pulse {
          animation: success-pulse 2s ease-in-out infinite;
        }
        
        /* Smooth slide and scale animations */
        @keyframes slide-up {
          from {
            opacity: 0;
            transform: translateY(40px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes fade-in-scale {
          from {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        
        @keyframes modal-appear {
          from {
            opacity: 0;
            transform: scale(0.8) translateY(-20px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        
        .animate-slide-up {
          animation: slide-up 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-fade-in-scale {
          animation: fade-in-scale 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-modal-appear {
          animation: modal-appear 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Progress filling animation */
        @keyframes progress-fill {
          from { width: 0%; }
          to { width: 100%; }
        }
        
        .animate-progress-fill {
          animation: progress-fill 0.8s ease-out;
        }
        
        /* Text shimmer effect */
        @keyframes text-shimmer {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        .animate-text-shimmer {
          background-size: 200% 200%;
          animation: text-shimmer 3s ease-in-out infinite;
        }
        
        /* Gradient flow animation */
        @keyframes gradient-flow {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        .animate-gradient-flow {
          background-size: 200% 200%;
          animation: gradient-flow 4s ease-in-out infinite;
        }
        
        /* Slow gentle spin */
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
          animation: spin-slow 10s linear infinite;
        }
        
        /* Fade in animation */
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        .animate-fade-in {
          animation: fade-in 0.5s ease-out;
        }
        
        /* Enhanced accessibility */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
        
        /* Smooth transitions for all interactive elements */
        .transition-hover {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Enhanced focus styles for accessibility */
        button:focus-visible {
          outline: 3px solid #a855f7;
          outline-offset: 3px;
          box-shadow: 0 0 0 6px rgba(168, 85, 247, 0.2);
        }
        
        input:focus-visible {
          outline: 3px solid #a855f7;
          outline-offset: 2px;
          box-shadow: 0 0 0 6px rgba(168, 85, 247, 0.15);
        }
        
        /* Active button effects */
        button:active {
          transform: scale(0.97);
        }
        
        /* Hover lift effect */
        .hover-lift:hover {
          transform: translateY(-4px);
          box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }
        
        /* Scrollbar customization */
        ::-webkit-scrollbar {
          width: 8px;
        }
        
        ::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
          background: linear-gradient(to bottom, #a855f7, #ec4899);
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(to bottom, #9333ea, #db2777);
        }
        
        /* Glassmorphism effect */
        .glass-effect {
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Loading shimmer effect */
        @keyframes loading-shimmer {
          0% { background-position: -200px 0; }
          100% { background-position: 200px 0; }
        }
        
        .loading-shimmer {
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
          background-size: 200px 100%;
          animation: loading-shimmer 1.5s infinite;
        }
      `})]})};function C2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),m.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),m.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const dt=m.forwardRef(C2);function E2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const ep=m.forwardRef(E2);function A2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const k2=m.forwardRef(A2);function T2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const tp=m.forwardRef(T2);function R2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const D2=m.forwardRef(R2);function O2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const rp=m.forwardRef(O2);function M2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const ja=m.forwardRef(M2);function z2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const Do=m.forwardRef(z2);function L2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const U2=m.forwardRef(L2);function B2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const Bs=m.forwardRef(B2);function P2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const ci=m.forwardRef(P2);function $2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),m.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const I2=m.forwardRef($2);function H2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"}))}const fd=m.forwardRef(H2);function q2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"}))}const G2=m.forwardRef(q2);function F2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const ya=m.forwardRef(F2);function Y2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"}))}const V2=m.forwardRef(Y2);function W2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),m.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const Qh=m.forwardRef(W2);function K2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M19.902 4.098a3.75 3.75 0 0 0-5.304 0l-4.5 4.5a3.75 3.75 0 0 0 1.035 6.037.75.75 0 0 1-.646 1.353 5.25 5.25 0 0 1-1.449-8.45l4.5-4.5a5.25 5.25 0 1 1 7.424 7.424l-1.757 1.757a.75.75 0 1 1-1.06-1.06l1.757-1.757a3.75 3.75 0 0 0 0-5.304Zm-7.389 4.267a.75.75 0 0 1 1-.353 5.25 5.25 0 0 1 1.449 8.45l-4.5 4.5a5.25 5.25 0 1 1-7.424-7.424l1.757-1.757a.75.75 0 1 1 1.06 1.06l-1.757 1.757a3.75 3.75 0 1 0 5.304 5.304l4.5-4.5a3.75 3.75 0 0 0-1.035-6.037.75.75 0 0 1-.354-1Z",clipRule:"evenodd"}))}const lx=m.forwardRef(K2);function Z2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const J2=m.forwardRef(Z2);function Q2({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const X2=m.forwardRef(Q2);function ej({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"}))}const tj=m.forwardRef(ej);function rj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const sj=m.forwardRef(rj);function aj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const nj=m.forwardRef(aj);function lj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))}const Xh=m.forwardRef(lj);function ij({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const sp=m.forwardRef(ij);function oj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"}),m.createElement("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"}))}const cj=m.forwardRef(oj);function dj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const uj=m.forwardRef(dj);function hj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const Yr=m.forwardRef(hj);function fj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const ap=m.forwardRef(fj);function mj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const ef=m.forwardRef(mj);function gj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const xj=m.forwardRef(gj);function pj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const yd=m.forwardRef(pj);function bj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const mn=m.forwardRef(bj);function vj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{d:"M4.5 4.5a3 3 0 0 0-3 3v9a3 3 0 0 0 3 3h8.25a3 3 0 0 0 3-3v-9a3 3 0 0 0-3-3H4.5ZM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.944-.945 2.56-.276 2.56 1.06v11.38c0 1.336-1.616 2.005-2.56 1.06Z"}))}const tf=m.forwardRef(vj);function yj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const bf=m.forwardRef(yj),ix=()=>{const i=ut(),{user:s}=Vr(),[n,l]=m.useState(""),[c,d]=m.useState(!1),[h,g]=m.useState(""),[x,p]=m.useState(!1),b=async w=>{w.preventDefault(),d(!0),g("");try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.trim()))throw new Error("Please enter a valid email address");const{data:C,error:R}=await de.from("user_profiles").select("*").eq("email",n.trim().toLowerCase()).single();if(R||!C)throw new Error(`Student not found with email "${n}". Please check the email address and ensure the student has created a profile.`);const{data:O}=await de.from("parent_child_relations").select("id").eq("parent_user_id",s.id).eq("child_user_id",C.user_id).single();if(O)throw new Error("This child is already linked to your account.");const{data:M,error:T}=await de.from("parent_child_relations").insert([{parent_user_id:s.id,child_user_id:C.user_id,parent_email:s.email,child_email:C.email,relationship_type:"parent",linked_at:new Date().toISOString()}]).select();if(T)throw new Error("Failed to link child account: "+T.message);console.log("Successfully linked child:",M),p(!0),console.log("=== REDIRECT DEBUG ==="),console.log("About to redirect to parent-dashboard in 2 seconds"),setTimeout(()=>{console.log("Executing redirect to /parent-dashboard"),i("/parent-dashboard")},2e3)}catch(S){console.error("Error linking child:",S);const C=S.message||"";if(console.log("=== ERROR HANDLING DEBUG ==="),console.log("Error message:",C),console.log("Checking for relationship already exists..."),C.includes("Relationship already exists")||C.includes("already linked")||C.includes("already exists")){console.log("Relationship already exists - redirecting to dashboard immediately"),i("/parent-dashboard");return}console.log("Setting error message:",C),g(S.message||"Failed to link child. Please try again.")}finally{d(!1)}},y=()=>{i("/parent-homepage")};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"max-w-md w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"bg-white rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4 shadow-lg",children:t.jsx(lx,{className:"w-10 h-10 text-blue-600"})}),t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Link Your Child"}),t.jsx("p",{className:"text-gray-600",children:"Connect your account with your child to access the dashboard and monitor their progress"})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:x?t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:t.jsx(ya,{className:"w-8 h-8 text-green-600"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Successfully Linked!"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Your child has been successfully linked to your account."}),t.jsxs("div",{className:"flex items-center justify-center text-blue-600",children:[t.jsx("span",{className:"mr-2",children:"Redirecting to dashboard"}),t.jsx(tp,{className:"w-4 h-4 animate-pulse"})]})]}):t.jsxs("form",{onSubmit:b,children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{htmlFor:"childEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Child's Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(yd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"email",id:"childEmail",value:n,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your child's email address",required:!0,disabled:c})]})]}),h&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-red-600 text-sm",children:h})}),t.jsx("button",{type:"submit",disabled:c||!n.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Linking Child..."]}):t.jsxs(t.Fragment,{children:[t.jsx(lx,{className:"w-5 h-5 mr-2"}),"Link Child"]})})]})}),t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:y,className:"text-gray-600 hover:text-gray-800 font-medium transition-colors duration-200",children:" Back to Homepage"})}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mt-6",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"bg-blue-100 rounded-full p-2 flex-shrink-0",children:t.jsx(ya,{className:"w-4 h-4 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Why Link Your Child?"}),t.jsx("p",{className:"text-blue-700 text-sm",children:"Linking your child's account allows you to monitor their learning progress, track their emotions, and celebrate their achievements together."})]})]})})]})})};function wj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const jj=m.forwardRef(wj);function Nj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Sj=m.forwardRef(Nj);function _j({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Cj=m.forwardRef(_j);function Ej({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ox=m.forwardRef(Ej);function Aj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const kj=m.forwardRef(Aj);function Tj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Rj=m.forwardRef(Tj);function Dj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const Oj=m.forwardRef(Dj);function Mj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const zj=m.forwardRef(Mj);function Lj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Uj=m.forwardRef(Lj);function Bj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const np=m.forwardRef(Bj);function Pj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const $j=m.forwardRef(Pj);function Ij({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Hj=m.forwardRef(Ij);function qj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Gj=m.forwardRef(qj);function Fj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const cx=m.forwardRef(Fj);function Yj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Vj=m.forwardRef(Yj);function Wj({title:i,titleId:s,...n},l){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},n),i?m.createElement("title",{id:s},i):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const lp=m.forwardRef(Wj),Kj=({isOpen:i,onClose:s,activity:n,onSave:l})=>{const[c,d]=m.useState(""),[h,g]=m.useState(""),[x,p]=m.useState(""),[b,y]=m.useState(""),[w,S]=m.useState(null),[C,R]=m.useState(null),[O,M]=m.useState(null),[T,B]=m.useState([{title:"",isCorrect:!1},{title:"",isCorrect:!1},{title:"",isCorrect:!1},{title:"",isCorrect:!1}]);if(m.useEffect(()=>{n&&i&&(d("Identification"),g(n.category||""),p(n.difficulty||""),y("What color is this apple?"),B([{title:"Red",isCorrect:!0},{title:"Blue",isCorrect:!1},{title:"Green",isCorrect:!1},{title:"Yellow",isCorrect:!1}]),R("/assets/cow.png"),M("image"))},[n,i]),!i)return null;const K=z=>{z.preventDefault();const E={...n,activityType:c,category:h,difficulty:x,question:b,choices:T,media:w,mediaType:O};l(E),s()},X=z=>{const E=z.target.files[0];S(E),E&&(R(URL.createObjectURL(E)),E.type.startsWith("image/")?M("image"):E.type.startsWith("video/")&&M("video"))},ee=(z,E,A)=>{const P=[...T];P[z][E]=A,B(P)},re=()=>{T.length<6&&B([...T,{title:"",isCorrect:!1}])},q=z=>{if(T.length>2){const E=T.filter((A,P)=>P!==z);B(E)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:`bg-gradient-to-r ${n?.color||"from-blue-400 to-blue-600"} p-6 rounded-t-3xl relative`,children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-xl transition-all duration-200",children:t.jsx(bf,{className:"w-6 h-6"})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center text-4xl",children:n?.icon||""}),t.jsxs("div",{className:"text-white flex-1",children:[t.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Edit Activity"}),t.jsx("p",{className:"text-white/90 text-lg",children:"Update the activity details and settings"})]})]})]}),t.jsxs("form",{onSubmit:K,className:"p-6 space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[t.jsx(dt,{className:"w-6 h-6 text-blue-600"}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Basic Settings"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Activity Type"}),t.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 bg-white shadow-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select activity type"}),t.jsx("option",{value:"Identification",children:" Identification (What is this?)"}),t.jsx("option",{value:"Matching",children:" Matching (Match items)"}),t.jsx("option",{value:"Counting",children:" Counting (How many?)"}),t.jsx("option",{value:"Colors",children:" Colors (Color recognition)"}),t.jsx("option",{value:"Shapes",children:" Shapes (Shape recognition)"}),t.jsx("option",{value:"Letters",children:" Letters (Letter learning)"}),t.jsx("option",{value:"Numbers",children:" Numbers (Number learning)"}),t.jsx("option",{value:"Daily Life",children:" Daily Life Skills"}),t.jsx("option",{value:"Emotions",children:" Emotions (Feeling recognition)"}),t.jsx("option",{value:"Social",children:" Social Skills"}),t.jsx("option",{value:"Sequence",children:" Sequencing (Order activities)"}),t.jsx("option",{value:"Memory",children:" Memory Games"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:h,onChange:z=>g(z.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 bg-white shadow-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select a category"}),t.jsx("option",{value:"Academic",children:" Academic Skills"}),t.jsx("option",{value:"Social/Daily Life",children:" Social & Daily Life"}),t.jsx("option",{value:"Objects",children:" Object Recognition"}),t.jsx("option",{value:"Creative",children:" Creative Activities"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Difficulty Level"}),t.jsxs("select",{value:x,onChange:z=>p(z.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 bg-white shadow-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select difficulty level"}),t.jsx("option",{value:"Beginner",children:" Beginner"}),t.jsx("option",{value:"Intermediate",children:" Intermediate"}),t.jsx("option",{value:"Proficient",children:" Proficient"})]})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Question Content"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Question Text"}),t.jsx("textarea",{value:b,onChange:z=>y(z.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 resize-none bg-white shadow-sm",placeholder:"What question do you want to ask the students?",rows:"3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Visual Support (Optional)"}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition-colors bg-white shadow-sm",children:C?t.jsxs("div",{className:"space-y-4",children:[O==="image"?t.jsx("img",{src:C,alt:"Preview",className:"max-w-xs mx-auto rounded-lg shadow-md"}):O==="video"?t.jsx("video",{src:C,controls:!0,className:"max-w-xs mx-auto rounded-lg shadow-md",style:{maxHeight:"200px"},children:"Your browser does not support video playback."}):null,t.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg inline-block",children:O==="image"?" Image":" Video"}),t.jsxs("button",{type:"button",onClick:()=>{R(null),S(null),M(null)},className:"text-red-500 hover:text-red-700 font-medium bg-red-50 px-4 py-2 rounded-lg transition-colors block mx-auto",children:[" Remove ",O==="image"?"Image":"Video"]})]}):t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:X,className:"hidden",id:"edit-image-upload"}),t.jsxs("label",{htmlFor:"edit-image-upload",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg cursor-pointer font-semibold transition-all duration-200 transform hover:scale-105 inline-flex items-center space-x-2 shadow-lg",children:[t.jsx(Xh,{className:"w-5 h-5"}),t.jsx("span",{children:"Choose Image"})]}),t.jsx("span",{className:"text-gray-400 hidden sm:inline",children:"or"}),t.jsx("input",{type:"file",accept:"video/*",onChange:X,className:"hidden",id:"edit-video-upload"}),t.jsxs("label",{htmlFor:"edit-video-upload",className:"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg cursor-pointer font-semibold transition-all duration-200 transform hover:scale-105 inline-flex items-center space-x-2 shadow-lg",children:[t.jsx(tf,{className:"w-5 h-5"}),t.jsx("span",{children:"Choose Video"})]})]})})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ja,{className:"w-6 h-6 text-purple-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Answer Choices"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Update possible answers and mark the correct ones"})]})]}),t.jsxs("button",{type:"button",onClick:re,disabled:T.length>=6,className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-semibold transition-all ${T.length>=6?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white hover:shadow-lg transform hover:scale-105"}`,children:[t.jsx(sp,{className:"w-5 h-5"}),t.jsx("span",{children:"Add Choice"})]})]}),t.jsx("div",{className:"space-y-4",children:T.map((z,E)=>t.jsx("div",{className:"bg-white rounded-xl p-4 border-2 border-gray-200 hover:border-blue-300 transition-colors shadow-sm",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:String.fromCharCode(65+E)}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Choice ",E+1]})]}),t.jsx("input",{type:"text",value:z.title,onChange:A=>ee(E,"title",A.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700",placeholder:`Enter choice ${String.fromCharCode(65+E)}...`,required:!0})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("label",{className:"flex items-center space-x-2 bg-white px-4 py-3 rounded-lg border-2 border-gray-200 hover:bg-green-50 hover:border-green-300 transition-colors cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:z.isCorrect,onChange:A=>ee(E,"isCorrect",A.target.checked),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),t.jsx(ja,{className:`w-5 h-5 ${z.isCorrect?"text-green-600":"text-gray-400"}`}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Correct"})]}),T.length>2&&t.jsx("button",{type:"button",onClick:()=>q(E),className:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-all border border-red-200 hover:border-red-300",title:"Remove this choice",children:t.jsx(ap,{className:"w-5 h-5"})})]})]})},E))})]}),t.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-all duration-200",children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 flex items-center space-x-2",children:[t.jsx(ja,{className:"w-5 h-5"}),t.jsx("span",{children:"Save Changes"})]})]})]})]})})},Zj=({isOpen:i,onClose:s,activity:n})=>{const[l,c]=m.useState(!1);if(!i||!n)return null;const d=y=>{console.log("Saving updated activity:",y),c(!1)},h=y=>{switch(y){case"Beginner":return"bg-green-100 text-green-800 border-green-200";case"Intermediate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Proficient":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=y=>{switch(y){case"Academic":return"";case"Social/Daily Life":return"";case"Objects":return"";case"Creative":return"";default:return""}},x=[{title:"Red",isCorrect:!0},{title:"Blue",isCorrect:!1},{title:"Green",isCorrect:!1},{title:"Yellow",isCorrect:!1}];return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto",children:[t.jsxs("div",{className:`bg-gradient-to-r ${n.color} p-6 rounded-t-3xl relative`,children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-xl transition-all duration-200",children:t.jsx(lp,{className:"w-6 h-6"})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center text-4xl",children:n.icon}),t.jsxs("div",{className:"text-white flex-1",children:[t.jsx("h2",{className:"text-3xl font-bold mb-2",children:n.title}),t.jsx("p",{className:"text-white/90 text-lg mb-3",children:n.description}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Rj,{className:"w-4 h-4"}),t.jsx("span",{children:n.duration})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Gj,{className:"w-4 h-4"}),t.jsxs("span",{children:[n.participants," students"]})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h(n.difficulty)} border`,children:n.difficulty})]})]})]})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx(jj,{className:"w-5 h-5 text-blue-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Activity Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Activity Type"}),t.jsx("p",{className:"text-gray-800 font-medium",children:" Identification (What is this?)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Category"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:g(n.category)}),t.jsx("p",{className:"text-gray-800 font-medium",children:n.category})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Difficulty Level"}),t.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-semibold ${h(n.difficulty)} border`,children:n.difficulty})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Completion Rate"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"85%"}})}),t.jsx("span",{className:"text-gray-800 font-medium",children:"85%"})]})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-green-600 text-lg",children:""})}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Question Content"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Question Text"}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:t.jsx("p",{className:"text-gray-800 text-lg",children:"What color is this apple?"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Visual Support"}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(Hj,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Image File"})]}),t.jsx("img",{src:"/assets/cow.png",alt:"Activity visual",className:"max-w-xs rounded-lg shadow-md border border-gray-200"})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx(ox,{className:"w-5 h-5 text-purple-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Answer Choices"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map((y,w)=>t.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${y.isCorrect?"bg-green-50 border-green-200 ring-2 ring-green-200":"bg-white border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${y.isCorrect?"bg-green-500 text-white":"bg-gray-100 text-gray-600"}`,children:String.fromCharCode(65+w)}),t.jsx("span",{className:"flex-1 font-medium text-gray-800",children:y.title}),y.isCorrect&&t.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[t.jsx(ox,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-semibold",children:"Correct"})]})]})},w))})]}),t.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx(Cj,{className:"w-5 h-5 text-orange-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Activity Statistics"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"text-center bg-white rounded-xl p-4 border border-gray-200",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:n.participants}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Participants"})]}),t.jsxs("div",{className:"text-center bg-white rounded-xl p-4 border border-gray-200",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"85%"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),t.jsxs("div",{className:"text-center bg-white rounded-xl p-4 border border-gray-200",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"92%"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Completion Rate"})]})]})]}),t.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:s,className:"cursor-pointer px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-all duration-200",children:"Close"}),t.jsxs("button",{onClick:()=>c(!0),className:"cursor-pointer px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 flex items-center space-x-2",children:[t.jsx(np,{className:"w-5 h-5"}),t.jsx("span",{children:"Edit Activity"})]})]})]})]})}),t.jsx(Kj,{isOpen:l,onClose:()=>c(!1),activity:n,onSave:d})]})};async function Jj({title:i,description:s,category:n,difficulty:l,duration:c,instructions:d,is_active:h=!0,badges:g,icon_url:x,criteria:p}){const{data:b,error:y}=await de.from("activities").insert([{title:i,description:s,category:n,difficulty:l,duration:c,instructions:d,is_active:h,badges:g,icon_url:x,criteria:p}]).select();return{data:b,error:y}}async function Qj(){const{data:i,error:s}=await de.from("activities").select("*").order("created_at",{ascending:!1});return{data:i,error:s}}async function vf(){const{data:i,error:s}=await de.from("activities").select(`
      *,
      Categories(*),
      Difficulties(*)
    `).order("created_at",{ascending:!1});return{data:i,error:s}}const Xj=({isOpen:i,onClose:s,activity:n})=>{const l=ut(),[c,d]=m.useState("all"),[h,g]=m.useState(null),[x,p]=m.useState(!1),[b,y]=m.useState([]),[w,S]=m.useState(!0),[C,R]=m.useState(""),[O,M]=m.useState({});m.useEffect(()=>{K(),B()},[]);const T=async()=>{try{const{data:z,error:E}=await de.from("user_activity_progress").select("activity_id, score, date_completed");if(E)return console.error("Error fetching activity stats:",E),{};const A={};return z?.forEach(P=>{const V=P.activity_id;A[V]||(A[V]={totalCompletions:0,totalScore:0,recentCompletions:0,lastCompleted:null}),A[V].totalCompletions++,A[V].totalScore+=P.score||0;const J=new Date(P.date_completed),ie=new Date;ie.setDate(ie.getDate()-1),J>ie&&A[V].recentCompletions++,(!A[V].lastCompleted||J>new Date(A[V].lastCompleted))&&(A[V].lastCompleted=P.date_completed)}),Object.keys(A).forEach(P=>{A[P].totalCompletions>0&&(A[P].averageScore=Math.round(A[P].totalScore/A[P].totalCompletions))}),A}catch(z){return console.error("Error in fetchActivityStatsData:",z),{}}},B=async()=>{const z=await T();M(z)},K=async()=>{try{S(!0),R("");const[z,E]=await Promise.all([vf(),T()]),{data:A,error:P}=z;if(P)console.error("Error fetching activities:",P),R("Failed to load activities");else{const V=A?.map(J=>{const ie=E[J.id]||{totalCompletions:0,averageScore:0,recentCompletions:0,lastCompleted:null};return console.log("Activity:",J.title,"Raw Difficulties:",J.Difficulties,"Difficulty value:",J.Difficulties?.difficulty),{id:J.id,title:J.title,description:J.description,category:J.Categories?.category_name||"Unknown",difficulty:J.Difficulties?.difficulty||"Intermediate",duration:J.duration||"10-15 min",participants:J.participants||0,icon:J.icon||"",color:J.color||"from-blue-400 to-blue-600",points:J.points||10,totalCompletions:ie.totalCompletions,averageScore:ie.averageScore,recentCompletions:ie.recentCompletions,lastCompleted:ie.lastCompleted}})||[];console.log("All transformed activities:",V),y(V),M(E)}}catch(z){console.error("Error in fetchData:",z),R("Failed to load data")}finally{S(!1)}},X=b.filter(z=>{const E=c==="all"||z.category===c;return console.log("Filtering for category:",c,"Activity:",z.title,"Activity category:",z.category,"Matches:",E),E}).sort((z,E)=>{const A=z.totalCompletions||0,P=E.totalCompletions||0;return P!==A?P-A:z.title.localeCompare(E.title)}),ee=z=>{z.preventDefault(),l("/adminprofile")},re=z=>{switch(z){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Proficient":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},q=z=>{if(!z)return"Never";const E=new Date(z),P=Math.floor((new Date-E)/(1e3*60*60));return P<1?"Just now":P<24?`${P}h ago`:`${Math.floor(P/24)}d ago`};return w?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading activities..."})]})}):C?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-red-600 mb-4",children:C}),t.jsx("button",{onClick:K,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"Try Again"})]})}):t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white rounded-xl",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:ee,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8 border border-gray-100",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Learning Activities"}),t.jsx("p",{className:"text-gray-600 text-lg",children:"Monitor activity usage and student engagement"})]}),t.jsxs("button",{onClick:ee,className:"mt-4 md:mt-0 bg-purple-500 text-white px-6 py-3 rounded-xl hover:bg-purple-600 transition-colors duration-200 flex items-center space-x-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Admin Profile"})]})]}),t.jsx("div",{className:"bg-gray-50 rounded-xl p-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filter by Category"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:()=>d("all"),className:`p-4 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-3 ${c==="all"?"bg-blue-500 text-white shadow-lg transform scale-105":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{className:"font-semibold",children:"All Activities"})]}),t.jsxs("button",{onClick:()=>d("Academic"),className:`p-4 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-3 ${c==="Academic"?"bg-green-500 text-white shadow-lg transform scale-105":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{className:"font-semibold",children:"Academic"})]}),t.jsxs("button",{onClick:()=>d("Daily/Social Life Skill"),className:`p-4 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-3 ${c==="Daily/Social Life Skill"?"bg-purple-500 text-white shadow-lg transform scale-105":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{className:"font-semibold",children:"Daily/Social Life Skill"})]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:t.jsx(dt,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Activities"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:new Set(b.map(z=>z.title)).size})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:t.jsx(rp,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Completions"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.reduce((z,E)=>z+(E.totalCompletions||0),0)})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:t.jsx(Yr,{className:"h-6 w-6 text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Avg Score"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[(()=>{const z=b.reduce((E,A)=>(E.find(P=>P.title===A.title)||E.push(A),E),[]);return Math.round(z.reduce((E,A)=>E+(A.averageScore||0),0)/Math.max(z.length,1))})(),"%"]})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:t.jsx(Bs,{className:"h-6 w-6 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Recent (24h)"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.reduce((z,E)=>z+(E.recentCompletions||0),0)})]})]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map((z,E)=>{const A=E<3&&(z.totalCompletions||0)>0,P=E===0?" Most Used":E===1?" 2nd Most":E===2?" 3rd Most":"";return t.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${A?"border-yellow-300 ring-2 ring-yellow-100":"border-gray-100"}`,children:[t.jsx("div",{className:`h-2 bg-gradient-to-r ${z.color}`}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-2xl",children:z.icon}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("h3",{className:"font-bold text-lg text-gray-800 line-clamp-1",children:z.title}),A&&t.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full",children:P})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re(z.difficulty)}`,children:z.difficulty})]})]})}),t.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:z.description}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Completions"}),t.jsx("span",{className:"font-semibold text-blue-600",children:z.totalCompletions||0})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Average Score"}),t.jsxs("span",{className:"font-semibold text-green-600",children:[z.averageScore||0,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Recent (24h)"}),t.jsx("span",{className:"font-semibold text-purple-600",children:z.recentCompletions||0})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Last Completed"}),t.jsx("span",{className:"font-semibold text-gray-600",children:q(z.lastCompleted)})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(Bs,{className:"h-4 w-4"}),t.jsx("span",{children:z.duration})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(Yr,{className:"h-4 w-4"}),t.jsxs("span",{children:[z.points," pts"]})]})]}),t.jsxs("button",{onClick:()=>{g(z),p(!0)},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2",children:[t.jsx(I2,{className:"h-4 w-4"}),t.jsx("span",{children:"View Details"})]})]})]})]},z.id)})}),X.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No activities found"}),t.jsx("p",{className:"text-gray-500",children:"Try selecting a different category"})]}),t.jsx(Zj,{isOpen:x,onClose:()=>p(!1),activity:h,isViewOnly:!0})]})};async function eN(i){const{data:s,error:n}=await de.from("Categories").select("*").eq("category_name",i).single();return{data:s,error:n}}async function tN(i){const{data:s,error:n}=await de.from("Difficulties").select("*").eq("difficulty",i).single();return{data:s,error:n}}async function rN({question_text:i,question_type:s,image_url:n,Activities_id:l}){const{data:c,error:d}=await de.from("Questions").insert([{question_text:i,question_type:s,image_url:n,Activities_id:l}]);return{data:c,error:d}}async function sN({choices_text:i,is_correct:s,Questions_id:n}){const{data:l,error:c}=await de.from("Choices").insert([{choices_text:i,is_correct:s,Questions_id:n}]);return{data:l,error:c}}const aN=()=>{const i=ut(),[s,n]=m.useState(""),[l,c]=m.useState(""),[d,h]=m.useState(""),[g,x]=m.useState(""),[p,b]=m.useState(""),[y,w]=m.useState(""),[S,C]=m.useState(null),[R,O]=m.useState(null),[M,T]=m.useState(null),[B,K]=m.useState(!1),[X,ee]=m.useState(""),[re,q]=m.useState([]),[z,E]=m.useState([]),[A,P]=m.useState([{title:"",isCorrect:!1},{title:"",isCorrect:!1},{title:"",isCorrect:!1},{title:"",isCorrect:!1}]);m.useEffect(()=>{V()},[]);const V=async()=>{try{console.log("Fetching categories and difficulties...");const{data:se,error:he}=await de.from("Categories").select("*").order("category_name",{ascending:!0}),{data:fe,error:be}=await de.from("Difficulties").select("*").order("difficulty",{ascending:!0});he?(console.error("Error fetching categories:",he),await J()):(console.log("Categories fetched:",se),q(se||[])),be?(console.error("Error fetching difficulties:",be),await ie()):(console.log("Difficulties fetched:",fe),E(fe||[]))}catch(se){console.error("Error fetching dropdown data:",se),ee("Failed to load categories and difficulties")}},J=async()=>{try{const se=[{category_name:"Academic Skills",icon:"",description:"Academic learning activities"},{category_name:"Social & Daily Life Skills",icon:"",description:"Social and daily living skills"}];for(const fe of se){const{data:be,error:ae}=await de.from("Categories").insert([fe]).select();ae?console.error("Error creating default category:",ae):console.log("Created default category:",be)}const{data:he}=await de.from("Categories").select("*").order("category_name",{ascending:!0});q(he||[])}catch(se){console.error("Error creating default categories:",se)}},ie=async()=>{try{const se=[{difficulty:"Beginner"},{difficulty:"Intermediate"},{difficulty:"Proficient"}];for(const fe of se){const{data:be,error:ae}=await de.from("Difficulties").insert([fe]).select();ae?console.error("Error creating default difficulty:",ae):console.log("Created default difficulty:",be)}const{data:he}=await de.from("Difficulties").select("*").order("difficulty",{ascending:!0});E(he||[])}catch(se){console.error("Error creating default difficulties:",se)}},k=async se=>{se.preventDefault(),K(!0),ee("");try{const{data:he}=await eN(l),{data:fe}=await tN(d);if(!he||!fe)throw new Error("Invalid category or difficulty selection");const be={title:p,description:y,Categories_id:he.id,Difficulties_id:fe.id,points:10,image_url:null,is_activity:!0,duration:"10-15 min",participants:1,icon:G(s),color:I(l)},{data:ae,error:ge}=await Jj(be);if(ge)throw new Error(ge.message);if(g&&ae){const Ee={Activities_id:ae[0].id,question_text:g,media_url:null,media_type:M},{data:Me,error:$e}=await rN(Ee);if($e&&console.warn("Question creation failed:",$e),Me&&Me[0]){for(const Re of A)if(Re.title.trim()){const Pe={Questions_id:Me[0].id,choice_text:Re.title,is_correct:Re.isCorrect},{error:Fe}=await sN(Pe);Fe&&console.warn("Choice creation failed:",Fe)}}}i("/activities")}catch(he){console.error("Error creating activity:",he),ee(he.message||"Failed to create activity")}finally{K(!1)}},G=se=>({Identification:"",Numbers:"",Colors:"",Shapes:"",Letters:"",Matching:"",Counting:"","Daily Life":"",Emotions:"",Social:""})[se]||"",I=se=>({Academic:"from-blue-400 to-blue-600","Social/Daily Life":"from-green-400 to-green-600",Objects:"from-purple-400 to-purple-600"})[se]||"from-gray-400 to-gray-600",oe=se=>{const he=se.target.files[0];C(he),he&&(O(URL.createObjectURL(he)),he.type.startsWith("image/")?T("image"):he.type.startsWith("video/")&&T("video"))},xe=(se,he,fe)=>{const be=[...A];be[se][he]=fe,P(be)},_=()=>{A.length<6&&P([...A,{title:"",isCorrect:!1}])},F=se=>{if(A.length>2){const he=A.filter((fe,be)=>be!==se);P(he)}},ne=se=>{se.preventDefault(),i("/adminprofile")};return t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white  rounded-xl",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:ne,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8",children:[t.jsxs("div",{className:"mb-6 lg:mb-0",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Create New Activity"}),t.jsx("p",{className:"text-lg text-gray-600",children:"Design interactive learning activities for autism-friendly education"})]}),t.jsx("button",{onClick:()=>i("/activities"),className:"bg-blue-500 hover:bg-blue-800 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 transform hover:scale-105 cursor-pointer",children:t.jsx("span",{children:" Back to Activities"})})]}),X&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[t.jsx("strong",{children:"Error:"})," ",X]}),t.jsx("form",{onSubmit:k,className:"space-y-8",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:t.jsx(dt,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Activity Setup"}),t.jsx("p",{className:"text-gray-600",children:"Create an engaging learning activity with questions and answer choices"})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Basic Settings"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:l,onChange:se=>c(se.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 bg-white shadow-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select a category"}),t.jsx("option",{value:"Academic",children:" Academic Skills"}),t.jsx("option",{value:"Social/Daily Life",children:" Social & Daily Life Skills"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Activity Type"}),t.jsxs("select",{value:s,onChange:se=>n(se.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 bg-white shadow-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select activity type"}),t.jsx("option",{value:"Identification",children:" Identification (What is this?)"}),t.jsx("option",{value:"Numbers",children:" Numbers (Number learning)"}),t.jsx("option",{value:"Colors",children:" Colors (Color recognition)"}),t.jsx("option",{value:"Shapes",children:" Shapes (Shape recognition)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Difficulty Level"}),t.jsxs("select",{value:d,onChange:se=>h(se.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 bg-white shadow-sm",required:!0,children:[t.jsx("option",{value:"",children:"Select difficulty level"}),t.jsx("option",{value:"Beginner",children:" Beginner"}),t.jsx("option",{value:"Intermediate",children:" Intermediate"}),t.jsx("option",{value:"Proficient",children:" Proficient"})]})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Question Content"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Question Text"}),t.jsx("textarea",{value:g,onChange:se=>x(se.target.value),className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 resize-none bg-white shadow-sm",placeholder:"What question do you want to ask the students?",rows:"3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Visual Support (Optional)"}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition-colors bg-white shadow-sm",children:R?t.jsxs("div",{className:"space-y-4",children:[M==="image"?t.jsx("img",{src:R,alt:"Preview",className:"max-w-xs mx-auto rounded-lg shadow-md"}):M==="video"?t.jsx("video",{src:R,controls:!0,className:"max-w-xs mx-auto rounded-lg shadow-md",style:{maxHeight:"200px"},children:"Your browser does not support video playback."}):null,t.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg inline-block",children:[M==="image"?" Image":" Video"," - ",S?.name]}),t.jsxs("button",{type:"button",onClick:()=>{O(null),C(null),T(null)},className:"text-red-500 hover:text-red-700 font-medium bg-red-50 px-4 py-2 rounded-lg transition-colors block mx-auto",children:[" Remove ",M==="image"?"Image":"Video"]})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex justify-center space-x-4 mb-3",children:[t.jsx(Xh,{className:"w-8 h-8 text-blue-400"}),t.jsx(tf,{className:"w-8 h-8 text-purple-400"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Add Visual Content"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Choose an image or video to help students learn better"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:oe,className:"hidden",id:"image-upload"}),t.jsxs("label",{htmlFor:"image-upload",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg cursor-pointer font-semibold transition-all duration-200 transform hover:scale-105 inline-flex items-center space-x-2 shadow-lg",children:[t.jsx(Xh,{className:"w-5 h-5"}),t.jsx("span",{children:"Choose Image"})]}),t.jsx("span",{className:"text-gray-400 hidden sm:inline",children:"or"}),t.jsx("input",{type:"file",accept:"video/*",onChange:oe,className:"hidden",id:"video-upload"}),t.jsxs("label",{htmlFor:"video-upload",className:"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg cursor-pointer font-semibold transition-all duration-200 transform hover:scale-105 inline-flex items-center space-x-2 shadow-lg",children:[t.jsx(tf,{className:"w-5 h-5"}),t.jsx("span",{children:"Choose Video"})]})]}),t.jsxs("div",{className:"mt-4 text-xs text-gray-400 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Images:"})," PNG, JPG, GIF up to 5MB"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Videos:"})," MP4, MOV, AVI up to 20MB"]}),t.jsx("p",{className:"text-blue-500 font-medium",children:" Visual content helps students with autism learn more effectively!"})]})]})})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Answer Choices"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Add possible answers and mark the correct ones"})]})]}),t.jsxs("button",{type:"button",onClick:_,disabled:A.length>=6,className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-semibold transition-all ${A.length>=6?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white hover:shadow-lg transform hover:scale-105"}`,children:[t.jsx(sp,{className:"w-5 h-5"}),t.jsx("span",{children:"Add Choice"})]})]}),t.jsx("div",{className:"space-y-4",children:A.map((se,he)=>t.jsx("div",{className:"bg-white rounded-xl p-4 border-2 border-gray-200 hover:border-blue-300 transition-colors shadow-sm",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:String.fromCharCode(65+he)}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Choice ",he+1]})]}),t.jsx("input",{type:"text",value:se.title,onChange:fe=>xe(he,"title",fe.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700",placeholder:`Enter choice ${String.fromCharCode(65+he)}...`,required:!0})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("label",{className:"flex items-center space-x-2 bg-white px-4 py-3 rounded-lg border-2 border-gray-200 hover:bg-green-50 hover:border-green-300 transition-colors cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:se.isCorrect,onChange:fe=>xe(he,"isCorrect",fe.target.checked),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),t.jsx(ja,{className:`w-5 h-5 ${se.isCorrect?"text-green-600":"text-gray-400"}`}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Correct"})]}),A.length>2&&t.jsx("button",{type:"button",onClick:()=>F(he),className:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-all border border-red-200 hover:border-red-300",title:"Remove this choice",children:t.jsx(ap,{className:"w-5 h-5"})})]})]})},he))}),t.jsxs("div",{className:"flex gap-4 justify-end mt-8 pt-6 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>i("/activities"),className:"bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105",children:"Cancel"}),t.jsxs("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-semibold flex items-center space-x-2 shadow-lg transition-all duration-200 transform hover:scale-105",children:[t.jsx(ja,{className:"w-5 h-5"}),t.jsx("span",{children:"Create Activity"})]})]})]})]})]})})]})]})},nN=()=>{const[i,s]=m.useState("30"),[n,l]=m.useState(!0),[c,d]=m.useState(null),[h,g]=m.useState(null),[x,p]=m.useState([]),[b,y]=m.useState([]),[w,S]=m.useState([]),[C,R]=m.useState({});m.useEffect(()=>{(async()=>{l(!0);try{const[V,J,ie,k]=await Promise.all([Xx(),vf(),U1(),$o()]);if(V.error?console.error("Error fetching progress:",V.error):(console.log(" Admin Dashboard - Progress data received:",V.data),console.log(" Admin Dashboard - Students in progress data:",V.data?.students),console.log(" Admin Dashboard - Total students:",V.data?.totalStudents),g(V.data)),J.error?console.error("Error fetching activities:",J.error):(console.log(" Admin Dashboard - Activities received:",J.data),console.log(" Admin Dashboard - Number of activities:",J.data?.length),p(J.data||[])),ie.error?console.error("Error fetching students:",ie.error):y(ie.data||[]),k.error)console.error("Error fetching badges:",k.error);else{console.log(" Admin Dashboard - Badges received:",k.data);let G=k.data||[];G.length===0&&(console.log(" No badges from badges table, creating comprehensive badge list..."),G=[{id:"f9aba128-a8e5-4b2c-8b2e-27ad1403faa6",title:"First Step",description:"Awarded for completing your first activity."},{id:"97054c4c-4b60-4bae-b1d9-46c5b7d0c99a",title:"Perfect Scorer",description:"Awarded for getting a perfect score in any activity."},{id:"2f73958d-d18c-4135-96bd-c65ca554a207",title:"Academic Star",description:"Complete 5 academic activities."},{id:"c0e0441c-0688-4a4c-bd82-fad73c4392c1",title:"Color Master",description:"Complete 2 color activities in different difficulty levels."},{id:"55544bd9-53a5-42ac-bee8-c6b05632dfff",title:"Match Finder",description:"Finish a matching type activity."},{id:"027f2d92-6a2f-4f07-bda5-aaced096eb00",title:"Shape Explorer",description:"Complete 2 shape activities."},{id:"d1ec22b8-9c28-44a4-9ee6-851b30948140",title:"Number Ninja",description:"Complete at least 1 number flashcard activity."},{id:"899d3e1b-6a3f-4c88-b52c-4960bb6f0201",title:"Consistency Champ",description:"Complete 3 activities in different types."},{id:"9e1e1566-6aec-479b-9f42-456e0c248386",title:"High Achiever",description:"Complete 5 activities with 80%+ average score."},{id:"1d3f149c-6db2-4303-93a0-a75540902e4f",title:"Daily Life Hero",description:"Complete 3 social/daily life skill activities."},{id:"dc7243ea-43fb-48af-86c0-7f6dcd4430dd",title:"All-Rounder",description:"Complete 5 different types of activity."}]),S(G);const I={};for(const oe of ie.data||[]){const{data:xe}=await Io(oe.user_id);I[oe.user_id]=xe||[]}R(I),console.log(" Student badges data:",I)}}catch(V){console.error("Error fetching data:",V),d("Failed to load tracking data")}finally{l(!1)}})()},[]);const M=(()=>{const P=x&&x.length>0,V=P?new Set(x.map(F=>F.title)):new Set,J=V.size;if(!h||!b.length)return[{title:"TOTAL ACTIVITIES",value:J,change:P?"Unique activities":"Loading...",icon:t.jsx(dt,{className:"w-8 h-8 text-blue-600"}),bgColor:"bg-blue-50",textColor:"text-blue-600"},{title:"COMPLETION RATE",value:"0%",change:"No data yet",icon:t.jsx("div",{className:"w-8 h-8 text-green-600 text-2xl",children:""}),bgColor:"bg-green-50",textColor:"text-green-600"},{title:"AVERAGE ACCURACY",value:"0%",change:"No data yet",icon:t.jsx("div",{className:"w-8 h-8 text-purple-600 text-2xl",children:""}),bgColor:"bg-purple-50",textColor:"text-purple-600"},{title:"AVERAGE SCORE",value:"0",change:"No scores yet",icon:t.jsx(Yr,{className:"w-8 h-8 text-yellow-600"}),bgColor:"bg-yellow-50",textColor:"text-yellow-600"},{title:"ACTIVE STUDENTS",value:0,change:"Loading...",icon:t.jsx(mn,{className:"w-8 h-8 text-indigo-600"}),bgColor:"bg-indigo-50",textColor:"text-indigo-600"}];const ie=b.length;console.log(" Dashboard Debug:"),console.log("Total activities records:",x.length),console.log("Unique activity titles:",J),console.log("Sample activities:",x.slice(0,3).map(F=>({id:F.id,title:F.title}))),console.log("Unique titles list:",Array.from(V).slice(0,10));let k=0,G=0,I=0,oe=0;h.students.forEach(F=>{k+=F.totalActivities||0,F.averageScore!==null&&F.averageScore>0&&(G+=F.averageScore,I++),oe+=F.completedActivities||0});const xe=I>0?(G/I).toFixed(1):"0",_=ie>0&&J>0?Math.round(oe/(ie*J)*100):0;return[{title:"TOTAL ACTIVITIES",value:J,change:"Unique activities",icon:t.jsx(dt,{className:"w-8 h-8 text-blue-600"}),bgColor:"bg-blue-50",textColor:"text-blue-600"},{title:"COMPLETION RATE",value:`${_}%`,change:`${k} total sessions`,icon:t.jsx("div",{className:"w-8 h-8 text-green-600 text-2xl",children:""}),bgColor:"bg-green-50",textColor:"text-green-600"},{title:"AVERAGE ACCURACY",value:"82.5%",change:"+5.2% from last month",icon:t.jsx("div",{className:"w-8 h-8 text-purple-600 text-2xl",children:""}),bgColor:"bg-purple-50",textColor:"text-purple-600"},{title:"AVERAGE SCORE",value:xe,change:I>0?`Based on ${I} students`:"No scores yet",icon:t.jsx(Yr,{className:"w-8 h-8 text-yellow-600"}),bgColor:"bg-yellow-50",textColor:"text-yellow-600"},{title:"ACTIVE STUDENTS",value:ie,change:`${h?.students?h.students.length:0} with progress`,icon:t.jsx(mn,{className:"w-8 h-8 text-indigo-600"}),bgColor:"bg-indigo-50",textColor:"text-indigo-600"}]})(),T=()=>{if(!h?.students)return console.log(" No progress data available for difficulty progression"),[];console.log(" Calculating difficulty progression with data:",h),console.log(" Activities for difficulty calculation:",x);const P={Beginner:{total:0,completed:0},Intermediate:{total:0,completed:0},Proficient:{total:0,completed:0}};x.forEach(J=>{let ie=null;J.Difficulties?.name?ie=J.Difficulties.name:J.difficulty?ie=J.difficulty:J.difficulty_level?ie=J.difficulty_level:J.difficulty_name&&(ie=J.difficulty_name),ie&&(ie=ie.charAt(0).toUpperCase()+ie.slice(1).toLowerCase()),P[ie]||(ie="Beginner"),P[ie].total++,console.log(` Activity "${J.title}" assigned to ${ie} difficulty (from: ${J.Difficulties?.name||J.difficulty||"default"})`)});const V=new Set;return h.students.forEach(J=>{J.activities&&J.activities.forEach(ie=>{if(ie.completionStatus==="completed"){const k=x.find(oe=>oe.id===ie.activityId);if(!k){console.log(" Activity not found for progress record:",ie);return}let G=null;k.Difficulties?.name?G=k.Difficulties.name:k.difficulty?G=k.difficulty:k.difficulty_level?G=k.difficulty_level:k.difficulty_name&&(G=k.difficulty_name),G&&(G=G.charAt(0).toUpperCase()+G.slice(1).toLowerCase()),P[G]||(G="Beginner");const I=`${G}-${ie.activityId}`;V.has(I)||(V.add(I),P[G].completed++,console.log(` Completed activity "${k.title}" in ${G} difficulty`))}})}),Object.entries(P).map(([J,ie])=>{const k=ie.total>0?Math.round(ie.completed/ie.total*100):0;return console.log(` Difficulty ${J}: ${ie.completed}/${ie.total} completed (${k}%)`),{level:J,progress:k,completed:`${ie.completed}/${ie.total}`,totalActivities:ie.total,completedActivities:ie.completed,icon:J==="Beginner"?"":J==="Intermediate"?"":"",color:J==="Beginner"?"bg-green-500":J==="Intermediate"?"bg-orange-500":"bg-red-500",bgColor:J==="Beginner"?"bg-green-50":J==="Intermediate"?"bg-orange-50":"bg-red-50"}})},B=()=>{if(!h?.students)return console.log(" No progress data available for learning categories"),[];console.log(" Calculating learning categories with data:",h),console.log(" Available activities for categories:",x);const P={},V={"Academic Skills":{icon:"",color:"bg-blue-500",keywords:["academic","math","reading","writing","science","learning","education"]},"Daily Life Skills":{icon:"",color:"bg-orange-500",keywords:["daily","life","social","communication","interaction","skill","routine"]}};Object.keys(V).forEach(ie=>{P[ie]={total:0,completed:0}}),x.forEach(ie=>{const k=(ie.title||"").toLowerCase(),G=(ie.Categories?.category_name||ie.category||"").toLowerCase();let I=null;for(const[oe,xe]of Object.entries(V))if(xe.keywords.some(_=>k.includes(_)||G.includes(_))){I=oe;break}I||(I="Academic Skills"),P[I].total++,console.log(` Activity "${ie.title}" assigned to ${I} category`)});const J=new Set;return h.students.forEach(ie=>{console.log(" Processing student:",ie),ie.activities&&(console.log(" Student activities:",ie.activities),ie.activities.forEach(k=>{if(console.log(" Processing progress record:",k),k.completionStatus==="completed"){const G=x.find(F=>F.id===k.activityId);if(!G){console.log(" Activity not found for progress record:",k);return}const I=(G.title||"").toLowerCase(),oe=(G.Categories?.category_name||G.category||"").toLowerCase();let xe=null;for(const[F,ne]of Object.entries(V))if(ne.keywords.some(se=>I.includes(se)||oe.includes(se))){xe=F;break}xe||(xe="Academic Skills");const _=`${xe}-${k.activityId}`;J.has(_)||(J.add(_),P[xe].completed++,console.log(` Completed activity "${G.title}" in ${xe} category`))}}))}),Object.entries(P).map(([ie,k])=>{const G=V[ie],I=k.total>0?Math.round(k.completed/k.total*100):0;return console.log(` Category ${ie}: ${k.completed}/${k.total} completed (${I}%)`),{name:ie,percent:I,count:`${k.completed}/${k.total}`,totalActivities:k.total,completedActivities:k.completed,icon:G.icon,color:G.color}})},K=n?[]:T(),X=n?[]:B(),re=n?[]:(()=>{if(!h?.students)return[];const P=[];return h.students.forEach(V=>{V.activities&&V.activities.length>0&&V.activities.slice(0,2).forEach(J=>{P.push({title:J.activityTitle||"Unknown Activity",user:V.studentName||"Unknown Student",time:new Date(J.dateCompleted).toLocaleString(),difficulty:J.difficultyId||"Beginner",score:J.score?`${J.score}%`:"No score",difficultyColor:J.difficultyId==="Beginner"?"bg-green-100 text-green-800":J.difficultyId==="Intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",avatar:(V.student?.user_profiles?.username||"U").substring(0,2).toUpperCase()})})}),P.slice(0,6)})(),q=ut(),E=n?[]:(()=>{if(!w||w.length===0)return console.log(" No badges available"),[];console.log(" Calculating dynamic badges with data:",{allBadges:w.length,progressData:h,studentBadgesData:C});let P=0;h?.students?.length;let V=new Set;const J={};Object.values(C).forEach(k=>{k.forEach(G=>{J[G.badge_name]=(J[G.badge_name]||0)+1})}),h?.students&&h.students.forEach(k=>{k.progress&&k.progress.length>0&&(P+=k.progress.length,k.progress.forEach(G=>{const I=G.category?.toLowerCase()||"",oe=G.activityTitle?.toLowerCase()||"";V.add(I),I.includes("academic")||I.includes("math")||I.includes("reading"),I.includes("color")||oe.includes("color"),I.includes("shape")||oe.includes("shape"),I.includes("number")||oe.includes("number"),I.includes("daily")||I.includes("life")||I.includes("social"),oe.includes("match")||I.includes("match"),G.score>=80,G.score>=100}),k.progress.length>1)});const ie=w.map(k=>{let G=0,I=b.length;Object.values(C).forEach(he=>{he.some(fe=>fe.badge_id===k.id)&&G++});const oe=G>0?"EARNED":"LOCKED",xe=`${G}/${I} students earned this badge`;let _="",F=oe==="EARNED"?"from-yellow-400 to-yellow-600":"from-gray-400 to-gray-500",ne=oe==="EARNED"?"bg-yellow-50":"bg-gray-50",se=oe==="EARNED"?"animate-bounce-gentle":"";return k.title.includes("First Step")?(_="",oe==="EARNED"&&(F="from-yellow-400 to-yellow-600",ne="bg-yellow-50")):k.title.includes("Perfect Scorer")?(_="",oe==="EARNED"&&(F="from-green-400 to-green-600",ne="bg-green-50")):k.title.includes("Academic Star")?(_="",oe==="EARNED"&&(F="from-blue-400 to-blue-600",ne="bg-blue-50")):k.title.includes("Color Master")?(_="",oe==="EARNED"&&(F="from-purple-400 to-purple-600",ne="bg-purple-50")):k.title.includes("Match Finder")?(_="",oe==="EARNED"&&(F="from-pink-400 to-pink-600",ne="bg-pink-50")):k.title.includes("Shape Explorer")?(_="",oe==="EARNED"&&(F="from-blue-400 to-indigo-600",ne="bg-blue-50")):k.title.includes("Number Ninja")?(_="",oe==="EARNED"&&(F="from-green-400 to-green-600",ne="bg-green-50")):k.title.includes("Consistency Champ")?(_="",oe==="EARNED"&&(F="from-indigo-400 to-indigo-600",ne="bg-indigo-50")):k.title.includes("High Achiever")?(_="",oe==="EARNED"&&(F="from-orange-400 to-orange-600",ne="bg-orange-50")):k.title.includes("Daily Life Hero")?(_="",oe==="EARNED"&&(F="from-teal-400 to-teal-600",ne="bg-teal-50")):k.title.includes("All-Rounder")&&(_="",oe==="EARNED"&&(F="from-gradient-400 to-gradient-600",ne="bg-gradient-to-br from-yellow-50 to-orange-50")),{icon:_,title:k.title,description:xe,status:oe,color:F,bgColor:ne,animation:se}});return console.log(" Calculated badges display:",ie),ie})(),A=P=>{P.preventDefault(),q("/adminprofile")};return t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white rounded-xl",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:A,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"max-w-full mx-auto sm:px-6  py-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[t.jsxs("div",{className:"mb-4 md:mb-0",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Admin Dashboard"}),t.jsx("p",{className:"text-lg text-gray-600",children:"Monitor student progress and activity analytics"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("select",{value:i,onChange:P=>s(P.target.value),className:"bg-white border-2 border-gray-200 rounded-xl px-4 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"7",children:"Last 7 days"}),t.jsx("option",{value:"30",children:"Last 30 days"}),t.jsx("option",{value:"90",children:"Last 90 days"})]}),t.jsxs("button",{onClick:()=>q("/admin/students"),className:"cursor-pointer bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[t.jsx(mn,{className:"w-5 h-5"}),t.jsx("span",{children:"Manage Students"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:n?t.jsx("div",{className:"col-span-full text-center py-8",children:t.jsx("div",{className:"text-lg text-gray-600",children:"Loading metrics..."})}):c?t.jsx("div",{className:"col-span-full text-center py-8",children:t.jsx("div",{className:"text-lg text-red-600",children:c})}):M.map((P,V)=>t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsx("div",{className:`${P.bgColor} rounded-xl p-3 w-fit mb-4`,children:P.icon}),t.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:P.title}),t.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:P.value}),t.jsx("p",{className:"text-sm text-green-600 font-medium",children:P.change})]},V))}),t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Recent Activities"}),t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:n?t.jsx("div",{className:"col-span-full text-center py-4 text-gray-600",children:"Loading recent activities..."}):re.length===0?t.jsx("div",{className:"col-span-full text-center py-4 text-gray-600",children:"No recent activities found"}):re.map((P,V)=>t.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-blue-600 text-white w-10 h-10 flex items-center justify-center rounded-full text-sm font-bold",children:P.avatar}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:P.title}),t.jsxs("p",{className:"text-sm text-gray-500",children:[P.user,"  ",P.category,"  ",P.time]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:`text-xs font-semibold px-3 py-1 rounded-full ${P.difficultyColor}`,children:P.difficulty}),t.jsx("span",{className:"font-bold text-green-600 text-lg",children:P.score})]})]})},V))})]})}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Learning Categories"}),t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-6",children:X.map((P,V)=>t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-2xl",children:P.icon}),t.jsx("span",{className:"font-semibold text-gray-700",children:P.name})]}),t.jsx("span",{className:"text-sm font-bold text-gray-600",children:P.count})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:t.jsx("div",{className:`${P.color} h-3 rounded-full transition-all duration-500`,style:{width:`${P.percent}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600",children:[P.percent,"% complete"]})]},V))})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Difficulty Level Progression"}),t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-4",children:K.map((P,V)=>t.jsxs("div",{className:`${P.bgColor} rounded-xl p-4 border border-gray-200`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-2xl",children:P.icon}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-semibold text-gray-700",children:[P.level," Level"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[P.completed," activities"]})]})]}),t.jsxs("span",{className:"text-lg font-bold text-gray-800",children:[P.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-white/50 rounded-full h-3",children:t.jsx("div",{className:`${P.color} h-3 rounded-full transition-all duration-500`,style:{width:`${P.progress}%`}})})]},V))})]})]}),t.jsx("div",{className:"grid  xl:grid-cols-1 gap-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Achievements & Badges"}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Object.values(C).reduce((P,V)=>P+(V?V.length:0),0)," total badges earned by all students"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[E.filter(P=>P.status==="EARNED").length," / ",E.length," Badge Types Awarded"]}),t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]})]}),t.jsx("div",{className:"grid lg:grid-cols-5 gap-4",children:E.map((P,V)=>t.jsxs("div",{className:`card-autism-friendly ${P.bgColor} p-4 rounded-2xl text-center relative overflow-hidden border-2 ${P.status==="EARNED"?"border-green-200 shadow-lg transform hover:scale-105 transition-all duration-300":"border-gray-200 opacity-75"}`,children:[P.status==="EARNED"&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx("span",{className:"text-green-500 text-lg animate-bounce-in",children:""})}),t.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${P.color} rounded-xl mx-auto mb-3 flex items-center justify-center text-2xl text-white shadow-lg ${P.animation}`,children:P.icon}),t.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:P.title}),t.jsx("p",{className:"text-xs text-gray-600 mb-3 leading-tight",children:P.description}),t.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${P.status==="EARNED"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:P.status}),P.status==="EARNED"&&t.jsx("div",{className:"absolute bottom-1 right-1",children:t.jsx("span",{className:"text-yellow-400 text-sm animate-pulse-gentle",children:""})})]},V))})]})})]})]})};function lN(){const[i,s]=m.useState(!0),[n,l]=m.useState(!1),[c,d]=m.useState(!0),[h,g]=m.useState(null),[x,p]=m.useState(!1),{user:b}=Vr(),[y,w]=m.useState({fullName:"",email:"",phone:"",birthday:"",address:"",gender:"",username:"",department:"",permissions:{},profileImage:"/assets/kidprofile1.jpg"}),[S,C]=m.useState({});m.useEffect(()=>{(async()=>{if(b){d(!0),g(null);try{console.log("Fetching admin profile for user:",b.id);const{data:z,error:E}=await I1(b.id);if(E&&E.code!=="PGRST116"){console.error("Error fetching admin profile:",E),g("Failed to load admin profile data"),d(!1);return}const A={fullName:z?.full_name||b.user_metadata?.full_name||b.email?.split("@")[0]||"Admin User",email:z?.email||b.email||"",phone:z?.phone_number||"",birthday:"",address:z?.address||"",gender:"",username:b.user_metadata?.username||b.email?.split("@")[0]||"",department:z?.department||"General",permissions:z?.permissions||{},profileImage:"/assets/kidprofile1.jpg"};console.log("Admin profile data loaded:",A),w(A),C(A)}catch(z){console.error("Error fetching admin profile:",z),g("Failed to load profile data: "+z.message)}finally{d(!1)}}})()},[b]);const R=ut(),O=()=>{R("/tracking")},M=async()=>{try{const{error:q}=await de.auth.signOut();q?console.error("Error logging out:",q):R("/")}catch(q){console.error("Unexpected error during logout:",q)}},T=()=>{l(!0)},B=async()=>{if(b){p(!0),g(null);try{const q={full_name:y.fullName,address:y.address,phone_number:y.phone,department:y.department,permissions:y.permissions};console.log("Updating admin profile with user_id:",b.id),console.log("Update data:",q);const{data:z,error:E}=await H1(b.id,q);E?(console.error("Error updating admin profile:",E),g(`Database error: ${E.message}`),w(S)):(console.log("Admin profile updated successfully:",z),C(y),l(!1),g(null))}catch(q){console.error("Unexpected error saving admin profile:",q),g(`Failed to save profile changes: ${q.message}`),w(S)}finally{p(!1)}}},K=()=>{l(!1),w(S)},X=q=>{const{name:z,value:E}=q.target;w(A=>({...A,[z]:E}))},ee=q=>{const z=q.target.files[0];if(z){const E=URL.createObjectURL(z);w(A=>({...A,profileImage:E}))}},re=()=>{};return t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white p-2 rounded-xl",children:t.jsx(dt,{className:"w-8 h-8"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 hover:text-blue-600 font-medium transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 hover:text-blue-600 font-medium transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 hover:text-blue-600 font-medium transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:re,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-2 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),i&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-bg-opacity-50 z-40 backdrop-blur-sm"}),t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:c?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"text-xl text-gray-600 mb-4",children:"Loading profile..."}),t.jsx("div",{className:"text-gray-500",children:"Fetching admin data from backend"})]}):h?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"text-xl text-red-600 mb-4",children:h}),t.jsx("button",{onClick:()=>s(!1),className:"text-blue-600 hover:text-blue-800",children:"Close"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-t-3xl relative",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:y.profileImage,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}),t.jsx("div",{className:"absolute bottom-0 right-0 bg-green-500 w-8 h-8 rounded-full border-4 border-white flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs",children:""})}),n&&t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:t.jsxs("label",{className:"cursor-pointer text-white text-sm font-medium hover:text-gray-200",children:["Change Photo",t.jsx("input",{type:"file",accept:"image/*",onChange:ee,className:"hidden"})]})})]}),t.jsxs("div",{className:"text-center md:text-left flex-1",children:[t.jsx("h2",{className:"text-3xl font-bold mb-2",children:y.fullName}),t.jsx("p",{className:"text-blue-100 text-lg font-medium mb-1",children:"Teacher Profile"}),t.jsx("p",{className:"text-blue-200 mb-2",children:"AutiSync User"})]}),t.jsx("div",{className:"flex space-x-3",children:n?t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:B,className:"bg-green-500 text-white px-4 py-3 rounded-xl font-semibold flex items-center space-x-2 hover:bg-green-600 transition-colors shadow-lg",children:[t.jsx(Do,{className:"w-5 h-5"}),t.jsx("span",{children:"Save"})]}),t.jsxs("button",{onClick:K,className:"bg-red-500 text-white px-4 py-3 rounded-xl font-semibold flex items-center space-x-2 hover:bg-red-600 transition-colors shadow-lg",children:[t.jsx(bf,{className:"w-5 h-5"}),t.jsx("span",{children:"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:T,className:"cursor-pointer bg-white text-blue-600 px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 hover:bg-gray-50 transition-colors shadow-lg",children:[t.jsx(sj,{className:"w-5 h-5"}),t.jsx("span",{children:"Edit Profile"})]}),t.jsxs("button",{onClick:M,className:"cursor-pointer bg-red-500 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 hover:bg-red-600 transition-colors shadow-lg",children:[t.jsx(k2,{className:"w-5 h-5"}),t.jsx("span",{children:"Logout"})]})]})})]})}),t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx(xj,{className:"w-6 h-6 text-blue-600"}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Personal Information"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Full Name"}),n?t.jsx("input",{type:"text",name:"fullName",value:y.fullName,onChange:X,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):t.jsx("p",{className:"text-lg font-semibold text-gray-800",children:y.fullName})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Email Address"}),n?t.jsx("input",{type:"email",name:"email",value:y.email,onChange:X,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):t.jsx("p",{className:"text-lg font-semibold text-gray-800",children:y.email})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[t.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-600 mb-2",children:[t.jsx(nj,{className:"w-4 h-4"}),t.jsx("span",{children:"Phone Number"})]}),n?t.jsx("input",{type:"tel",name:"phone",value:y.phone,onChange:X,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):t.jsx("p",{className:"text-lg font-semibold text-gray-800",children:y.phone})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[t.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-600 mb-2",children:[t.jsx(D2,{className:"w-4 h-4"}),t.jsx("span",{children:"Date of Birth"})]}),n?t.jsx("input",{type:"text",name:"birthday",value:y.birthday,onChange:X,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):t.jsx("p",{className:"text-lg font-semibold text-gray-800",children:y.birthday})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx(V2,{className:"w-6 h-6 text-purple-600"}),t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Additional Information"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Gender"}),n?t.jsxs("select",{name:"gender",value:y.gender,onChange:X,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Other",children:"Other"}),t.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}):t.jsx("p",{className:"text-lg font-semibold text-gray-800",children:y.gender})]}),t.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[t.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-600 mb-2",children:[t.jsx(tj,{className:"w-4 h-4"}),t.jsx("span",{children:"Address"})]}),n?t.jsx("textarea",{name:"address",value:y.address,onChange:X,rows:"2",className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"}):t.jsx("p",{className:"text-lg font-semibold text-gray-800",children:y.address})]})]})]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("button",{onClick:O,className:"cursor-pointer bg-green-600 hover:bg-green-800 text-white px-8 py-3 rounded-xl font-semibold transition-colors flex items-center space-x-2",disabled:x,children:t.jsx("span",{children:x?"Saving...":" Back to Dashboard"})}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})]})})]})]})})})]})]})}const iN=()=>{const i=ut(),[s,n]=m.useState([]),[l,c]=m.useState([]),[d,h]=m.useState([]),[g,x]=m.useState(!0),[p,b]=m.useState(null),[y,w]=m.useState("alerts"),[S,C]=m.useState("24h"),R=q=>{q.preventDefault(),i("/adminprofile")},O=q=>{const z=new Date;let E;switch(q){case"24h":E=new Date(z.getTime()-1440*60*1e3);break;case"7d":E=new Date(z.getTime()-10080*60*1e3);break;case"1m":E=new Date(z.getTime()-720*60*60*1e3);break;case"3m":E=new Date(z.getTime()-2160*60*60*1e3);break;case"all":default:return null}return E.toISOString()};m.useEffect(()=>{M(),T()},[S]);const M=async()=>{x(!0);try{const q=O(S);let z=de.from("Expressions").select("*").in("emotion",["angry","sad"]).order("created_at",{ascending:!1});q&&(z=z.gte("created_at",q));const{data:E,error:A}=await z;if(A)console.error("Error fetching high priority emotions:",A),b(`Failed to fetch priority alerts: ${A.message||"Unknown database error"}`);else{console.log("High priority emotions data:",E);let J=[];if(E&&E.length>0){const ie=[...new Set(E.map(G=>G.user_id).filter(Boolean))];let k=[];if(ie.length>0){const{data:G,error:I}=await de.from("user_profiles").select("user_id, full_name, username").in("user_id",ie);!I&&G&&(k=G)}J=E.map(G=>{const I=k.find(xe=>xe.user_id===G.user_id),oe=I?.user_profiles?.full_name||I?.user_profiles?.username||I?.full_name||I?.username||"Unknown Student";return{id:G.id,studentName:oe,emotion:G.emotion,displayEmotion:ee(G.emotion),note:G.note||"No additional note provided by student",timestamp:new Date(G.created_at),status:"priority",priority:"High"}})}console.log("Processed high priority alerts:",J),n(J),console.log(`Found ${J.length} high priority alerts (angry/sad level 4-5)`)}const{data:P,error:V}=await de.from("notifications").select("*").eq("type","alert").eq("is_read",!1).order("created_at",{ascending:!1}).limit(10);V?console.error("Error fetching notifications:",V):h(P||[])}catch(q){console.error("Error in fetchAlertsAndNotifications:",q),b("Failed to fetch data")}finally{x(!1)}},T=async()=>{try{const q=O(S);let z=de.from("Expressions").select("*").order("created_at",{ascending:!1}).limit(50);q&&(z=z.gte("created_at",q));const{data:E,error:A}=await z;if(A){console.error("Error fetching expressions:",A);return}if(console.log(`Expressions data (${S}):`,E),!E||E.length===0){c([]);return}const P=[...new Set(E.map(I=>I.user_id).filter(Boolean))];let V=[];if(P.length>0){const{data:I,error:oe}=await de.from("user_profiles").select("user_id, full_name, username").in("user_id",P);!oe&&I?V=I:console.error("Error fetching user profiles:",oe)}console.log("User profiles data:",V);const J=E.map(I=>{const oe=V.find(F=>F.user_id===I.user_id),xe=oe?.full_name||oe?.username||oe?.full_name||oe?.username||"Unknown Student",_=ee(I.emotion);return{id:I.id,studentName:xe,emotion:I.emotion,displayEmotion:_,note:I.note||"No additional note provided by student",timestamp:new Date(I.created_at),isHighPriority:I.emotion==="angry"||I.emotion==="sad",emotionType:["happy","excited","calm"].includes(I.emotion)?"positive":"negative"}});console.log("Processed all emotions:",J),c(J);const ie=J.filter(I=>I.emotionType==="positive").length,k=J.filter(I=>I.emotionType==="negative").length,G=J.filter(I=>I.isHighPriority).length;console.log(`Emotion breakdown: ${ie} positive, ${k} negative, ${G} high priority`)}catch(q){console.error("Error in fetchAllEmotions:",q)}},B=async q=>{try{const{error:z}=await de.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",q);z?console.error("Error marking notification as read:",z):h(E=>E.filter(A=>A.id!==q))}catch(z){console.error("Error in markNotificationAsRead:",z)}},K=q=>{const E=Math.floor((new Date-q)/(1e3*60));if(E<1)return"Just now";if(E<60)return`${E} minutes ago`;const A=Math.floor(E/60);if(A<24)return`${A} hours ago`;const P=Math.floor(A/24);return P===1?"Yesterday":P<7?`${P} days ago`:q.toLocaleDateString()},X=q=>{switch(q){case"High":return"bg-red-100 text-red-800 border-red-200";case"Intermediate":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ee=q=>{switch(q?.toLowerCase()){case"angry":return"Upset";case"calm":return"Tired";default:return q}},re=q=>{switch(q?.toLowerCase()){case"angry":return"";case"sad":return"";case"happy":return"";case"excited":return"";case"calm":return"";default:return""}};return g?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"}),t.jsx("p",{className:"mt-4 text-lg text-indigo-600",children:"Loading emotions data..."})]})}):p?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ci,{className:"h-32 w-32 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-lg text-red-600",children:p}),t.jsx("button",{onClick:()=>{M(),T()},className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Try Again"})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white  rounded-xl",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:R,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"max-w-full mx-auto px-6 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:" Student Emotions Dashboard"}),t.jsxs("p",{className:"text-lg text-gray-600",children:["Monitor student emotions ",S==="24h"&&" Showing last 24 hours",S==="7d"&&" Showing last 7 days",S==="1m"&&" Showing last month",S==="3m"&&" Showing last 3 months",S==="all"&&" Showing all time data","  Live updates"]})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:()=>{M(),T()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" Refresh Data"}),t.jsx("button",{onClick:()=>i(-1),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors",children:" Back"})]})]}),t.jsx("div",{className:"mt-6 border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>w("alerts"),className:`bg-white py-2 px-1 border-b-2 font-medium text-sm w-45 cursor-pointer ${y==="alerts"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Priority Alerts"}),t.jsx("button",{onClick:()=>w("history"),className:`-ml-6 bg-white py-2 px-1 border-b-2 font-medium text-sm w-45 cursor-pointer ${y==="history"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" All Emotions History"})]})}),t.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[t.jsx(Bs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Time Range Filter"]}),t.jsx("div",{className:"flex space-x-2",children:[{value:"24h",label:"24 Hours"},{value:"7d",label:"7 Days"},{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"all",label:"All Time"}].map(q=>t.jsx("button",{onClick:()=>C(q.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${S===q.value?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:q.label},q.value))})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ci,{className:"h-12 w-12 text-red-500"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"High Priority Alerts"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Bs,{className:"h-12 w-12 text-yellow-500"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread Notifications"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:d.length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-3xl mr-3",children:""}),t.jsxs("div",{className:"ml-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Positive Emotions"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.filter(q=>q.emotionType==="positive").length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(yd,{className:"h-12 w-12 text-blue-500"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Emotions"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.length})]})]})})]}),d.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Unread Notifications"}),t.jsx("div",{className:"space-y-4",children:d.map(q=>t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-yellow-800 font-medium",children:q.message}),t.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:K(new Date(q.created_at))})]}),t.jsx("button",{onClick:()=>B(q.id),className:"ml-4 px-3 py-1 bg-yellow-200 text-yellow-800 rounded hover:bg-yellow-300 text-sm",children:"Mark as Read"})]})},q.id))})]}),y==="alerts"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Priority Alerts (Negative Emotions)"}),s.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"text-xl text-gray-600",children:"No high-priority alerts at this time!"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"All students are doing well emotionally."})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(q=>t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-3xl mr-3",children:re(q.emotion)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:q.studentName}),t.jsx("p",{className:"text-gray-600 capitalize",children:q.displayEmotion||q.emotion})]})]}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${X(q.priority)}`,children:[q.priority," Priority"]})]}),q.note&&q.note.trim()!==""?t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"text-blue-400",children:""})}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:" Student's Private Note (Admin/Teacher Only)"}),t.jsxs("p",{className:"text-blue-700 text-sm leading-relaxed bg-white rounded p-2 italic",children:['"',q.note,'"']}),t.jsx("p",{className:"text-xs text-blue-600 mt-2",children:" This note is confidential and only visible to admin/teacher and parents"})]})]})}):t.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-center",children:t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No additional note provided by student"})}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(Bs,{className:"h-4 w-4 mr-1"}),K(q.timestamp)]}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(ci,{className:"h-4 w-4 mr-1"}),"Requires Attention"]})]})]},q.id))})]}),y==="history"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" All Emotions History"}),l.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"text-xl text-gray-600",children:"No emotions recorded yet!"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Student emotions will appear here once they start sharing."})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:l.map(q=>t.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-4 border-l-4 ${q.emotionType==="positive"?"border-green-500":q.isHighPriority?"border-red-500":"border-orange-400"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-2xl mr-2",children:re(q.emotion)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-md font-bold text-gray-900",children:q.studentName}),t.jsx("p",{className:"text-gray-600 capitalize text-sm",children:q.displayEmotion||q.emotion})]})]}),t.jsx("div",{className:"flex flex-col items-end",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q.emotionType==="positive"?"bg-green-100 text-green-800":q.isHighPriority?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:q.emotionType==="positive"?" Positive":q.isHighPriority?" High Priority":" Negative"})})]}),q.note&&q.note.trim()!==""&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 mb-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Note:"}),t.jsxs("p",{className:"text-gray-600 text-xs italic",children:['"',q.note,'"']})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(Bs,{className:"h-3 w-3 mr-1"}),K(q.timestamp)]}),q.isHighPriority&&t.jsxs("span",{className:"flex items-center text-red-500",children:[t.jsx(ci,{className:"h-3 w-3 mr-1"}),"Alert Created"]})]})]},q.id))})]})]})]})};async function oN(i){try{const{data:s,error:n}=await de.from("streaks").select("*").eq("user_id",i).single();if(n&&n.code==="PGRST116"){const{data:l,error:c}=await de.from("streaks").insert([{user_id:i,current_streak:0,longest_streak:0,last_active_date:null}]).select().single();return{data:l,error:c}}return{data:s,error:n}}catch(s){return console.error("Error getting student streak:",s),{data:null,error:{message:s.message}}}}async function cN(i){try{const{data:s,error:n}=await oN(i);if(n)return{data:null,error:n};const l=new Date().toISOString().split("T")[0],c=s.last_active_date;let d=!1;c&&(d=c===l);const h=Math.min(s.current_streak,7),g=Math.max(0,7-s.current_streak);return{data:{currentStreak:s.current_streak,longestStreak:s.longest_streak,isActiveToday:d,lastActiveDate:s.last_active_date,daysTowards7Day:h,daysUntilPerfectWeek:g,streakEmoji:dN(s.current_streak)},error:null}}catch(s){return console.error("Error getting streak stats:",s),{data:null,error:{message:s.message}}}}function dN(i){return i>=30?"":i>=14?"":i>=7?"":i>=3?"":i>=1?"":""}const ip=()=>{const i=[{id:1,icon:"",iconComponent:ya,color:"blue",title:"Celebrate Small Wins",description:"Every completed activity is a step forward. Acknowledge your child's effort and progress, no matter how small.",tips:["Use positive reinforcement when they complete an activity","Create a reward system for consistent engagement","Share their achievements with family members"]},{id:2,icon:"",iconComponent:Yr,color:"yellow",title:"Consistent Routine",description:"Children with autism thrive on predictability. Establish a regular learning schedule.",tips:["Set specific times for learning activities each day","Use visual schedules to help them anticipate activities","Be flexible but maintain core routine elements"]},{id:3,icon:"",iconComponent:dt,color:"purple",title:"Break Tasks Down",description:"Complex tasks can be overwhelming. Break activities into smaller, manageable steps.",tips:["Focus on one skill at a time","Provide clear, simple instructions","Allow extra time for processing and responses"]},{id:4,icon:"",iconComponent:Qh,color:"indigo",title:"Use Their Interests",description:"Incorporate your child's special interests into learning activities for better engagement.",tips:["Connect lessons to topics they love","Use their favorite characters or themes as examples","Let them choose activities when possible"]},{id:5,icon:"",iconComponent:G2,color:"green",title:"Monitor Emotions",description:"Pay attention to your child's emotional state. The emotion tracking feature helps identify patterns.",tips:["Check the Emotions section regularly","Respond promptly to negative emotions","Discuss their feelings in a safe, supportive way"]},{id:6,icon:"",iconComponent:Yr,color:"orange",title:"Create a Calm Environment",description:"A sensory-friendly learning space can significantly improve focus and reduce anxiety.",tips:["Minimize distractions and loud noises","Ensure good lighting (natural light is best)","Provide sensory tools if needed (fidget toys, headphones)"]}],s=n=>{const l={blue:{bg:"from-blue-50 to-cyan-50",border:"border-blue-200",iconBg:"from-blue-500 to-cyan-600",text:"text-blue-600"},yellow:{bg:"from-yellow-50 to-amber-50",border:"border-yellow-200",iconBg:"from-yellow-500 to-amber-600",text:"text-yellow-600"},purple:{bg:"from-purple-50 to-violet-50",border:"border-purple-200",iconBg:"from-purple-500 to-violet-600",text:"text-purple-600"},indigo:{bg:"from-indigo-50 to-blue-50",border:"border-indigo-200",iconBg:"from-indigo-500 to-blue-600",text:"text-indigo-600"},green:{bg:"from-green-50 to-emerald-50",border:"border-green-200",iconBg:"from-green-500 to-emerald-600",text:"text-green-600"},orange:{bg:"from-orange-50 to-red-50",border:"border-orange-200",iconBg:"from-orange-500 to-red-600",text:"text-orange-600"}};return l[n]||l.blue};return t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[t.jsx(Qh,{className:"w-8 h-8 mr-3 text-yellow-500"}),"Parenting Tips & Guidance"]}),t.jsx("p",{className:"text-lg text-gray-600 ml-11",children:"Expert advice to support your child's learning journey  Evidence-based strategies"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(n=>{const l=s(n.color),c=n.iconComponent;return t.jsxs("div",{className:`bg-gradient-to-br ${l.bg} rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 border-2 ${l.border}`,children:[t.jsxs("div",{className:"flex items-start mb-4",children:[t.jsx("div",{className:`p-3 bg-gradient-to-br ${l.iconBg} rounded-xl shadow-lg mr-4`,children:t.jsx(c,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:[n.icon," ",n.title]}),t.jsx("p",{className:"text-gray-700 text-sm leading-relaxed mb-4",children:n.description})]})]}),t.jsxs("div",{className:"ml-2",children:[t.jsx("h4",{className:`text-sm font-semibold ${l.text} mb-2`,children:" Practical Tips:"}),t.jsx("ul",{className:"space-y-2",children:n.tips.map((d,h)=>t.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[t.jsx("span",{className:`${l.text} mr-2 font-bold`,children:""}),t.jsx("span",{className:"leading-relaxed",children:d})]},h))})]})]},n.id)})}),t.jsxs("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(ya,{className:"w-6 h-6 mr-2 text-blue-600"}),"Remember: You're Doing Great!"]}),t.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Every child learns at their own pace. Your consistent support and patience make all the difference. Use the dashboard to monitor progress, celebrate achievements, and stay connected with your child's emotional wellbeing. Don't hesitate to reach out to teachers or specialists if you notice concerning patterns."}),t.jsxs("div",{className:"mt-4 flex items-start space-x-2 bg-white rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Need Additional Support?"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Contact your child's teacher through the school portal or consult with specialists for personalized guidance."})]})]})]})]})},op=({isOpen:i,onClose:s})=>{const{user:n}=Vr(),l=ut(),[c,d]=m.useState(!1),[h,g]=m.useState(!1),[x,p]=m.useState(""),[b,y]=m.useState(""),[w,S]=m.useState({fullName:"",phoneNumber:"",gender:"",address:""});Ps.useEffect(()=>{if(n&&i){const K=n.user_metadata||{};S({fullName:K.full_name||"",phoneNumber:K.phone_number||K.phone||"",gender:K.gender||"",address:K.address||""})}},[n,i]);const C=()=>{l("/")};if(!i)return null;const R=K=>K?new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided",O=K=>{const{name:X,value:ee}=K.target;S(re=>({...re,[X]:ee}))},M=()=>{d(!0),p(""),y("")},T=()=>{const K=n.user_metadata||{};S({fullName:K.full_name||"",phoneNumber:K.phone_number||K.phone||"",gender:K.gender||"",address:K.address||""}),d(!1),p(""),y("")},B=async()=>{g(!0),p(""),y("");try{const{error:K}=await de.auth.updateUser({data:{full_name:w.fullName,phone_number:w.phoneNumber,gender:w.gender,address:w.address}});if(K){p("Failed to update profile: "+K.message);return}const X=Date.now(),ee=Math.floor(Math.random()*1e3),q={user_id:parseInt(`${X.toString().slice(-8)}${ee}`.slice(0,9)),username:w.fullName||n.email?.split("@")[0]||"parent",first_name:w.fullName?.split(" ")[0]||"",last_name:w.fullName?.split(" ").slice(1).join(" ")||"",email:n.email,gender:w.gender,address:w.address,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Creating/updating parent profile:",q);const{data:z,error:E}=await de.from("user_profiles").select("*").eq("email",n.email).maybeSingle();if(E&&E.code!=="PGRST116"&&console.error("Error checking for existing profile:",E),z){const A={username:w.fullName||n.email?.split("@")[0]||"parent",first_name:w.fullName?.split(" ")[0]||"",last_name:w.fullName?.split(" ").slice(1).join(" ")||"",email:n.email,gender:w.gender,address:w.address,updated_at:new Date().toISOString()},{error:P}=await de.from("user_profiles").update(A).eq("email",n.email);if(P){console.error("Error updating profile in user_profiles:",P),p("Profile metadata updated, but failed to update database profile: "+P.message),g(!1);return}console.log("Parent profile updated successfully")}else{const{error:A}=await de.from("user_profiles").insert([q]);if(A){console.error("Error creating profile in user_profiles:",A),p("Profile metadata updated, but failed to create database profile: "+A.message),g(!1);return}console.log("Parent profile created successfully")}y("Profile updated successfully!"),d(!1),setTimeout(()=>{y("")},3e3)}catch(K){p("An unexpected error occurred. Please try again."),console.error("Profile update error:",K)}finally{g(!1)}};return n?.user_metadata,t.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-t-3xl relative",children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-xl transition-all duration-200",children:t.jsx(lp,{className:"w-6 h-6"})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Parent Profile",className:"w-16 h-16 rounded-xl object-cover border-2 border-white"})}),t.jsxs("div",{className:"text-white",children:[t.jsx("h2",{className:"text-3xl font-bold",children:w.fullName||n?.user_metadata?.full_name||"Parent Account"}),t.jsx("p",{className:"text-blue-100 text-lg",children:"Parent Portal Access"}),t.jsxs("div",{className:"flex items-center mt-2 text-blue-100",children:[t.jsx(Sj,{className:"w-4 h-4 mr-2"}),t.jsxs("span",{className:"text-sm",children:["Member since ",R(n?.created_at)]})]})]})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[t.jsx(zj,{className:"w-6 h-6 mr-3 text-blue-600"}),"Account Information"]}),t.jsx("div",{className:"flex items-center space-x-2",children:c?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("button",{onClick:B,disabled:h,className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-all duration-200 transform hover:scale-105",children:[t.jsx(kj,{className:"w-4 h-4"}),t.jsx("span",{children:h?"Saving...":"Save"})]}),t.jsxs("button",{onClick:T,disabled:h,className:"flex items-center space-x-2 bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-all duration-200 transform hover:scale-105",children:[t.jsx(Vj,{className:"w-4 h-4"}),t.jsx("span",{children:"Cancel"})]})]}):t.jsxs("button",{onClick:M,className:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-200 transform hover:scale-105",children:[t.jsx(np,{className:"w-4 h-4"}),t.jsx("span",{children:"Edit"})]})})]}),x&&t.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:x}),b&&t.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg text-sm",children:b}),t.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-700 border-b border-gray-200 pb-2",children:"Personal Details"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(cx,{className:"w-5 h-5 text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),c?t.jsx("input",{type:"text",name:"fullName",value:w.fullName,onChange:O,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"}):t.jsx("p",{className:"text-gray-800 font-semibold",children:w.fullName||"Not provided"})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Oj,{className:"w-5 h-5 text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-800 font-semibold break-all",children:n?.email||"Not provided"}),c&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed here"})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx($j,{className:"w-5 h-5 text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),c?t.jsx("input",{type:"tel",name:"phoneNumber",value:w.phoneNumber,onChange:O,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+63 912 345 6789"}):t.jsx("p",{className:"text-gray-800 font-semibold",children:w.phoneNumber||"Not provided"})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(cx,{className:"w-5 h-5 text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Gender"}),c?t.jsxs("select",{name:"gender",value:w.gender,onChange:O,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select your gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"}),t.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]}):t.jsx("p",{className:"text-gray-800 font-semibold",children:w.gender||"Not provided"})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Uj,{className:"w-5 h-5 text-gray-500 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Address"}),c?t.jsx("textarea",{name:"address",value:w.address,onChange:O,rows:"2",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter your address"}):t.jsx("p",{className:"text-gray-800 font-semibold",children:w.address||"Not provided"})]})]})]})]})}),t.jsxs("div",{className:"mt-8 text-center space-x-4",children:[t.jsx("button",{onClick:s,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"Close Profile"}),t.jsx("button",{onClick:C,className:" cursor-pointer bg-red-700 text-white px-8 py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"Log out"})]})]})]})})};async function uN(i,s,n,l){try{console.log("parentChildApi: Linking parent to child:",{parentUserId:i,childUserId:s,parentEmail:n,childEmail:l});const{data:c,error:d}=await Jx(i);if(d||!c)return{data:null,error:{message:"Parent account not found"}};const{data:h,error:g}=await de.from("user_profiles").select("*").eq("user_id",s).single();if(g||!h)return{data:null,error:{message:"Student account not found"}};const x=await P1(c.id,h.user_id);return x.error&&!x.error.message.includes("already linked")?x:{data:{parent_id:c.id,student_id:h.user_id,child_user_id:s,child_name:h.full_name,child_email:h.email,linked_at:new Date().toISOString()},error:null}}catch(c){return console.error("parentChildApi: Unexpected error:",c),{data:null,error:{message:c.message}}}}const hN=({isOpen:i,onClose:s,onChildLinked:n})=>{const{user:l}=Vr(),[c,d]=m.useState({username:""}),[h,g]=m.useState(!1),[x,p]=m.useState(""),[b,y]=m.useState("");Ps.useEffect(()=>{console.log(" LinkChild Modal open state:",i),i&&(console.log(" Modal opened - clearing form"),p(""),y(""),d({username:""}),g(!1))},[i]),Ps.useEffect(()=>{console.log(" LinkChildModal component mounted")},[]),console.log(" LinkChildModal render - isOpen:",i);const w=i||!1,S=R=>{d({...c,[R.target.name]:R.target.value}),x&&p(""),b&&y("")},C=async R=>{if(R.preventDefault(),!c.username){p("Please enter the student email address");return}g(!0),p(""),y("");try{if(console.log(" Linking child with email:",c.username),console.log(" Parent auth user ID (UUID):",l.id),!l||!l.id)throw new Error("User authentication required. Please log in again.");if(!c.username.includes("@"))throw new Error("Please enter a valid email address.");console.log("Debug: Checking all students in database...");const{data:O,error:M}=await de.from("user_profiles").select("email, username, user_id, full_name, id").limit(10);!M&&O?(console.log("Debug: Available students:",O),console.log("Debug: Looking for email:",c.username)):console.log("Debug: Could not fetch students for debugging:",M);let T=null;const{data:B,error:K}=await Jx(l.id);if(!K&&B)T=B,console.log("Found existing parent profile:",T);else{console.log("Parent not found. Creating parent profile...");const E={user_id:l.id,full_name:l.user_metadata?.full_name||l.email?.split("@")[0]||"Parent",email:l.email,phone_number:l.user_metadata?.phone||"",address:l.user_metadata?.address||""};console.log("Attempting to create parent profile with data:",E);const{data:A,error:P}=await Zx(E);if(P){console.error("Error creating parent profile:",P),p("Could not create parent profile: "+P.message+". Please save your parent profile first and try again."),g(!1);return}T=A[0],console.log("Created new parent profile:",T)}if(!T){p("Parent profile not found. Please create your profile first."),g(!1);return}let X;const{data:ee,error:re}=await de.from("user_profiles").select("*").eq("email",c.username).single();if(re){console.error("Student lookup error:",re),console.error("Error details:",re),console.log("Trying alternative search by email...");const{data:E,error:A}=await de.from("user_profiles").select("*").ilike("email",c.username).single();if(A){console.error("Alternative search also failed:",A),p(`Student not found with email "${c.username}". Please check the email address and ensure the student has created a profile.`),g(!1);return}console.log("Found student via alternative search:",E),X=E}else console.log("Student profile found:",ee),X=ee;console.log("Attempting to create parent-child relationship with:",{parentUserId:l.id,studentUserId:X.user_id,parentEmail:l.email,studentEmail:X.email});const{data:q,error:z}=await uN(l.id,X.user_id,l.email,X.email);if(z){console.error("Error creating relationship:",z),p("Failed to link child account: "+z.message),z.details&&p(z.message+" - "+z.details),g(!1);return}if(console.log("Child linked successfully:",q),y(`Successfully linked ${X.full_name||X.username}!`),n){const E={id:X.id,name:X.full_name||X.username,email:X.email,username:X.username,user_id:X.user_id,relation_id:q[0]?.id};console.log("LinkChildModal: Calling onChildLinked with data:",E),n(E)}setTimeout(()=>{d({username:""}),y(""),s()},1500)}catch(O){console.error("Error in handleSubmit:",O),p("An unexpected error occurred: "+O.message)}finally{g(!1)}};return w?(console.log("Modal IS open, rendering modal!"),t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/20 via-blue-900/20 to-indigo-900/20 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",style:{zIndex:9999,animation:"fadeIn 0.3s ease-out"},children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full transform transition-all duration-300 scale-100 hover:scale-[1.02] animate-scale-in",style:{animation:"scaleIn 0.3s ease-out"},children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 p-6 rounded-t-3xl text-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})}),t.jsx("h2",{className:"text-2xl font-bold",children:"Link Child Account"})]}),t.jsx("button",{onClick:s,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:t.jsx("span",{className:"text-xl",children:""})})]}),t.jsx("p",{className:"text-blue-100 text-sm",children:"Connect your child's existing student account to track their progress"})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("form",{onSubmit:C,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:t.jsxs("span",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{children:"Child's Email Address"})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"email",name:"username",value:c.username,onChange:S,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-700 placeholder-gray-400",placeholder:"Enter your child's email address",required:!0}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:t.jsx("span",{className:"text-gray-400",children:""})})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Make sure this matches the email your child used to sign up"})]}),x&&t.jsx("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-400 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-red-500 mr-2",children:""}),t.jsx("p",{className:"text-red-700 text-sm font-medium",children:x})]})}),b&&t.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-400 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-green-500 mr-2",children:""}),t.jsx("p",{className:"text-green-700 text-sm font-medium",children:b})]})}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:s,className:"flex-1 py-3 px-6 border-2 border-gray-200 rounded-xl text-gray-600 font-semibold hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 transform hover:scale-105",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:h,className:"flex-1 py-3 px-6 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:h?t.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Linking..."})]}):t.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Link Child"})]})})]})]}),t.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("span",{className:"text-blue-500 text-lg",children:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Need Help?"}),t.jsx("p",{className:"text-xs text-blue-600",children:"Your child must have a student account first. If they don't have one, ask them to sign up at the student portal."})]})]})})]})]})})):(console.log("Modal not open, returning null"),null)},fN=({isOpen:i,onClose:s,child:n,activities:l,loading:c})=>{if(!i)return null;const d=l?.filter(p=>p.progressData.status==="completed")||[],h=l?.filter(p=>p.progressData.averageScore>0).length>0?Math.round(l.filter(p=>p.progressData.averageScore>0).reduce((p,b)=>p+b.progressData.averageScore,0)/l.filter(p=>p.progressData.averageScore>0).length):0,g=Math.max(...l?.map(p=>p.progressData.bestScore)||[0],0),x=l?.reduce((p,b)=>p+b.progressData.completedCount,0)||0;return t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900/90 via-purple-900/90 to-indigo-900/90 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl border border-white/20 animate-scaleIn",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 text-white p-6 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"}),t.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(dt,{className:"w-8 h-8"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Activity Progress"}),t.jsx("p",{className:"text-blue-100 text-lg",children:n?.full_name||n?.username})]})]}),t.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-all duration-200 p-2 rounded-lg hover:bg-white/20",children:t.jsx(bf,{className:"w-6 h-6"})})]})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] bg-gradient-to-br from-gray-50 to-blue-50/30 relative",children:[t.jsxs("div",{className:"absolute inset-0 opacity-5",children:[t.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-blue-400 rounded-full"}),t.jsx("div",{className:"absolute top-32 right-16 w-16 h-16 bg-purple-400 rounded-full"}),t.jsx("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-indigo-400 rounded-full"}),t.jsx("div",{className:"absolute bottom-40 right-32 w-14 h-14 bg-pink-400 rounded-full"})]}),t.jsx("div",{className:"relative z-10",children:c?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading activity data..."})]}):!l||l.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(dt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Activities Available"}),t.jsx("p",{className:"text-gray-500",children:"No learning activities found in the system."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-green-500 rounded-lg shadow-md",children:t.jsx(Do,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-green-600",children:"Completed"}),t.jsx("p",{className:"text-2xl font-bold text-green-800",children:d.length})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shadow-md",children:t.jsx(Yr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Average Score"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:[h,"%"]})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-purple-500 rounded-lg shadow-md",children:t.jsx(ef,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Best Score"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-800",children:[g,"%"]})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-orange-500 rounded-lg shadow-md",children:t.jsx(Bs,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Total Attempts"}),t.jsx("p",{className:"text-2xl font-bold text-orange-800",children:x})]})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"All Activities"}),l.map((p,b)=>t.jsx("div",{className:"bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition-colors border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${p.progressData.status==="completed"?"bg-green-500":"bg-gray-300"}`}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:p.title}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:p.Categories?.name||p.Categories?.category_name||"General"}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full",children:p.Difficulties?.name||p.Difficulties?.level_name||"Easy"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:p.instructions}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Do,{className:"w-4 h-4 text-green-600"}),t.jsxs("span",{className:"text-gray-600",children:["Completed: ",t.jsxs("span",{className:"font-medium",children:[p.progressData.completedCount," times"]})]})]}),p.progressData.averageScore>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Yr,{className:"w-4 h-4 text-yellow-600"}),t.jsxs("span",{className:"text-gray-600",children:["Avg Score: ",t.jsxs("span",{className:"font-medium",children:[p.progressData.averageScore,"%"]})]})]}),p.progressData.bestScore>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ef,{className:"w-4 h-4 text-purple-600"}),t.jsxs("span",{className:"text-gray-600",children:["Best: ",t.jsxs("span",{className:"font-medium",children:[p.progressData.bestScore,"%"]})]})]}),p.progressData.lastCompleted&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Bs,{className:"w-4 h-4 text-blue-600"}),t.jsxs("span",{className:"text-gray-600",children:["Last: ",t.jsx("span",{className:"font-medium",children:new Date(p.progressData.lastCompleted).toLocaleDateString()})]})]})]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:p.progressData.status==="completed"?t.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[t.jsx(Do,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"Completed"})]}):t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[t.jsx(J2,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"Not Started"})]})})]})},p.id))]})]})})]})]})})},mN=()=>{ut();const{user:i}=Vr(),[s,n]=m.useState([]),[l,c]=m.useState(!0),[d,h]=m.useState(null),[g,x]=m.useState("overview"),[p,b]=m.useState(!1),[y,w]=m.useState(!1),[S,C]=m.useState([]),[R,O]=m.useState(!1),[M,T]=m.useState("24h"),[B,K]=m.useState(null),[X,ee]=m.useState([]),[re,q]=m.useState([]),[z,E]=m.useState(null),[A,P]=m.useState(!1),[V,J]=m.useState([]),[ie,k]=m.useState(!1),[G,I]=m.useState(!1);m.useEffect(()=>{i?.id&&_()},[i?.id]),m.useEffect(()=>{console.log("ParentDashboard: useEffect triggered - selectedChild:",d,"currentView:",g),d?.user_id&&g==="emotions"&&(console.log("ParentDashboard: Loading emotions for child user_id:",d.user_id),F(d.user_id)),d?.user_id&&g==="overview"&&(se(d.user_id),console.log("ParentDashboard: About to load activities for child user_id:",d.user_id),ne(d.user_id))},[d,g,M]);const oe=ae=>{const ge=new Date;let Ee;switch(ae){case"24h":Ee=new Date(ge.getTime()-1440*60*1e3);break;case"7d":Ee=new Date(ge.getTime()-10080*60*1e3);break;case"1m":Ee=new Date(ge.getTime()-720*60*60*1e3);break;case"3m":Ee=new Date(ge.getTime()-2160*60*60*1e3);break;case"all":default:return null}return Ee.toISOString()},xe=ae=>{switch(ae){case"24h":return"last 24 hours";case"7d":return"last 7 days";case"1m":return"last month";case"3m":return"last 3 months";case"all":return"all time";default:return ae}},_=async()=>{try{c(!0),console.log("ParentDashboard: Loading children for parent user_id:",i?.id);const{data:ae,error:ge}=await de.from("parents").select("children_ids").eq("user_id",i.id).single();if(console.log("ParentDashboard: Parent data result:",{parentData:ae,parentError:ge}),ge){console.error("ParentDashboard: Error loading parent:",ge),n([]);return}if(!ae||!ae.children_ids||ae.children_ids.length===0){console.log("ParentDashboard: No children found in parent record"),n([]);return}const{data:Ee,error:Me}=await de.from("user_profiles").select("*").in("user_id",ae.children_ids);if(console.log("ParentDashboard: Child profiles result:",{childProfiles:Ee,profilesError:Me}),Me){console.error("ParentDashboard: Error loading child profiles:",Me),n([]);return}if(Ee&&Ee.length>0){const $e=Ee.map(Re=>({id:Re.user_id,user_id:Re.user_id,full_name:Re.full_name||Re.username,username:Re.username,age:Re.age,email:Re.email,gender:Re.gender,profile_picture:Re.profile_picture||"/assets/kidprofile1.jpg",linked_at:new Date().toISOString()}));console.log("ParentDashboard: Transformed children data:",$e),n($e),$e.length>0&&h($e[0])}else console.log("ParentDashboard: No child profiles found"),n([])}catch(ae){console.error("Error loading children data:",ae),n([])}finally{c(!1)}},F=async ae=>{try{O(!0),console.log("ParentDashboard: Loading emotions for child user_id:",ae),console.log("ParentDashboard: Using time filter:",M),console.log("ParentDashboard: Getting emotions for user_id:",ae);let ge=de.from("Expressions").select("*").eq("user_id",ae);const Ee=oe(M);Ee&&(ge=ge.gte("created_at",Ee),console.log("ParentDashboard: Applied time filter:",Ee));const{data:Me,error:$e}=await ge.order("created_at",{ascending:!1}).limit(50);if(console.log("ParentDashboard: Raw emotions query result:",{emotions:Me,emotionsError:$e}),console.log("ParentDashboard: Number of emotions found:",Me?.length||0),$e){console.error("ParentDashboard: Error loading emotions:",$e),C([]),O(!1);return}const Re=Me?.map(Pe=>({...Pe,emotion_name:Pe.emotion?.charAt(0).toUpperCase()+Pe.emotion?.slice(1)||"Unknown",emotion_description:Pe.note||"",time:Pe.created_at}))||[];console.log("ParentDashboard: Transformed emotions:",Re),C(Re)}catch(ge){console.error("ParentDashboard: Error fetching child emotions:",ge),C([])}finally{O(!1)}},ne=async ae=>{try{k(!0),console.log("ParentDashboard: Loading activities for child user_id:",ae);const{data:ge,error:Ee}=await vf();if(console.log("ParentDashboard: All activities result:",{allActivities:ge,activitiesError:Ee}),console.log("ParentDashboard: Number of activities found:",ge?.length||0),Ee){console.error("ParentDashboard: Error loading activities:",Ee),J([]),k(!1);return}const{data:Me,error:$e}=await de.from("user_activity_progress").select("*").eq("user_id",ae);if(console.log("ParentDashboard: Child progress result:",{childProgressData:Me,progressError:$e}),console.log("ParentDashboard: Number of progress records:",Me?.length||0),$e){console.error("ParentDashboard: Error loading child progress:",$e),J([]),k(!1);return}const Re=ge?.map(Pe=>{const Fe=Me?.filter(Ot=>Ot.activity_id===Pe.id)||[],gr=Fe.length,ps=gr>0?Math.round(Fe.reduce((Ot,et)=>Ot+(et.score||0),0)/gr):0,Wr=Fe.length>0?Fe.sort((Ot,et)=>new Date(et.date_completed)-new Date(Ot.date_completed))[0].date_completed:null,al=Fe.length>0?Math.max(...Fe.map(Ot=>Ot.score||0)):0;return{...Pe,progressData:{completedCount:gr,averageScore:ps,bestScore:al,lastCompleted:Wr,status:gr>0?"completed":"not-started"}}})||[];console.log("ParentDashboard: Activities with progress:",Re),console.log("ParentDashboard: Final activities count:",Re?.length||0),console.log("ParentDashboard: Sample activity with progress:",Re?.[0]),J(Re)}catch(ge){console.error("ParentDashboard: Error loading child activities:",ge),J([])}finally{k(!1)}},se=async ae=>{try{P(!0),console.log("ParentDashboard: Loading progress data for child:",ae);const{data:ge,error:Ee}=await de.from("user_profiles").select("id, user_id").eq("user_id",ae).single();if(Ee||!ge){console.error("ParentDashboard: Error loading child profile for progress:",Ee),K(null),ee([]),q([]),E(null),P(!1);return}const Me=ge.id;console.log("ParentDashboard: Profile found - profile.id:",Me,"profile.user_id:",ge.user_id);const{data:$e,error:Re}=await mf(ge.user_id);Re?console.error("Error loading progress summary:",Re):(console.log("ParentDashboard: Progress data received:",$e),K($e));const[Pe,Fe]=await Promise.all([$o(),Io(ae)]);if(Pe.error)console.error("Error loading all badges:",Pe.error),q([{id:"f9aba128-a8e5-4b2c-8b2e-27ad1403faa6",title:"First Step",description:"Awarded for completing your first activity."},{id:"97054c4c-4b60-4bae-b1d9-46c5b7d0c99a",title:"Perfect Scorer",description:"Awarded for getting a perfect score in any activity."},{id:"2f73958d-d18c-4135-96bd-c65ca554a207",title:"Academic Star",description:"Complete 5 academic activities."},{id:"c0e0441c-0688-4a4c-bd82-fad73c4392c1",title:"Color Master",description:"Complete 2 color activities in different difficulty levels."},{id:"55544bd9-53a5-42ac-bee8-c6b05632dfff",title:"Match Finder",description:"Finish a matching type activity."},{id:"027f2d92-6a2f-4f07-bda5-aaced096eb00",title:"Shape Explorer",description:"Complete 2 shape activities."},{id:"d1ec22b8-9c28-44a4-9ee6-851b30948140",title:"Number Ninja",description:"Complete at least 1 number flashcard activity."},{id:"899d3e1b-6a3f-4c88-b52c-4960bb6f0201",title:"Consistency Champ",description:"Complete 3 activities in different types."},{id:"9e1e1566-6aec-479b-9f42-456e0c248386",title:"High Achiever",description:"Complete 5 activities with 80%+ average score."},{id:"1d3f149c-6db2-4303-93a0-a75540902e4f",title:"Daily Life Hero",description:"Complete 3 social/daily life skill activities."},{id:"dc7243ea-43fb-48af-86c0-7f6dcd4430dd",title:"All-Rounder",description:"Complete 5 different types of activity."}]);else{let Wr=Pe.data||[];Wr.length===0&&(Wr=[{id:"f9aba128-a8e5-4b2c-8b2e-27ad1403faa6",title:"First Step",description:"Awarded for completing your first activity."},{id:"97054c4c-4b60-4bae-b1d9-46c5b7d0c99a",title:"Perfect Scorer",description:"Awarded for getting a perfect score in any activity."},{id:"2f73958d-d18c-4135-96bd-c65ca554a207",title:"Academic Star",description:"Complete 5 academic activities."},{id:"c0e0441c-0688-4a4c-bd82-fad73c4392c1",title:"Color Master",description:"Complete 2 color activities in different difficulty levels."},{id:"55544bd9-53a5-42ac-bee8-c6b05632dfff",title:"Match Finder",description:"Finish a matching type activity."},{id:"027f2d92-6a2f-4f07-bda5-aaced096eb00",title:"Shape Explorer",description:"Complete 2 shape activities."},{id:"d1ec22b8-9c28-44a4-9ee6-851b30948140",title:"Number Ninja",description:"Complete at least 1 number flashcard activity."},{id:"899d3e1b-6a3f-4c88-b52c-4960bb6f0201",title:"Consistency Champ",description:"Complete 3 activities in different types."},{id:"9e1e1566-6aec-479b-9f42-456e0c248386",title:"High Achiever",description:"Complete 5 activities with 80%+ average score."},{id:"1d3f149c-6db2-4303-93a0-a75540902e4f",title:"Daily Life Hero",description:"Complete 3 social/daily life skill activities."},{id:"dc7243ea-43fb-48af-86c0-7f6dcd4430dd",title:"All-Rounder",description:"Complete 5 different types of activity."}]),q(Wr)}Fe.error?(console.error("Error loading student badges:",Fe.error),ee([]),q([])):ee(Fe.data||[]);const{data:gr,error:ps}=await cN(ae);ps?(console.error("Error loading streak:",ps),E({currentStreak:0,longestStreak:0})):E(gr)}catch(ge){console.error("ParentDashboard: Error loading child progress data:",ge),K(null),ee([]),q([]),E({currentStreak:0,longestStreak:0})}finally{P(!1)}},he=ae=>{h(ae),C([])},fe=ae=>{b(!1),_()},be=ae=>{const ge={happy:"",sad:"",angry:"",excited:"",calm:"",anxious:"",confused:""},Ee=ae?.toLowerCase();return ge[Ee]||""};return l?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse",children:t.jsx("span",{className:"text-white font-bold text-2xl",children:"A"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Loading Dashboard..."}),t.jsx("p",{className:"text-gray-600",children:"Preparing your child's learning insights..."})]})}):t.jsxs("div",{className:"min-h-full bg-gradient-to-br from-blue-50 to-indigo-50",children:[t.jsx("header",{className:"bg-white shadow-lg border-b border-gray-100",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),t.jsx("div",{children:t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync Dashboard"})}),s.length>1&&t.jsxs("div",{className:"ml-6",children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Viewing Child:"}),t.jsx("select",{value:d?.id||"",onChange:ae=>{const ge=s.find(Ee=>Ee.id===ae.target.value);he(ge)},className:"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm font-semibold text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",children:s.map(ae=>t.jsxs("option",{value:ae.id,children:[ae.full_name||ae.username," (",ae.age?`Age ${ae.age}`:"Student",")"]},ae.id))})]})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("button",{onClick:()=>x("overview"),className:`text-lg font-semibold cursor-pointer transition-colors ${g==="overview"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"Overview"}),t.jsx("button",{onClick:()=>x("children"),className:`text-lg font-semibold cursor-pointer transition-colors ${g==="children"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"Children"}),t.jsx("button",{onClick:()=>x("emotions"),className:`text-lg font-semibold cursor-pointer transition-colors ${g==="emotions"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"Emotions"}),t.jsx("button",{onClick:()=>x("badges"),className:`text-lg font-semibold cursor-pointer transition-colors ${g==="badges"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"Badges"}),t.jsx("button",{onClick:()=>x("tips"),className:`text-lg font-semibold cursor-pointer transition-colors ${g==="tips"?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,children:"Tips"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:()=>w(!0),className:"bg-gradient-to-r cursor-pointer from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:t.jsxs("div",{className:"mb-4 md:mb-0",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Parent Dashboard"}),t.jsx("p",{className:"text-lg text-gray-600",children:d?`Monitoring ${d.full_name||d.username}'s learning journey`:"Monitor your child's learning journey and progress"})]})}),t.jsx("div",{className:"md:hidden mb-6",children:t.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:["overview","children","emotions","badges","tips"].map(ae=>t.jsx("button",{onClick:()=>x(ae),className:`text-lg font-semibold cursor-pointer transition-colors whitespace-nowrap px-4 py-2 rounded-lg ${g===ae?"bg-blue-600 text-white":"text-gray-600 hover:text-blue-600 hover:bg-gray-100"}`,children:ae.charAt(0).toUpperCase()+ae.slice(1)},ae))})}),g==="overview"&&t.jsx("div",{className:"space-y-8",children:A?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading progress data..."})]}):d?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-violet-100 to-blue-100 rounded-2xl",children:t.jsx("div",{className:"text-2xl",children:""})}),t.jsx("span",{className:"text-xs font-semibold text-violet-600 bg-violet-100 px-2 py-1 rounded-full",children:"ACCURACY"})]}),t.jsx("div",{className:"text-3xl font-bold text-violet-600 mb-2",children:B?.averageScore?`${B.averageScore}%`:"N/A"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Average score across all activities"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-2xl",children:t.jsx("div",{className:"text-2xl",children:""})}),t.jsx("span",{className:"text-xs font-semibold text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"COMPLETED"})]}),t.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:B?`${B.completedActivities}/${B.totalActivities}`:"0/0"}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Activities completed (",B?.completionRate||0,"%)"]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-orange-100 to-yellow-100 rounded-2xl",children:t.jsx("div",{className:"text-2xl",children:z?.streakEmoji||""})}),t.jsx("span",{className:"text-xs font-semibold text-orange-600 bg-orange-100 px-2 py-1 rounded-full",children:"STREAK"})]}),t.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:z?.currentStreak||0}),t.jsx("div",{className:"text-sm text-gray-600",children:"Days in a row"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-yellow-100 to-amber-100 rounded-2xl",children:t.jsx("div",{className:"text-2xl",children:""})}),t.jsx("span",{className:"text-xs font-semibold text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full",children:"BADGES"})]}),t.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:X?.length||0}),t.jsx("div",{className:"text-sm text-gray-600",children:"Badges earned"})]})]}),B&&d&&t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Student Progress"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-blue-600 font-semibold",children:(d.full_name||d.username).charAt(0)})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-800",children:d.full_name||d.username}),t.jsxs("div",{className:"text-sm text-gray-500",children:[B.completedActivities,"/",B.totalActivities," activities completed"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-lg font-bold text-green-600",children:[B.averageScore,"%"]}),t.jsx("div",{className:"text-sm text-gray-500",children:"Avg Score"})]})]})})]}),d&&t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[t.jsx(dt,{className:"w-6 h-6 mr-3 text-blue-600"}),"Activity Progress"]}),t.jsxs("button",{onClick:()=>I(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center space-x-2",children:[t.jsx(dt,{className:"w-4 h-4"}),t.jsx("span",{children:"View Activity Progress"})]})]}),ie?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading activity data..."})]}):V.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(dt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Activities Available"}),t.jsx("p",{className:"text-gray-500",children:"No learning activities found in the system."})]}):t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center border border-green-200",children:[t.jsx("div",{className:"text-2xl font-bold text-green-800 mb-1",children:V.filter(ae=>ae.progressData.status==="completed").length}),t.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Completed"})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center border border-blue-200",children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-800 mb-1",children:[V.filter(ae=>ae.progressData.averageScore>0).length>0?Math.round(V.filter(ae=>ae.progressData.averageScore>0).reduce((ae,ge)=>ae+ge.progressData.averageScore,0)/V.filter(ae=>ae.progressData.averageScore>0).length):0,"%"]}),t.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Avg Score"})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center border border-purple-200",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-800 mb-1",children:[Math.max(...V.map(ae=>ae.progressData.bestScore),0),"%"]}),t.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Best Score"})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center border border-orange-200",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-800 mb-1",children:V.reduce((ae,ge)=>ae+ge.progressData.completedCount,0)}),t.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Attempts"})]})]})]})]}):t.jsx("div",{className:"text-center py-12",children:t.jsx("div",{className:"text-gray-500 text-lg",children:"Please select a child to view their progress"})})}),g==="children"&&t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[t.jsx(mn,{className:"w-6 h-6 mr-2 text-blue-600"}),"Linked Children"]}),t.jsxs("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center space-x-2",children:[t.jsx(U2,{className:"w-5 h-5"}),t.jsx("span",{children:"+ Link Child"})]})]}),s.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(mn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Children Linked Yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Start by linking your child's account to monitor their progress."}),t.jsx("button",{onClick:()=>b(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold",children:"Link Child Account"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(ae=>t.jsxs("div",{className:`bg-white rounded-2xl p-6 shadow-lg border-2 transition-all duration-200 cursor-pointer ${d?.id===ae.id?"border-blue-500 ring-2 ring-blue-200":"border-gray-100 hover:border-blue-300"}`,onClick:()=>he(ae),children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.jsx("img",{src:ae.profile_picture,alt:ae.full_name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-800",children:ae.full_name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["@",ae.username,"  Age ",ae.age]})]}),d?.id===ae.id&&t.jsx(Do,{className:"w-5 h-5 text-blue-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Email:"}),t.jsx("span",{className:"font-medium text-xs",children:ae.email})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Linked:"}),t.jsx("span",{className:"font-medium",children:ae.linked_at?new Date(ae.linked_at).toLocaleDateString():"Recently"})]})]})]},ae.id))})]})}),g==="emotions"&&t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[t.jsx(ya,{className:"w-8 h-8 mr-3 text-pink-600"}),"Emotion Tracking",d&&t.jsxs("span",{className:"ml-3 text-lg text-gray-600",children:["- ",d.full_name||d.username]})]}),t.jsxs("p",{className:"text-lg text-gray-600 ml-11",children:["Monitor your child's emotional expressions and notes  Updated in real-time",M!=="all"&&t.jsx("span",{className:"text-blue-600 font-medium",children:"  Showing "+xe(M)})]})]}),t.jsx("div",{className:"mb-6 bg-gray-50 rounded-xl p-4 border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[t.jsx(Bs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Time Range Filter"]}),t.jsx("div",{className:"flex space-x-2",children:[{value:"24h",label:"24 Hours"},{value:"7d",label:"7 Days"},{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"all",label:"All Time"}].map(ae=>t.jsx("button",{onClick:()=>T(ae.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${M===ae.value?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:ae.label},ae.value))})]})}),d?R?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading emotional data..."})]}):S.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ya,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Emotional Data Yet"}),t.jsxs("p",{className:"text-gray-500",children:[d.full_name||d.username," hasn't recorded any emotions yet."]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-3xl mr-3",children:""}),t.jsxs("div",{className:"ml-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Positive Emotions"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:S.filter(ae=>["happy","excited","calm"].includes(ae.emotion?.toLowerCase())).length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ci,{className:"h-12 w-12 text-red-500"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Needs Attention"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:S.filter(ae=>["angry","sad"].includes(ae.emotion?.toLowerCase())).length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ya,{className:"h-12 w-12 text-blue-500"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Emotions"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:S.length})]})]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map((ae,ge)=>{const Ee=["happy","excited","calm"].includes(ae.emotion?.toLowerCase()),Me=["angry","sad"].includes(ae.emotion?.toLowerCase()),$e=Ee?"border-green-500":Me?"border-red-500":"border-orange-400",Re=ae.emotion?.toLowerCase()==="angry"?"Upset":ae.emotion?.toLowerCase()==="calm"?"Tired":ae.emotion_name||"Unknown";return t.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 border-l-4 ${$e} hover:shadow-xl transition-all duration-300`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-3xl mr-3",children:be(ae.emotion_name)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 capitalize",children:Re}),t.jsx("p",{className:"text-gray-600 text-sm",children:d.full_name||d.username})]})]}),t.jsx("div",{className:"flex flex-col items-end",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Ee?"bg-green-100 text-green-800":Me?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:Ee?" Positive":Me?" Needs Attention":" Negative"})})]}),ae.note&&ae.note.trim()!==""?t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"text-blue-400 text-lg",children:""})}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsxs("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:[" ",d.full_name||d.username,"'s Note"]}),t.jsxs("p",{className:"text-blue-700 text-sm leading-relaxed bg-white rounded p-3 italic",children:['"',ae.note,'"']}),t.jsx("p",{className:"text-xs text-blue-600 mt-2",children:" This note is shared with parents and teachers"})]})]})}):t.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-center",children:t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No additional note provided"})}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(Bs,{className:"h-4 w-4 mr-1"}),new Date(ae.created_at).toLocaleDateString()," at ",new Date(ae.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),Me&&t.jsxs("span",{className:"flex items-center text-red-500 font-medium",children:[t.jsx(ci,{className:"h-4 w-4 mr-1"}),"Alert"]})]})]},ae.entry_id||ge)})})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ya,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Child Selected"}),t.jsx("p",{className:"text-gray-500",children:"Please select a child from the Children section to view their emotional data."})]})]})}),g==="badges"&&t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[t.jsx(ef,{className:"w-6 h-6 mr-3 text-yellow-600"}),d?`${d.full_name||d.username}'s Achievement Badges`:"Achievement Badges"]}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[X.length," out of ",re.length," badges earned"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl mb-1",children:""}),t.jsxs("div",{className:"text-sm text-gray-600",children:[Math.round(X.length/Math.max(re.length,1)*100),"% Complete"]})]})]}),re.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"text-gray-600",children:"Loading badges..."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:re.map(ae=>{const ge=X.some(Fe=>Fe.badge_id===ae.id),Ee=X.find(Fe=>Fe.badge_id===ae.id),Me={"First Step":"","Perfect Scorer":"","Academic Star":"","Color Master":"","Match Finder":"","Shape Explorer":"","Number Ninja":"","Consistency Champ":"","High Achiever":"","Daily Life Hero":"","All-Rounder":""},$e={"First Step":ge?"from-yellow-50 to-orange-50 border-yellow-200":"from-gray-50 to-gray-100 border-gray-200","Perfect Scorer":ge?"from-green-50 to-emerald-50 border-green-200":"from-gray-50 to-gray-100 border-gray-200","Academic Star":ge?"from-blue-50 to-indigo-50 border-blue-200":"from-gray-50 to-gray-100 border-gray-200","Color Master":ge?"from-purple-50 to-pink-50 border-purple-200":"from-gray-50 to-gray-100 border-gray-200","Match Finder":ge?"from-pink-50 to-rose-50 border-pink-200":"from-gray-50 to-gray-100 border-gray-200","Shape Explorer":ge?"from-blue-50 to-cyan-50 border-blue-200":"from-gray-50 to-gray-100 border-gray-200","Number Ninja":ge?"from-green-50 to-lime-50 border-green-200":"from-gray-50 to-gray-100 border-gray-200","Consistency Champ":ge?"from-indigo-50 to-purple-50 border-indigo-200":"from-gray-50 to-gray-100 border-gray-200","High Achiever":ge?"from-orange-50 to-red-50 border-orange-200":"from-gray-50 to-gray-100 border-gray-200","Daily Life Hero":ge?"from-teal-50 to-cyan-50 border-teal-200":"from-gray-50 to-gray-100 border-gray-200","All-Rounder":ge?"from-yellow-50 to-orange-50 border-yellow-200":"from-gray-50 to-gray-100 border-gray-200"},Re=Me[ae.title]||"",Pe=$e[ae.title]||(ge?"from-yellow-50 to-orange-50 border-yellow-200":"from-gray-50 to-gray-100 border-gray-200");return t.jsxs("div",{className:`bg-gradient-to-br ${Pe} rounded-2xl p-6 border-2 ${ge?"shadow-lg transform hover:scale-105 transition-all duration-300":"opacity-75"} relative`,children:[ge&&t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:"text-green-500 text-lg",children:""})}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`text-4xl mb-3 ${ge?"animate-bounce-gentle":""}`,children:ge?Re:""}),t.jsx("h3",{className:"font-bold text-gray-800 mb-2 text-sm",children:ae.title}),t.jsx("p",{className:"text-xs text-gray-600 mb-3 leading-tight",children:ae.description}),t.jsx("div",{className:`text-xs font-semibold px-3 py-1 rounded-full ${ge?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:ge?"EARNED":"LOCKED"}),ge&&Ee&&t.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Earned: ",new Date(Ee.earned_at).toLocaleDateString()]}),ge&&t.jsx("div",{className:"absolute bottom-2 right-2",children:t.jsx("span",{className:"text-yellow-400 text-sm animate-pulse",children:""})})]})]},ae.id)})}),X.length<re.length&&re.length>0&&t.jsx("div",{className:"mt-8 p-6 bg-blue-50 rounded-xl border border-blue-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-3xl mr-4",children:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-blue-800 text-lg",children:"Keep Going!"}),t.jsxs("p",{className:"text-blue-600",children:[d?`${d.full_name||d.username} can unlock`:"Your child can unlock"," ",re.length-X.length," more badges by completing more activities!"]})]})]})})]})}),g==="tips"&&t.jsx("div",{className:"space-y-8",children:t.jsx(ip,{})})]}),t.jsx(hN,{isOpen:p,onClose:()=>b(!1),onChildLinked:fe}),t.jsx(op,{isOpen:y,onClose:()=>w(!1)}),t.jsx(fN,{isOpen:G,onClose:()=>I(!1),child:d,activities:V,loading:ie})]})},gN=()=>{const i=ut(),{user:s}=Vr(),[n,l]=m.useState(!1),c=async()=>{if(s?.id)try{console.log("ParentHomepage: Checking for existing children for user:",s.id);const{data:d,error:h}=await de.from("parent_child_relations").select("id").eq("parent_user_id",s.id).limit(1);console.log("ParentHomepage: Check result:",{relations:d,error:h}),!h&&d&&d.length>0?(console.log("ParentHomepage: Found existing children, going to dashboard"),i("/parent-dashboard")):(console.log("ParentHomepage: No children found, redirecting to link child page"),i("/link-child"))}catch(d){console.error("ParentHomepage: Error checking for children:",d),i("/link-child")}};return t.jsxs("div",{className:"min-h-full bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[t.jsx("header",{className:"bg-white shadow-lg border-b border-gray-100",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),t.jsx("div",{children:t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync Parent Portal"})})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:()=>l(!0),className:"bg-gradient-to-r cursor-pointer from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[t.jsxs("div",{className:"text-center mb-16",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-400 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-6 transform hover:scale-105 transition-transform duration-300",children:t.jsx(cj,{className:"w-12 h-12 text-white"})}),t.jsx("div",{className:"absolute -top-2 -right-8 w-6 h-6 bg-yellow-400 rounded-full animate-bounce"}),t.jsx("div",{className:"absolute -bottom-2 -left-8 w-4 h-4 bg-pink-400 rounded-full animate-pulse"})]}),t.jsxs("h1",{className:"text-5xl font-bold text-gray-800 mb-6",children:["Welcome to Your",t.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:" Parent Portal"})]}),t.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Monitor your child's learning journey, track their emotional wellness, and celebrate their achievements in a supportive, engaging environment designed for children with autism."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs("button",{onClick:c,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-4 px-8 rounded-2xl text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl flex items-center justify-center space-x-3",children:[t.jsx(rp,{className:"w-6 h-6"}),t.jsx("span",{children:"View Dashboard"}),t.jsx(tp,{className:"w-5 h-5"})]}),t.jsxs("button",{onClick:()=>l(!0),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold py-4 px-8 rounded-2xl text-lg transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-gray-200 flex items-center justify-center space-x-3",children:[t.jsx(mn,{className:"w-6 h-6 text-blue-600"}),t.jsx("span",{children:"Manage Profile"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:[t.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center mb-6",children:t.jsx(dt,{className:"w-8 h-8 text-white"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Learning Progress"}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Track your child's academic achievements, completed activities, and skill development across different learning areas."})]}),t.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-400 to-rose-500 rounded-2xl flex items-center justify-center mb-6",children:t.jsx(ya,{className:"w-8 h-8 text-white"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Emotional Wellness"}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Monitor your child's emotional state and responses, helping you understand their feelings and provide better support."})]}),t.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-400 to-indigo-500 rounded-2xl flex items-center justify-center mb-6",children:t.jsx(uj,{className:"w-8 h-8 text-white"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Achievements"}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Celebrate milestones and badges earned by your child, fostering positive reinforcement and motivation."})]})]}),t.jsxs("div",{className:"bg-white rounded-3xl p-12 shadow-xl border border-gray-100 mb-16",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx(Qh,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Getting Started"}),t.jsx("p",{className:"text-gray-600 text-lg",children:"Follow these simple steps to begin monitoring your child's journey"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 text-white rounded-full flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"1"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Set Up Profile"}),t.jsx("p",{className:"text-gray-600",children:"Complete your parent profile with contact information and preferences."})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500 text-white rounded-full flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"2"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Link Child Account"}),t.jsx("p",{className:"text-gray-600",children:"Connect your child's existing student account to start monitoring their progress."})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500 text-white rounded-full flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"3"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Monitor & Support"}),t.jsx("p",{className:"text-gray-600",children:"View real-time updates on learning progress and emotional wellness."})]})]})]}),t.jsx(ip,{})]}),t.jsx(op,{isOpen:n,onClose:()=>l(!1)})]})},xN=()=>{const{user:i}=Vr(),[s,n]=m.useState({}),[l,c]=m.useState(!0);m.useEffect(()=>{i&&d()},[i]);const d=async()=>{try{c(!0);const{supabase:h}=await rl(async()=>{const{supabase:R}=await Promise.resolve().then(()=>C1);return{supabase:R}},void 0);console.log("Debug: Loading info for user:",i);const{data:g,error:x}=await h.from("user_profiles").select("*").eq("user_id",i.id).single(),{data:p,error:b}=await h.from("parent_child_relations").select(`
          *,
          user_profiles!parent_child_relations_child_user_id_fkey (
            id,
            user_id,
            username,
            first_name,
            last_name,
            email,
            age
          )
        `).eq("parent_user_id",i.id),{data:y,error:w}=await h.from("parent_child_relations").select("*"),{data:S,error:C}=await h.from("user_profiles").select("*");n({user:i,userProfile:{data:g,error:x},relations:{data:p,error:b},allRelations:{data:y,error:w},allProfiles:{data:S,error:C}})}catch(h){console.error("Debug error:",h),n({error:h.message})}finally{c(!1)}};return i?l?t.jsx("div",{className:"p-8",children:"Loading debug info..."}):t.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Debug Information"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Current User"}),t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(s.user,null,2)})]}),t.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"User Profile"}),t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(s.userProfile,null,2)})]}),t.jsxs("div",{className:"bg-blue-100 p-4 rounded",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Parent-Child Relations (Your Children)"}),t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(s.relations,null,2)})]}),t.jsxs("div",{className:"bg-yellow-100 p-4 rounded",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"All Parent-Child Relations (Database)"}),t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(s.allRelations,null,2)})]}),t.jsxs("div",{className:"bg-green-100 p-4 rounded",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"All User Profiles (Database)"}),t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(s.allProfiles,null,2)})]}),t.jsx("button",{onClick:d,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Refresh Debug Info"})]})]}):t.jsx("div",{className:"p-8",children:"Please log in to view debug info"})};class md extends Ps.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n}),console.error("Error caught by boundary:",s,n)}render(){if(this.state.hasError){const s=this.state.error?.toString()||"An unknown error occurred",n=this.state.errorInfo?.componentStack||"No component stack available";return t.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",margin:"20px"},children:[t.jsx("h2",{style:{color:"#dc3545"},children:"Something went wrong."}),t.jsxs("details",{style:{whiteSpace:"pre-wrap",marginTop:"10px"},children:[s,t.jsx("br",{}),n]}),t.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]})}return this.props.children}}const pN=()=>{const i=ut(),[s,n]=m.useState(""),[l,c]=m.useState("all"),[d,h]=m.useState("all"),[g,x]=m.useState(null),[p,b]=m.useState("list"),[y,w]=m.useState([]),[S,C]=m.useState(!0),[R,O]=m.useState("");m.useEffect(()=>{M()},[]);const M=async()=>{try{C(!0),O(""),console.log("Fetching students from database...");const{data:E,error:A}=await de.from("user_profiles").select("*").ilike("gender","male");!A&&E&&(console.log(" ALL MALE PROFILES IN DATABASE:",E.length),E.forEach(_=>{console.log(`  - ${_.full_name} (ID: ${_.id}, User ID: ${_.user_id})`)}));const{data:P,error:V}=await de.from("user_profiles").select("*").order("created_at",{ascending:!1});if(V){console.error("Error fetching user profiles:",V),O("Failed to load students: "+V.message),w(T());return}if(!P||P.length===0){console.log("No user profiles found in database, using fallback data"),w(T());return}console.log("User profiles data:",P);const J=await Promise.all(P.map(async(_,F)=>{let ne=null,se="No recent activity";try{console.log(`Fetching progress for student: ${_?.full_name} (${_.user_id})`);const{data:he,error:fe}=await de.from("user_activity_progress").select("*").eq("user_id",_.user_id).order("date_completed",{ascending:!1}).limit(20);if(!fe&&he&&he.length>0){console.log(`Found ${he.length} activities for ${_?.full_name}`);const be=he.length,ae=he.reduce((Pe,Fe)=>Pe+(Fe.score||0),0),ge=be>0?Math.round(ae/be):0,Ee=he[0],Me=new Date(Ee.date_completed),Re=Math.floor((new Date-Me)/(1e3*60*60));if(Re<1)se="Just now";else if(Re<24)se=`${Re} hour${Re>1?"s":""} ago`;else{const Pe=Math.floor(Re/24);se=`${Pe} day${Pe>1?"s":""} ago`}ne={completedActivities:be,averageScore:ge,lastActivityTime:se}}else console.log(`No activities found for ${_?.full_name}`)}catch(he){console.log("Could not fetch progress for student:",_?.full_name,he)}return{id:_.user_id,profileId:_.user_id,profileUUID:_.user_id,name:_?.full_name||"Unknown Student",age:_?.age||0,address:_?.address||"No address provided",gender:_?.gender||"Not specified",email:_?.email||"",phone:_?.phone_number||"",joinDate:new Date(_.created_at).toLocaleDateString(),status:"Active",completedActivities:ne?.completedActivities||0,averageScore:ne?.averageScore||0,lastActive:ne?.lastActivityTime||se,profileColor:["bg-pink-500","bg-blue-500","bg-green-500","bg-purple-500","bg-yellow-500"][F%5]}}));console.log("Transformed students:",J);const ie=J.filter(_=>_.gender&&_.gender.toLowerCase()==="male");console.log(` TOTAL MALE STUDENTS LOADED: ${ie.length}`),ie.forEach(_=>{console.log(`  - ${_.name} (Gender: "${_.gender}", Activities: ${_.completedActivities}, Score: ${_.averageScore}%, Last: ${_.lastActive})`)});const k=["isaiah","kobe","xaian","gi"];console.log(" Checking for target students:"),k.forEach(_=>{const F=J.find(ne=>ne.name&&ne.name.toLowerCase().includes(_.toLowerCase()));console.log(F?`  ${_}:  Found - ${F.name} (${F.gender}) - Activities: ${F.completedActivities}, Score: ${F.averageScore}%, Last: ${F.lastActive}`:`  ${_}:  NOT FOUND`)});const G=J.filter(_=>_.completedActivities>0),I=J.filter(_=>_.completedActivities===0);console.log(` Students with progress: ${G.length}, without progress: ${I.length}`);const oe=J.filter(_=>_.gender&&_.gender.toLowerCase()==="male").length,xe=J.filter(_=>_.gender&&_.gender.toLowerCase()==="female").length;console.log(` GENDER COUNTS: Male: ${oe}, Female: ${xe}`),w(J)}catch(E){console.error("Error in fetchStudents:",E),O("Failed to load students: "+E.message),w(T())}finally{C(!1)}},T=()=>[{id:1,name:"Emma Johnson",age:8,address:"123 Main St, Springfield, IL",gender:"Female",joinDate:"2024-01-15",status:"Active",completedActivities:24,averageScore:87,lastActive:"2 hours ago",profileColor:"bg-pink-500"},{id:2,name:"Liam Smith",age:7,address:"456 Oak Ave, Springfield, IL",gender:"Male",joinDate:"2024-02-20",status:"Active",completedActivities:18,averageScore:92,lastActive:"1 hour ago",profileColor:"bg-blue-500"}],B={metrics:[{title:"Activities Completed",value:"24",change:"+3 this week",icon:t.jsx(ja,{className:"w-8 h-8 text-white"}),bgColor:"bg-green-100"},{title:"Average Score",value:"87%",change:"+5% improvement",icon:t.jsx(dt,{className:"w-8 h-8 text-white"}),bgColor:"bg-blue-100"},{title:"Current Streak",value:"12 days",change:"Best this month",icon:t.jsx(fd,{className:"w-8 h-8 text-white"}),bgColor:"bg-orange-100"},{title:"Badges Earned",value:"8",change:"+2 new badges",icon:t.jsx(Yr,{className:"w-8 h-8 text-white"}),bgColor:"bg-purple-100"},{title:"Time Spent",value:"2.5h",change:"Today",icon:t.jsx(mn,{className:"w-8 h-8 text-white"}),bgColor:"bg-pink-100"}],categories:[{name:"Numbers & Counting",accuracy:92,total:8,change:"+5%",icon:"",color:"bg-blue-100"},{name:"Letters & Reading",accuracy:88,total:6,change:"+3%",icon:"",color:"bg-green-100"},{name:"Colors & Shapes",accuracy:95,total:5,change:"+2%",icon:"",color:"bg-purple-100"},{name:"Social Skills",accuracy:81,total:4,change:"+7%",icon:"",color:"bg-yellow-100"}],recentActivities:[{activity:"Count to 10",category:"Numbers",score:95,time:"2 hours ago",duration:"3 min",icon:"",bgColor:"bg-blue-100"},{activity:"Color Recognition",category:"Visual",score:88,time:"4 hours ago",duration:"2 min",icon:"",bgColor:"bg-purple-100"},{activity:"Letter Matching",category:"Reading",score:92,time:"6 hours ago",duration:"4 min",icon:"",bgColor:"bg-green-100"},{activity:"Shape Sorting",category:"Logic",score:87,time:"8 hours ago",duration:"5 min",icon:"",bgColor:"bg-orange-100"}],difficultyProgression:[{level:"Beginner",completed:18,total:20,avgScore:94,timeSpent:"45 min",color:"bg-green-500"},{level:"Intermediate",completed:6,total:15,avgScore:87,timeSpent:"32 min",color:"bg-yellow-500"},{level:"Hard",completed:0,total:10,avgScore:0,timeSpent:"0 min",color:"bg-red-500"}],badges:[{name:"First Steps",description:"Complete first activity",icon:"",status:"EARNED",bgColor:"bg-yellow-100"},{name:"Number Master",description:"Excel at counting",icon:"",status:"EARNED",bgColor:"bg-blue-100"},{name:"Color Expert",description:"Master color recognition",icon:"",status:"EARNED",bgColor:"bg-purple-100"},{name:"Speed Learner",description:"Complete 5 activities in one day",icon:"",status:"IN_PROGRESS",progress:60,bgColor:"bg-orange-100"},{name:"Reading Star",description:"Complete 10 reading activities",icon:"",status:"LOCKED",progress:30,bgColor:"bg-green-100"},{name:"Consistency King",description:"Login 7 days in a row",icon:"",status:"LOCKED",progress:15,bgColor:"bg-red-100"}]},K=y.filter(E=>{const A=E.name.toLowerCase().includes(s.toLowerCase()),P=l==="all"||E.status.toLowerCase()===l,V=d==="all"||E.gender.toLowerCase()===d;return d==="male"&&(console.log(` Filtering student: ${E.name}`),console.log(`  - Gender: "${E.gender}" (lowercase: "${E.gender.toLowerCase()}")`),console.log(`  - Matches gender filter: ${V}`),console.log(`  - Final result: ${A&&P&&V}`)),A&&P&&V});d==="male"&&(console.log(` MALE FILTER RESULTS: Found ${K.length} male students:`),K.forEach(E=>{console.log(`  - ${E.name} (Gender: "${E.gender}")`)}));const X=()=>{i("/tracking")},ee=E=>{E.preventDefault(),i("/adminprofile")},re=E=>E>=90?"text-green-600":E>=80?"text-blue-600":E>=70?"text-yellow-600":"text-red-600",q=E=>{const A=E.profileId||E.id;i(`/admin/student-progress/${A}`)},z=()=>{x(null),b("list")};return t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen",children:p==="list"?t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white rounded-xl",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:ee,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"max-w-full mx-auto sm:px-6  py-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8",children:[t.jsxs("div",{className:"mb-6 lg:mb-0",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Student Management"}),t.jsx("p",{className:"text-lg text-gray-600",children:"Monitor and support student learning journeys"})]}),t.jsxs("button",{onClick:X,className:"cursor-pointer bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),t.jsx("span",{children:"Back to Dashboard"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:t.jsx(mn,{className:"w-8 h-8 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Students"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y.length})]})]})}),t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:t.jsx(ja,{className:"w-8 h-8 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Students"}),t.jsx("p",{className:"text-3xl font-bold text-green-600",children:y.filter(E=>E.status==="Active").length})]})]})}),t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-pink-100 p-3 rounded-xl",children:t.jsx(yd,{className:"w-8 h-8 text-pink-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Female Students"}),t.jsx("p",{className:"text-3xl font-bold text-pink-600",children:y.filter(E=>E.gender&&E.gender.toLowerCase()==="female").length})]})]})}),t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:t.jsx(yd,{className:"w-8 h-8 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Male Students"}),t.jsx("p",{className:"text-3xl font-bold text-blue-600",children:y.filter(E=>E.gender&&E.gender.toLowerCase()==="male").length})]})]})})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8 border border-gray-100",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(X2,{className:"w-5 h-5 text-gray-400 absolute left-3 top-3.5"}),t.jsx("input",{type:"text",placeholder:"Search students by name...",value:s,onChange:E=>n(E.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("select",{value:l,onChange:E=>c(E.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]}),t.jsxs("select",{value:d,onChange:E=>h(E.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[t.jsx("option",{value:"all",children:"All Genders"}),t.jsx("option",{value:"male",children:"Male"}),t.jsx("option",{value:"female",children:"Female"})]})]})]})}),R&&t.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:R}),S?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Loading students..."}),t.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch student data"})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:K.map(E=>t.jsx("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.jsx("div",{className:`${E.profileColor} text-white w-16 h-16 flex items-center justify-center rounded-2xl text-xl font-bold`,children:E.name.split(" ").map(A=>A[0]).join("")}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:E.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Student ID: #",E.id]}),t.jsx("div",{className:"flex items-center space-x-2 mt-1",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.status})})]})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Age:"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[E.age," years old"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Gender:"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:E.gender})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Activities:"}),t.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[E.completedActivities," completed"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Avg Score:"}),t.jsxs("span",{className:`text-sm font-bold ${re(E.averageScore)}`,children:[E.averageScore,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Last Active:"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:E.lastActive})]})]}),t.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[t.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[" ",E.address]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>q(E),className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-3 py-2 rounded-xl text-sm font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"View Progress"}),t.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-xl text-sm font-semibold transition-colors cursor-pointer",children:"Edit"})]})]})]})},E.id))}),!S&&K.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No students found"}),t.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]})]})]}):t.jsxs("div",{className:"max-w-full mx-auto sm:px-6 py-4",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-screen mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white rounded-xl",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold  transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:ee,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[t.jsxs("div",{className:"mb-4 md:mb-0",children:[t.jsxs("button",{onClick:z,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 mb-2 transition-colors",children:[t.jsx(ep,{className:"w-5 h-5"}),t.jsx("span",{children:"Back to Students List"})]}),t.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:[g?.name,"'s Progress"]}),t.jsxs("p",{className:"text-lg text-gray-600",children:["Detailed analytics for ",g?.name,"  Age ",g?.age]})]}),t.jsx("div",{className:`w-16 h-16 rounded-full ${g?.profileColor} flex items-center justify-center text-white text-2xl`,children:g?.name?.charAt(0)})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:B.metrics.map((E,A)=>t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsx("div",{className:`${E.bgColor} rounded-xl p-3 w-fit mb-4`,children:E.icon}),t.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:E.title}),t.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:E.value}),t.jsx("p",{className:"text-sm text-green-600 font-medium",children:E.change})]},A))}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Accuracy by Category"}),t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-4",children:B.categories.map((E,A)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`${E.color} p-2 rounded-lg`,children:t.jsx("span",{className:"text-xl",children:E.icon})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:E.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[E.total," activities"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[E.accuracy,"%"]}),t.jsx("p",{className:"text-sm text-green-600 font-medium",children:E.change})]})]},A))})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Recent Activities"}),t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-4",children:B.recentActivities.map((E,A)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-green-50 rounded-xl hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`${E.bgColor} p-2 rounded-lg`,children:t.jsx("span",{className:"text-xl",children:E.icon})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:E.activity}),t.jsxs("p",{className:"text-sm text-gray-500",children:[E.category,"  ",E.time]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`text-lg font-bold ${E.score>=80?"text-green-600":E.score>=60?"text-yellow-600":"text-red-600"}`,children:[E.score,"%"]}),t.jsx("p",{className:"text-sm text-gray-500",children:E.duration})]})]},A))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Difficulty Progression"}),t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-4",children:B.difficultyProgression.map((E,A)=>t.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-orange-50 rounded-xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"font-semibold text-gray-800",children:E.level}),t.jsxs("span",{className:"text-sm text-gray-500",children:[E.completed,"/",E.total," activities"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:t.jsx("div",{className:`h-3 rounded-full ${E.color}`,style:{width:`${E.completed/E.total*100}%`}})}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-600",children:["Average Score: ",E.avgScore,"%"]}),t.jsxs("span",{className:"text-gray-600",children:["Time Spent: ",E.timeSpent]})]})]},A))})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Personal Achievements"}),t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:B.badges.map((E,A)=>t.jsxs("div",{className:`card-autism-friendly ${E.bgColor} p-4 rounded-2xl text-center relative overflow-hidden border-2 ${E.status==="EARNED"?"border-green-200 shadow-lg":"border-gray-200 opacity-75"}`,children:[E.status==="EARNED"&&t.jsx("div",{className:"absolute top-1 right-1",children:t.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:""})}),t.jsx("div",{className:"text-4xl mb-2",children:E.icon}),t.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-1",children:E.name}),t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:E.description}),E.status==="LOCKED"&&E.progress&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"bg-gray-200 rounded-full h-2 mb-1",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${E.progress}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500",children:[E.progress,"% complete"]})]}),E.status==="EARNED"&&t.jsx("div",{className:"absolute bottom-1 right-1",children:t.jsx("span",{className:"text-yellow-400 text-sm animate-pulse-gentle",children:""})})]},A))})]})]})]})})},bN=()=>{const{id:i}=lv(),s=ut(),[n,l]=m.useState("30"),[c,d]=m.useState(!0),[h,g]=m.useState(null),[x,p]=m.useState(null),[b,y]=m.useState(null),[w,S]=m.useState([]),[C,R]=m.useState([]);m.useEffect(()=>{(async()=>{if(i){d(!0);try{const P=i,[V,J,ie,k]=await Promise.all([mf(P),gf(P),Qj(),B1(P)]);if(k.data){const G=k.data;p({id:G.user_id,name:G.full_name||"Unknown Student",email:G.email,age:G.age||0,gender:G.gender||"Not specified",address:G.address||"No address provided",school:G.school||"",joinDate:new Date(G.created_at).toLocaleDateString(),status:"Active"})}else k.error&&(console.error("Error fetching student profile:",k.error),g("Failed to load student profile"));V.error?console.error("Error fetching progress stats:",V.error):y(V.data),J.error?console.error("Error fetching progress:",J.error):S(J.data||[]),ie.error?console.error("Error fetching activities:",ie.error):R(ie.data||[])}catch(P){console.error("Error fetching student data:",P),g("Failed to load student data")}finally{d(!1)}}})()},[i]);const O=A=>{A.preventDefault(),s("/adminprofile")},M=()=>{s("/admin/students")};m.useEffect(()=>{!c&&!x&&!h&&s("/admin/students")},[c,x,h,s]);const T=()=>b?[{title:"COMPLETED ACTIVITIES",value:b.completedActivities||0,change:`${b.totalActivities||0} total activities`,icon:t.jsx(dt,{className:"w-8 h-8 text-blue-600"}),bgColor:"bg-blue-50",textColor:"text-blue-600"},{title:"COMPLETION RATE",value:`${b.completionRate||0}%`,change:b.completionRate>75?"Excellent progress!":b.completionRate>50?"Good progress":"Keep going!",icon:t.jsx(ja,{className:"w-8 h-8 text-green-600"}),bgColor:"bg-green-50",textColor:"text-green-600"},{title:"AVERAGE ACCURACY",value:`${b.averageScore||0}%`,change:b.averageScore>85?"Outstanding!":b.averageScore>70?"Great work!":"Improving",icon:t.jsx(Yr,{className:"w-8 h-8 text-purple-600"}),bgColor:"bg-purple-50",textColor:"text-purple-600"},{title:"AVERAGE SCORE",value:`${b.averageScore||0}%`,change:b.averageScore>85?"Excellent work!":b.averageScore>70?"Good performance":"Room for improvement",icon:t.jsx(Yr,{className:"w-8 h-8 text-yellow-600"}),bgColor:"bg-yellow-50",textColor:"text-yellow-600"},{title:"RECENT ACTIVITIES",value:`${b.recentActivities||0}`,change:"Last 7 days",icon:t.jsx(fd,{className:"w-8 h-8 text-orange-600"}),bgColor:"bg-orange-50",textColor:"text-orange-600"}]:[{title:"TOTAL ACTIVITIES",value:"0",change:"Loading...",icon:t.jsx(dt,{className:"w-8 h-8 text-blue-600"}),bgColor:"bg-blue-50",textColor:"text-blue-600"},{title:"COMPLETION RATE",value:"0%",change:"Loading...",icon:t.jsx(ja,{className:"w-8 h-8 text-green-600"}),bgColor:"bg-green-50",textColor:"text-green-600"},{title:"AVERAGE SCORE",value:"0%",change:"Loading...",icon:t.jsx(Yr,{className:"w-8 h-8 text-yellow-600"}),bgColor:"bg-yellow-50",textColor:"text-yellow-600"},{title:"RECENT ACTIVITIES",value:"0",change:"Loading...",icon:t.jsx(fd,{className:"w-8 h-8 text-red-600"}),bgColor:"bg-red-50",textColor:"text-red-600"},{title:"ACTIVE STREAK",value:"0 days",change:"Loading...",icon:t.jsx(fd,{className:"w-8 h-8 text-orange-600"}),bgColor:"bg-orange-50",textColor:"text-orange-600"}],B=A=>{const P=A.completedActivities,V=A.averageScore,J=Math.min(20,P),ie=V>85?Math.min(15,Math.max(0,P-15)):Math.min(10,Math.max(0,P-10)),k=V>90?Math.min(10,Math.max(0,P-25)):0;return[{level:"Beginner",progress:Math.floor(J/20*100),completed:`${J}/20`,icon:"",color:"bg-green-500",bgColor:"bg-green-50"},{level:"Intermediate",progress:Math.floor(ie/15*100),completed:`${ie}/15`,icon:"",color:"bg-orange-500",bgColor:"bg-orange-50"},{level:"Proficient",progress:Math.floor(k/10*100),completed:`${k}/10`,icon:"",color:"bg-red-500",bgColor:"bg-red-50"}]},K=A=>[{icon:"",title:"First Steps",description:"Completed your first activity",status:"EARNED",color:"from-yellow-400 to-yellow-600",bgColor:"bg-yellow-50",animation:"animate-bounce-gentle"},{icon:"",title:"Academic Star",description:"Completed 10 academic activities",status:A.completedActivities>=10?"EARNED":"LOCKED",color:A.completedActivities>=10?"from-blue-400 to-blue-600":"from-gray-400 to-gray-500",bgColor:A.completedActivities>=10?"bg-blue-50":"bg-gray-50",animation:A.completedActivities>=10?"animate-pulse-gentle":""},{icon:"",title:"Color Master",description:"Perfect score on 5 color activities",status:A.averageScore>=90?"EARNED":"LOCKED",color:A.averageScore>=90?"from-purple-400 to-purple-600":"from-gray-400 to-gray-500",bgColor:A.averageScore>=90?"bg-purple-50":"bg-gray-50",animation:A.averageScore>=90?"animate-bounce-gentle":""},{icon:"",title:"Number Ninja",description:"Excellent performance in numbers",status:A.averageScore>=85?"EARNED":"LOCKED",color:A.averageScore>=85?"from-green-400 to-green-600":"from-gray-400 to-gray-500",bgColor:A.averageScore>=85?"bg-green-50":"bg-gray-50",animation:A.averageScore>=85?"animate-wiggle":""},{icon:"",title:"Streak Master",description:"Learning for 7 days straight",status:A.status==="Active"?"EARNED":"LOCKED",color:A.status==="Active"?"from-orange-400 to-orange-600":"from-gray-400 to-gray-500",bgColor:A.status==="Active"?"bg-orange-50":"bg-gray-50",animation:A.status==="Active"?"animate-pulse-gentle":""},{icon:"",title:"Helper Badge",description:"Completed activities with help",status:"EARNED",color:"from-pink-400 to-pink-600",bgColor:"bg-pink-50",animation:"animate-float"},{icon:"",title:"Challenge Seeker",description:"Attempt 5 hard level activities",status:A.completedActivities>=25?"EARNED":"LOCKED",color:A.completedActivities>=25?"from-indigo-400 to-indigo-600":"from-gray-400 to-gray-500",bgColor:A.completedActivities>=25?"bg-indigo-50":"bg-gray-50",animation:A.completedActivities>=25?"animate-float-delayed":""},{icon:"",title:"All-Rounder",description:"Complete activity in every category",status:A.completedActivities>=20&&A.averageScore>=85?"EARNED":"LOCKED",color:A.completedActivities>=20&&A.averageScore>=85?"from-gold-400 to-gold-600":"from-gray-400 to-gray-500",bgColor:A.completedActivities>=20&&A.averageScore>=85?"bg-yellow-50":"bg-gray-50",animation:A.completedActivities>=20&&A.averageScore>=85?"animate-bounce-gentle":""}],X=T(),ee={completedActivities:b?.completedActivities||0,averageScore:b?.averageScore||0},re=B(ee),q=K(ee),z=w?.slice(0,6).map((A,P)=>{const V=A.activityTitle||"Unknown Activity",J=A.student_name||A.studentName||x?.name||`Student ${A.student_id?.substring(0,8)}`;return{title:V,user:J,category:A.categoryId||A.category||"Other",time:new Date(A.dateCompleted||A.date_completed).toLocaleString(),difficulty:A.difficultyId||A.difficulty||"Beginner",score:A.score?`${A.score}%`:"No score",difficultyColor:(A.difficultyId||A.difficulty)==="Beginner"?"bg-green-100 text-green-800":(A.difficultyId||A.difficulty)==="Intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",avatar:J?J.split(" ").map(ie=>ie[0]).join(""):"S"}})||[],E=[{name:"Academic Skills",percent:Math.min(100,ee.averageScore+5),count:`${Math.floor(ee.completedActivities*.7)}/${Math.floor(ee.completedActivities*.8)}`,icon:"",color:"bg-blue-500"},{name:"Daily Life Skills",percent:Math.min(100,ee.averageScore+10),count:`${Math.floor(ee.completedActivities*.3)}/${Math.floor(ee.completedActivities*.4)}`,icon:"",color:"bg-orange-500"}];return t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen",children:[t.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-500",children:t.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center py-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-blue-600 text-white rounded-xl p-2",children:t.jsx(dt,{className:"w-6 h-6"})}),t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AutiSync"})]}),t.jsxs("nav",{className:"hidden md:flex space-x-8",children:[t.jsx("a",{href:"/tracking",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Dashboard"}),t.jsx("a",{href:"/activities",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Activities"}),t.jsx("a",{href:"/alarmingemotions",className:"text-gray-600 text-lg hover:text-blue-600 font-semibold transition-colors",children:"Expression Wall"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:O,className:"cursor-pointer -my-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-1 rounded-full hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})})})]})})}),t.jsx("div",{className:"max-w-full mx-auto sm:px-6 py-4",children:c?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-xl text-gray-600 mb-4",children:"Loading student progress..."}),t.jsx("div",{className:"text-gray-500",children:"Fetching data from backend APIs"})]}):h?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-xl text-red-600 mb-4",children:h}),t.jsx("button",{onClick:M,className:"text-blue-600 hover:text-blue-800",children:"Back to Students"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[t.jsx("div",{className:"mb-4 md:mb-0",children:t.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[t.jsx("img",{src:"/assets/kidprofile1.jpg",alt:x?.name||"Student",className:"w-16 h-16 rounded-full object-cover border-4 border-white shadow-lg"}),t.jsx("div",{children:t.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:x?.name||"Unknown Student"})})]})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("select",{value:n,onChange:A=>l(A.target.value),className:"bg-white border-2 border-gray-200 rounded-xl px-4 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer",children:[t.jsx("option",{value:"7",children:"Last 7 days"}),t.jsx("option",{value:"30",children:"Last 30 days"}),t.jsx("option",{value:"90",children:"Last 90 days"})]}),t.jsxs("button",{onClick:M,className:"cursor-pointer bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[t.jsx(ep,{className:"w-5 h-5"}),t.jsx("span",{children:"Back to Students"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:X.map((A,P)=>t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-100",children:[t.jsx("div",{className:`${A.bgColor} rounded-xl p-3 w-fit mb-4`,children:A.icon}),t.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:A.title}),t.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:A.value}),t.jsx("p",{className:"text-sm text-green-600 font-medium",children:A.change})]},P))}),t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Recent Activities"}),t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:z.length>0?z.map((A,P)=>t.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-blue-600 text-white w-10 h-10 flex items-center justify-center rounded-full text-sm font-bold",children:A.avatar}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:A.title}),t.jsxs("p",{className:"text-sm text-gray-500",children:[A.user,"  ",A.category,"  ",A.time]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:`text-xs font-semibold px-3 py-1 rounded-full ${A.difficultyColor}`,children:A.difficulty}),t.jsx("span",{className:"font-bold text-green-600 text-lg",children:A.score})]})]})},P)):t.jsx("div",{className:"col-span-full text-center py-4 text-gray-600",children:"No recent activities found"})})]})}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Learning Categories"}),t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-6",children:E.map((A,P)=>t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-2xl",children:A.icon}),t.jsx("span",{className:"font-semibold text-gray-700",children:A.name})]}),t.jsx("span",{className:"text-sm font-bold text-gray-600",children:A.count})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:t.jsx("div",{className:`${A.color} h-3 rounded-full transition-all duration-500`,style:{width:`${A.percent}%`}})}),t.jsxs("p",{className:"text-sm text-gray-600",children:[A.percent,"% complete"]})]},P))})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Difficulty Level Progression"}),t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:""})})]}),t.jsx("div",{className:"space-y-4",children:re.map((A,P)=>t.jsxs("div",{className:`${A.bgColor} rounded-xl p-4 border border-gray-200`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-2xl",children:A.icon}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-semibold text-gray-700",children:[A.level," Level"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[A.completed," activities"]})]})]}),t.jsxs("span",{className:"text-lg font-bold text-gray-800",children:[A.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-white/50 rounded-full h-3",children:t.jsx("div",{className:`${A.color} h-3 rounded-full transition-all duration-500`,style:{width:`${A.progress}%`}})})]},P))})]})]}),t.jsx("div",{className:"grid xl:grid-cols-1 gap-8",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Personal Achievements & Badges"}),t.jsx("div",{className:"grid lg:grid-cols-4 gap-4",children:q.map((A,P)=>t.jsxs("div",{className:`card-autism-friendly ${A.bgColor} p-4 rounded-2xl text-center relative overflow-hidden border-2 ${A.status==="EARNED"?"border-green-200 shadow-lg":"border-gray-200 opacity-75"}`,children:[A.status==="EARNED"&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx("span",{className:"text-green-500 text-lg animate-bounce-in",children:""})}),t.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${A.color} rounded-xl mx-auto mb-3 flex items-center justify-center text-2xl text-white shadow-lg ${A.animation}`,children:A.icon}),t.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:A.title}),t.jsx("p",{className:"text-xs text-gray-600 mb-2 leading-tight",children:A.description}),t.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${A.status==="EARNED"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:A.status}),A.status==="EARNED"&&t.jsx("div",{className:"absolute bottom-1 right-1",children:t.jsx("span",{className:"text-yellow-400 text-sm animate-pulse-gentle",children:""})})]},P))})]})})]})})]})};function vN(){return t.jsx(D1,{children:t.jsxs(R1,{children:[t.jsx(ry,{}),t.jsxs(wv,{children:[t.jsx(bt,{path:"/loginpage",element:t.jsx(O1,{})}),t.jsx(bt,{path:"/reset-password",element:t.jsx(Y1,{})}),t.jsx(bt,{path:"/home",element:t.jsx(z1,{})}),t.jsx(bt,{path:"/",element:t.jsx(M1,{})}),t.jsx(bt,{path:"/signuppage",element:t.jsx(q1,{})}),t.jsx(bt,{path:"/studentpage",element:t.jsx(F1,{})}),t.jsx(bt,{path:"/studentprofile",element:t.jsx(Z1,{})}),t.jsx(bt,{path:"/flashcardspage",element:t.jsx(_2,{})}),t.jsx(bt,{path:"/link-child",element:t.jsx(ix,{})}),t.jsx(bt,{path:"/activities",element:t.jsx(Xj,{})}),t.jsx(bt,{path:"/addactivity",element:t.jsx(aN,{})}),t.jsx(bt,{path:"/tracking",element:t.jsx(md,{fallback:t.jsx("div",{style:{padding:"20px"},children:"Error loading Tracking page - check console for details"}),children:t.jsx(nN,{})})}),t.jsx(bt,{path:"/adminprofile",element:t.jsx(lN,{})}),t.jsx(bt,{path:"/alarmingemotions",element:t.jsx(iN,{})}),t.jsx(bt,{path:"/admin/students",element:t.jsx(md,{fallback:t.jsx("div",{style:{padding:"20px"},children:"Error loading Students page"}),children:t.jsx(pN,{})})}),t.jsx(bt,{path:"/admin/student-progress/:id",element:t.jsx(md,{fallback:t.jsx("div",{style:{padding:"20px"},children:"Error loading Student Progress page"}),children:t.jsx(bN,{})})}),t.jsx(bt,{path:"/parent-homepage",element:t.jsx(gN,{})}),t.jsx(bt,{path:"/link-child",element:t.jsx(ix,{})}),t.jsx(bt,{path:"/parent-dashboard",element:t.jsx(mN,{})}),t.jsx(bt,{path:"/debug",element:t.jsx(xN,{})})]})]})})}Tb.createRoot(document.getElementById("root")).render(t.jsx(Ps.StrictMode,{children:t.jsx(md,{children:t.jsx(Fv,{children:t.jsx(vN,{})})})}));
